"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var React=require("react");var React__default=_interopDefault(React);var ReactDOM=require("react-dom");var ReactDOM__default=_interopDefault(ReactDOM);var isFunction=function(e){return typeof e==="function"};function omitKeysFromSourceObject(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return Object.keys(e).reduce(function n(r,o){if(t.indexOf(o)===-1){r[o]=e[o]}return r},{})}var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var classCallCheck=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var defineProperty=function(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e};var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var inherits=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var objectWithoutProperties=function(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n};var possibleConstructorReturn=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var ArrowKeyNavigation=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={activeChildIndex:r.props.defaultActiveChildIndex},r.handleKeyDown=function(e){switch(e.key){case"ArrowUp":if(r.props.mode===t.mode.VERTICAL||r.props.mode===t.mode.BOTH){e.preventDefault();r.moveFocus(-1)}break;case"ArrowLeft":if(r.props.mode===t.mode.HORIZONTAL||r.props.mode===t.mode.BOTH){e.preventDefault();r.moveFocus(-1)}break;case"ArrowDown":if(r.props.mode===t.mode.VERTICAL||r.props.mode===t.mode.BOTH){e.preventDefault();r.moveFocus(1)}break;case"ArrowRight":if(r.props.mode===t.mode.HORIZONTAL||r.props.mode===t.mode.BOTH){e.preventDefault();r.moveFocus(1)}break}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},r.handleFocus=function(e){if(e.target.hasAttribute("data-focus-index")){var t=parseInt(e.target.getAttribute("data-focus-index"),10);var n=React__default.Children.toArray(r.props.children)[t];r.setState({activeChildIndex:t});if(n.props.onFocus){n.props.onFocus(e)}}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentDidUpdate",value:function e(t,n){if(this.state.activeChildIndex!==n.activeChildIndex){this.setFocus(this.state.activeChildIndex)}}},{key:"componentWillReceiveProps",value:function e(t){if(this.state.activeChildIndex!==0){var n=t.children?React__default.Children.count(t.children):0;if(n===0){this.setState({activeChildIndex:0})}else if(this.state.activeChildIndex>=n){this.setState({activeChildIndex:n-1})}}}},{key:"setFocus",value:function e(t){var n=(this.refs.wrapper instanceof HTMLElement?this.refs.wrapper:ReactDOM.findDOMNode(this.refs.wrapper)).children[t];if(n&&n.hasAttribute("data-skip")){this.moveFocus(n.compareDocumentPosition(document.activeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}else if(n&&document.activeElement!==n){n.focus()}}},{key:"moveFocus",value:function e(t){var n=this.props.children?React__default.Children.count(this.props.children):0;var r=this.state.activeChildIndex+t;if(r>=n){r=0}else if(r<0){r=n-1}this.setState({activeChildIndex:r})}},{key:"children",value:function e(){var t=this;return React__default.Children.map(this.props.children,function(e,n){return React__default.cloneElement(e,{"data-focus-index":n,"data-skip":parseInt(e.props.tabIndex,10)===-1||undefined,key:e.key||n,tabIndex:t.state.activeChildIndex===n?0:-1})})}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",onFocus:this.handleFocus,onKeyDown:this.handleKeyDown}),this.children())}}]);return t}(React__default.PureComponent);ArrowKeyNavigation.mode={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL",BOTH:"BOTH"};ArrowKeyNavigation.propTypes={component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),defaultActiveChildIndex:React.PropTypes.number,mode:React.PropTypes.oneOf([ArrowKeyNavigation.mode.BOTH,ArrowKeyNavigation.mode.HORIZONTAL,ArrowKeyNavigation.mode.VERTICAL])};ArrowKeyNavigation.defaultProps={component:"div",defaultActiveChildIndex:0,mode:ArrowKeyNavigation.mode.BOTH};ArrowKeyNavigation.internalKeys=Object.keys(ArrowKeyNavigation.defaultProps);function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var index=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Async=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.mounted=false,r.state={},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"convertDataToJSXOrWait",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;var r=n.data;if(r instanceof Promise){this.setState({component:null});return r.then(function(e){if(t.mounted){t.setState(function(t,n){return{component:n.data===r?n.convertToJSXFunc(e):t.component}})}},function(){return t.setState({component:false})})}this.setState({component:n.convertToJSXFunc(r)})}},{key:"fireCallbackIfDataRendered",value:function e(){if(this.state.component){this.props.contentRenderedFunc()}}},{key:"componentWillMount",value:function e(){this.convertDataToJSXOrWait()}},{key:"componentDidMount",value:function e(){this.mounted=true;this.fireCallbackIfDataRendered()}},{key:"componentDidUpdate",value:function e(){this.fireCallbackIfDataRendered()}},{key:"componentWillReceiveProps",value:function e(t){this.convertDataToJSXOrWait(t)}},{key:"componentWillUnmount",value:function e(){this.mounted=false}},{key:"getClasses",value:function e(t){return index("b-async",this.props.className,t,{"b-async-error":this.state.component===false,"b-async-loading":this.state.component===null})}},{key:"render",value:function e(){if(this.state.component===null||this.state.component===false){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:this.getClasses()}),this.state.component===null?this.props.loadingContent:this.props.errorContent)}return React__default.cloneElement(this.state.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:this.getClasses(this.state.component.props&&this.state.component.props.className)}))}}]);return t}(React__default.PureComponent);Async.propTypes={contentRenderedFunc:React.PropTypes.func,convertToJSXFunc:React.PropTypes.func,data:React.PropTypes.any,errorContent:React.PropTypes.node,loadingContent:React.PropTypes.node};Async.defaultProps={contentRenderedFunc:function e(){},convertToJSXFunc:function e(t){return t},data:null,errorContent:"⚠️",loadingContent:null};Async.internalKeys=Object.keys(Async.defaultProps);var index$1=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});function noop(){}var Button=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.handleClick=function(e){if(r.props.disabled){return}r.toggleState(e);if(isFunction(r.props.onClick)){r.props.onClick(e)}},r.handleKeyDown=function(e){if(r.props.disabled){return}switch(e.key){case"Enter":case"Space":e.preventDefault();r.toggleState(e)}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"toggleState",value:function e(t){this.props[this.props.pressed?"onUnpressed":"onPressed"](t)}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"button",className:index$1("b-button",this.props.className,{"b-button-pressable":typeof this.props.pressed!=="undefined","b-button-pressed":this.props.pressed}),"aria-pressed":this.props.pressed,onKeyDown:this.handleKeyDown,onClick:this.handleClick}),this.props.children)}}]);return t}(React__default.PureComponent);Button.propTypes={children:React.PropTypes.node,component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),onClick:React.PropTypes.func,onPressed:React.PropTypes.func,onUnpressed:React.PropTypes.func,pressed:React.PropTypes.bool};Button.defaultProps={children:null,component:"button",onClick:noop,onPressed:noop,onUnpressed:noop,pressed:undefined};Button.internalKeys=Object.keys(Button.defaultProps);var index$2=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});function uuid(){return"b-"+([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^Math.random()*16>>e/4).toString(16)})}var Checkbox=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.id=uuid(),r.handleChange=function(e){if(r.props.inputProps.disabled){return}r.props[!r.props.inputProps.checked?"onChecked":"onUnchecked"](r.props.inputProps.name);if(isFunction(r.props.inputProps.onChange)){r.props.inputProps.onChange(e)}},r.handleClick=function(e){if(r.props.inputProps.disabled){return}r.refs.input.focus();if(isFunction(r.props.inputProps.onClick)){r.props.inputProps.onClick(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentDidMount",value:function e(){if(this.props.inputProps.indeterminate){this.setIndeterminate()}}},{key:"componentDidUpdate",value:function e(t){if(t.inputProps.indeterminate!==this.props.inputProps.indeterminate){this.setIndeterminate()}}},{key:"setIndeterminate",value:function e(){this.refs.input.indeterminate=!!this.props.inputProps.indeterminate}},{key:"getAriaState",value:function e(){return this.props.inputProps.indeterminate?"mixed":String(this.props.inputProps.checked)}},{key:"renderInput",value:function e(){return React__default.createElement("input",_extends({},omitKeysFromSourceObject(this.props.inputProps,"indeterminate"),{ref:"input",type:"checkbox",className:index$2("b-checkbox",this.props.inputProps.className,{"b-checkbox-mixed":this.props.inputProps.indeterminate,"b-checkbox-checked":this.props.inputProps.checked,"b-checkbox-unchecked":!this.props.inputProps.indeterminate&&!this.props.inputProps.checked}),id:this.props.inputProps.id||this.id,"aria-checked":this.getAriaState(),onChange:this.handleChange,onClick:this.handleClick}))}},{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("label",_extends({},this.props.labelProps,{ref:"label",className:index$2("b-checkbox-label",this.props.labelProps.className),htmlFor:this.props.inputProps.id||this.id}),this.props.label)}}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$2("b-checkbox-wrapper",this.props.className)}),this.renderInput(),this.renderLabel())}}]);return t}(React__default.PureComponent);Checkbox.propTypes={inputProps:React.PropTypes.shape({checked:React.PropTypes.bool,className:React.PropTypes.string,disabled:React.PropTypes.bool,id:React.PropTypes.string,indeterminate:React.PropTypes.bool,onChange:React.PropTypes.func,onClick:React.PropTypes.func,name:React.PropTypes.string,value:React.PropTypes.string}),label:React.PropTypes.node,labelProps:React.PropTypes.object,onChecked:React.PropTypes.func,onUnchecked:React.PropTypes.func};Checkbox.defaultProps={inputProps:{checked:false,indeterminate:false},label:null,labelProps:{},onChecked:noop,onUnchecked:noop};Checkbox.internalKeys=Object.keys(Checkbox.defaultProps);var index$3=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var CheckboxGroup=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"allItemsChecked",value:function e(){return this.props.items.every(function(e){return e.inputProps.checked===true})}},{key:"anyItemsChecked",value:function e(){return this.props.items.some(function(e){return e.inputProps.checked===true})}},{key:"renderSelectAll",value:function e(){if(this.props.selectAll){var t=this.allItemsChecked();var n=this.props.selectAllProps.inputProps;return React__default.createElement(Checkbox,_extends({},this.props.selectAllProps,{ref:"select_all",key:"cb_select_all",className:index$3("b-checkbox-group-selectall",this.props.selectAllProps.className),inputProps:_extends({},n,{checked:t,indeterminate:!t&&this.anyItemsChecked(),name:n&&n.name?n.name:"cb_select_all"}),label:this.props.selectAllProps.label||"Select All",onChecked:this.props.onAllChecked,onUnchecked:this.props.onAllUnchecked}))}}},{key:"renderCheckboxes",value:function e(){var t=this;return this.props.items.map(function(e){return React__default.createElement(Checkbox,_extends({},e,{key:e.inputProps.name,onChecked:t.props.onChildChecked,onUnchecked:t.props.onChildUnchecked}))})}},{key:"renderChildren",value:function e(){var n=[this.renderCheckboxes()];if(this.props.selectAll&&this.props.selectAllPosition){switch(this.props.selectAllPosition){case t.selectAllPosition.BEFORE:n.unshift(this.renderSelectAll());break;case t.selectAllPosition.AFTER:n.push(this.renderSelectAll());break}}return n}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"group",className:index$3("b-checkbox-group",this.props.className)}),this.renderChildren())}}]);return t}(React__default.PureComponent);CheckboxGroup.selectAllPosition={BEFORE:uuid(),AFTER:uuid()};CheckboxGroup.propTypes={items:React.PropTypes.arrayOf(Checkbox.propTypes.inputProps).isRequired,onAllChecked:React.PropTypes.func,onAllUnchecked:React.PropTypes.func,onChildChecked:React.PropTypes.func,onChildUnchecked:React.PropTypes.func,selectAll:React.PropTypes.bool,selectAllProps:React.PropTypes.shape({label:React.PropTypes.string,inputProps:React.PropTypes.object}),selectAllPosition:React.PropTypes.oneOf([CheckboxGroup.selectAllPosition.BEFORE,CheckboxGroup.selectAllPosition.AFTER])};CheckboxGroup.defaultProps={items:[],onAllChecked:noop,onAllUnchecked:noop,onChildChecked:noop,onChildUnchecked:noop,selectAll:false,selectAllProps:{},selectAllPosition:CheckboxGroup.selectAllPosition.BEFORE};CheckboxGroup.internalKeys=Object.keys(CheckboxGroup.defaultProps);var index$4=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Portal=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.id=uuid(),r.$portal=null,r.$passenger=null,n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillMount",value:function e(){this.$portal=document.createElement("div");this.props.destination.appendChild(this.$portal);this.renderPortalledContent()}},{key:"renderPortalledContent",value:function e(){var t=React__default.isValidElement(this.props.children)?this.props.children:React__default.createElement("div",null,this.props.children);this.$portal.id=this.props.portalId||this.id;ReactDOM__default.unstable_renderSubtreeIntoContainer(this,t,this.$portal);this.$passenger=this.$portal.children[0]}},{key:"componentDidUpdate",value:function e(){this.renderPortalledContent()}},{key:"componentWillUnmount",value:function e(){ReactDOM__default.unmountComponentAtNode(this.$portal);this.props.destination.removeChild(this.$portal)}},{key:"render",value:function e(){return React__default.createElement("span",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),defineProperty({},t.PORTAL_DATA_ATTRIBUTE,this.props.portalId||this.id)))}}]);return t}(React__default.Component);Portal.propTypes={children:React__default.PropTypes.node,destination:React.PropTypes.instanceOf(HTMLElement),portalId:React.PropTypes.string};Portal.defaultProps={children:null,destination:document.body,portalId:null};Portal.internalKeys=Object.keys(Portal.defaultProps);Portal.PORTAL_DATA_ATTRIBUTE="data-portal-id";var toArray$1=Array.prototype.slice;var Dialog=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.mounted=false,r.uuidHeader=uuid(),r.uuidBody=uuid(),r.handleFocus=function(e){if(!r.props.captureFocus){if(r.shouldDialogCloseOnEvent("closeOnOutsideFocus",e)&&!r.isPartOfDialog(e.target)){return window.setTimeout(r.props.onClose,0)}return}var t=e.explicitOriginalTarget||e.relatedTarget;if(r.isPartOfDialog(t)&&!r.isPartOfDialog(e.target)){e.preventDefault();t.focus()}},r.handleKeyDown=function(e){if(e.key==="Escape"){if(r.shouldDialogCloseOnEvent("closeOnEscKey",e)){window.setTimeout(r.props.onClose,0)}}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},r.handleInsideClick=function(e){if(r.shouldDialogCloseOnEvent("closeOnInsideClick",e)){window.setTimeout(r.props.onClose,0)}},r.handleOutsideClick=function(e){if(r.shouldDialogCloseOnEvent("closeOnOutsideClick",e)&&!r.isPartOfDialog(e.target)){window.setTimeout(r.props.onClose,0)}},r.handleOutsideScrollWheel=function(e){if(r.shouldDialogCloseOnEvent("closeOnOutsideScroll",e)&&!r.isPartOfDialog(e.target)){window.setTimeout(r.props.onClose,0)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"isPartOfDialog",value:function e(t){if(!t||t===window){return false}var n=[this.$wrapper].concat(toArray$1.call(this.$wrapper.querySelectorAll("["+Portal.PORTAL_DATA_ATTRIBUTE+"]")).map(function(e){return document.getElementById(e.getAttribute(Portal.PORTAL_DATA_ATTRIBUTE))}));var r=t.nodeType!==Node.ELEMENT_NODE?t.parentNode:t;return n.some(function(e){return e.contains(r)})}},{key:"componentDidMount",value:function e(){window.addEventListener("click",this.handleOutsideClick,true);window.addEventListener("contextmenu",this.handleOutsideClick,true);window.addEventListener("focus",this.handleFocus,true);window.addEventListener("scroll",this.handleOutsideScrollWheel,true);window.addEventListener("wheel",this.handleOutsideScrollWheel,true);if(this.props.captureFocus&&!this.isPartOfDialog(document.activeElement)){this.$dialog.focus()}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("click",this.handleOutsideClick,true);window.removeEventListener("contextmenu",this.handleOutsideClick,true);window.removeEventListener("focus",this.handleFocus,true);window.removeEventListener("scroll",this.handleOutsideScrollWheel,true);window.removeEventListener("wheel",this.handleOutsideScrollWheel,true)}},{key:"shouldDialogCloseOnEvent",value:function e(t,n){return isFunction(this.props[t])?this.props[t](n):this.props[t]}},{key:"renderBody",value:function e(){return React__default.createElement("div",_extends({},this.props.bodyProps,{id:this.props.bodyProps.id||this.uuidBody,className:index$4("b-dialog-body",this.props.bodyProps.className)}),this.props.children)}},{key:"renderFooter",value:function e(){if(this.props.footer){return React__default.createElement("footer",_extends({},this.props.footerProps,{className:index$4("b-dialog-footer",this.props.footerProps.className)}),this.props.footer)}}},{key:"renderHeader",value:function e(){if(this.props.header){return React__default.createElement("header",_extends({},this.props.headerProps,{id:this.props.headerProps.id||this.uuidHeader,className:index$4("b-dialog-header",this.props.headerProps.className)}),this.props.header)}}},{key:"renderFocusBoundary",value:function e(){if(this.props.captureFocus){return React__default.createElement("div",{className:"b-offscreen",tabIndex:"0","aria-hidden":"true"}," ")}}},{key:"render",value:function e(){var n=this;return React__default.createElement("div",_extends({},this.props.wrapperProps,{ref:function e(t){return n.$wrapper=t},className:index$4("b-dialog-wrapper",this.props.wrapperProps.className),tabIndex:"0"}),this.renderFocusBoundary(),this.props.before,React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:function e(t){return n.$dialog=t},className:index$4("b-dialog",this.props.className),onClick:this.handleInsideClick,onKeyDown:this.handleKeyDown,role:"dialog","aria-labelledby":this.uuidHeader,"aria-describedby":this.uuidBody,tabIndex:"0"}),this.renderHeader(),this.renderBody(),this.renderFooter()),this.props.after,this.renderFocusBoundary())}}]);return t}(React__default.PureComponent);Dialog.propTypes={after:React.PropTypes.node,before:React.PropTypes.node,bodyProps:React.PropTypes.object,captureFocus:React.PropTypes.bool,children:React.PropTypes.node,closeOnEscKey:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),closeOnInsideClick:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),closeOnOutsideClick:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),closeOnOutsideFocus:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),closeOnOutsideScroll:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),footer:React.PropTypes.node,footerProps:React.PropTypes.object,header:React.PropTypes.node,headerProps:React.PropTypes.object,onClose:React.PropTypes.func,wrapperProps:React.PropTypes.object};Dialog.defaultProps={after:null,before:null,bodyProps:{},captureFocus:true,children:null,closeOnEscKey:false,closeOnInsideClick:false,closeOnOutsideClick:false,closeOnOutsideFocus:false,closeOnOutsideScroll:false,footer:null,footerProps:{},header:null,headerProps:{},onClose:noop,wrapperProps:{}};Dialog.internalKeys=Object.keys(Dialog.defaultProps);var index$5=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var instances=[];function toI(e){return parseInt(e,10)}function rescale(e){var t=ReactDOM.findDOMNode(e);var n=window.getComputedStyle(t.parentNode);var r=toI(window.getComputedStyle(t).fontSize);var o=toI(n.height);var s=toI(n.width);if(n.boxSizing==="border-box"||n.boxSizing==="padding-box"){o-=toI(n.paddingTop)+toI(n.paddingBottom);s-=toI(n.paddingLeft)+toI(n.paddingRight)}var a=Math.floor(r/t.offsetHeight*o);var i=Math.floor(r/t.offsetWidth*s);t.style.fontSize=(Math.min(e.props.maxFontSize,a,i)||1)+"px"}function handleWindowResize(){instances.forEach(function(e){return rescale(e)})}function registerInstance(e){if(instances.length===0){window.addEventListener("resize",handleWindowResize,true)}instances.push(e)}function unregisterInstance(e){instances.splice(instances.indexOf(e),1);if(instances.length===0){window.removeEventListener("resize",handleWindowResize,true)}}var FittedText=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"componentDidMount",value:function e(){rescale(this);registerInstance(this)}},{key:"componentDidUpdate",value:function e(){rescale(this)}},{key:"componentWillUnmount",value:function e(){unregisterInstance(this)}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:index$5("b-text",this.props.className)}),this.props.children)}}]);return t}(React__default.PureComponent);FittedText.propTypes={component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),maxFontSize:React.PropTypes.number};FittedText.defaultProps={component:"span",maxFontSize:Number.MAX_VALUE};FittedText.internalKeys=Object.keys(FittedText.defaultProps);var index$6=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Image=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={status:t.status.LOADING},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillReceiveProps",value:function e(n){if(n.src!==this.props.src){this.resetPreloader();this.setState({status:t.status.LOADING})}}},{key:"componentDidMount",value:function e(){this.preload()}},{key:"componentDidUpdate",value:function e(){this.preload()}},{key:"componentWillUnmount",value:function e(){this.resetPreloader()}},{key:"resetPreloader",value:function e(){this.loader.onload=null;this.loader.onerror=null;this.loader=null}},{key:"preload",value:function e(){var n=this;if(this.loader){return}this.loader=document.createElement("img");this.loader.onload=function(){return n.setState({status:t.status.LOADED})};this.loader.onerror=function(){return n.setState({status:t.status.ERROR})};this.loader.src=this.props.src}},{key:"renderImage",value:function e(){if(this.props.displayAsBackgroundImage){return React__default.createElement("div",_extends({},this.props.imageProps,{ref:"image",className:index$6("b-image",this.props.imageProps.className),title:this.props.alt,style:_extends({},this.props.imageProps.style,{backgroundImage:"url("+this.props.src+")"})}))}return React__default.createElement("img",_extends({},this.props.imageProps,{ref:"image",className:index$6("b-image",this.props.imageProps.className),src:this.props.src,alt:this.props.alt,onLoad:noop,onError:noop}))}},{key:"renderStatus",value:function e(){return React__default.createElement("div",_extends({},this.props.statusProps,{ref:"status",className:index$6("b-image-status",this.props.statusProps.className,{"b-image-loading":this.state.status===t.status.LOADING,"b-image-loaded":this.state.status===t.status.LOADED,"b-image-error":this.state.status===t.status.ERROR}),role:"presentation"}))}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$6("b-image-wrapper",this.props.className)}),this.renderImage(),this.renderStatus())}}]);return t}(React__default.PureComponent);Image.status={LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"};Image.propTypes={alt:React.PropTypes.string,displayAsBackgroundImage:React.PropTypes.bool,imageProps:React.PropTypes.object,src:React.PropTypes.string.isRequired,statusProps:React.PropTypes.object};Image.defaultProps={alt:null,displayAsBackgroundImage:false,imageProps:{},src:"about:blank",statusProps:{}
};Image.internalKeys=Object.keys(Image.defaultProps);var index$7=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var isString=function(e){return typeof e==="string"};var Input=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={input:"",isControlled:isString(r.props.inputProps.value),isFocused:false},r.setInputValue=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return r.setState({input:e})},r.getValue=function(){return r.refs.field.value},r.handleBlur=function(e){r.setState({isFocused:false});if(isFunction(r.props.inputProps.onBlur)===true){r.props.inputProps.onBlur(e)}},r.handleFocus=function(e){r.setState({isFocused:true});if(isFunction(r.props.inputProps.onFocus)===true){r.props.inputProps.onFocus(e)}},r.handleChange=function(e){if(r.state.isControlled===false){r.setInputValue(e.target.value)}if(isFunction(r.props.inputProps.onChange)===true){r.props.inputProps.onChange(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillMount",value:function e(){if(this.state.isControlled===true){return this.setInputValue(this.props.inputProps.value)}this.setInputValue(this.props.inputProps.defaultValue)}},{key:"componentWillReceiveProps",value:function e(t){if(t.inputProps.value!==this.props.inputProps.value){this.setInputValue(t.inputProps.value)}}},{key:"setValue",value:function e(t){this.setInputValue(t);this.refs.field.value=t;if(this.state.isControlled===true){this.refs.field.dispatchEvent(new Event("input",{bubbles:true}));this.refs.field.dispatchEvent(new Event("change",{bubbles:true}))}}},{key:"getPlaceholderText",value:function e(){var t=this.state.input!=="";var n=this.props.hidePlaceholderOnFocus===true?this.state.isFocused===false&&t===false:t===false;return n?this.props.inputProps.placeholder:""}},{key:"renderPlaceholder",value:function e(){return React__default.createElement("div",{ref:"placeholder",className:"b-input-placeholder b-input"},this.getPlaceholderText())}},{key:"render",value:function e(){var n=this.props;return React__default.createElement("div",_extends({},omitKeysFromSourceObject(n,t.internalKeys),{ref:"wrapper",className:index$7("b-input-wrapper",n.className),title:this.getPlaceholderText()}),this.renderPlaceholder(),React__default.createElement("input",_extends({},n.inputProps,{ref:"field",className:index$7("b-input",n.inputProps.className),placeholder:null,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange})))}}]);return t}(React__default.PureComponent);Input.propTypes={hidePlaceholderOnFocus:React.PropTypes.bool,inputProps:React.PropTypes.shape({defaultValue:React.PropTypes.string,onBlur:React.PropTypes.func,onFocus:React.PropTypes.func,onChange:React.PropTypes.func,placeholder:React.PropTypes.string,type:React.PropTypes.string,value:React.PropTypes.string})};Input.defaultProps={hidePlaceholderOnFocus:true,inputProps:{type:"text"}};Input.internalKeys=Object.keys(Input.defaultProps);var index$8=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});function getIntersection(e,t){return Object.keys(t).reduce(function(t,n){if(n in e){t[n]=e[n]}return t},{})}var Modal=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"render",value:function e(){var n=this;var r=this.props;return React__default.createElement(Portal,r.portalProps,React__default.createElement("div",_extends({},omitKeysFromSourceObject(r,t.internalKeys),{ref:function e(t){return n.$modal=t},className:index$8("b-modal-wrapper",r.className)}),React__default.createElement("div",_extends({},r.maskProps,{className:index$8("b-modal-mask",r.maskProps.className)})),React__default.createElement(Dialog,_extends({},getIntersection(r,Dialog.defaultProps),r.modalProps,{className:index$8("b-modal",r.modalProps.className)}),r.children)))}}]);return t}(React__default.PureComponent);Modal.propTypes=_extends({},Dialog.propTypes,{maskProps:React.PropTypes.object,modalProps:React.PropTypes.object,portalProps:React.PropTypes.shape(Portal.propTypes)});Modal.defaultProps=_extends({},Dialog.defaultProps,{captureFocus:true,maskProps:{},modalProps:{},portalProps:{}});Modal.internalKeys=Object.keys(Modal.defaultProps);var index$9=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var INFINITY=1/0;var MAX_INTEGER=1.7976931348623157e308;var NAN=0/0;var symbolTag="[object Symbol]";var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;var objectProto=Object.prototype;var objectToString=objectProto.toString;function isInteger(e){return typeof e=="number"&&e==toInteger(e)}function isObject(e){var t=typeof e==="undefined"?"undefined":_typeof(e);return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&(typeof e==="undefined"?"undefined":_typeof(e))=="object"}function isSymbol(e){return(typeof e==="undefined"?"undefined":_typeof(e))=="symbol"||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toFinite(e){if(!e){return e===0?e:0}e=toNumber(e);if(e===INFINITY||e===-INFINITY){var t=e<0?-1:1;return t*MAX_INTEGER}return e===e?e:0}function toInteger(e){var t=toFinite(e),n=t%1;return t===t?n?t-n:t:0}function toNumber(e){if(typeof e=="number"){return e}if(isSymbol(e)){return NAN}if(isObject(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=e.replace(reTrim,"");var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var index$10=isInteger;var index$11=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var SegmentedControl=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={indexOfOptionInFocus:null},r.handleKeyDown=function(e){var t=e.key;var n=r.state.indexOfOptionInFocus;if(t==="ArrowLeft"){r.setFocus(r.getPreviousOptionIndex(n));e.preventDefault()}else if(t==="ArrowRight"){r.setFocus(r.getNextOptionIndex(n));e.preventDefault()}else if(t==="Enter"){r.handleOptionClick(r.props.options[n]);e.preventDefault()}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"currentValue",value:function e(){var t=void 0;this.props.options.some(function(e){if(e.selected){t=e.value;return true}});return t}},{key:"setFocus",value:function e(t){ReactDOM.findDOMNode(this.refs["option_$"+t]).focus()}},{key:"getNextOptionIndex",value:function e(t){var n=t+1;return n<this.props.options.length?n:0}},{key:"getPreviousOptionIndex",value:function e(t){var n=t-1;return n<0?this.props.options.length-1:n}},{key:"handleOptionBlur",value:function e(t,n){if(this.state.indexOfOptionInFocus===this.props.options.indexOf(t)){this.setState({indexOfOptionInFocus:null})}if(isFunction(t.onBlur)){t.onBlur(n)}}},{key:"handleOptionClick",value:function e(t,n){this.props.onOptionSelected(t.value);if(isFunction(t.onClick)){t.onClick(n)}}},{key:"handleOptionFocus",value:function e(t,n){this.setState({indexOfOptionInFocus:this.props.options.indexOf(t)});if(isFunction(t.onFocus)){t.onFocus(n)}}},{key:"renderOptions",value:function e(){var n=this;return this.props.options.map(function(e,r){return React__default.createElement(Button,_extends({},omitKeysFromSourceObject(e,t.internalChildKeys),{role:"radio","aria-checked":String(e.selected),ref:"option_$"+r,key:e.value,className:index$11("b-segmented-control-option",e.className,{"b-segmented-control-option-selected":e.selected}),tabIndex:e.selected?"0":"-1",onBlur:n.handleOptionBlur.bind(n,e),onPressed:n.handleOptionClick.bind(n,e),onFocus:n.handleOptionFocus.bind(n,e)}),e.content)})}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",role:"radiogroup",className:index$11("b-segmented-control",this.props.className),onKeyDown:this.handleKeyDown}),this.renderOptions())}}]);return t}(React__default.PureComponent);SegmentedControl.propTypes={onOptionSelected:React.PropTypes.func,options:function e(t){if(t.options.length<2){throw new Error("Must provide at least two options.")}var n=t.options.some(function(e){if(!("selected"in e)){return true}});if(n){throw new Error("Must provide a `selected` prop for each option.")}var r=false;var o=t.options.some(function(e){if(e.selected){if(r){return true}r=true}});if(o){throw new Error("Encountered multiple options with `selected: true`. There can be only one.")}if(t.options.some(function(e){return typeof e.value==="undefined"})){throw new Error("Must provide a `value` prop for each option.")}}};SegmentedControl.defaultProps={onOptionSelected:noop,options:[]};SegmentedControl.internalKeys=Object.keys(SegmentedControl.defaultProps);SegmentedControl.internalChildKeys=["content","value","selected"];var identity=function e(t){return t};var Pagination=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={currentPage:r.props.initialPage,targetIndex:(r.props.initialPage-1)*r.props.numItemsPerPage},r.currentPage=function(){return r.state.currentPage},r.getPageForIndex=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:r.props.numItemsPerPage;return Math.ceil((e+1)/t)},r.totalPages=function(){return Math.ceil(r.props.totalItems/r.props.numItemsPerPage)},r.firstVisibleItemIndex=function(){return(r.currentPage()-1)*r.props.numItemsPerPage},r.pageToIndex=function(e){if(e<0||e>=r.props.totalItems){return new Error("Cannot page to invalid index "+e+".")}r.setState({currentPage:r.getPageForIndex(e),targetIndex:e})},r.handleClick=function(e){var n=void 0;switch(e){case t.controls.FIRST:n=0;break;case t.controls.PREVIOUS:n=r.firstVisibleItemIndex()-r.props.numItemsPerPage;break;case t.controls.NEXT:n=r.firstVisibleItemIndex()+r.props.numItemsPerPage;break;case t.controls.LAST:n=r.props.totalItems-1;break;default:n=parseInt(e,10)*r.props.numItemsPerPage-1}r.setState({currentPage:r.getPageForIndex(n),targetIndex:n})},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentDidUpdate",value:function e(t,n){if(n.currentPage!==this.currentPage()){ReactDOM.findDOMNode(this.refs.item_0).focus()}}},{key:"componentWillReceiveProps",value:function e(){var t=this;var n=this.props;this.setState(function(e,r){if(r.identifier!==n.identifier){return{currentPage:1,targetIndex:0}}return{currentPage:t.getPageForIndex(e.targetIndex,r.numItemsPerPage),targetIndex:e.targetIndex}})}},{key:"createPageButtonOptions",value:function e(){var n=[];var r=this.currentPage();var o=this.props.numPageToggles;var s=this.totalPages();var a=r-(r-1)%o;var i=Math.min(a+o-1,s);if(this.props.showPaginationState){n.push({selected:false,content:isFunction(this.props.showPaginationState)?this.props.showPaginationState(r,s):r+" of "+s,value:"",disabled:true,className:"b-pagination-control b-pagination-control-state"})}if(this.props.showJumpToFirst){n.push({selected:false,content:this.props.jumpToFirstControlContent,value:t.controls.FIRST,disabled:this.currentPage()===1,className:"b-pagination-control b-pagination-control-first"})}n.push({selected:false,content:this.props.previousPageControlContent,value:t.controls.PREVIOUS,disabled:this.currentPage()===1,className:"b-pagination-control b-pagination-control-previous"});for(var p=a;p<=i;p++){n.push({className:"b-pagination-control","data-page-number":p,selected:p===this.currentPage(),content:p,value:p})}n.push({selected:false,content:this.props.nextPageControlContent,value:t.controls.NEXT,disabled:this.currentPage()===s,className:"b-pagination-control b-pagination-control-next"});if(this.props.showJumpToLast){n.push({selected:false,content:this.props.jumpToLastControlContent,value:t.controls.LAST,disabled:this.currentPage()===s,className:"b-pagination-control b-pagination-control-last"})}if(this.props.customControlContent){n.push({selected:false,content:this.props.customControlContent,value:uuid(),disabled:true,className:"b-pagination-control b-pagination-control-custom"})}return n}},{key:"generateItems",value:function e(){var t=[];var n=this.firstVisibleItemIndex();var r=Math.min(this.props.totalItems,n+this.props.numItemsPerPage)-1;for(var o=n;o<=r;o+=1){t.push({data:this.props.getItem(o)})}return t}},{key:"renderItems",value:function e(){var t=this;var n=this.props.listWrapperProps;var r=this.props.numItemsPerPage*(this.currentPage()-1);return React__default.createElement(ArrowKeyNavigation,_extends({},n,{ref:"itemList",className:index$9("b-pagination-items",n.className)}),this.generateItems().map(function(e,n){return React__default.createElement(Async,{ref:"item_"+n,key:n,className:index$9("b-pagination-item",{"b-pagination-item-even":n%2===0,"b-pagination-item-odd":n%2!==0}),convertToJSXFunc:t.props.itemToJSXConverterFunc,data:e.data,"data-pagination-index":r+n,loadingContent:t.props.itemLoadingContent})}))}},{key:"renderControls",value:function e(t){if(this.props.hidePagerIfNotNeeded&&this.props.totalItems<=this.props.numItemsPerPage){return}var n=this.props.toggleWrapperProps;var r=t.toLowerCase();var o=r[0].toUpperCase()+r.slice(1);return React__default.createElement(SegmentedControl,_extends({},n,{ref:"segmentedControl"+o,className:index$9("b-pagination-controls",n.className,defineProperty({},"b-pagination-controls-"+r,true)),options:this.createPageButtonOptions(),onOptionSelected:this.handleClick}))}},{key:"renderView",value:function e(){var n=this.props;var r=t.positions;return React__default.createElement("div",{ref:"paginatedView",className:"b-pagination"},n.position===r.ABOVE||n.position===r.BOTH?this.renderControls(r.ABOVE):noop,n.before,this.renderItems(),n.after,n.position===r.BELOW||n.position===r.BOTH?this.renderControls(r.BELOW):noop)}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$9("b-pagination-wrapper",this.props.className)}),this.renderView())}}]);return t}(React__default.PureComponent);Pagination.controls={FIRST:"FIRST",PREVIOUS:"PREVIOUS",NEXT:"NEXT",LAST:"LAST"};Pagination.positions={ABOVE:"ABOVE",BELOW:"BELOW",BOTH:"BOTH"};Pagination.propTypes={after:React.PropTypes.node,before:React.PropTypes.node,customControlContent:React.PropTypes.node,getItem:React.PropTypes.func,hidePagerIfNotNeeded:React.PropTypes.bool,identifier:React.PropTypes.string.isRequired,initialPage:function e(t){if(index$10(t.initialPage)===false){return new Error("`initialPage` must be an integer.")}var n=Math.ceil(t.totalItems/t.numItemsPerPage);if(t.initialPage<1||t.initialPage>n){return new Error("`initialPage` must be between 1 and "+n+".")}},itemLoadingContent:React.PropTypes.node,itemToJSXConverterFunc:React.PropTypes.func,jumpToFirstControlContent:React.PropTypes.node,jumpToLastControlContent:React.PropTypes.node,listWrapperProps:React.PropTypes.object,nextPageControlContent:React.PropTypes.node,numItemsPerPage:function e(t){if(index$10(t.numItemsPerPage)===false){return new Error("`numItemsPerPage` must be an integer.")}else if(t.numItemsPerPage<1){return new Error("`numItemsPerPage` must be greater than zero.")}},numPageToggles:React.PropTypes.number,position:React.PropTypes.oneOf(Object.keys(Pagination.positions)),previousPageControlContent:React.PropTypes.node,showJumpToFirst:React.PropTypes.bool,showJumpToLast:React.PropTypes.bool,showPaginationState:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),toggleWrapperProps:React.PropTypes.object,totalItems:React.PropTypes.number.isRequired};Pagination.defaultProps={after:null,before:null,customControlContent:null,getItem:noop,hidePagerIfNotNeeded:false,identifier:uuid(),initialPage:1,itemLoadingContent:null,itemToJSXConverterFunc:identity,jumpToFirstControlContent:"« First",jumpToLastControlContent:"Last »",listWrapperProps:{},nextPageControlContent:"Next ›",numItemsPerPage:10,numPageToggles:5,position:Pagination.positions.ABOVE,previousPageControlContent:"‹ Previous",showJumpToFirst:true,showJumpToLast:true,showPaginationState:true,toggleWrapperProps:{},totalItems:null};Pagination.internalKeys=Object.keys(Pagination.defaultProps);var index$12=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var transformProp=function e(){var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform","webkit-transform"];for(var n=0,r=t.length;n<r;n++){if(t[n]in document.documentElement.style){return t[n]}}return false}();function getOppositeCardinal(e){switch(e[0]){case"N":return"S";case"S":return"N";case"E":return"W"}return"E"}function without(e,t){return e.filter(function(e){return t.indexOf(e)===-1})}var CLASS_REMOVAL_REGEX=/\s?b-popover-(anchor|self)-(start|middle|end)/g;var DEFAULT_CARET_COMPONENT=React__default.createElement("svg",{viewBox:"0 0 14 9.5",xmlns:"http://www.w3.org/2000/svg"},React__default.createElement("g",null,React__default.createElement("polygon",{className:"b-popover-caret-border",fill:"#000",points:"7 0 14 10 0 10"}),React__default.createElement("polygon",{className:"b-popover-caret-fill",fill:"#FFF",points:"6.98230444 1.75 12.75 10 1.25 10"})));var START=0;var MIDDLE=1;var END=2;var combinations=[{name:"NNW",ax:START,ay:START,dx:START,dy:END},{name:"N",ax:MIDDLE,ay:START,dx:MIDDLE,dy:END},{name:"NNE",ax:END,ay:START,dx:END,dy:END},{name:"ENE",ax:END,ay:START,dx:START,dy:START},{name:"E",ax:END,ay:MIDDLE,dx:START,dy:MIDDLE},{name:"ESE",ax:END,ay:END,dx:START,dy:END},{name:"SSE",ax:END,ay:END,dx:END,dy:START},{name:"S",ax:MIDDLE,ay:END,dx:MIDDLE,dy:START},{name:"SSW",ax:START,ay:END,dx:START,dy:START},{name:"WSW",ax:START,ay:END,dx:END,dy:END},{name:"W",ax:START,ay:MIDDLE,dx:END,dy:MIDDLE},{name:"WNW",ax:START,ay:START,dx:END,dy:START}];var Popover=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.align=function(){var e=r.props.anchor instanceof HTMLElement?r.props.anchor:ReactDOM.findDOMNode(r.props.anchor);var n=r.props.caretAnchor?r.props.caretAnchor instanceof HTMLElement?r.props.caretAnchor:ReactDOM.findDOMNode(r.props.caretAnchor):e;r.cacheViewportCartography(e,n);var o=r.getValidAlignmentPreset();var s=t.getAlignmentClassFragment;r.dialog.$wrapper.className=r.dialog.$wrapper.className.replace(CLASS_REMOVAL_REGEX,"")+(" b-popover-anchor-x-"+s(o.ax))+(" b-popover-anchor-y-"+s(o.ay))+(" b-popover-self-x-"+s(o.dx))+(" b-popover-self-y-"+s(o.dy));var a=Math.round(r.getNextDialogXPosition(o));var i=Math.round(r.getNextDialogYPosition(o));r.dialog.$wrapper.style[transformProp]="translate("+a+"px, "+i+"px)";var p=o.name[0];var c=p==="N"||p==="S";r.$caret.style[c?"left":"top"]=Math.round(r.getNextCaretXPosition(o))+"px";r.$caret.style[c?"top":"left"]="0px"},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"cacheViewportCartography",value:function e(t,n){var r=document.body.getBoundingClientRect();this.anchorRect=t.getBoundingClientRect();this.caretAnchorRect=n.getBoundingClientRect();this.bodyLeft=r.left*-1;this.bodyTop=r.top*-1}},{key:"getNextCaretXPosition",value:function e(t){var n=t.name,r=t.ax,o=t.dx,s=t.ay,a=t.dy;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.$caret;var p=0;if(n[0]==="N"||n[0]==="S"){p=this.caretAnchorRect.left-this.anchorRect.left+this.caretAnchorRect.width/2;if(o===MIDDLE){p+=(this.dialog.$wrapper.clientWidth-this.anchorRect.width)/2}else if(o===END){p+=this.dialog.$wrapper.clientWidth-this.anchorRect.width}}else{p=this.caretAnchorRect.top-this.anchorRect.top+this.caretAnchorRect.height/2;if(a===MIDDLE){p+=(this.dialog.$wrapper.clientHeight-this.anchorRect.height)/2}else if(a===END){p+=this.dialog.$wrapper.clientHeight-this.anchorRect.height}}p-=i.clientWidth/2;return p}},{key:"getNextDialogXPosition",value:function e(t){var n=t.ax,r=t.dx;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.dialog.$wrapper;var s=this.anchorRect.left+this.bodyLeft;switch(n){case MIDDLE:s+=this.anchorRect.width/2;break;case END:s+=this.anchorRect.width;break}switch(r){case MIDDLE:s-=o.clientWidth/2;break;case END:s-=o.clientWidth;break}return s}},{key:"getNextDialogYPosition",value:function e(t){var n=t.ay,r=t.dy;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.dialog.$wrapper;var s=this.anchorRect.top+this.bodyTop;switch(n){case MIDDLE:s+=this.anchorRect.height/2;break;case END:s+=this.anchorRect.height;break}switch(r){case MIDDLE:s-=o.clientHeight/2;break;case END:s-=o.clientHeight;break}return s}},{key:"isPositionValid",value:function e(t,n,r){var o=t.name,s=t.ax,a=t.ay,i=t.dx,p=t.dy;var c=o[0];if(c==="N"||c==="S"){if(c==="N"&&this.anchorRect.top-n<0){return false}else if(c==="S"&&this.anchorRect.bottom+n>window.innerHeight){return false}if(s===START){return!(this.anchorRect.left+r>window.innerWidth||this.anchorRect.left<0)}else if(s===MIDDLE){return!(this.anchorRect.left-r/2<0||this.anchorRect.left+r/2>window.innerWidth)}return!(this.anchorRect.left-r<0||this.anchorRect.right>window.innerWidth)}else if(c==="W"||c==="E"){if(c==="W"&&this.anchorRect.left-r<0){return false}else if(c==="E"&&this.anchorRect.right+r>window.innerWidth){return false}if(a===START){return!(this.anchorRect.top+n>window.innerHeight||this.anchorRect.top<0)}else if(a===MIDDLE){return!(this.anchorRect.top+this.anchorRect.height/2-n/2<0||this.anchorRect.top+this.anchorRect.height/2+n/2>window.innerHeight)}return!(this.anchorRect.top-n<0||this.anchorRect.bottom>window.innerHeight)}return true}},{key:"getValidAlignmentPreset",value:function e(){var t=this;var n=this.dialog.$wrapper.clientWidth;var r=this.dialog.$wrapper.clientHeight;var o=combinations.filter(function(e){return t.isPositionValid(e,r,n)});if(o.indexOf(this.props.preset)!==-1||!this.props.autoReposition||!o.length){return this.props.preset}var s=o.filter(function(e){var n=e.name;return n[0]===t.props.preset.name[0]});if(s.length){return s[0]}var a=getOppositeCardinal(this.props.preset.name);var i=o.filter(function(e){var t=e.name;return t[0]===a});if(i.length){return i[0]}return o[0]}},{key:"componentDidMount",value:function e(){this.align();window.addEventListener("resize",this.align,true)}},{key:"componentDidUpdate",value:function e(){this.align()}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.align,true)}},{key:"render",value:function e(){var n=this;var r=this.props;return React__default.createElement(Portal,r.portalProps,React__default.createElement(Dialog,_extends({},omitKeysFromSourceObject(r,t.internalKeys),{ref:function e(t){return n.dialog=t},before:React__default.cloneElement(r.caretComponent,{ref:function e(t){return n.$caret=t},className:index$12("b-popover-caret",r.caretComponent.props.className)}),wrapperProps:_extends({},r.wrapperProps,{className:index$12("b-popover",r.wrapperProps.className)})})))}}],[{key:"getAlignmentClassFragment",value:function e(t){switch(t){case START:return"start";case MIDDLE:return"middle";case END:return"end"}}}]);return t}(React__default.PureComponent);Popover.preset=combinations.reduce(function(e,t){return e[t.name]=t,e},{});Popover.propTypes=_extends({},Dialog.propTypes,{anchor:React.PropTypes.oneOfType([React.PropTypes.instanceOf(HTMLElement),React.PropTypes.element]).isRequired,autoReposition:React.PropTypes.bool,caretAnchor:React.PropTypes.oneOfType([React.PropTypes.instanceOf(HTMLElement),React.PropTypes.element]),caretComponent:React.PropTypes.element,portalProps:React.PropTypes.shape(Portal.PropTypes),preset:React.PropTypes.oneOf([Popover.preset.NNW,Popover.preset.N,Popover.preset.NNE,Popover.preset.ENE,Popover.preset.E,Popover.preset.ESE,Popover.preset.SSE,Popover.preset.S,Popover.preset.SSW,Popover.preset.WSW,Popover.preset.W,Popover.preset.WNW]),wrapperProps:React.PropTypes.object});Popover.defaultProps=_extends({},Dialog.defaultProps,{anchor:undefined,autoReposition:true,captureFocus:false,caretAnchor:undefined,caretComponent:DEFAULT_CARET_COMPONENT,closeOnEscKey:true,closeOnOutsideClick:true,closeOnOutsideScroll:true,portalProps:{},preset:Popover.preset.S,wrapperProps:{}});Popover.internalKeys=without(Object.keys(Popover.defaultProps),Dialog.internalKeys);var index$13=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var ProgressiveDisclosure=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={expanded:r.props.expanded},r.dispatchCallback=function(){r.props[r.state.expanded?"onExpand":"onHide"]()},r.handleClick=function(e){r.setState({expanded:!r.state.expanded},r.dispatchCallback);if(isFunction(r.props.toggleProps.onClick)){r.props.toggleProps.onClick(e)}},r.handleKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault();r.setState({expanded:!r.state.expanded},r.dispatchCallback)}if(isFunction(r.props.toggleProps.onKeyDown)){r.props.toggleProps.onKeyDown(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillReceiveProps",value:function e(t){if(t.expanded!==this.props.expanded){this.setState({expanded:t.expanded},this.dispatchCallback)}}},{key:"renderContent",value:function e(){if(this.state.expanded){return React__default.createElement("div",{ref:"content",className:"b-disclosure-content"},isFunction(this.props.children)?this.props.children():this.props.children)}}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$13("b-disclosure",this.props.className,{"b-disclosure-expanded":this.state.expanded})}),React__default.createElement("div",_extends({},this.props.toggleProps,{ref:"toggle",className:index$13("b-disclosure-toggle",this.props.toggleProps.className),onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:"0"}),this.state.expanded?this.props.teaserExpanded||this.props.teaser:this.props.teaser),this.renderContent())}}]);return t}(React__default.PureComponent);ProgressiveDisclosure.propTypes={children:React.PropTypes.any,component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),expanded:React.PropTypes.bool,onExpand:React.PropTypes.func,onHide:React.PropTypes.func,teaser:React.PropTypes.node,teaserExpanded:React.PropTypes.node,toggleProps:React.PropTypes.object};ProgressiveDisclosure.defaultProps={children:null,component:"div",expanded:false,onExpand:noop,onHide:noop,teaser:null,teaserExpanded:null,toggleProps:{}};ProgressiveDisclosure.internalKeys=Object.keys(ProgressiveDisclosure.defaultProps);var index$14=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Progress=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("div",_extends({},this.props.labelProps,{ref:"label",className:index$14("b-progress-label",this.props.labelProps.className)}),this.props.label)}}},{key:"renderCancel",value:function e(){
if(this.props.onCancel){return React__default.createElement(Button,_extends({},this.props.cancelProps,{ref:"cancel",className:index$14("b-progress-cancel",this.props.cancelProps.className),onPressed:this.props.onCancel}))}}},{key:"renderProgress",value:function e(){return React__default.createElement("div",_extends({},this.props.progressProps,{ref:"progress",className:index$14("b-progress",this.props.progressProps.className,{"b-progress-indeterminate":typeof this.props.progress==="undefined"}),role:"presentation",style:_extends({},this.props.progressProps.style,defineProperty({},this.props.tweenProperty,this.props.progress))}))}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$14("b-progress-wrapper",this.props.className)}),this.renderProgress(),this.renderLabel(),this.renderCancel())}}]);return t}(React__default.PureComponent);Progress.propTypes={cancelProps:React.PropTypes.object,component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),label:React.PropTypes.node,labelProps:React.PropTypes.object,onCancel:React.PropTypes.func,progress:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),progressProps:React.PropTypes.object,tweenProperty:React.PropTypes.string};Progress.defaultProps={cancelProps:{},component:"div",label:null,labelProps:{},onCancel:null,progress:undefined,progressProps:{},tweenProperty:"width"};Progress.internalKeys=Object.keys(Progress.defaultProps);var index$15=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Radio=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.uuid=uuid(),r.handleChange=function(e){if(e.target.checked){r.props.onSelected(e.target.value)}if(isFunction(r.props.inputProps.onChange)){r.props.inputProps.onChange(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"renderInput",value:function e(){return React__default.createElement("input",_extends({},this.props.inputProps,{ref:"input",type:"radio",id:this.props.id||this.props.inputProps.id||this.uuid,className:index$15("b-radio",this.props.inputProps.className,{"b-radio-selected":this.props.selected}),name:this.props.name,value:this.props.value,checked:this.props.selected,"aria-checked":String(this.props.selected),onChange:this.handleChange}))}},{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("label",_extends({},this.props.labelProps,{ref:"label",className:index$15("b-radio-label",this.props.labelProps.className),htmlFor:this.props.id||this.props.inputProps.id||this.uuid}),this.props.label)}}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$15("b-radio-wrapper",this.props.className)}),this.renderInput(),this.renderLabel())}}]);return t}(React__default.PureComponent);Radio.propTypes={inputProps:React.PropTypes.object,label:React.PropTypes.node,labelProps:React.PropTypes.object,name:React.PropTypes.string.isRequired,onSelected:React.PropTypes.func,selected:React.PropTypes.bool,value:React.PropTypes.string.isRequired};Radio.defaultProps={inputProps:{},label:null,labelProps:{},name:"",onSelected:noop,selected:false,value:""};Radio.internalKeys=Object.keys(Radio.defaultProps);var index$16=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var index$17=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var matchOperatorsRe=/[|\\{}()[\]^$+*?.]/g;var index$18=function e(t){if(typeof t!=="string"){throw new TypeError("Expected a string")}return t.replace(matchOperatorsRe,"\\$&")};var Typeahead=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),_initialiseProps.call(r),n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillMount",value:function e(){if(this.props.inputProps.value||this.props.inputProps.defaultValue){this.computeMatches()}}},{key:"componentDidMount",value:function e(){this.mounted=true;if(this.state.selectedEntityIndex>=0){this.props.onEntityHighlighted(this.state.selectedEntityIndex)}}},{key:"componentWillReceiveProps",value:function e(t){if(t.entities!==this.props.entities){this.computeMatches(t.entities)}if(t.inputProps.value!==this.props.inputProps.value){this.updateInputState(t.inputProps.value);this.computeMatches()}}},{key:"componentDidUpdate",value:function e(t,n){if(this.state.entityMatchIndexes.length&&!n.entityMatchIndexes.length){this.refs.matches.scrollTop=0}if(this.state.selectedEntityIndex>=0&&this.props.entities[this.state.selectedEntityIndex]!==t.entities[n.selectedEntityIndex]){this.props.onEntityHighlighted(this.state.selectedEntityIndex)}}},{key:"componentWillUnmount",value:function e(){this.mounted=false}},{key:"handleMatchClick",value:function e(t){this.setState({selectedEntityIndex:t},this.setValueWithSelectedEntity)}},{key:"selectMatch",value:function e(t){var n=this.state.entityMatchIndexes;var r=n.length;var o=n.indexOf(this.state.selectedEntityIndex)+t;if(r){if(o<0){o=r-1}else if(o>=r){o=0}var s=n[o];var a=this.refs.matches;var i=a.scrollTop+a.clientHeight;var p=this.refs["match_$"+s];var c=p.offsetTop;var l=c+p.clientHeight;if(l>=i){a.scrollTop+=l-i}else if(c<=a.scrollTop){a.scrollTop=c}this.setState({selectedEntityIndex:s})}}},{key:"cursorAtEndOfInput",value:function e(){var t=this.getInputNode();return t.selectionStart===t.selectionEnd&&t.selectionEnd===this.getValue().length}},{key:"markFuzzyMatchSubstring",value:function e(t,n){var r=n.text;var o=r.split(new RegExp("("+index$18(t)+")","ig"));var s=t.toLowerCase();var a=o.length;var i=-1;while(++i<a){if(o[i].toLowerCase()===s){o[i]=React__default.createElement("mark",{key:i,className:"b-typeahead-match-highlight"},o[i])}}return o}},{key:"markStartsWithMatchSubstring",value:function e(t,n){var r=n.text;var o=t.toLowerCase();var s=r.toLowerCase().indexOf(o);var a=s+o.length;return[React__default.createElement("span",{key:"0"},r.slice(0,s)),React__default.createElement("mark",{key:"1",className:"b-typeahead-match-highlight"},r.slice(s,a)),React__default.createElement("span",{key:"2"},r.slice(a))]}},{key:"getMarkingFunction",value:function e(){if(isString(this.props.algorithm)){if(this.props.algorithm===t.mode.STARTS_WITH){return this.markStartsWithMatchSubstring}return this.markFuzzyMatchSubstring}else if(isFunction(this.props.algorithm.marker)){return this.props.algorithm.marker}if(this.warnedMarker===undefined){this.warnedMarker=true;console.warn("Typeahead: no `props.algorithm.marker` was provided; falling back to the default marking algorithm (FUZZY).")}return this.markFuzzyMatchSubstring}},{key:"getFuzzyMatchIndexes",value:function e(t,n){var r=t.toLowerCase();return n.reduce(function e(t,n,o){return n.text.toLowerCase().indexOf(r)!==-1?t.push(o)&&t:t},[])}},{key:"getStartsWithMatchIndexes",value:function e(t,n){var r=t.toLowerCase();return n.reduce(function e(t,n,o){if(n.text.toLowerCase().indexOf(r)===0){t.push(o)}return t},[])}},{key:"getMatchingFunction",value:function e(){if(isString(this.props.algorithm)){if(this.props.algorithm===t.mode.STARTS_WITH){return this.getStartsWithMatchIndexes}return this.getFuzzyMatchIndexes}else if(isFunction(this.props.algorithm.matcher)){return this.props.algorithm.matcher}if(this.warnedMatcher===undefined){this.warnedMatcher=true;console.warn("Typeahead: no `props.algorithm.matcher` was provided; falling back to the default matching algorithm (FUZZY).")}return this.getFuzzyMatchIndexes}},{key:"computeMatches",value:function e(t){var n=this;this.setState(function(e,r){var o=t||r.entities;var s=e.input;var a=s===""?[]:n.getMatchIndexes(s,o);return{selectedEntityIndex:a.length?a[0]:-1,entityMatchIndexes:a}})}},{key:"renderNotification",value:function e(){return React__default.createElement("div",{ref:"aria",id:this.state.id,className:this.props.offscreenClass,"aria-live":"polite"},this.getSelectedEntityText())}},{key:"renderHint",value:function e(){if(this.props.hint){var t=this.state.input;var n=this.getSelectedEntityText();var r="";if(n&&n.toLowerCase().indexOf(t.toLowerCase())===0){r=n.replace(new RegExp(t,"i"),t)}return React__default.createElement("div",_extends({},this.props.hintProps,{ref:"hint",className:index$17("b-input","b-input-placeholder","b-typeahead-hint",this.props.hintProps.className),tabIndex:"-1"}),r)}}},{key:"renderMatches",value:function e(){var t=this;if(this.state.entityMatchIndexes.length){var n=this.props.matchWrapperProps;return React__default.createElement("div",_extends({},n,{ref:"matches",className:index$17("b-typeahead-match-wrapper",n.className)}),this.state.entityMatchIndexes.map(function(e){var n=t.props.entities[e];var r=n.className,o=n.text,s=objectWithoutProperties(n,["className","text"]);return React__default.createElement("div",_extends({},s,{ref:"match_$"+e,className:index$17("b-typeahead-match",r,{"b-typeahead-match-selected":t.state.selectedEntityIndex===e}),key:o,onClick:t.handleMatchClick.bind(t,e)}),t.markMatchSubstring(t.state.input,n))}))}}},{key:"render",value:function e(){var n=this.props,r=this.state;return React__default.createElement("div",_extends({},omitKeysFromSourceObject(n,t.internalKeys),{ref:"wrapper",className:index$17("b-typeahead-wrapper",n.className),onKeyDown:this.handleKeyDown}),this.renderNotification(),this.renderHint(),React__default.createElement(Input,_extends({},getIntersection(n,Input.defaultProps),{ref:"input","aria-controls":r.id,inputProps:_extends({},n.inputProps,{className:index$17("b-typeahead",n.inputProps.className),onChange:this.handleChange})})),this.renderMatches())}}]);return t}(React__default.PureComponent);Typeahead.mode={STARTS_WITH:uuid(),FUZZY:uuid()};Typeahead.propTypes=_extends({},Input.propTypes,{algorithm:React.PropTypes.oneOfType([React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY]),React.PropTypes.shape({marker:React.PropTypes.oneOfType([React.PropTypes.func,React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY])]),matcher:React.PropTypes.oneOfType([React.PropTypes.func,React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY])])})]),clearOnSelection:React.PropTypes.bool,entities:React.PropTypes.arrayOf(React.PropTypes.shape({text:React.PropTypes.string.isRequired})),hint:React.PropTypes.bool,hintProps:React.PropTypes.object,matchWrapperProps:React.PropTypes.object,offscreenClass:React.PropTypes.string,onComplete:React.PropTypes.func,onEntityHighlighted:React.PropTypes.func,onEntitySelected:React.PropTypes.func});Typeahead.defaultProps=_extends({},Input.defaultProps,{algorithm:Typeahead.mode.FUZZY,clearOnSelection:false,entities:[],hint:null,hintProps:{},matchWrapperProps:{},offscreenClass:"b-offscreen",onComplete:noop,onEntityHighlighted:noop,onEntitySelected:noop});Typeahead.internalKeys=Object.keys(Typeahead.defaultProps);var _initialiseProps=function e(){var t=this;this.state={entityMatchIndexes:[],id:uuid(),isControlled:isString(this.props.inputProps.value),input:this.props.inputProps.value||this.props.inputProps.defaultValue||"",selectedEntityIndex:-1};this.mounted=false;this.updateInputState=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return t.setState({input:e})};this.getSelectedEntityText=function(){var e=t.props.entities[t.state.selectedEntityIndex];return e?e.text:""};this.resetMatches=function(){if(t.mounted){t.setState({selectedEntityIndex:-1,entityMatchIndexes:[]})}};this.getInputNode=function(){return t.refs.input.refs.field};this.select=function(){var e=t.getInputNode();e.selectionStart=0;e.selectionEnd=t.getValue().length};this.focus=function(){return t.getInputNode().focus()};this.getValue=function(){return t.refs.input.getValue()};this.setValue=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";t.refs.input.setValue(e);t.updateInputState(e);t.resetMatches();t.focus()};this.setValueWithSelectedEntity=function(){t.props.onEntitySelected(t.state.selectedEntityIndex);if(t.props.clearOnSelection){t.setValue("")}else{t.setValue(t.getSelectedEntityText())}window.setTimeout(t.resetMatches,0)};this.markMatchSubstring=function(){return t.getMarkingFunction().apply(undefined,arguments)};this.getMatchIndexes=function(){return t.getMatchingFunction().apply(undefined,arguments)};this.handleChange=function(e){if(t.state.isControlled===false){t.updateInputState(e.target.value);t.computeMatches()}if(isFunction(t.props.inputProps.onChange)){t.props.inputProps.onChange(e)}};this.handleKeyDown=function(e){switch(e.key){case"ArrowLeft":if(e.target.selectionStart>1){e.stopPropagation()}break;case"Tab":case"ArrowRight":if(t.state.selectedEntityIndex!==-1&&t.cursorAtEndOfInput()&&t.getInputNode()===e.target&&!e.shiftKey){e.nativeEvent.preventDefault();t.setValueWithSelectedEntity()}break;case"ArrowUp":e.nativeEvent.preventDefault();t.selectMatch(-1);t.focus();break;case"ArrowDown":e.nativeEvent.preventDefault();t.selectMatch(1);t.focus();break;case"Escape":if(t.state.selectedEntityIndex!==-1&&t.getInputNode()===e.target){t.resetMatches()}break;case"Enter":if(t.state.selectedEntityIndex!==-1&&t.getInputNode()===e.target){e.nativeEvent.preventDefault();t.setValueWithSelectedEntity()}else{t.props.onComplete(t.state.input,e)}break}if(isFunction(t.props.onKeyDown)){t.props.onKeyDown(e)}}};var first=function e(t){return t[0]};var last=function e(t){return t[t.length-1]};var TokenizedInput=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.focus=function(){return r.refs.typeahead.focus()},r.getInputNode=function(){return r.refs.typeahead.getInputNode()},r.getSelectedEntityText=function(){return r.refs.typeahead.getSelectedEntityText()},r.getValue=function(){return r.refs.typeahead.getValue()},r.select=function(){return r.refs.typeahead.select()},r.setValue=function(e){return r.refs.typeahead.setValue(e)},r.add=function(e){if(r.props.tokens.indexOf(e)===-1){r.props.handleAddToken(e)}},r.handleInputClick=function(e){r.clearSelection();if(isFunction(r.props.inputProps.onClick)){r.props.inputProps.onClick(e)}},r.handleInputFocus=function(e){r.clearSelection();if(isFunction(r.props.inputProps.onFocus)){r.props.inputProps.onFocus(e)}},r.handleKeyDown=function(e){switch(e.which){case 37:r.selectPreviousToken(e.shiftKey);break;case 39:r.selectNextToken(e.shiftKey);break;case 8:if(r.props.tokensSelected.length){r.remove(r.props.tokensSelected);r.focus()}break;case 65:if(e.metaKey){e.preventDefault();r.focus();r.select();r._suppressNextTokenSelection=true;r.props.handleNewSelection(r.props.tokens)}}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentDidUpdate",value:function e(t){var n=t.tokensSelected;var r=this.props.tokensSelected;if(this.props.tokens.length>t.tokens.length){this.setValue("")}if(this._suppressNextTokenSelection){this._suppressNextTokenSelection=false;return}if(n!==r&&r.length!==0){if(r.length===1||r[0]!==n[0]){return this.refs["token_"+r[0]].focus()}else if(last(r)!==last(n)){return this.refs["token_"+last(r)].focus()}this.refs["token_"+r[0]].focus()}}},{key:"remove",value:function e(t){var n=this;var r=(Array.isArray(t)?t:[t]).filter(function(e){return n.props.tokens.indexOf(e)!==-1});if(r.length){this.props.handleRemoveTokens(r)}}},{key:"selectToken",value:function e(t){this.props.handleNewSelection([t])}},{key:"selectTokens",value:function e(t){this.props.handleNewSelection(t)}},{key:"selectPreviousToken",value:function e(t){var n=this.props.tokensSelected;var r=this.props.tokens;if(n.length===1&&first(n)===first(r)){return}if(n.length===0){this.selectToken(last(r))}else{var o=r[r.indexOf(first(n))-1];this.selectTokens(t?[o].concat(n):[o])}}},{key:"selectNextToken",value:function e(t){var n=this.props.tokensSelected;var r=this.props.tokens;if(n.length===0){return}if(last(n)===last(r)){this.clearSelection();this.focus()}else{var o=r[r.indexOf(last(n))+1];this.selectTokens(t?n.concat(o):[o])}}},{key:"clearSelection",value:function e(){this.props.handleNewSelection([])}},{key:"handleTokenCloseClick",value:function e(t,n){n.stopPropagation();this.remove(t);this.focus();if(this.props.tokenCloseComponent.props.onClick){this.props.tokenCloseComponent.props.onClick(n)}}},{key:"renderTokenClose",value:function e(t){if(this.props.tokenCloseVisible){return React__default.cloneElement(this.props.tokenCloseComponent,{className:index$16("b-tokenfield-token-close",this.props.tokenCloseComponent.props.className),onClick:this.handleTokenCloseClick.bind(this,t)})}}},{key:"handleTokenKeyDown",value:function e(t,n){switch(n.which){case 13:case 32:this.selectToken(t);n.preventDefault();break;case 8:this.remove(t);this.focus();n.preventDefault();break}}},{key:"renderTokens",value:function e(){var t=this;return React__default.createElement("div",{className:"b-tokenfield-tokens"},this.props.tokens.map(function(e){return React__default.createElement("div",{ref:"token_"+e,key:e,className:index$16("b-tokenfield-token",{"b-tokenfield-token-selected":t.props.tokensSelected.indexOf(e)!==-1}),onClick:t.selectToken.bind(t,e),onKeyDown:t.handleTokenKeyDown.bind(t,e),tabIndex:"0"},t.props.entities[e].text,t.renderTokenClose(e))}))}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$16("b-tokenfield-wrapper",this.props.className),onKeyDown:this.handleKeyDown}),this.renderTokens(),React__default.createElement(Typeahead,_extends({},getIntersection(this.props,Typeahead.defaultProps),{ref:"typeahead",className:"b-tokenfield",clearOnSelection:true,inputProps:_extends({},this.props.inputProps,{onClick:this.handleInputClick,onFocus:this.handleInputFocus}),onEntitySelected:this.add})))}}]);return t}(React__default.PureComponent);TokenizedInput.propTypes=_extends({},Typeahead.propTypes,{handleAddToken:React.PropTypes.func,handleRemoveTokens:React.PropTypes.func,handleNewSelection:React.PropTypes.func,tokenCloseComponent:React.PropTypes.element,tokenCloseVisible:React.PropTypes.bool,tokens:React.PropTypes.arrayOf(React.PropTypes.number),tokensSelected:React.PropTypes.arrayOf(React.PropTypes.number)});TokenizedInput.defaultProps=_extends({},Typeahead.defaultProps,{handleAddToken:noop,handleRemoveTokens:noop,handleNewSelection:noop,tokenCloseComponent:React__default.createElement("div",null,"X"),tokenCloseVisible:true,tokens:[],tokensSelected:[]});TokenizedInput.internalKeys=Object.keys(TokenizedInput.defaultProps);exports.ArrowKeyNavigation=ArrowKeyNavigation;exports.Async=Async;exports.Button=Button;exports.Checkbox=Checkbox;exports.CheckboxGroup=CheckboxGroup;exports.Dialog=Dialog;exports.FittedText=FittedText;exports.Image=Image;exports.Input=Input;exports.Modal=Modal;exports.Pagination=Pagination;exports.Popover=Popover;exports.Portal=Portal;exports.ProgressiveDisclosure=ProgressiveDisclosure;exports.Progress=Progress;exports.Radio=Radio;exports.SegmentedControl=SegmentedControl;exports.TokenizedInput=TokenizedInput;exports.Typeahead=Typeahead;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm91bmRsZXNzLmpzIiwic291cmNlcyI6WyIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWFycm93LWtleS1uYXZpZ2F0aW9uL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWFzeW5jL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWFzeW5jL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWJ1dHRvbi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1idXR0b24vaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtY2hlY2tib3gvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtdXVpZC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1jaGVja2JveC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1jaGVja2JveC1ncm91cC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1jaGVja2JveC1ncm91cC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1kaWFsb2cvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtcG9ydGFsL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWRpYWxvZy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1maXR0ZWQtdGV4dC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1maXR0ZWQtdGV4dC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1pbWFnZS9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1pbWFnZS9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1pbnB1dC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy11dGlscy1pcy1zdHJpbmcvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtaW5wdXQvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtbW9kYWwvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtb2JqZWN0LWludGVyc2VjdGlvbi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1tb2RhbC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wYWdpbmF0aW9uL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXBhZ2luYXRpb24vbm9kZV9tb2R1bGVzL2xvZGFzaC5pc2ludGVnZXIvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3Mtc2VnbWVudGVkLWNvbnRyb2wvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3Mtc2VnbWVudGVkLWNvbnRyb2wvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtcGFnaW5hdGlvbi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wb3BvdmVyL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXV0aWxzLXRyYW5zZm9ybS1wcm9wZXJ0eS9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wb3BvdmVyL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXByb2dyZXNzaXZlLWRpc2Nsb3N1cmUvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtcHJvZ3Jlc3NpdmUtZGlzY2xvc3VyZS9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wcm9ncmVzcy9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wcm9ncmVzcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1yYWRpby9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1yYWRpby9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy10b2tlbml6ZWQtaW5wdXQvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdHlwZWFoZWFkL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXR5cGVhaGVhZC9ub2RlX21vZHVsZXMvZXNjYXBlLXN0cmluZy1yZWdleHAvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdHlwZWFoZWFkL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXRva2VuaXplZC1pbnB1dC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAodGVzdCkgPT4gdHlwZW9mIHRlc3QgPT09ICdmdW5jdGlvbic7XG4iLCIvKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBvYmplY3Qgd2l0aG91dCB0aGUgZ2l2ZW4ga2V5cy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb21pdEtleXNGcm9tU291cmNlT2JqZWN0KHNvdXJjZSwgb21pdHRlZEtleXMgPSBbXSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiByZWxvY2F0ZUFjY2VwdGVkS2V5cyhoYXNoLCBrZXkpIHtcbiAgICAgICAgaWYgKG9taXR0ZWRLZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGhhc2hba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhhc2g7XG5cbiAgICB9LCB7fSk7XG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7ZmluZERPTU5vZGV9IGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuLyoqXG4jIEFycm93S2V5TmF2aWdhdGlvblxuX19BIGhpZ2hlci1vcmRlciBjb21wb25lbnQgZm9yIGFycm93IGtleSBuYXZpZ2F0aW9uIG9uIGEgZ3JvdXBpbmcgb2YgY2hpbGRyZW4uX19cblxuQXJyb3dLZXlOYXZpZ2F0aW9uIGlzIGRlc2lnbmVkIG5vdCB0byBjYXJlIGFib3V0IHRoZSBjb21wb25lbnQgdHlwZXMgaXQgaXMgd3JhcHBpbmcuIER1ZSB0byB0aGlzLCB5b3UgY2FuIHBhc3NcbndoYXRldmVyIEhUTUwgdGFnIHlvdSBsaWtlIGludG8gYHByb3BzLmNvbXBvbmVudGAgb3IgZXZlbiBhIFJlYWN0IGNvbXBvbmVudCB5b3UndmUgbWFkZSBlbHNld2hlcmUuIEFkZGl0aW9uYWxcbnByb3BzIHBhc3NlZCB0byBgPEFycm93S2V5TmF2aWdhdGlvbiAuLi4+YCB3aWxsIGJlIGZvcndhcmRlZCBvbiB0byB0aGUgY29tcG9uZW50IG9yIEhUTUwgdGFnIG5hbWUgeW91J3ZlIHN1cHBsaWVkLlxuXG5UaGUgY2hpbGRyZW4sIHNpbWlsYXJseSwgY2FuIGJlIGFueSB0eXBlIG9mIGNvbXBvbmVudC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJyb3dLZXlOYXZpZ2F0aW9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIG1vZGUgPSB7XG4gICAgICAgIEhPUklaT05UQUw6ICdIT1JJWk9OVEFMJyxcbiAgICAgICAgVkVSVElDQUw6ICdWRVJUSUNBTCcsXG4gICAgICAgIEJPVEg6ICdCT1RIJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICAgIEFueSB2YWxpZCBIVE1MIHRhZyBuYW1lIG9yIGEgUmVhY3QgY29tcG9uZW50IGZhY3RvcnksIGFueXRoaW5nIHRoYXQgY2FuIGJlIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gYFJlYWN0LmNyZWF0ZUVsZW1lbnRgXG4gICAgICAgICovXG4gICAgICAgIGNvbXBvbmVudDogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgICAgQWxsb3dzIGZvciBhIHBhcnRpY3VsYXIgY2hpbGQgdG8gYmUgaW5pdGlhbGx5IHJlYWNoYWJsZSB2aWEgdGFiYmluZ1xuICAgICAgICAqL1xuICAgICAgICBkZWZhdWx0QWN0aXZlQ2hpbGRJbmRleDogUHJvcFR5cGVzLm51bWJlcixcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udHJvbHMgd2hpY2ggYXJyb3cga2V5IGV2ZW50cyBhcmUgY2FwdHVyZWQgdG8gbW92ZSBhY3RpdmUgZm9jdXMgd2l0aGluIHRoZSBsaXN0OlxuICAgICAgICAgKlxuICAgICAgICAgKiBNb2RlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBLZXlzXG4gICAgICAgICAqIC0tLS0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IC0tLS1cbiAgICAgICAgICogYEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkJPVEhgICAgICAgIHwg4qyF77iPIOKeoe+4jyDirIbvuI8g4qyH77iPXG4gICAgICAgICAqIGBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5IT1JJWk9OVEFMYCB8IOKshe+4jyDinqHvuI9cbiAgICAgICAgICogYEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLlZFUlRJQ0FMYCAgIHwg4qyG77iPIOKsh++4j1xuICAgICAgICAgKlxuICAgICAgICAgKiBfTm90ZTogZm9jdXMgbG9vcHMgd2hlbiBhcnJvd2luZyBwYXN0IG9uZSBvZiB0aGUgYm91bmRhcmllczsgdGFiYmluZyBtb3ZlcyB0aGUgdXNlciBhd2F5IGZyb20gdGhlIGxpc3QuX1xuICAgICAgICAqL1xuICAgICAgICBtb2RlOiBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgICAgICAgQXJyb3dLZXlOYXZpZ2F0aW9uLm1vZGUuQk9USCxcbiAgICAgICAgICAgIEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkhPUklaT05UQUwsXG4gICAgICAgICAgICBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5WRVJUSUNBTCxcbiAgICAgICAgXSksXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY29tcG9uZW50OiAnZGl2JyxcbiAgICAgICAgZGVmYXVsdEFjdGl2ZUNoaWxkSW5kZXg6IDAsXG4gICAgICAgIG1vZGU6IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkJPVEgsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEFycm93S2V5TmF2aWdhdGlvbi5kZWZhdWx0UHJvcHMpXG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgYWN0aXZlQ2hpbGRJbmRleDogdGhpcy5wcm9wcy5kZWZhdWx0QWN0aXZlQ2hpbGRJbmRleCxcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuYWN0aXZlQ2hpbGRJbmRleCAhPT0gcHJldlN0YXRlLmFjdGl2ZUNoaWxkSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXModGhpcy5zdGF0ZS5hY3RpdmVDaGlsZEluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmFjdGl2ZUNoaWxkSW5kZXggIT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG51bUNoaWxkcmVuID0gICBuZXh0UHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBSZWFjdC5DaGlsZHJlbi5jb3VudChuZXh0UHJvcHMuY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcblxuICAgICAgICAgICAgaWYgKG51bUNoaWxkcmVuID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlQ2hpbGRJbmRleDogMH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmFjdGl2ZUNoaWxkSW5kZXggPj0gbnVtQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthY3RpdmVDaGlsZEluZGV4OiBudW1DaGlsZHJlbiAtIDF9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEZvY3VzKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IChcbiAgICAgICAgICAgIHRoaXMucmVmcy53cmFwcGVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcbiAgICAgICAgICA/IHRoaXMucmVmcy53cmFwcGVyXG4gICAgICAgICAgOiBmaW5kRE9NTm9kZSh0aGlzLnJlZnMud3JhcHBlcilcbiAgICAgICAgKS5jaGlsZHJlbltpbmRleF07XG5cbiAgICAgICAgaWYgKGNoaWxkTm9kZSAmJiBjaGlsZE5vZGUuaGFzQXR0cmlidXRlKCdkYXRhLXNraXAnKSkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlRm9jdXMoXG4gICAgICAgICAgICAgICAgY2hpbGROb2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpICYgTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkcgPyAtMSA6IDFcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hpbGROb2RlICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGNoaWxkTm9kZSkge1xuICAgICAgICAgICAgY2hpbGROb2RlLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtb3ZlRm9jdXMoZGVsdGEpIHtcbiAgICAgICAgY29uc3QgbnVtQ2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBSZWFjdC5DaGlsZHJlbi5jb3VudCh0aGlzLnByb3BzLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcblxuICAgICAgICBsZXQgbmV4dEluZGV4ID0gdGhpcy5zdGF0ZS5hY3RpdmVDaGlsZEluZGV4ICsgZGVsdGE7XG5cbiAgICAgICAgaWYgKG5leHRJbmRleCA+PSBudW1DaGlsZHJlbikge1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gMDsgLy8gbG9vcFxuICAgICAgICB9IGVsc2UgaWYgKG5leHRJbmRleCA8IDApIHtcbiAgICAgICAgICAgIG5leHRJbmRleCA9IG51bUNoaWxkcmVuIC0gMTsgLy8gcmV2ZXJzZSBsb29wXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHthY3RpdmVDaGlsZEluZGV4OiBuZXh0SW5kZXh9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kZSA9PT0gQXJyb3dLZXlOYXZpZ2F0aW9uLm1vZGUuVkVSVElDQUxcbiAgICAgICAgICAgICAgICB8fCB0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkJPVEgpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUZvY3VzKC0xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkhPUklaT05UQUxcbiAgICAgICAgICAgICAgICB8fCB0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkJPVEgpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUZvY3VzKC0xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLlZFUlRJQ0FMXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5CT1RIKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1cygxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5IT1JJWk9OVEFMXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5CT1RIKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1cygxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUZvY3VzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWZvY3VzLWluZGV4JykpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1mb2N1cy1pbmRleCcpLCAxMCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbilbaW5kZXhdO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthY3RpdmVDaGlsZEluZGV4OiBpbmRleH0pO1xuXG4gICAgICAgICAgICBpZiAoY2hpbGQucHJvcHMub25Gb2N1cykge1xuICAgICAgICAgICAgICAgIGNoaWxkLnByb3BzLm9uRm9jdXMoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2hpbGRyZW4oKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi5tYXAodGhpcy5wcm9wcy5jaGlsZHJlbiwgKGNoaWxkLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICAgICAgICAgICdkYXRhLWZvY3VzLWluZGV4JzogaW5kZXgsXG4gICAgICAgICAgICAgICAgJ2RhdGEtc2tpcCc6IHBhcnNlSW50KGNoaWxkLnByb3BzLnRhYkluZGV4LCAxMCkgPT09IC0xIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBrZXk6IGNoaWxkLmtleSB8fCBpbmRleCxcbiAgICAgICAgICAgICAgICB0YWJJbmRleDogdGhpcy5zdGF0ZS5hY3RpdmVDaGlsZEluZGV4ID09PSBpbmRleCA/IDAgOiAtMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBBcnJvd0tleU5hdmlnYXRpb24uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5oYW5kbGVGb2N1c31cbiAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn0+XG4gICAgICAgICAgICAgICAge3RoaXMuY2hpbGRyZW4oKX1cbiAgICAgICAgICAgIDwvdGhpcy5wcm9wcy5jb21wb25lbnQ+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cblxuLyoqXG4gKiAjIEFzeW5jXG4gKiBfX0EgaGlnaGVyLW9yZGVyIGNvbXBvbmVudCBmb3IgcmVuZGVyaW5nIGRhdGEgdGhhdCBpc24ndCByZWFkeSB5ZXQuX19cbiAqXG4gKiBUaGVyZSBhcmUgcGxlbnR5IG9mIHNpdHVhdGlvbnMgd2hlcmUgeW91IG5lZWQgdG8gZmV0Y2ggY29udGVudCB0byBiZSBkaXNwbGF5ZWQsIGJ1dCB3YW50XG4gKiB0byBzaG93IHNvbWUgc29ydCBvZiBsb2FkaW5nIGdyYXBoaWMgaW4gdGhlIGludGVyaW0uIFRoaXMgY29tcG9uZW50IGhlbHBzIHRvIHNpbXBsaWZ5XG4gKiB0aGF0IHBhdHRlcm4gYnkgaGFuZGxpbmcgY29tbW9uIHR5cGVzIG9mIHByb21pc2VzIGFuZCBwcm92aWRpbmcgYSBzaW1wbGUgbWVjaGFuaXNtXG4gKiBmb3IgbWF0ZXJpYWxpemluZyB0aGUgcmVzb2x2ZWQgZGF0YSBpbnRvIEpTWC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXN5bmMgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKiogYSBjYWxsYmFjayBmb3Igd2hlbiByZWFsIGNvbnRlbnQgaGFzIGJlZW4gcmVuZGVyZWQ7IGVpdGhlciBub3JtYWwgcGFzc2VkIGRhdGEgb3Igd2hlbiBhIHBhc3NlZCBwcm9taXNlIHJlc29sdmVzICovXG4gICAgICAgIGNvbnRlbnRSZW5kZXJlZEZ1bmM6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKiBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIHJlc29sdmVkIHBheWxvYWQgb2YgYSBwcm9taXNlIHByb3ZpZGVkIGJ5IGBwcm9wcy5kYXRhYCBhbmQgcmV0dXJucyByZW5kZXJhYmxlIEpTWDsgZGVmYXVsdHMgdG8gdHJ5aW5nIHRvIHJlbmRlciB0aGUgcmVzb2x2ZWQgdmFsdWUgb2YgdGhlIFByb21pc2UgKi9cbiAgICAgICAgY29udmVydFRvSlNYRnVuYzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqIGEgcHJvbWlzZSwgb3Igc29tZSBvdGhlciBwaWVjZSBvZiBkYXRhIHRvIGJlIHJ1biB0aHJvdWdoIGBwcm9wcy5jb252ZXJ0VG9KU1hGdW5jYCAqL1xuICAgICAgICBkYXRhOiBQcm9wVHlwZXMuYW55LFxuXG4gICAgICAgIC8qKiBjb250ZW50IHRvIGJlIHNob3duIGlmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkICovXG4gICAgICAgIGVycm9yQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqIGNvbnRlbnQgdG8gYmUgc2hvd24gd2hpbGUgdGhlIHByb21pc2UgaXMgaW4gcGVuZGluZyBzdGF0ZSAqL1xuICAgICAgICBsb2FkaW5nQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY29udGVudFJlbmRlcmVkRnVuYzogKCkgPT4ge30sXG4gICAgICAgIGNvbnZlcnRUb0pTWEZ1bmM6ICh4KSA9PiB4LFxuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvckNvbnRlbnQ6ICfimqDvuI8nLFxuICAgICAgICBsb2FkaW5nQ29udGVudDogbnVsbCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoQXN5bmMuZGVmYXVsdFByb3BzKVxuXG4gICAgbW91bnRlZCA9IGZhbHNlXG4gICAgc3RhdGUgPSB7fVxuXG4gICAgY29udmVydERhdGFUb0pTWE9yV2FpdChwcm9wcyA9IHRoaXMucHJvcHMpIHtcbiAgICAgICAgY29uc3Qge2RhdGF9ID0gcHJvcHM7XG5cbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb21wb25lbnQ6IG51bGx9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGEudGhlbigocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSByZXBsYWNlIGlmIHdlJ3JlIGxvb2tpbmcgYXQgdGhlIHNhbWUgcHJvbWlzZSwgb3RoZXJ3aXNlIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUsIGN1cnJlbnRQcm9wcykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogY3VycmVudFByb3BzLmRhdGEgPT09IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjdXJyZW50UHJvcHMuY29udmVydFRvSlNYRnVuYyhwYXlsb2FkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN0YXRlLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sICgpID0+IHRoaXMuc2V0U3RhdGUoe2NvbXBvbmVudDogZmFsc2V9KSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtjb21wb25lbnQ6IHByb3BzLmNvbnZlcnRUb0pTWEZ1bmMoZGF0YSl9KTtcbiAgICB9XG5cbiAgICBmaXJlQ2FsbGJhY2tJZkRhdGFSZW5kZXJlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmNvbnRlbnRSZW5kZXJlZEZ1bmMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpICAgICAgICAgICAgICAgICB7IHRoaXMuY29udmVydERhdGFUb0pTWE9yV2FpdCgpOyB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSAgICAgICAgICAgICAgICAgIHsgdGhpcy5tb3VudGVkID0gdHJ1ZTsgdGhpcy5maXJlQ2FsbGJhY2tJZkRhdGFSZW5kZXJlZCgpOyB9XG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkgICAgICAgICAgICAgICAgIHsgdGhpcy5maXJlQ2FsbGJhY2tJZkRhdGFSZW5kZXJlZCgpOyB9XG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHsgdGhpcy5jb252ZXJ0RGF0YVRvSlNYT3JXYWl0KG5leHRQcm9wcyk7IH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpICAgICAgICAgICAgICAgeyB0aGlzLm1vdW50ZWQgPSBmYWxzZTsgfVxuXG4gICAgZ2V0Q2xhc3NlcyhleHRyYUNsYXNzZXMpIHtcbiAgICAgICAgcmV0dXJuIGN4KCdiLWFzeW5jJywgdGhpcy5wcm9wcy5jbGFzc05hbWUsIGV4dHJhQ2xhc3Nlcywge1xuICAgICAgICAgICAgJ2ItYXN5bmMtZXJyb3InOiB0aGlzLnN0YXRlLmNvbXBvbmVudCA9PT0gZmFsc2UsXG4gICAgICAgICAgICAnYi1hc3luYy1sb2FkaW5nJzogdGhpcy5zdGF0ZS5jb21wb25lbnQgPT09IG51bGwsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY29tcG9uZW50ID09PSBudWxsIHx8IHRoaXMuc3RhdGUuY29tcG9uZW50ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IHsuLi5vbWl0KHRoaXMucHJvcHMsIEFzeW5jLmludGVybmFsS2V5cyl9IGNsYXNzTmFtZT17dGhpcy5nZXRDbGFzc2VzKCl9PlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5jb21wb25lbnQgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5sb2FkaW5nQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmVycm9yQ29udGVudH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KHRoaXMuc3RhdGUuY29tcG9uZW50LCB7XG4gICAgICAgICAgICAuLi5vbWl0KHRoaXMucHJvcHMsIEFzeW5jLmludGVybmFsS2V5cyksXG4gICAgICAgICAgICBjbGFzc05hbWU6IHRoaXMuZ2V0Q2xhc3Nlcyh0aGlzLnN0YXRlLmNvbXBvbmVudC5wcm9wcyAmJiB0aGlzLnN0YXRlLmNvbXBvbmVudC5wcm9wcy5jbGFzc05hbWUpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbi8qKlxuIyBCdXR0b25cbl9fQSBjb250cm9sIHdpdGggXCJwcmVzc2VkXCIgc3RhdGUgc3VwcG9ydC5fX1xuXG5CdXR0b24gaGFzIHR3byBtb2RlcyBvZiBvcGVyYXRpb246XG5cbjEuIHN0YXRlbGVzcyAobGlrZSBhIG5vcm1hbCBgPGJ1dHRvbj5gKVxuICAgYGBganN4XG4gICA8QnV0dG9uIG9uUHJlc3NlZD17ZG9Tb21ldGhpbmd9PmZvbzwvQnV0dG9uPlxuICAgYGBgXG5cbiAgID4gTm90ZSB0aGF0IGluc3RlYWQgb2YgYG9uQ2xpY2tgLCBCdXR0b24gdXNlcyBgb25QcmVzc2VkYC4gVGhpcyBpcyBiZWNhdXNlIHRoZSBjb21wb25lbnQgYWxzbyBsaXN0ZW5zIGZvciBrZXlib2FyZCA8a2JkPkVudGVyPC9rYmQ+IGV2ZW50cywgc28gYG9uQ2xpY2tgIG9ubHkgdGVsbHMgaGFsZiB0aGUgc3RvcnkuIFlvdSBjYW4gc3RpbGwgYmluZCB0byB0aGF0IHBhcnRpY3VsYXIgUmVhY3QgZXZlbnQgdGhvdWdoIGlmIHRoZXJlJ3MgYSBuZWVkIHRvIHRlbGwgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBjbGlja3MgYW5kIEVudGVyIHByZXNzZXMuXG5cbjIuIHN0YXRlZnVsIChsaWtlIGEgdG9nZ2xlLCBlLmcuIGJvbGQtbW9kZSBpbiBhIHJpY2ggdGV4dCBlZGl0b3IpXG5cbiAgIFwic3RhdGVmdWxcIiBtb2RlIGlzIHRyaWdnZXJlZCBieSBwYXNzaW5nIGEgYm9vbGVhbiB0byBgcHJlc3NlZGAuIFRoaXMgZW5hYmxlcyB0aGUgYnV0dG9uIHRvIGFjdCBsaWtlIGEgY29udHJvbGxlZCBjb21wb25lbnQuIFRoZSBgb25VbnByZXNzZWRgIGV2ZW50IGNhbGxiYWNrIHdpbGwgYWxzbyBub3cgYmUgZmlyZWQgd2hlbiBhcHByb3ByaWF0ZS5cblxuICAgYGBganN4XG4gICA8QnV0dG9uXG4gICAgICAgcHJlc3NlZD17dHJ1ZX1cbiAgICAgICBvblByZXNzZWQ9e2RvU29tZXRoaW5nfVxuICAgICAgIG9uVW5wcmVzc2VkPXtkb1NvbWV0aGluZ0Vsc2V9PlxuICAgICAgIGZvb1xuICAgPC9CdXR0b24+XG4gICBgYGBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgICAgQW55IHZhbGlkIEhUTUwgdGFnIG5hbWUgb3IgYSBSZWFjdCBjb21wb25lbnQgZmFjdG9yeSwgYW55dGhpbmcgdGhhdCBjYW4gYmUgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBgUmVhY3QuY3JlYXRlRWxlbWVudGBcbiAgICAgICAgKi9cbiAgICAgICAgY29tcG9uZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBlbGVtZW50IGJlY29tZXMgXCJwcmVzc2VkXCIgb3IgdHJpZ2dlcmVkIGJ5IHRoZSB1c2VyIChtb3VzZSBvciBrZXlib2FyZCk7IGJhY2tpbmcgZGF0YSBtdXN0IGJlIHVwZGF0ZWQgdG8gcGVyc2lzdCB0aGUgc3RhdGUgY2hhbmdlOyB0aGlzIGZ1bmN0aW9uIHdpbGwgc3RpbGwgYmUgY2FsbGVkIGlmIGBwcm9wcy5wcmVzc2VkYCBpcyBub3QgcGFzc2VkXG4gICAgICAgICAqL1xuICAgICAgICBvblByZXNzZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBiZWNvbWVzIFwidW5wcmVzc2VkXCI7IGJhY2tpbmcgZGF0YSBtdXN0IGJlIHVwZGF0ZWQgdG8gcGVyc2lzdCB0aGUgc3RhdGUgY2hhbmdlXG4gICAgICAgICAqL1xuICAgICAgICBvblVucHJlc3NlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZXMgXCJwcmVzc2VkXCIgc3VwcG9ydCBhbmQgYWRkcyB0aGUgYGFyaWEtcHJlc3NlZGAgYXR0cmlidXRlIHRvIHRoZSBgLmItYnV0dG9uYCBub2RlOyBlc3NlbnRpYWxseSBhIFwic3RhdGVmdWxcIiBidXR0b24gKHNlZSB0aGUgXCJ1bnByZXNzZWQvcHJlc3NlZFwiIGV4YW1wbGUgZGVtbyBhYm92ZSlcbiAgICAgICAgICovXG4gICAgICAgIHByZXNzZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGNoaWxkcmVuOiBudWxsLFxuICAgICAgICBjb21wb25lbnQ6ICdidXR0b24nLFxuICAgICAgICBvbkNsaWNrOiBub29wLFxuICAgICAgICBvblByZXNzZWQ6IG5vb3AsXG4gICAgICAgIG9uVW5wcmVzc2VkOiBub29wLFxuICAgICAgICBwcmVzc2VkOiB1bmRlZmluZWQsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEJ1dHRvbi5kZWZhdWx0UHJvcHMpXG5cbiAgICB0b2dnbGVTdGF0ZShldmVudCkge1xuICAgICAgICB0aGlzLnByb3BzW3RoaXMucHJvcHMucHJlc3NlZCA/ICdvblVucHJlc3NlZCcgOiAnb25QcmVzc2VkJ10oZXZlbnQpO1xuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVkKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlU3RhdGUoZXZlbnQpO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMub25DbGljaykpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVkKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgY2FzZSAnU3BhY2UnOlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU3RhdGUoZXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5vbktleURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uS2V5RG93bihldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBCdXR0b24uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J2J1dHRvbidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWJ1dHRvbicsIHRoaXMucHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICdiLWJ1dHRvbi1wcmVzc2FibGUnOiB0eXBlb2YgdGhpcy5wcm9wcy5wcmVzc2VkICE9PSAndW5kZWZpbmVkJyxcbiAgICAgICAgICAgICAgICAgICAgJ2ItYnV0dG9uLXByZXNzZWQnOiB0aGlzLnByb3BzLnByZXNzZWQsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXt0aGlzLnByb3BzLnByZXNzZWR9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgICAgICA8L3RoaXMucHJvcHMuY29tcG9uZW50PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBHZW5lcmF0ZXMgYSB1bmlxdWUgSUQuIEFkZHMgYSBwcmVmaXggc28gaXQgaXMgc3VpdGFibGUgZm9yIHVzZSBhcyBhbiBIVE1MIElELlxuICogQmFzZWQgb24ge0BsaW5rIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2plZC85ODI4ODMgdGhpcyBpbXBsZW1lbnRhdGlvbn0uXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBhIHVuaXF1ZSBpZGVudGlmaWVyXG4gKlxuICogQGV4YW1wbGVcbiAqIHV1aWQoKTsgLy8gYi0xZjJjZDI3Zi0wNzU0LTQzNDQtOWQyMC00MzZhMjAxYjJmODBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXVpZCgpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgIHJldHVybiAnYi0nICsgKFsxZTddKy0xZTMrLTRlMystOGUzKy0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLGE9PihhXk1hdGgucmFuZG9tKCkqMTY+PmEvNCkudG9TdHJpbmcoMTYpKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlICovXG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG4vKipcbiMgQ2hlY2tib3hcbl9fQW4gYWNjZXNzaWJsZSBjaGVja2JveCB3aXRoIGluZGV0ZXJtaW5hdGUgc3VwcG9ydC5fX1xuXG5DaGVja2JveCBpcyBpbXBsZW1lbnRlZCBhcyBhIFwiY29udHJvbGxlZCBpbnB1dFwiLCBtZWFuaW5nIGl0IGlzIGEgZGlyZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtb2RlbCBkYXRhIHBhc3NlZFxuaW5zaWRlLiBVc2VyIGludGVyYWN0aW9uIHdpbGwgYnViYmxlIGNoYW5nZXMgaW4gdGhlIGZvcm0gb2YgYG9uQ2hlY2tlZGAgYW5kIGBvblVuY2hlY2tlZGAgdGhhdCBhIGNvbnRyb2xsZXJcbnZpZXcgbXVzdCBpbnRlcmNlcHQgYW5kIGFwcGx5IGFnYWluc3QgdGhlIGRhdGEgcHJvdmlkZXIuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoZWNrYm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFsbCBpbnB1dC1zcGVjaWZpYyBwcm9wcyBsaWtlIGB2YWx1ZWAsIGBuYW1lYCwgZXRjIHNob3VsZCBiZSBwYXNzZWQgaGVyZSAtLSBjb21tb24gb25lcyBhcmUgbGlzdGVkIGJlbG93LlxuICAgICAgICAgKiBBbHNvIHN1cHBvcnRzIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLWNoZWNrYm94YCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBpbnB1dFByb3BzOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBkZXRlcm1pbmVzIGlmIHRoZSBjaGVja2JveCBpcyByZW5kZXJlZCBhcyBjaGVja2VkL3VuY2hlY2tlZCwgc2VlIFJlYWN0IFtcImNvbnRyb2xsZWQgaW5wdXRzXCJdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvZm9ybXMuaHRtbCNjb250cm9sbGVkLWNvbXBvbmVudHMpKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjaGVja2VkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAgICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHByZXZlbnRzIHRoZSBgb257Q2hlY2tlZCxVbmNoZWNrZWR9YCBldmVudHMgZnJvbSBmaXJpbmcgd2hlbiBgdHJ1ZWBcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICAgICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogZW5hYmxlcyBvciBkaXNhYmxlcyBcIm1peGVkXCIgY2hlY2tib3ggc3RhdGUsIHJlYWQgdGhpcyBbQ1NTLVRyaWNrcyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2luZGV0ZXJtaW5hdGUtY2hlY2tib3hlcy8pICBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhbmQgZXhhbXBsZXNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaW5kZXRlcm1pbmF0ZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHJlbmRlcmVkIGFzIHRoZSBpbnB1dCBjb250cm9sJ3MgZm9ybSBuYW1lXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogIHBhc3NlZC10aHJvdWdoIHRvIHRoZSBpbnB1dCBub2RlLCBsaWtlIGBuYW1lYFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgfSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBSZWFjdC1yZW5kZXJhYmxlIGNvbnRlbnQsIG1vc3QgY29tbW9ubHkgYSBzaW1wbGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLWNoZWNrYm94LWxhYmVsYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBiZWNvbWVzIGNoZWNrZWQ7IGJhY2tpbmcgZGF0YSBtdXN0IGJlIHVwZGF0ZWQgdG8gcGVyc2lzdCB0aGUgc3RhdGUgY2hhbmdlXG4gICAgICAgICAqL1xuICAgICAgICBvbkNoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBiZWNvbWVzIHVuY2hlY2tlZDsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uVW5jaGVja2VkOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICBjaGVja2VkOiBmYWxzZSxcbiAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBsYWJlbDogbnVsbCxcbiAgICAgICAgbGFiZWxQcm9wczoge30sXG4gICAgICAgIG9uQ2hlY2tlZDogbm9vcCxcbiAgICAgICAgb25VbmNoZWNrZWQ6IG5vb3AsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKENoZWNrYm94LmRlZmF1bHRQcm9wcylcblxuICAgIGlkID0gdXVpZCgpXG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5pbmRldGVybWluYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEluZGV0ZXJtaW5hdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICAgICAgaWYgKHByZXZQcm9wcy5pbnB1dFByb3BzLmluZGV0ZXJtaW5hdGUgIT09IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5pbmRldGVybWluYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEluZGV0ZXJtaW5hdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEluZGV0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMucmVmcy5pbnB1dC5pbmRldGVybWluYXRlID0gISF0aGlzLnByb3BzLmlucHV0UHJvcHMuaW5kZXRlcm1pbmF0ZTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2UgPSAoZXZlbnQpID0+IHsgLy8gU2VuZCB0aGUgb3Bwb3NpdGUgc2lnbmFsIGZyb20gd2hhdCB3YXMgcGFzc2VkIHRvIHRvZ2dsZSB0aGUgZGF0YVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pbnB1dFByb3BzLmRpc2FibGVkKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHRoaXMucHJvcHNbIXRoaXMucHJvcHMuaW5wdXRQcm9wcy5jaGVja2VkID8gJ29uQ2hlY2tlZCcgOiAnb25VbmNoZWNrZWQnXSh0aGlzLnByb3BzLmlucHV0UHJvcHMubmFtZSk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2hhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2hhbmdlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlucHV0UHJvcHMuZGlzYWJsZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdGhpcy5yZWZzLmlucHV0LmZvY3VzKCk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2xpY2spKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRBcmlhU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmlucHV0UHJvcHMuaW5kZXRlcm1pbmF0ZSA/ICdtaXhlZCcgOiBTdHJpbmcodGhpcy5wcm9wcy5pbnB1dFByb3BzLmNoZWNrZWQpO1xuICAgIH1cblxuICAgIHJlbmRlcklucHV0KCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcy5pbnB1dFByb3BzLCAnaW5kZXRlcm1pbmF0ZScpfVxuICAgICAgICAgICAgICAgIHJlZj0naW5wdXQnXG4gICAgICAgICAgICAgICAgdHlwZT0nY2hlY2tib3gnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1jaGVja2JveCcsIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2ItY2hlY2tib3gtbWl4ZWQnOiB0aGlzLnByb3BzLmlucHV0UHJvcHMuaW5kZXRlcm1pbmF0ZSxcbiAgICAgICAgICAgICAgICAgICAgJ2ItY2hlY2tib3gtY2hlY2tlZCc6IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAnYi1jaGVja2JveC11bmNoZWNrZWQnOiAhdGhpcy5wcm9wcy5pbnB1dFByb3BzLmluZGV0ZXJtaW5hdGUgJiYgIXRoaXMucHJvcHMuaW5wdXRQcm9wcy5jaGVja2VkLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlucHV0UHJvcHMuaWQgfHwgdGhpcy5pZH1cbiAgICAgICAgICAgICAgICBhcmlhLWNoZWNrZWQ9e3RoaXMuZ2V0QXJpYVN0YXRlKCl9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhYmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5sYWJlbFByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2xhYmVsJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWNoZWNrYm94LWxhYmVsJywgdGhpcy5wcm9wcy5sYWJlbFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIGh0bWxGb3I9e3RoaXMucHJvcHMuaW5wdXRQcm9wcy5pZCB8fCB0aGlzLmlkfT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMubGFiZWx9XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgQ2hlY2tib3guaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1jaGVja2JveC13cmFwcGVyJywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJJbnB1dCgpfVxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckxhYmVsKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgQ2hlY2tib3ggZnJvbSAnLi4vYm91bmRsZXNzLWNoZWNrYm94L2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG4vKipcbiMgQ2hlY2tib3hHcm91cFxuX19BIGNvbnRyb2xsZXIgdmlldyBmb3IgbWFuYWdpbmcgdGhlIGFnZ3JlZ2F0ZSBzdGF0ZSBvZiBtdWx0aXBsZSwgcmVsYXRlZCBjaGVja2JveGVzLl9fXG5cblRoZSBtb3N0IGNvbW1vbiB1c2UgY2FzZSBmb3IgYENoZWNrYm94R3JvdXBgIGlzIGEgXCJzZWxlY3QgYWxsXCIgLyBjaGlsZHJlbiBzY2VuYXJpby4gVGhpcyBwYXJ0aWN1bGFyXG5jb25maWd1cmF0aW9uIGlzIGJ1aWx0LWluIGFuZCBpcyBhY3RpdmF0ZWQgYnkgcGFzc2luZyB0aGUgYHNlbGVjdEFsbGAgcHJvcC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hlY2tib3hHcm91cCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBzZWxlY3RBbGxQb3NpdGlvbiA9IHtcbiAgICAgICAgQkVGT1JFOiB1dWlkKCksXG4gICAgICAgIEFGVEVSOiB1dWlkKCksXG4gICAgfVxuXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBkYXRhIHdpc2hlZCB0byBiZSByZW5kZXJlZCwgZWFjaCBpdGVtIG11c3QgY29uZm9ybSB0byB0aGUgW0NoZWNrYm94IHByb3Agc3BlY10oLi9DaGVja2JveCNwcm9wcylcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiBQcm9wVHlwZXMuYXJyYXlPZihDaGVja2JveC5wcm9wVHlwZXMuaW5wdXRQcm9wcykuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdoZW4gYWxsIGNoaWxkcmVuIGJlY29tZSBjaGVja2VkIChub3QgZmlyZWQgb24gZmlyc3QgcmVuZGVyKSwgbm8gcmV0dXJuXG4gICAgICAgICAqL1xuICAgICAgICBvbkFsbENoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhbGwgY2hpbGRyZW4gYmVjb21lIHVuY2hlY2tlZCAobm90IGZpcmVkIG9uIGZpcnN0IHJlbmRlciksIG5vIHJldHVyblxuICAgICAgICAgKi9cbiAgICAgICAgb25BbGxVbmNoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIHNwZWNpZmljIGNoaWxkIGhhcyBiZWNvbWUgY2hlY2tlZCwgcmV0dXJucyB0aGUgY2hpbGQgZGVmaW5pdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb25DaGlsZENoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIHNwZWNpZmljIGNoaWxkIGhhcyBiZWNvbWUgY2hlY2tlZCwgcmV0dXJucyB0aGUgY2hpbGQgZGVmaW5pdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb25DaGlsZFVuY2hlY2tlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlbmRlcnMgYSBtYXN0ZXIgY2hlY2tib3ggdGhhdCBjYW4gbWFuaXB1bGF0ZSB0aGUgdmFsdWVzIG9mIGFsbCBjaGlsZHJlbiBzaW11bHRhbmVvdXNseVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0QWxsOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogbXVzdCBjb25mb3JtIHRvIHRoZSBbQ2hlY2tib3ggcHJvcCBzcGVjXSguL0NoZWNrYm94I3Byb3BzKVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0QWxsUHJvcHM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHRoZSB0ZXh0IG9yIHJlbmRlcmFibGUgbm9kZSB0byBkaXNwbGF5IG5leHQgdG8gdGhlIGNoZWNrYm94XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgaW5wdXRQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgICAgfSksXG5cbiAgICAgICAgc2VsZWN0QWxsUG9zaXRpb246IFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICBDaGVja2JveEdyb3VwLnNlbGVjdEFsbFBvc2l0aW9uLkJFRk9SRSxcbiAgICAgICAgICAgIENoZWNrYm94R3JvdXAuc2VsZWN0QWxsUG9zaXRpb24uQUZURVIsXG4gICAgICAgIF0pLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgb25BbGxDaGVja2VkOiBub29wLFxuICAgICAgICBvbkFsbFVuY2hlY2tlZDogbm9vcCxcbiAgICAgICAgb25DaGlsZENoZWNrZWQ6IG5vb3AsXG4gICAgICAgIG9uQ2hpbGRVbmNoZWNrZWQ6IG5vb3AsXG4gICAgICAgIHNlbGVjdEFsbDogZmFsc2UsXG4gICAgICAgIHNlbGVjdEFsbFByb3BzOiB7fSxcbiAgICAgICAgc2VsZWN0QWxsUG9zaXRpb246IENoZWNrYm94R3JvdXAuc2VsZWN0QWxsUG9zaXRpb24uQkVGT1JFLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhDaGVja2JveEdyb3VwLmRlZmF1bHRQcm9wcylcblxuICAgIGFsbEl0ZW1zQ2hlY2tlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbXMuZXZlcnkoKGl0ZW0pID0+IGl0ZW0uaW5wdXRQcm9wcy5jaGVja2VkID09PSB0cnVlKTtcbiAgICB9XG5cbiAgICBhbnlJdGVtc0NoZWNrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW1zLnNvbWUoKGl0ZW0pID0+IGl0ZW0uaW5wdXRQcm9wcy5jaGVja2VkID09PSB0cnVlKTtcbiAgICB9XG5cbiAgICByZW5kZXJTZWxlY3RBbGwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdEFsbCkge1xuICAgICAgICAgICAgY29uc3QgYWxsQ2hlY2tlZCA9IHRoaXMuYWxsSXRlbXNDaGVja2VkKCk7XG4gICAgICAgICAgICBjb25zdCB7aW5wdXRQcm9wc30gPSB0aGlzLnByb3BzLnNlbGVjdEFsbFByb3BzO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdzZWxlY3RfYWxsJ1xuICAgICAgICAgICAgICAgICAgICBrZXk9J2NiX3NlbGVjdF9hbGwnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItY2hlY2tib3gtZ3JvdXAtc2VsZWN0YWxsJywgdGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5pbnB1dFByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogYWxsQ2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU6ICFhbGxDaGVja2VkICYmIHRoaXMuYW55SXRlbXNDaGVja2VkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBpbnB1dFByb3BzICYmIGlucHV0UHJvcHMubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBpbnB1dFByb3BzLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2NiX3NlbGVjdF9hbGwnLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17dGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wcy5sYWJlbCB8fCAnU2VsZWN0IEFsbCd9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tlZD17dGhpcy5wcm9wcy5vbkFsbENoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uVW5jaGVja2VkPXt0aGlzLnByb3BzLm9uQWxsVW5jaGVja2VkfSAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckNoZWNrYm94ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgey4uLml0ZW19XG4gICAgICAgICAgICAgICAgICAgIGtleT17aXRlbS5pbnB1dFByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tlZD17dGhpcy5wcm9wcy5vbkNoaWxkQ2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgb25VbmNoZWNrZWQ9e3RoaXMucHJvcHMub25DaGlsZFVuY2hlY2tlZH0gLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckNoaWxkcmVuKCkge1xuICAgICAgICBjb25zdCB0b0JlUmVuZGVyZWQgPSBbdGhpcy5yZW5kZXJDaGVja2JveGVzKCldO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdEFsbCAmJiB0aGlzLnByb3BzLnNlbGVjdEFsbFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMucHJvcHMuc2VsZWN0QWxsUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgQ2hlY2tib3hHcm91cC5zZWxlY3RBbGxQb3NpdGlvbi5CRUZPUkU6XG4gICAgICAgICAgICAgICAgdG9CZVJlbmRlcmVkLnVuc2hpZnQodGhpcy5yZW5kZXJTZWxlY3RBbGwoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQ2hlY2tib3hHcm91cC5zZWxlY3RBbGxQb3NpdGlvbi5BRlRFUjpcbiAgICAgICAgICAgICAgICB0b0JlUmVuZGVyZWQucHVzaCh0aGlzLnJlbmRlclNlbGVjdEFsbCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0b0JlUmVuZGVyZWQ7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIENoZWNrYm94R3JvdXAuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J2dyb3VwJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItY2hlY2tib3gtZ3JvdXAnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckNoaWxkcmVuKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG4vKipcbiMgUG9ydGFsXG5fX0EgaGlnaGVyLW9yZGVyIGNvbXBvbmVudCBmb3IgdGhlIHJlbmRlcmluZyBvZiBjb21wb25lbnRzIG91dHNpZGUgdGhlIG5vcm1hbCBSZWFjdCB0cmVlLl9fXG5cbmBQb3J0YWxgIGlzIHVzZWQgaW4gb3RoZXIgY29tcG9uZW50cyBzdWNoIGFzIGBQb3BvdmVyYCB0byByZW5kZXIgY29udGVudCB0byBwbGFjZXMgbGlrZSB0aGUgSFRNTCBgPGJvZHk+YCB0YWcsIGF2b2lkaW5nIHN0eWxlIGxlYWthZ2UgYW5kIHBhcmVudCBsYXlvdXQgY29udGV4dHMuIE9ubHkgYWNjZXB0cyBhIHNpbmdsZSB0b3AtbGV2ZWwgY2hpbGQ7IG5ha2VkIHRleHQsIGV0YyB3aWxsIGJlIHdyYXBwZWQgaW4gYSBgPGRpdj5gLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3J0YWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8vIHNpbmdsZSBjaGlsZCBvbmx5IC0gYXJyYXlzIG5vdCBhbGxvd2VkXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBub3JtYWwgUmVhY3QgY2hpbGQsIGJ1dCBtdXN0IGJlIHNpbmd1bGFyOyBtdWx0aXBsZSBzaWJsaW5nIGNoaWxkcmVuIG11c3QgaGF2ZSBhIGNvbW1vbiB3cmFwcGVyLCBzdWNoIGFzIGEgXCJsYXlvdXRcIiBgPGRpdj5gXG5cbiAgICAgICAgICog4pyFIE9LOlxuXG4gICAgICAgICAqIGBgYGpzeFxuICAgICAgICAgKiA8UG9ydGFsPlxuICAgICAgICAgKiAgIGZvb1xuICAgICAgICAgKiA8L1BvcnRhbD5cblxuICAgICAgICAgKiA8UG9ydGFsPlxuICAgICAgICAgKiAgIDxkaXY+Zm9vPC9kaXY+XG4gICAgICAgICAqIDwvUG9ydGFsPlxuXG4gICAgICAgICAqIDxQb3J0YWw+XG4gICAgICAgICAqICAgPGRpdj5cbiAgICAgICAgICogICAgICAgPGRpdj5mb288L2Rpdj5cbiAgICAgICAgICogICAgICAgPGRpdj5iYXI8L2Rpdj5cbiAgICAgICAgICogICA8L2Rpdj5cbiAgICAgICAgICogPC9Qb3J0YWw+XG4gICAgICAgICAqIGBgYFxuXG4gICAgICAgICAqIOKblO+4jyBOb3QgT0s6XG5cbiAgICAgICAgICogYGBganN4XG4gICAgICAgICAqIDxQb3J0YWw+XG4gICAgICAgICAqICAgPGRpdj5mb288L2Rpdj5cbiAgICAgICAgICogICA8ZGl2PmJhcjwvZGl2PlxuICAgICAgICAgKiA8L1BvcnRhbD5cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICBjaGlsZHJlbjogUmVhY3QuUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBsb2NhdGlvbiB0byBhcHBlbmQgdGhlIGdlbmVyYXRlZCBwb3J0YWwgYW5kIGNoaWxkIGVsZW1lbnRzXG4gICAgICAgICAqL1xuICAgICAgICBkZXN0aW5hdGlvbjogUHJvcFR5cGVzLmluc3RhbmNlT2YoSFRNTEVsZW1lbnQpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgSUQgdXNlZCB0byBsaW5rIHRoZSBwb3J0YWwgb3JpZ2luIHRvIHRoZSBkZXN0aW5hdGlvbjsgYWRkZWQgdG8gZ2VuZXJhdGVkIGA8ZGl2PmAgYXBwZW5kZWQgdG8gdGhlIGRlc3RpbmF0aW9uIEhUTUwgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgcG9ydGFsSWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBkb2N1bWVudC5ib2R5LFxuICAgICAgICBwb3J0YWxJZDogbnVsbCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoUG9ydGFsLmRlZmF1bHRQcm9wcylcblxuICAgIHN0YXRpYyBQT1JUQUxfREFUQV9BVFRSSUJVVEUgPSAnZGF0YS1wb3J0YWwtaWQnXG5cbiAgICBpZCA9IHV1aWQoKVxuXG4gICAgLy8gdGhlIDxkaXY+IHRoYXQgdGhlIGNoaWxkcmVuIGFyZSByZW5kZXJlZCBpbnRvXG4gICAgJHBvcnRhbCA9IG51bGxcblxuICAgIC8vIHRoZSB0b3AtbGV2ZWwgY2hpbGQgcmVuZGVyZWQgaW50byB0aGUgJHBvcnRhbFxuICAgICRwYXNzZW5nZXIgPSBudWxsO1xuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLiRwb3J0YWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5wcm9wcy5kZXN0aW5hdGlvbi5hcHBlbmRDaGlsZCh0aGlzLiRwb3J0YWwpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyUG9ydGFsbGVkQ29udGVudCgpO1xuICAgIH1cblxuICAgIHJlbmRlclBvcnRhbGxlZENvbnRlbnQoKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gUmVhY3QuaXNWYWxpZEVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbikgPyB0aGlzLnByb3BzLmNoaWxkcmVuIDogKDxkaXY+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9kaXY+KTtcblxuICAgICAgICAvLyB1cGRhdGUgdGhlIHBvcnRhbCBJRCBsaW5rIGlmIG5lZWRlZFxuICAgICAgICB0aGlzLiRwb3J0YWwuaWQgPSB0aGlzLnByb3BzLnBvcnRhbElkIHx8IHRoaXMuaWQ7XG5cbiAgICAgICAgUmVhY3RET00udW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIodGhpcywgY2hpbGQsIHRoaXMuJHBvcnRhbCk7XG4gICAgICAgIHRoaXMuJHBhc3NlbmdlciA9IHRoaXMuJHBvcnRhbC5jaGlsZHJlblswXTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7IHRoaXMucmVuZGVyUG9ydGFsbGVkQ29udGVudCgpOyB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZSh0aGlzLiRwb3J0YWwpO1xuICAgICAgICB0aGlzLnByb3BzLmRlc3RpbmF0aW9uLnJlbW92ZUNoaWxkKHRoaXMuJHBvcnRhbCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBQb3J0YWwuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICB7Li4ue1tQb3J0YWwuUE9SVEFMX0RBVEFfQVRUUklCVVRFXTogdGhpcy5wcm9wcy5wb3J0YWxJZCB8fCB0aGlzLmlkfX0gLz5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IFBvcnRhbCBmcm9tICcuLi9ib3VuZGxlc3MtcG9ydGFsL2luZGV4JztcbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB1dWlkIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy11dWlkL2luZGV4JztcblxuY29uc3QgdG9BcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuLyoqXG4jIERpYWxvZ1xuX19BIG5vbi1ibG9ja2luZywgZm9jdXMtc3RlYWxpbmcgY29udGFpbmVyLl9fXG5cbkEgZGlhbG9nIGRpZmZlcnMgZnJvbSBhIG1vZGFsIGluIHRoYXQgaXQgZG9lcyBub3QgY29tZSB3aXRoIGEgbWFza2luZyBsYXllciAodG8gb2JzY3VyZSB0aGUgcmVzdCBvZiB0aGUgcGFnZSlcbmFuZCB0aGUgdXNlciBjYW4gY2hvb3NlIHRvIHNoaWZ0IGZvY3VzIGF3YXkgZnJvbSB0aGUgZGlhbG9nIGNvbnRlbnRzIHZpYSBtb3VzZSBjbGljayBvciBhIGtleWJvYXJkIHNob3J0Y3V0LlxuXG5TcGVjaWZpYyBhcmVhcyAoaGVhZGVyLCBib2R5LCBmb290ZXIpIGFyZSBkZWZpbmVkIHRvIHByb3ZpZGUgZWFzeSBjb25mb3JtYW5jZSB0byB0aGVcbltXQUktQVJJQSBzcGVjXShodHRwOi8vd3d3LnczLm9yZyAqIC9UUi93YWktYXJpYS9zdGF0ZXNfYW5kX3Byb3BlcnRpZXMjYXJpYS1sYWJlbGxlZGJ5KSBmb3IgYGFyaWEtbGFiZWxsZWRieWBcbmFuZCBgYXJpYS1kZXNjcmliZWRieWAgKHNjcmVlbiByZWFkZXIgICogYWNjZXNzaWJpbGl0eSkuIFRoZWlyIHVzZSBpcyBvcHRpb25hbCwgYnV0IGVuY291cmFnZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpYWxvZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhcmJpdHJhcnkgY29udGVudCB0byBiZSByZW5kZXJlZCBhZnRlciB0aGUgZGlhbG9nIGluIHRoZSBET01cbiAgICAgICAgICovXG4gICAgICAgIGFmdGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYXJiaXRyYXJ5IGNvbnRlbnQgdG8gYmUgcmVuZGVyZWQgYmVmb3JlIHRoZSBkaWFsb2cgaW4gdGhlIERPTVxuICAgICAgICAgKi9cbiAgICAgICAgYmVmb3JlOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItZGlhbG9nLWJvZHlgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGJvZHlQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyBpZiBmb2N1cyBpcyBhbGxvd2VkIHRvIG1vdmUgYXdheSBmcm9tIHRoZSBkaWFsb2dcbiAgICAgICAgICovXG4gICAgICAgIGNhcHR1cmVGb2N1czogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBlbmFibGUgZGV0ZWN0aW9uIG9mIFwiRXNjYXBlXCIga2V5cHJlc3NlcyB0byB0cmlnZ2VyIGBwcm9wcy5vbkNsb3NlYDsgaWYgYSBmdW5jdGlvbiBpcyBwcm92aWRlZCwgdGhlIHJldHVyblxuICAgICAgICAgKiB2YWx1ZSBkZXRlcm1pbmVzIGlmIHRoZSBkaWFsb2cgd2lsbCBiZSBjbG9zZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlT25Fc2NLZXk6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZSBkZXRlY3Rpb24gb2YgY2xpY2tzIGluc2lkZSB0aGUgZGlhbG9nIGFyZWEgdG8gdHJpZ2dlciBgcHJvcHMub25DbG9zZWA7IGlmIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIHRoZSByZXR1cm5cbiAgICAgICAgICogdmFsdWUgZGV0ZXJtaW5lcyBpZiB0aGUgZGlhbG9nIHdpbGwgYmUgY2xvc2VkXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZU9uSW5zaWRlQ2xpY2s6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZSBkZXRlY3Rpb24gb2YgY2xpY2tzIG91dHNpZGUgdGhlIGRpYWxvZyBhcmVhIHRvIHRyaWdnZXIgYHByb3BzLm9uQ2xvc2VgOyBpZiBhIGZ1bmN0aW9uIGlzIHByb3ZpZGVkLCB0aGUgcmV0dXJuXG4gICAgICAgICAqIHZhbHVlIGRldGVybWluZXMgaWYgdGhlIGRpYWxvZyB3aWxsIGJlIGNsb3NlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xvc2VPbk91dHNpZGVDbGljazogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgICAgIFByb3BUeXBlcy5mdW5jLFxuICAgICAgICBdKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZW5hYmxlIGRldGVjdGlvbiBvZiBmb2N1cyBvdXRzaWRlIHRoZSBkaWFsb2cgYXJlYSB0byB0cmlnZ2VyIGBwcm9wcy5vbkNsb3NlYDsgaWYgYSBmdW5jdGlvbiBpcyBwcm92aWRlZCwgdGhlIHJldHVyblxuICAgICAgICAgKiB2YWx1ZSBkZXRlcm1pbmVzIGlmIHRoZSBkaWFsb2cgd2lsbCBiZSBjbG9zZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlT25PdXRzaWRlRm9jdXM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZSBkZXRlY3Rpb24gb2Ygc2Nyb2xsIGFuZCBtb3VzZXdoZWVsIGV2ZW50cyBvdXRzaWRlIHRoZSBkaWFsb2cgYXJlYSB0byB0cmlnZ2VyIGBwcm9wcy5vbkNsb3NlYDsgaWYgYSBmdW5jdGlvXG4gICAgICAgICAqIGlzIHByb3ZpZGVkLCB0aGUgcmV0dXJuIHZhbHVlIGRldGVybWluZXMgaWYgdGhlIGRpYWxvZyB3aWxsIGJlIGNsb3NlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xvc2VPbk91dHNpZGVTY3JvbGw6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRleHQsIFJlYWN0RWxlbWVudHMsIGV0Yy4gY29tcHJpc2luZyB0aGUgXCJmb290ZXJcIiBhcmVhIG9mIHRoZSBkaWFsb2csIGUuZy4gY29uZmlybS9jYW5jZWwgYnV0dG9uc1xuICAgICAgICAgKi9cbiAgICAgICAgZm9vdGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItZGlhbG9nLWZvb3RlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgZm9vdGVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRleHQsIFJlYWN0RWxlbWVudHMsIGV0Yy4gdG8gcmVwcmVzZW50IHRoZSBcInRpdGxlIGJhclwiIGFyZWEgb2YgdGhlIGRpYWxvZ1xuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItZGlhbG9nLWhlYWRlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgY3VzdG9tIGV2ZW50IGhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZGlhbG9nIHNob3VsZCBiZSB1bnJlbmRlcmVkIGJ5IGl0cyBwYXJlbnQ7IHRoZSBldmVudCBvY2N1cnMgaWYgb25lIG9yIG1vcmUgb2YgdGhlIGBjbG9zZU9uYCBwcm9wcyAoYGNsb3NlT25Fc2NLZXlgLCBgY2xvc2VPbk91dHNpZGVDbGlja2AsIGV0Yy4pIGFyZSBwYXNzZWQgYXMgYHRydWVgIGFuZCB0aGUgZGlzbWlzc2FsIGNyaXRlcmlhIGFyZSBzYXRpc2ZpZWRcbiAgICAgICAgICovXG4gICAgICAgIG9uQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1kaWFsb2ctd3JhcHBlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgd3JhcHBlclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGFmdGVyOiBudWxsLFxuICAgICAgICBiZWZvcmU6IG51bGwsXG4gICAgICAgIGJvZHlQcm9wczoge30sXG4gICAgICAgIGNhcHR1cmVGb2N1czogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGNsb3NlT25Fc2NLZXk6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uSW5zaWRlQ2xpY2s6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uT3V0c2lkZUNsaWNrOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbk91dHNpZGVGb2N1czogZmFsc2UsXG4gICAgICAgIGNsb3NlT25PdXRzaWRlU2Nyb2xsOiBmYWxzZSxcbiAgICAgICAgZm9vdGVyOiBudWxsLFxuICAgICAgICBmb290ZXJQcm9wczoge30sXG4gICAgICAgIGhlYWRlcjogbnVsbCxcbiAgICAgICAgaGVhZGVyUHJvcHM6IHt9LFxuICAgICAgICBvbkNsb3NlOiBub29wLFxuICAgICAgICB3cmFwcGVyUHJvcHM6IHt9LFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhEaWFsb2cuZGVmYXVsdFByb3BzKVxuXG4gICAgbW91bnRlZCA9IGZhbHNlXG5cbiAgICAvLyBmYWxsYmFja3MgaWYgb25lIGlzbid0IHBhc3NlZFxuICAgIHV1aWRIZWFkZXIgPSB1dWlkKClcbiAgICB1dWlkQm9keSA9IHV1aWQoKVxuXG4gICAgaXNQYXJ0T2ZEaWFsb2cobm9kZSkge1xuICAgICAgICBpZiAoIW5vZGUgfHwgbm9kZSA9PT0gd2luZG93KSB7IHJldHVybiBmYWxzZTsgfVxuXG4gICAgICAgIGNvbnN0IHJvb3RzID0gW3RoaXMuJHdyYXBwZXJdLmNvbmNhdChcbiAgICAgICAgICAgIHRvQXJyYXkuY2FsbChcbiAgICAgICAgICAgICAgICB0aGlzLiR3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoYFske1BvcnRhbC5QT1JUQUxfREFUQV9BVFRSSUJVVEV9XWApXG4gICAgICAgICAgICApLm1hcCgoZG9tKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkb20uZ2V0QXR0cmlidXRlKFBvcnRhbC5QT1JUQUxfREFUQV9BVFRSSUJVVEUpKSlcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBlbGVtZW50ID0gbm9kZS5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUgPyBub2RlLnBhcmVudE5vZGUgOiBub2RlO1xuXG4gICAgICAgIHJldHVybiByb290cy5zb21lKChkb20pID0+IGRvbS5jb250YWlucyhlbGVtZW50KSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlT3V0c2lkZUNsaWNrLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2ssIHRydWUpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlT3V0c2lkZVNjcm9sbFdoZWVsLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5oYW5kbGVPdXRzaWRlU2Nyb2xsV2hlZWwsIHRydWUpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNhcHR1cmVGb2N1cyAmJiAhdGhpcy5pc1BhcnRPZkRpYWxvZyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2ssIHRydWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCB0aGlzLmhhbmRsZU91dHNpZGVDbGljaywgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuaGFuZGxlRm9jdXMsIHRydWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5oYW5kbGVPdXRzaWRlU2Nyb2xsV2hlZWwsIHRydWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLmhhbmRsZU91dHNpZGVTY3JvbGxXaGVlbCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgc2hvdWxkRGlhbG9nQ2xvc2VPbkV2ZW50KHByb3AsIGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKHRoaXMucHJvcHNbcHJvcF0pID8gdGhpcy5wcm9wc1twcm9wXShldmVudCkgOiB0aGlzLnByb3BzW3Byb3BdO1xuICAgIH1cblxuICAgIGhhbmRsZUZvY3VzID0gKG5hdGl2ZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5jYXB0dXJlRm9jdXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbk91dHNpZGVGb2N1cycsIG5hdGl2ZUV2ZW50KSAmJiAhdGhpcy5pc1BhcnRPZkRpYWxvZyhuYXRpdmVFdmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMucHJvcHMub25DbG9zZSwgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGV4cGxpY2l0T3JpZ2luYWxUYXJnZXQgaXMgZm9yIEZpcmVmb3gsIGFzIGl0IGRvZXNuJ3Qgc3VwcG9ydCByZWxhdGVkVGFyZ2V0XG4gICAgICAgIGxldCBwcmV2aW91cyA9IG5hdGl2ZUV2ZW50LmV4cGxpY2l0T3JpZ2luYWxUYXJnZXQgfHwgbmF0aXZlRXZlbnQucmVsYXRlZFRhcmdldDtcblxuICAgICAgICBpZiAodGhpcy5pc1BhcnRPZkRpYWxvZyhwcmV2aW91cykgJiYgIXRoaXMuaXNQYXJ0T2ZEaWFsb2cobmF0aXZlRXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgbmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHByZXZpb3VzLmZvY3VzKCk7IC8vIHJlc3RvcmUgZm9jdXNcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbkVzY0tleScsIGV2ZW50KSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMucHJvcHMub25DbG9zZSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUluc2lkZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbkluc2lkZUNsaWNrJywgZXZlbnQpKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnByb3BzLm9uQ2xvc2UsIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlT3V0c2lkZUNsaWNrID0gKG5hdGl2ZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbk91dHNpZGVDbGljaycsIG5hdGl2ZUV2ZW50KSAmJiAhdGhpcy5pc1BhcnRPZkRpYWxvZyhuYXRpdmVFdmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnByb3BzLm9uQ2xvc2UsIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlT3V0c2lkZVNjcm9sbFdoZWVsID0gKG5hdGl2ZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbk91dHNpZGVTY3JvbGwnLCBuYXRpdmVFdmVudCkgJiYgIXRoaXMuaXNQYXJ0T2ZEaWFsb2cobmF0aXZlRXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhpcy5wcm9wcy5vbkNsb3NlLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckJvZHkoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuYm9keVByb3BzfVxuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmJvZHlQcm9wcy5pZCB8fCB0aGlzLnV1aWRCb2R5fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItZGlhbG9nLWJvZHknLCB0aGlzLnByb3BzLmJvZHlQcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlckZvb3RlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZm9vdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxmb290ZXJcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuZm9vdGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItZGlhbG9nLWZvb3RlcicsIHRoaXMucHJvcHMuZm9vdGVyUHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmZvb3Rlcn1cbiAgICAgICAgICAgICAgICA8L2Zvb3Rlcj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJIZWFkZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8aGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmhlYWRlclByb3BzfVxuICAgICAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5oZWFkZXJQcm9wcy5pZCB8fCB0aGlzLnV1aWRIZWFkZXJ9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItZGlhbG9nLWhlYWRlcicsIHRoaXMucHJvcHMuaGVhZGVyUHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmhlYWRlcn1cbiAgICAgICAgICAgICAgICA8L2hlYWRlcj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJGb2N1c0JvdW5kYXJ5KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYXB0dXJlRm9jdXMpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Itb2Zmc2NyZWVuJyB0YWJJbmRleD0nMCcgYXJpYS1oaWRkZW49J3RydWUnPiZuYnNwOzwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gLy8gdXNlZCB0byBsb2NrIGZvY3VzIGludG8gYSBwYXJ0aWN1bGFyIHN1YnNldCBvZiBET01cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy53cmFwcGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgcmVmPXsobm9kZSkgPT4gKHRoaXMuJHdyYXBwZXIgPSBub2RlKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWRpYWxvZy13cmFwcGVyJywgdGhpcy5wcm9wcy53cmFwcGVyUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICB0YWJJbmRleD0nMCc+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRm9jdXNCb3VuZGFyeSgpfVxuXG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYmVmb3JlfVxuXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBEaWFsb2cuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXsobm9kZSkgPT4gKHRoaXMuJGRpYWxvZyA9IG5vZGUpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWRpYWxvZycsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVJbnNpZGVDbGlja31cbiAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9J2RpYWxvZydcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbGxlZGJ5PXt0aGlzLnV1aWRIZWFkZXJ9XG4gICAgICAgICAgICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9e3RoaXMudXVpZEJvZHl9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PScwJz5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVySGVhZGVyKCl9XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckJvZHkoKX1cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRm9vdGVyKCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5hZnRlcn1cblxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckZvY3VzQm91bmRhcnkoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge2ZpbmRET01Ob2RlfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xuXG5mdW5jdGlvbiB0b0koc3RyaW5nTnVtYmVyKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHN0cmluZ051bWJlciwgMTApO1xufVxuXG5mdW5jdGlvbiByZXNjYWxlKGluc3RhbmNlKSB7XG4gICAgY29uc3Qgbm9kZSA9IGZpbmRET01Ob2RlKGluc3RhbmNlKTtcbiAgICBjb25zdCBjb250YWluZXJCb3ggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLnBhcmVudE5vZGUpO1xuICAgIGNvbnN0IGZvbnRTaXplID0gdG9JKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLmZvbnRTaXplKTtcblxuICAgIGxldCBjb250YWluZXJIZWlnaHQgPSB0b0koY29udGFpbmVyQm94LmhlaWdodCk7XG4gICAgbGV0IGNvbnRhaW5lcldpZHRoID0gdG9JKGNvbnRhaW5lckJveC53aWR0aCk7XG5cbiAgICAvLyBuZWVkIHRvIGFjY291bnQgZm9yIHBhZGRpbmdcbiAgICBpZiAoY29udGFpbmVyQm94LmJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnIHx8IGNvbnRhaW5lckJveC5ib3hTaXppbmcgPT09ICdwYWRkaW5nLWJveCcpIHtcbiAgICAgICAgY29udGFpbmVySGVpZ2h0IC09IHRvSShjb250YWluZXJCb3gucGFkZGluZ1RvcCkgKyB0b0koY29udGFpbmVyQm94LnBhZGRpbmdCb3R0b20pO1xuICAgICAgICBjb250YWluZXJXaWR0aCAtPSB0b0koY29udGFpbmVyQm94LnBhZGRpbmdMZWZ0KSArIHRvSShjb250YWluZXJCb3gucGFkZGluZ1JpZ2h0KTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpbWl6ZUZvckhlaWdodCA9IE1hdGguZmxvb3IoKGZvbnRTaXplIC8gbm9kZS5vZmZzZXRIZWlnaHQpICogY29udGFpbmVySGVpZ2h0KTtcbiAgICBjb25zdCBvcHRpbWl6ZUZvcldpZHRoID0gTWF0aC5mbG9vcigoZm9udFNpemUgLyBub2RlLm9mZnNldFdpZHRoKSAqIGNvbnRhaW5lcldpZHRoKTtcblxuICAgIC8vIHRoZSB8fCAxIGlzIGEgZmFsbGJhY2sgdG8gcHJldmVudCBmb250U2l6ZSBmcm9tIGJlaW5nIHNldCB0byB6ZXJvLCB3aGljaCBmdWJhcnMgdGhpbmdzXG4gICAgbm9kZS5zdHlsZS5mb250U2l6ZSA9IChNYXRoLm1pbihpbnN0YW5jZS5wcm9wcy5tYXhGb250U2l6ZSwgb3B0aW1pemVGb3JIZWlnaHQsIG9wdGltaXplRm9yV2lkdGgpIHx8IDEpICsgJ3B4Jztcbn1cblxuZnVuY3Rpb24gaGFuZGxlV2luZG93UmVzaXplKCkge1xuICAgIGluc3RhbmNlcy5mb3JFYWNoKChpbnN0YW5jZSkgPT4gcmVzY2FsZShpbnN0YW5jZSkpO1xufVxuXG5mdW5jdGlvbiByZWdpc3Rlckluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgaWYgKGluc3RhbmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVdpbmRvd1Jlc2l6ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaW5zdGFuY2VzLnB1c2goaW5zdGFuY2UpO1xufVxuXG5mdW5jdGlvbiB1bnJlZ2lzdGVySW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICBpbnN0YW5jZXMuc3BsaWNlKGluc3RhbmNlcy5pbmRleE9mKGluc3RhbmNlKSwgMSk7XG5cbiAgICBpZiAoaW5zdGFuY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlV2luZG93UmVzaXplLCB0cnVlKTtcbiAgICB9XG59XG5cbi8qKlxuIyBGaXR0ZWRUZXh0XG5fX0ZpdCBnaXZlbiB0ZXh0IGluc2lkZSBhIHBhcmVudCBjb250YWluZXIsIG9iZXlpbmcgaW1wbGljdCBhbmQgZXhwbGljaXQgY29uc3RyYWludHMuX19cblxuVGhlIG1vc3QgY29tbW9uIHVzZSBjYXNlIGZvciB0aGlzIGNsYXNzIGlzIGZpdHRpbmcgc2luZ2xlLWxpbmUgdGV4dCBvZiB1bmtub3duL3ZhcmlhYmxlIGxlbmd0aCBpbnRvIGEgYnV0dG9uIG9yIGhlYWRpbmcgd2l0aCBmaW5pdGUgYm91bmRhcmllcy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml0dGVkVGV4dCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgdmFsaWQgSFRNTCB0YWcgbmFtZSBvciBhIFJlYWN0IGNvbXBvbmVudCBmYWN0b3J5LCBhbnl0aGluZyB0aGF0IGNhbiBiZSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBSZWFjdC5jcmVhdGVFbGVtZW50YFxuICAgICAgICAgKi9cbiAgICAgICAgY29tcG9uZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFuIHVwcGVyIGJvdW5kIChpbiBwaXhlbHMpIGZvciBob3cgbGFyZ2UgdGhlIHRleHQgaXMgYWxsb3dlZCB0byBncm93XG4gICAgICAgICAqL1xuICAgICAgICBtYXhGb250U2l6ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBjb21wb25lbnQ6ICdzcGFuJyxcbiAgICAgICAgbWF4Rm9udFNpemU6IE51bWJlci5NQVhfVkFMVUUsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEZpdHRlZFRleHQuZGVmYXVsdFByb3BzKVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHJlc2NhbGUodGhpcyk7XG5cbiAgICAgICAgLy8gdGhlcmUgYXJlIGxpa2VseSB0byBiZSBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgdGhpcyBjb21wb25lbnQgb24gYSBwYWdlLCBzbyBpdCBtYWtlcyBzZW5zZSB0byBqdXN0IHVzZVxuICAgICAgICAvLyBhIHNoYXJlZCBnbG9iYWwgcmVzaXplIGxpc3RlbmVyIGluc3RlYWQgb2YgZWFjaCBjb21wb25lbnQgaGF2aW5nIGl0cyBvd25cbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIHJlc2NhbGUodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHVucmVnaXN0ZXJJbnN0YW5jZSh0aGlzKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBGaXR0ZWRUZXh0LmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi10ZXh0JywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgIDwvdGhpcy5wcm9wcy5jb21wb25lbnQ+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbi8qKlxuIyBJbWFnZVxuX19BbiBpbWFnZSBibG9jayB3aXRoIHBsYWNlaG9sZGVyIHN1cHBvcnQgZm9yIGxvYWRpbmcgYW5kIGZhbGxiYWNrIHNjZW5hcmlvcy5fX1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBzdGF0dXMgPSB7XG4gICAgICAgIExPQURJTkc6ICdMT0FESU5HJyxcbiAgICAgICAgTE9BREVEOiAnTE9BREVEJyxcbiAgICAgICAgRVJST1I6ICdFUlJPUicsXG4gICAgfVxuXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgd3JpdHRlbiBkZXNjcmlwdGlvbiBvZiB0aGUgaW1hZ2UgZm9yIHNlYXJjaCBlbmdpbmVzLCBob3ZlcnRleHQgYW5kIHRob3NlIHVzaW5nIGFjY2Vzc2liaWxpdHkgdGVjaG5vbG9naWVzOyBhcHBsaWVkIHRvIHRoZSBgLmItaW1hZ2VgIGFzIHRoZSBIVE1MIGF0dHJpYnV0ZXMgYGFsdGAgb3IgYHRpdGxlYCwgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIHJlbmRlcmVkIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGFsdDogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZW1pdHMgdGhlIGltYWdlIGFzIGEgYDxkaXY+YCB3aXRoIGBiYWNrZ3JvdW5kLWltYWdlYCBjc3MgcHJvcGVydHkgc2V0IGluc3RlYWQgb2YgYDxpbWc+YFxuICAgICAgICAgKi9cbiAgICAgICAgZGlzcGxheUFzQmFja2dyb3VuZEltYWdlOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItaW1hZ2VgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGltYWdlUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgdmFsaWQgcGF0aCB0byB0aGUgZGVzaXJlZCBpbWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgc3JjOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLWltYWdlLXN0YXR1c2Agbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdHVzUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgYWx0OiBudWxsLFxuICAgICAgICBkaXNwbGF5QXNCYWNrZ3JvdW5kSW1hZ2U6IGZhbHNlLFxuICAgICAgICBpbWFnZVByb3BzOiB7fSxcbiAgICAgICAgc3JjOiAnYWJvdXQ6YmxhbmsnLFxuICAgICAgICBzdGF0dXNQcm9wczoge30sXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEltYWdlLmRlZmF1bHRQcm9wcylcblxuICAgIHN0YXRlID0ge1xuICAgICAgICBzdGF0dXM6IEltYWdlLnN0YXR1cy5MT0FESU5HLFxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcHMuc3JjICE9PSB0aGlzLnByb3BzLnNyYykge1xuICAgICAgICAgICAgdGhpcy5yZXNldFByZWxvYWRlcigpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RhdHVzOiBJbWFnZS5zdGF0dXMuTE9BRElOR30pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMucHJlbG9hZCgpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5wcmVsb2FkKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMucmVzZXRQcmVsb2FkZXIoKTtcbiAgICB9XG5cbiAgICByZXNldFByZWxvYWRlcigpIHtcbiAgICAgICAgdGhpcy5sb2FkZXIub25sb2FkID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2FkZXIub25lcnJvciA9IG51bGw7XG4gICAgICAgIHRoaXMubG9hZGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBwcmVsb2FkKCkge1xuICAgICAgICBpZiAodGhpcy5sb2FkZXIpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdGhpcy5sb2FkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgICAgICB0aGlzLmxvYWRlci5vbmxvYWQgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHtzdGF0dXM6IEltYWdlLnN0YXR1cy5MT0FERUR9KTtcbiAgICAgICAgdGhpcy5sb2FkZXIub25lcnJvciA9ICgpID0+IHRoaXMuc2V0U3RhdGUoe3N0YXR1czogSW1hZ2Uuc3RhdHVzLkVSUk9SfSk7XG5cbiAgICAgICAgdGhpcy5sb2FkZXIuc3JjID0gdGhpcy5wcm9wcy5zcmM7XG4gICAgfVxuXG4gICAgcmVuZGVySW1hZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRpc3BsYXlBc0JhY2tncm91bmRJbWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmltYWdlUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0naW1hZ2UnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItaW1hZ2UnLCB0aGlzLnByb3BzLmltYWdlUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuYWx0fVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5wcm9wcy5pbWFnZVByb3BzLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7dGhpcy5wcm9wcy5zcmN9KWAsXG4gICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5pbWFnZVByb3BzfVxuICAgICAgICAgICAgICAgIHJlZj0naW1hZ2UnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1pbWFnZScsIHRoaXMucHJvcHMuaW1hZ2VQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIHNyYz17dGhpcy5wcm9wcy5zcmN9XG4gICAgICAgICAgICAgICAgYWx0PXt0aGlzLnByb3BzLmFsdH1cbiAgICAgICAgICAgICAgICBvbkxvYWQ9e25vb3B9XG4gICAgICAgICAgICAgICAgb25FcnJvcj17bm9vcH0gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJTdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IHsuLi50aGlzLnByb3BzLnN0YXR1c1Byb3BzfVxuICAgICAgICAgICAgICAgICByZWY9J3N0YXR1cydcbiAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1pbWFnZS1zdGF0dXMnLCB0aGlzLnByb3BzLnN0YXR1c1Byb3BzLmNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAnYi1pbWFnZS1sb2FkaW5nJzogdGhpcy5zdGF0ZS5zdGF0dXMgPT09IEltYWdlLnN0YXR1cy5MT0FESU5HLFxuICAgICAgICAgICAgICAgICAgICAnYi1pbWFnZS1sb2FkZWQnOiB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gSW1hZ2Uuc3RhdHVzLkxPQURFRCxcbiAgICAgICAgICAgICAgICAgICAgJ2ItaW1hZ2UtZXJyb3InOiB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gSW1hZ2Uuc3RhdHVzLkVSUk9SLFxuICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgcm9sZT0ncHJlc2VudGF0aW9uJyAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBJbWFnZS5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWltYWdlLXdyYXBwZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckltYWdlKCl9XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyU3RhdHVzKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImV4cG9ydCBkZWZhdWx0ICh0ZXN0KSA9PiB0eXBlb2YgdGVzdCA9PT0gJ3N0cmluZyc7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBpc1N0cmluZyBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtc3RyaW5nL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuXG4vKipcbiMgSW5wdXRcbl9fQW4gaW5wdXQgY29udHJvbCB3aXRoIHBsYWNlaG9sZGVyIGVtdWxhdGlvbiBmb3Igbm9uLXN1cHBvcnRpbmcgcGxhdGZvcm1zLl9fXG5cbklucHV0IGFic3RyYWN0cyBhd2F5IHRoZSBjcm9zcy1wbGF0Zm9ybSBkaWZmZXJlbmNlcyBvZiBwbGFjZWhvbGRlciBzdHlsaW5nIGFuZCBiZWhhdmlvcnMsIGZvciBleGFtcGxlOiBJbnRlcm5ldCBFeHBsb3JlciBkaXNtaXNzZXMgbmF0aXZlIHBsYWNlaG9sZGVycyBvbiBpbnB1dCBmb2N1cyBhbmQgb3RoZXIgcGxhdGZvcm1zIGRvIG5vdC4gVGhpcyBjb21wb25lbnQgZW5zdXJlcyB0aGF0IHRleHQgaW5wdXQgY29udHJvbHMgd2lsbCBmZWVsIGFuZCBiZWhhdmUgc2ltaWxhcmx5IG9uIG1vcmUgZGV2aWNlcy5cblxuIyMgQ29tcG9uZW50IEluc3RhbmNlIE1ldGhvZHNcblxuV2hlbiB1c2luZyBgSW5wdXRgIGluIHlvdXIgcHJvamVjdCwgeW91IG1heSBjYWxsIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyBvbiBhIHJlbmRlcmVkIGluc3RhbmNlIG9mIHRoZSBjb21wb25lbnQuIFVzZSBbYHJlZnNgXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3JlZnMtYW5kLXRoZS1kb20uaHRtbCkgdG8gZ2V0IHRoZSBpbnN0YW5jZS5cblxuLSBfX2dldFZhbHVlKClfX1xuICByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBpbnB1dCBmaWVsZFxuXG4tIF9fc2V0VmFsdWUoc3RyaW5nKV9fXG4gIHByb2dyYW1tYXRpY2FsbHkgc2V0IHRoZSBpbnB1dCB2YWx1ZTsgdXNlZnVsIGZvciBjbGVhcmluZyBvdXQgdGhlIGlucHV0IGluIFwidW5jb250cm9sbGVkXCIgbW9kZSAtLSBub3RlIHRoYXQgZGlnZ2luZyBpbnRvIHRoZSBpbnRlcm5hbHMgYW5kIHNldHRpbmcgdGhlIGByZWZzLmZpZWxkLnZhbHVlID0gJydgIGRpcmVjdGx5IHdpbGwgbm90IHRyaWdnZXIgZXZlbnRzIGFuZCBtZXNzZXMgdXAgdGhlIGludGVybmFsIHN0YXRlIG9mIHRoZSBjb21wb25lbnRcblxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnB1dCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0cmlnZ2VycyB0aGUgcGxhY2Vob2xkZXIgdG8gZGlzYXBwZWFyIHdoZW4gdGhlIGlucHV0IGZpZWxkIGlzIGZvY3VzZWQsIHJlYXBwZWFycyB3aGVuIHRoZSB1c2VyIGhhcyB0YWJiZWQgYXdheSBvciBmb2N1cyBpcyBtb3ZlZFxuICAgICAgICAgKi9cbiAgICAgICAgaGlkZVBsYWNlaG9sZGVyT25Gb2N1czogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHByb3BzIHRvIGJlIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBpbnB1dCBub2RlLCBgLmItdGV4dHVhbC1pbnB1dGA7IHRoaXMgaW5jbHVkZXMgdGhlIHN0YW5kYXJkIHNldCBvZiBSZWFjdCBpbnB1dCBwcm9wcyBsaWtlIGBkZWZhdWx0VmFsdWVgLCBgdmFsdWVgLCBgbmFtZWAsIGBwbGFjZWhvbGRlcmAsIGBhdXRvRm9jdXNgLCBldGMuXG4gICAgICAgICAqL1xuICAgICAgICBpbnB1dFByb3BzOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgb25CbHVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgICAgIG9uRm9jdXM6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICAgICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIH0pLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGhpZGVQbGFjZWhvbGRlck9uRm9jdXM6IHRydWUsXG4gICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgfSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoSW5wdXQuZGVmYXVsdFByb3BzKVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGlucHV0OiAnJyxcbiAgICAgICAgaXNDb250cm9sbGVkOiBpc1N0cmluZyh0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWUpLFxuICAgICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb250cm9sbGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldElucHV0VmFsdWUodGhpcy5wcm9wcy5pbnB1dFByb3BzLmRlZmF1bHRWYWx1ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wcy5pbnB1dFByb3BzLnZhbHVlICE9PSB0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShuZXh0UHJvcHMuaW5wdXRQcm9wcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRJbnB1dFZhbHVlID0gKHZhbHVlID0gJycpID0+IHRoaXMuc2V0U3RhdGUoe2lucHV0OiB2YWx1ZX0pXG5cbiAgICBnZXRWYWx1ZSA9ICgpID0+IHRoaXMucmVmcy5maWVsZC52YWx1ZVxuXG4gICAgc2V0VmFsdWUobmV4dFZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShuZXh0VmFsdWUpO1xuICAgICAgICB0aGlzLnJlZnMuZmllbGQudmFsdWUgPSBuZXh0VmFsdWU7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb250cm9sbGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAvLyBzaW11bGF0ZSBpbnB1dCBjaGFuZ2UgZXZlbnQgZmxvd1xuICAgICAgICAgICAgdGhpcy5yZWZzLmZpZWxkLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcsIHtidWJibGVzOiB0cnVlfSkpO1xuICAgICAgICAgICAgdGhpcy5yZWZzLmZpZWxkLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnLCB7YnViYmxlczogdHJ1ZX0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUJsdXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNGb2N1c2VkOiBmYWxzZX0pO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkJsdXIpID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25CbHVyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUZvY3VzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzRm9jdXNlZDogdHJ1ZX0pO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkZvY3VzKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uRm9jdXMoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlQ2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vIGZvciBcImNvbnRyb2xsZWRcIiBzY2VuYXJpb3MsIHVwZGF0ZXMgdG8gdGhlIGNhY2hlZCBpbnB1dCB0ZXh0IHNob3VsZCBjb21lXG4gICAgICAgIC8vIGV4Y2x1c2l2ZWx5IHZpYSBwcm9wcyAoY1dSUCkgc28gaXQgZXhhY3RseSBtaXJyb3JzIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uXG4gICAgICAgIC8vIHN0YXRlLCBvdGhlcndpc2UgYSByZS1yZW5kZXIgd2lsbCBvY2N1ciBiZWZvcmUgdGhlIG5ldyB0ZXh0IGhhcyBjb21wbGV0ZWQgaXRzXG4gICAgICAgIC8vIGZlZWRiYWNrIGxvb3AgYW5kIHRoZSBjdXJzb3IgcG9zaXRpb24gaXMgbG9zdFxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0NvbnRyb2xsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRQbGFjZWhvbGRlclRleHQoKSB7XG4gICAgICAgIGNvbnN0IGlzTm9uRW1wdHkgPSB0aGlzLnN0YXRlLmlucHV0ICE9PSAnJztcbiAgICAgICAgY29uc3Qgc2hvdWxkU2hvd1BsYWNlaG9sZGVyID0gICB0aGlzLnByb3BzLmhpZGVQbGFjZWhvbGRlck9uRm9jdXMgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUuaXNGb2N1c2VkID09PSBmYWxzZSAmJiBpc05vbkVtcHR5ID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaXNOb25FbXB0eSA9PT0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIHNob3VsZFNob3dQbGFjZWhvbGRlciA/IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5wbGFjZWhvbGRlciA6ICcnO1xuICAgIH1cblxuICAgIHJlbmRlclBsYWNlaG9sZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiByZWY9J3BsYWNlaG9sZGVyJyBjbGFzc05hbWU9J2ItaW5wdXQtcGxhY2Vob2xkZXIgYi1pbnB1dCc+XG4gICAgICAgICAgICAgICAge3RoaXMuZ2V0UGxhY2Vob2xkZXJUZXh0KCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHtwcm9wc30gPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQocHJvcHMsIElucHV0LmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItaW5wdXQtd3JhcHBlcicsIHByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMuZ2V0UGxhY2Vob2xkZXJUZXh0KCl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclBsYWNlaG9sZGVyKCl9XG5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzLmlucHV0UHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0nZmllbGQnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItaW5wdXQnLCBwcm9wcy5pbnB1dFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtudWxsfVxuICAgICAgICAgICAgICAgICAgICBvbkJsdXI9e3RoaXMuaGFuZGxlQmx1cn1cbiAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5oYW5kbGVGb2N1c31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCIvKipcbiAqIFJldHVybnMgYW4gaW50ZXJzZWN0aW9uIG9mIHRoZSBmaXJzdCBhcmd1bWVudCBhZ2FpbnN0IHRoZSBzZWNvbmQgYXJndW1lbnQncyBrZXlzLlxuICogZS5nLiB1c2VkIGluIFR5cGVhaGVhZCB0byBpZGVudGlmeSB3aGljaCBwcm9wcyBhcmUgbWVhbnQgZm9yIElucHV0XG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBvYmoxXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iajJcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IGtleTogdmFsdWVzIGluIG9iajEgbWF0Y2hpbmcgdGhlIGtleXMgc3VwcGxpZWQgaW4gb2JqMlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbihvYmoxLCBvYmoyKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iajIpLnJlZHVjZSgoY2hpbGRQcm9wcywga2V5KSA9PiB7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqMSkge1xuICAgICAgICAgICAgY2hpbGRQcm9wc1trZXldID0gb2JqMVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNoaWxkUHJvcHM7XG5cbiAgICB9LCB7fSk7XG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IERpYWxvZyBmcm9tICcuLi9ib3VuZGxlc3MtZGlhbG9nL2luZGV4JztcbmltcG9ydCBQb3J0YWwgZnJvbSAnLi4vYm91bmRsZXNzLXBvcnRhbC9pbmRleCc7XG5pbXBvcnQgZXh0cmFjdENoaWxkUHJvcHMgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbi8qKlxuIyBNb2RhbFxuX19BIGJsb2NraW5nLCBmb2N1cy1zdGVhbGluZyBjb250YWluZXIuX19cblxuTW9kYWwgaXMgYW4gZW5oYW5jZW1lbnQgdXBvbiBbRGlhbG9nXShodHRwczovL2dpdGh1Yi5jb20vYmlibGlvdGVjaC91aWtpdC9ibG9iL21hc3Rlci9wYWNrYWdlcy9ib3VuZGxlc3MtZGlhbG9nL1JFQURNRS5tZCkuIFR5cGljYWxseSwgYSBtYXNraW5nIGxheWVyIGlzIHByb3ZpZGVkIHRvIG9ic2N1cmUgdGhlIHJlc3Qgb2YgdGhlIHBhZ2UgaW4gc29tZSBmYXNoaW9uLCB3aGlsZSBhbHNvIGJsb2NraW5nIG91dHNpZGUgY2xpY2sgYW5kIGtleXN0cm9rZSBhY2Nlc3MgdW50aWwgdGhlIG1vZGFsIGlzIGRpc21pc3NlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKiogTW9kYWwgc3VwcG9ydHMgYWxsIFtEaWFsb2cgcHJvcHNdKGh0dHBzOi8vZ2l0aHViLmNvbS9iaWJsaW90ZWNoL3Vpa2l0L2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2JvdW5kbGVzcy1kaWFsb2cvUkVBRE1FLm1kI3Byb3BzKSAqL1xuICAgICAgICAuLi5EaWFsb2cucHJvcFR5cGVzLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1tb2RhbC1tYXNrYCBIVE1MIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIG1hc2tQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItbW9kYWxgIEhUTUwgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgbW9kYWxQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55L2FsbCBzdXBwb3J0ZWQgW1BvcnRhbCBwcm9wc10oaHR0cHM6Ly9naXRodWIuY29tL2JpYmxpb3RlY2gvdWlraXQvYmxvYi9tYXN0ZXIvcGFja2FnZXMvYm91bmRsZXNzLXBvcnRhbC9SRUFETUUubWQjcHJvcHMpXG4gICAgICAgICAqL1xuICAgICAgICBwb3J0YWxQcm9wczogUHJvcFR5cGVzLnNoYXBlKFBvcnRhbC5wcm9wVHlwZXMpLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIC4uLkRpYWxvZy5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGNhcHR1cmVGb2N1czogdHJ1ZSxcbiAgICAgICAgbWFza1Byb3BzOiB7fSxcbiAgICAgICAgbW9kYWxQcm9wczoge30sXG4gICAgICAgIHBvcnRhbFByb3BzOiB7fSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoTW9kYWwuZGVmYXVsdFByb3BzKVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFBvcnRhbCB7Li4ucHJvcHMucG9ydGFsUHJvcHN9PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgey4uLm9taXQocHJvcHMsIE1vZGFsLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgICAgIHJlZj17KG5vZGUpID0+ICh0aGlzLiRtb2RhbCA9IG5vZGUpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLW1vZGFsLXdyYXBwZXInLCBwcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzLm1hc2tQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItbW9kYWwtbWFzaycsIHByb3BzLm1hc2tQcm9wcy5jbGFzc05hbWUpfSAvPlxuXG4gICAgICAgICAgICAgICAgICAgIDxEaWFsb2dcbiAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5leHRyYWN0Q2hpbGRQcm9wcyhwcm9wcywgRGlhbG9nLmRlZmF1bHRQcm9wcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4ucHJvcHMubW9kYWxQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItbW9kYWwnLCBwcm9wcy5tb2RhbFByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvUG9ydGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIElORklOSVRZID0gMSAvIDAsXG4gICAgTUFYX0lOVEVHRVIgPSAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOCxcbiAgICBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGludGVnZXIuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uXG4gKiBbYE51bWJlci5pc0ludGVnZXJgXShodHRwczovL21kbi5pby9OdW1iZXIvaXNJbnRlZ2VyKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBpbnRlZ2VyLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNJbnRlZ2VyKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNJbnRlZ2VyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzSW50ZWdlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNJbnRlZ2VyKCczJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0ludGVnZXIodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA9PSB0b0ludGVnZXIodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIGZpbml0ZSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEyLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0Zpbml0ZSgzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9GaW5pdGUoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvRmluaXRlKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b0Zpbml0ZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiAwO1xuICB9XG4gIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICBpZiAodmFsdWUgPT09IElORklOSVRZIHx8IHZhbHVlID09PSAtSU5GSU5JVFkpIHtcbiAgICB2YXIgc2lnbiA9ICh2YWx1ZSA8IDAgPyAtMSA6IDEpO1xuICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGludGVnZXIuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9JbnRlZ2VyYF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvaW50ZWdlcikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0ludGVnZXIoMy4yKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDBcbiAqXG4gKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9JbnRlZ2VyKCczLjInKTtcbiAqIC8vID0+IDNcbiAqL1xuZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSB0b0Zpbml0ZSh2YWx1ZSksXG4gICAgICByZW1haW5kZXIgPSByZXN1bHQgJSAxO1xuXG4gIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSW50ZWdlcjtcbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge2ZpbmRET01Ob2RlfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uL2JvdW5kbGVzcy1idXR0b24vaW5kZXgnO1xuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuXG4vKipcbiMgU2VnbWVudGVkQ29udHJvbFxuX19BIGNvbnRyb2wgY29udGFpbmluZyBtdWx0aXBsZSBidXR0b25zLCBvbmx5IG9uZSBvZiB3aGljaCBjYW4gYmUgYWN0aXZlIGF0IGEgdGltZS5fX1xuXG5TZWdtZW50ZWRDb250cm9sIGlzIGltcGxlbWVudGVkIGFzIGEgXCJjb250cm9sbGVkIGNvbXBvbmVudFwiLCBtZWFuaW5nIGl0IGlzIGEgZGlyZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtb2RlbCBkYXRhIHBhc3NlZCBpbnNpZGUuIFVzZXIgaW50ZXJhY3Rpb24gd2lsbCBidWJibGUgY2hhbmdlcyBpbiB0aGUgZm9ybSBvZiBgb25PcHRpb25TZWxlY3RlZGAgdGhhdCBhIGNvbnRyb2xsZXIgdmlldyBtdXN0IGludGVyY2VwdCBhbmQgYXBwbHkgYWdhaW5zdCB0aGUgZGF0YSBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VnbWVudGVkQ29udHJvbCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIGNoaWxkIGVsZW1lbnQgYmVjb21lcyBzZWxlY3RlZDsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uT3B0aW9uU2VsZWN0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgYmFja2luZyBkYXRhIGZvciB0aGUgc2VnbWVudHMgb2YgdGhlIHJlbmRlcmVkIGNvbnRyb2xcblxuICAgICAgICAgKiA+IF9fVmFsaWRhdGlvbiBDcml0ZXJpYTpfX1xuICAgICAgICAgKiA+XG4gICAgICAgICAqID4gMS4gVGhlcmUgbXVzdCBiZSBhdCBsZWFzdCB0d28gYG9wdGlvbnNgIChhIHNlZ21lbnRlZCBjb250cm9sIHdpdGggb25lIGJ1dHRvbiBpcyBub3QgYWxsb3dlZClcbiAgICAgICAgICogPiAxLiBUaGVyZSBtdXN0IG9ubHkgYmUgb25lIGBvcHRpb25gIHdob3NlIGBzZWxlY3RlZGAgYXR0cmlidXRlIGlzIGB0cnVlYCAobXVsdGlwbGUgc2VsZWN0aW9ucyBhcmUgbm90IGFsbG93ZWQpXG4gICAgICAgICAqID4gMS4gRWFjaCBgdmFsdWVgIGF0dHJpYnV0ZSBtdXN0IGJlIHVuaXF1ZSBhY3Jvc3MgdGhlIHNldCBvZiBgb3B0aW9uc2BcblxuICAgICAgICAgKiAtIF9fb3B0aW9uc1tdLnNlbGVjdGVkX18gYEJvb2xlYW5gXG4gICAgICAgICAqIC0gX19vcHRpb25zW10udmFsdWVfXyBgU3RyaW5nYFxuICAgICAgICAgKiAtIF9fb3B0aW9uc1tdLmNvbnRlbnRfXyBgKmBcbiAgICAgICAgICAgKiB0aGUgY29udGVudCB0byBnbyBpbnNpZGUgdGhlIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9uczogZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25zKHByb3BzKSB7XG4gICAgICAgICAgICBpZiAocHJvcHMub3B0aW9ucy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYXQgbGVhc3QgdHdvIG9wdGlvbnMuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1pc3NpbmdTZWxlY3RlZCA9IHByb3BzLm9wdGlvbnMuc29tZSgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoJ3NlbGVjdGVkJyBpbiBvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAobWlzc2luZ1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYSBgc2VsZWN0ZWRgIHByb3AgZm9yIGVhY2ggb3B0aW9uLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc2VlblNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZVNlbGVjdGVkID0gcHJvcHMub3B0aW9ucy5zb21lKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWVuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VlblNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG11bHRpcGxlU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VuY291bnRlcmVkIG11bHRpcGxlIG9wdGlvbnMgd2l0aCBgc2VsZWN0ZWQ6IHRydWVgLiBUaGVyZSBjYW4gYmUgb25seSBvbmUuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9wcy5vcHRpb25zLnNvbWUoKG9wdGlvbikgPT4gdHlwZW9mIG9wdGlvbi52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYSBgdmFsdWVgIHByb3AgZm9yIGVhY2ggb3B0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIG9uT3B0aW9uU2VsZWN0ZWQ6IG5vb3AsXG4gICAgICAgIG9wdGlvbnM6IFtdLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhTZWdtZW50ZWRDb250cm9sLmRlZmF1bHRQcm9wcylcbiAgICBzdGF0aWMgaW50ZXJuYWxDaGlsZEtleXMgPSBbXG4gICAgICAgICdjb250ZW50JyxcbiAgICAgICAgJ3ZhbHVlJyxcbiAgICAgICAgJ3NlbGVjdGVkJyxcbiAgICBdXG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgaW5kZXhPZk9wdGlvbkluRm9jdXM6IG51bGwsXG4gICAgfVxuXG4gICAgY3VycmVudFZhbHVlKCkge1xuICAgICAgICBsZXQgdmFsdWU7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLnNvbWUoKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gb3B0aW9uLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRGb2N1cyhpbmRleCkge1xuICAgICAgICBmaW5kRE9NTm9kZSh0aGlzLnJlZnNbJ29wdGlvbl8kJyArIGluZGV4XSkuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBnZXROZXh0T3B0aW9uSW5kZXgoY3VycmVudE9wdGlvbkluZGV4KSB7XG4gICAgICAgIGxldCBuZXh0ID0gY3VycmVudE9wdGlvbkluZGV4ICsgMTtcblxuICAgICAgICByZXR1cm4gbmV4dCA8IHRoaXMucHJvcHMub3B0aW9ucy5sZW5ndGggPyBuZXh0IDogMDtcbiAgICB9XG5cbiAgICBnZXRQcmV2aW91c09wdGlvbkluZGV4KGN1cnJlbnRPcHRpb25JbmRleCkge1xuICAgICAgICBsZXQgcHJldmlvdXMgPSBjdXJyZW50T3B0aW9uSW5kZXggLSAxO1xuXG4gICAgICAgIHJldHVybiBwcmV2aW91cyA8IDAgPyB0aGlzLnByb3BzLm9wdGlvbnMubGVuZ3RoIC0gMSA6IHByZXZpb3VzO1xuICAgIH1cblxuICAgIGhhbmRsZU9wdGlvbkJsdXIob3B0aW9uLCBldmVudCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pbmRleE9mT3B0aW9uSW5Gb2N1cyA9PT0gdGhpcy5wcm9wcy5vcHRpb25zLmluZGV4T2Yob3B0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aW5kZXhPZk9wdGlvbkluRm9jdXM6IG51bGx9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9wdGlvbi5vbkJsdXIpKSB7XG4gICAgICAgICAgICBvcHRpb24ub25CbHVyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU9wdGlvbkNsaWNrKG9wdGlvbiwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbk9wdGlvblNlbGVjdGVkKG9wdGlvbi52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9uLm9uQ2xpY2spKSB7XG4gICAgICAgICAgICBvcHRpb24ub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVPcHRpb25Gb2N1cyhvcHRpb24sIGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2luZGV4T2ZPcHRpb25JbkZvY3VzOiB0aGlzLnByb3BzLm9wdGlvbnMuaW5kZXhPZihvcHRpb24pfSk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9uLm9uRm9jdXMpKSB7XG4gICAgICAgICAgICBvcHRpb24ub25Gb2N1cyhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleTtcbiAgICAgICAgY29uc3QgYWN0aXZlSXRlbUluZGV4ID0gdGhpcy5zdGF0ZS5pbmRleE9mT3B0aW9uSW5Gb2N1cztcblxuICAgICAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1cyh0aGlzLmdldFByZXZpb3VzT3B0aW9uSW5kZXgoYWN0aXZlSXRlbUluZGV4KSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzKHRoaXMuZ2V0TmV4dE9wdGlvbkluZGV4KGFjdGl2ZUl0ZW1JbmRleCkpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlT3B0aW9uQ2xpY2sodGhpcy5wcm9wcy5vcHRpb25zW2FjdGl2ZUl0ZW1JbmRleF0pO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMub25LZXlEb3duKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbktleURvd24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyT3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMub3B0aW9ucy5tYXAoKGRlZmluaXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgey4uLm9taXQoZGVmaW5pdGlvbiwgU2VnbWVudGVkQ29udHJvbC5pbnRlcm5hbENoaWxkS2V5cyl9XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWNoZWNrZWQ9e1N0cmluZyhkZWZpbml0aW9uLnNlbGVjdGVkKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXsnb3B0aW9uXyQnICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIGtleT17ZGVmaW5pdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1zZWdtZW50ZWQtY29udHJvbC1vcHRpb24nLCBkZWZpbml0aW9uLmNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2Itc2VnbWVudGVkLWNvbnRyb2wtb3B0aW9uLXNlbGVjdGVkJzogZGVmaW5pdGlvbi5zZWxlY3RlZCxcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXtkZWZpbml0aW9uLnNlbGVjdGVkID8gJzAnIDogJy0xJ31cbiAgICAgICAgICAgICAgICAgICAgb25CbHVyPXt0aGlzLmhhbmRsZU9wdGlvbkJsdXIuYmluZCh0aGlzLCBkZWZpbml0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgb25QcmVzc2VkPXt0aGlzLmhhbmRsZU9wdGlvbkNsaWNrLmJpbmQodGhpcywgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuaGFuZGxlT3B0aW9uRm9jdXMuYmluZCh0aGlzLCBkZWZpbml0aW9uKX0+XG4gICAgICAgICAgICAgICAgICAgIHtkZWZpbml0aW9uLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgU2VnbWVudGVkQ29udHJvbC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICByb2xlPSdyYWRpb2dyb3VwJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2Itc2VnbWVudGVkLWNvbnRyb2wnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck9wdGlvbnMoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtmaW5kRE9NTm9kZX0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBpc0ludGVnZXIgZnJvbSAnbG9kYXNoLmlzaW50ZWdlcic7XG5cbmltcG9ydCBBc3luYyBmcm9tICcuLi9ib3VuZGxlc3MtYXN5bmMvaW5kZXgnO1xuaW1wb3J0IFNlZ21lbnRlZENvbnRyb2wgZnJvbSAnLi4vYm91bmRsZXNzLXNlZ21lbnRlZC1jb250cm9sL2luZGV4JztcbmltcG9ydCBBcnJvd0tleU5hdmlnYXRpb24gZnJvbSAnLi4vYm91bmRsZXNzLWFycm93LWtleS1uYXZpZ2F0aW9uL2luZGV4JztcbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB1dWlkIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy11dWlkL2luZGV4JztcblxuY29uc3QgaWRlbnRpdHkgPSAoeCkgPT4geDtcblxuLyoqXG4jIFBhZ2luYXRpb25cbl9fVmlldyBhbmQgbmF2aWdhdGUgaGV0ZXJvZ2VuaW91cyBjb250ZW50IG9uZSBwYWdlIGF0IGEgdGltZS5fX1xuXG5QYWdpbmF0aW9uIGlzIGltcGxlbWVudGVkIGFzIGFuIGVuY2Fwc3VsYXRlZCB2aWV3IHN5c3RlbSwgYWNjZXB0aW5nIGFuIGFycmF5IG9mIGl0ZW1zIGFzIGlucHV0LlxuXG4jIyBDb21wb25lbnQgSW5zdGFuY2UgTWV0aG9kc1xuXG5XaGVuIHVzaW5nIGBQYWdpbmF0aW9uYCBpbiB5b3VyIHByb2plY3QsIHlvdSBtYXkgY2FsbCB0aGUgZm9sbG93aW5nIG1ldGhvZHMgb24gYSByZW5kZXJlZCBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50LiBVc2UgW2ByZWZzYF0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9yZWZzLWFuZC10aGUtZG9tLmh0bWwpIHRvIGdldCB0aGUgaW5zdGFuY2UuXG5cbi0gX19gY3VycmVudFBhZ2UoKWBfX1xuICByZXR1cm5zIHRoZSBfX19vbmVfX18taW5kZXhlZCBwYWdlIG51bWJlciBjdXJyZW50bHkgaW4gdmlld1xuXG4tIF9fYHBhZ2VUb0luZGV4KGluZGV4OiBudW1iZXIpYF9fXG4gIHJlbmRlcnMgdGhlIHBhZ2UgdGhhdCBjb250YWlucyB0aGUgX19femVyb19fXy1pbmRleGVkIGl0ZW1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnaW5hdGlvbiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBjb250cm9scyA9IHtcbiAgICAgICAgRklSU1Q6ICdGSVJTVCcsXG4gICAgICAgIFBSRVZJT1VTOiAnUFJFVklPVVMnLFxuICAgICAgICBORVhUOiAnTkVYVCcsXG4gICAgICAgIExBU1Q6ICdMQVNUJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcG9zaXRpb25zID0ge1xuICAgICAgICBBQk9WRTogJ0FCT1ZFJyxcbiAgICAgICAgQkVMT1c6ICdCRUxPVycsXG4gICAgICAgIEJPVEg6ICdCT1RIJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogYXJiaXRyYXJ5IGNvbnRlbnQgdG8gYmUgcmVuZGVyZWQgYWZ0ZXIgdGhlIGl0ZW1zIGluIHRoZSBET01cbiAgICAgICAgICovXG4gICAgICAgIGFmdGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYXJiaXRyYXJ5IGNvbnRlbnQgdG8gYmUgcmVuZGVyZWQgYmVmb3JlIHRoZSBpdGVtcyBpbiB0aGUgRE9NXG4gICAgICAgICAqL1xuICAgICAgICBiZWZvcmU6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbGxvd3MgZm9yIGFyYml0cmFyeSBjb250ZW50IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIGNvbnRyb2wgYXJlYVxuICAgICAgICAgKi9cbiAgICAgICAgY3VzdG9tQ29udHJvbENvbnRlbnQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2l0aCBhIGRlc2lyZWQgaXRlbSBpbmRleCB3aGVuIHRoYXQgaXRlbSBjb21lcyBpbnRvIHZpZXc7IGFjY2VwdHMgYSBgUHJvbWlzZWAgaWYgeW91IG5lZWQgdG8gZmV0Y2ggdGhlIHJvdyBhc3luY2hyb25vdXNseVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0SXRlbTogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRvZXMgbm90IHJlbmRlciB0aGUgcGFnaW5nIGNvbnRyb2xzIGlmIHRoZSBudW1iZXIgb2YgaXRlbXMgc3VwcGxpZWQgdG8gdGhlIHZpZXcgaXMgbGVzcy10aGFuLW9yLWVxdWFsLXRvIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gc2hvdyBwZXIgcGFnZSB2aWEgYHByb3BzLm51bUl0ZW1zUGVyUGFnZWBcbiAgICAgICAgICovXG4gICAgICAgIGhpZGVQYWdlcklmTm90TmVlZGVkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYSB1bmlxdWUgbmFtZSBmb3IgdGhlIGRhdGFzZXQgYmVpbmcgY29uc3VtZWQ7IHBhc3MgYSBkaWZmZXJlbnQgbmFtZSB0byBjYXVzZSB0aGUgdmlldyB0byBmdWxseSByZXNldCBhbmQgcHVsbCBicmFuZCBuZXcgZGF0YVxuICAgICAgICAgKi9cbiAgICAgICAgaWRlbnRpZmllcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgKF9vbmUtaW5kZXhlZF8pIG51bWJlciBvZiB0aGUgcGFnZSB0aGF0IHNob3VsZCBiZSBpbml0aWFsbHkgZGlzcGxheWVkOyBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHRvdGFsIG51bWJlciBvZiBwYWdlc1xuICAgICAgICAgKi9cbiAgICAgICAgaW5pdGlhbFBhZ2U6IGZ1bmN0aW9uIHZhbGlkYXRlSW5pdGlhbFBhZ2UocHJvcHMpIHtcbiAgICAgICAgICAgIGlmIChpc0ludGVnZXIocHJvcHMuaW5pdGlhbFBhZ2UpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ2Bpbml0aWFsUGFnZWAgbXVzdCBiZSBhbiBpbnRlZ2VyLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBudW1iZXJPZlBhZ2VzID0gTWF0aC5jZWlsKHByb3BzLnRvdGFsSXRlbXMgLyBwcm9wcy5udW1JdGVtc1BlclBhZ2UpO1xuXG4gICAgICAgICAgICBpZiAocHJvcHMuaW5pdGlhbFBhZ2UgPCAxIHx8IHByb3BzLmluaXRpYWxQYWdlID4gbnVtYmVyT2ZQYWdlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ2Bpbml0aWFsUGFnZWAgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kICcgKyBudW1iZXJPZlBhZ2VzICsgJy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYWxsb3dzIGZvciBhcmJpdHJhcnkgY29udGVudCB0byBiZSByZW5kZXJlZCBpbnRvIHBhZ2luYXRpb24gaXRlbXMgYXMgdGhleSdyZSBsb2FkaW5nIGlmIHRoZSBiYWNraW5nIGRhdGEgaXMgYSBgUHJvbWlzZWBcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1Mb2FkaW5nQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIHNwZWNpZnkgaG93IGFuIGl0ZW0gc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBKU1gsIGlmIGl0IGlzIG5vdCBhbHJlYWR5IHJlbmRlcmFibGUgYnkgUmVhY3RcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1Ub0pTWENvbnZlcnRlckZ1bmM6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb250ZW50IHRvIGJlIGRpc3BsYXllZCBpbnNpZGUgb2YgdGhlIFwiRmlyc3QgcGFnZVwiIGNvbnRyb2wgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBqdW1wVG9GaXJzdENvbnRyb2xDb250ZW50OiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBkaXNwbGF5ZWQgaW5zaWRlIG9mIHRoZSBcIkxhc3QgcGFnZVwiIGNvbnRyb2wgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBqdW1wVG9MYXN0Q29udHJvbENvbnRlbnQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1wYWdpbmF0aW9uLWl0ZW0tbGlzdGAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdFdyYXBwZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBkaXNwbGF5ZWQgaW5zaWRlIG9mIHRoZSBcIk5leHQgcGFnZVwiIGNvbnRyb2wgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBuZXh0UGFnZUNvbnRyb2xDb250ZW50OiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIGJlIGRpc3BsYXllZCBvbiBlYWNoIHBhZ2U7IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm9cbiAgICAgICAgICovXG4gICAgICAgIG51bUl0ZW1zUGVyUGFnZTogZnVuY3Rpb24gdmFsaWRhdGVOdW1JdGVtc1BlclBhZ2UocHJvcHMpIHtcbiAgICAgICAgICAgIGlmIChpc0ludGVnZXIocHJvcHMubnVtSXRlbXNQZXJQYWdlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdgbnVtSXRlbXNQZXJQYWdlYCBtdXN0IGJlIGFuIGludGVnZXIuJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BzLm51bUl0ZW1zUGVyUGFnZSA8IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdgbnVtSXRlbXNQZXJQYWdlYCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGFnZXMgdG8gYmUgZGlzcGxheWVkIGluIHRoZSBjb250cm9sIGJhciBhdCBvbmUgdGltZVxuICAgICAgICAgKi9cbiAgICAgICAgbnVtUGFnZVRvZ2dsZXM6IFByb3BUeXBlcy5udW1iZXIsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRldGVybWluZXMgd2hldGhlciB0aGUgcGFnaW5hdGlvbiBjb250cm9scyBhcmUgZGlzcGxheWVkIGFib3ZlLCBiZWxvdywgb3IgYm90aCBhYm92ZSBhbmQgYmVsb3cgdGhlIGNvbnRlbnRcbiAgICAgICAgICovXG4gICAgICAgIHBvc2l0aW9uOiBQcm9wVHlwZXMub25lT2YoT2JqZWN0LmtleXMoUGFnaW5hdGlvbi5wb3NpdGlvbnMpKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBkaXNwbGF5ZWQgaW5zaWRlIG9mIHRoZSBcIlByZXZpb3VzIHBhZ2VcIiBjb250cm9sIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJldmlvdXNQYWdlQ29udHJvbENvbnRlbnQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3aGV0aGVyIHRoZSBcIkZpcnN0IHBhZ2VcIiBjb250cm9sIGJ1dHRvbiBzaG91bGQgYmUgZGlzcGxheWVkXG4gICAgICAgICAqL1xuICAgICAgICBzaG93SnVtcFRvRmlyc3Q6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3aGV0aGVyIHRoZSBcIkxhc3QgcGFnZVwiIGNvbnRyb2wgYnV0dG9uIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICAgICAgICovXG4gICAgICAgIHNob3dKdW1wVG9MYXN0OiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVuZGVycyBhbiBlbGVtZW50IGNhbGxlZCBgLmItcGFnaW5hdGlvbi1jb250cm9sLXN0YXRlYCB0aGF0IGNvbnRhaW5zIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBwYWdpbmF0aW9uIGxpa2UgXCIxIG9mIDEwXCI7IGFsdGVybmF0aXZlbHksIHRoaXMgcHJvcCBhbHNvIGFjY2VwdHMgYSBmdW5jdGlvbiB0aGF0IGl0IHdpbGwgY2FsbCB3aXRoIHRoZSBjdXJyZW50UGFnZSBhbmQgdG90YWxQYWdlcyBmb3IgeW91IHRvIGZvcm1hdDpcblxuICAgICAgICAgKiBgYGBqc3hcbiAgICAgICAgICogc2hvd1BhZ2luYXRlZFN0YXRlPXtcbiAgICAgICAgICogICAgIChjdXJyZW50UGFnZSwgdG90YWxQYWdlcykgPT4gKFxuICAgICAgICAgKiAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb28nPlxuICAgICAgICAgKiAgICAgICAgICAgICBZb3UncmUgb24gcGFnZSB7Y3VycmVudFBhZ2V9IG9mIHt0b3RhbFBhZ2VzfSBwYWdlcyFcbiAgICAgICAgICogICAgICAgICA8L2Rpdj5cbiAgICAgICAgICogICAgIClcbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHNob3dQYWdpbmF0aW9uU3RhdGU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgU2VnbWVudGVkQ29udHJvbCBub2RlKHMpLCBgLmItcGFnaW5hdGlvbi1jb250cm9sc2BcbiAgICAgICAgICovXG4gICAgICAgIHRvZ2dsZVdyYXBwZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIHRvdGFsIG51bWJlciBvZiBpdGVtcyB0byBiZSBkaXNwbGF5ZWQgaW4gdGhlIHZpZXdcbiAgICAgICAgICovXG4gICAgICAgIHRvdGFsSXRlbXM6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBhZnRlcjogbnVsbCxcbiAgICAgICAgYmVmb3JlOiBudWxsLFxuICAgICAgICBjdXN0b21Db250cm9sQ29udGVudDogbnVsbCxcbiAgICAgICAgZ2V0SXRlbTogbm9vcCxcbiAgICAgICAgaGlkZVBhZ2VySWZOb3ROZWVkZWQ6IGZhbHNlLFxuICAgICAgICBpZGVudGlmaWVyOiB1dWlkKCksXG4gICAgICAgIGluaXRpYWxQYWdlOiAxLFxuICAgICAgICBpdGVtTG9hZGluZ0NvbnRlbnQ6IG51bGwsXG4gICAgICAgIGl0ZW1Ub0pTWENvbnZlcnRlckZ1bmM6IGlkZW50aXR5LFxuICAgICAgICBqdW1wVG9GaXJzdENvbnRyb2xDb250ZW50OiAnwqsgRmlyc3QnLFxuICAgICAgICBqdW1wVG9MYXN0Q29udHJvbENvbnRlbnQ6ICdMYXN0IMK7JyxcbiAgICAgICAgbGlzdFdyYXBwZXJQcm9wczoge30sXG4gICAgICAgIG5leHRQYWdlQ29udHJvbENvbnRlbnQ6ICdOZXh0IOKAuicsXG4gICAgICAgIG51bUl0ZW1zUGVyUGFnZTogMTAsXG4gICAgICAgIG51bVBhZ2VUb2dnbGVzOiA1LFxuICAgICAgICBwb3NpdGlvbjogUGFnaW5hdGlvbi5wb3NpdGlvbnMuQUJPVkUsXG4gICAgICAgIHByZXZpb3VzUGFnZUNvbnRyb2xDb250ZW50OiAn4oC5IFByZXZpb3VzJyxcbiAgICAgICAgc2hvd0p1bXBUb0ZpcnN0OiB0cnVlLFxuICAgICAgICBzaG93SnVtcFRvTGFzdDogdHJ1ZSxcbiAgICAgICAgc2hvd1BhZ2luYXRpb25TdGF0ZTogdHJ1ZSxcbiAgICAgICAgdG9nZ2xlV3JhcHBlclByb3BzOiB7fSxcbiAgICAgICAgdG90YWxJdGVtczogbnVsbCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoUGFnaW5hdGlvbi5kZWZhdWx0UHJvcHMpXG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucHJvcHMuaW5pdGlhbFBhZ2UsXG4gICAgICAgIHRhcmdldEluZGV4OiAodGhpcy5wcm9wcy5pbml0aWFsUGFnZSAtIDEpICogdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2UsXG4gICAgfVxuXG4gICAgY3VycmVudFBhZ2UgPSAoKSA9PiB0aGlzLnN0YXRlLmN1cnJlbnRQYWdlXG4gICAgZ2V0UGFnZUZvckluZGV4ID0gKGluZGV4LCBpdGVtc1BlclBhZ2UgPSB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZSkgPT4gTWF0aC5jZWlsKChpbmRleCArIDEpIC8gaXRlbXNQZXJQYWdlKVxuICAgIHRvdGFsUGFnZXMgPSAoKSA9PiBNYXRoLmNlaWwodGhpcy5wcm9wcy50b3RhbEl0ZW1zIC8gdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2UpXG5cbiAgICBmaXJzdFZpc2libGVJdGVtSW5kZXggPSAoKSA9PiAodGhpcy5jdXJyZW50UGFnZSgpIC0gMSkgKiB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIGlmIChwcmV2U3RhdGUuY3VycmVudFBhZ2UgIT09IHRoaXMuY3VycmVudFBhZ2UoKSkge1xuICAgICAgICAgICAgZmluZERPTU5vZGUodGhpcy5yZWZzLml0ZW1fMCkuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKSB7XG4gICAgICAgIGNvbnN0IG9sZFByb3BzID0gdGhpcy5wcm9wcztcblxuICAgICAgICAvLyB1c2UgdHJhbnNhY3Rpb25hbCBgc2V0U3RhdGUoKWAgc3ludGF4IHRvIGVuc3VyZSB0aGF0IHBlbmRpbmcgc3RhdGUgdXBkYXRlcyBhcmUgaG9ub3JlZCxcbiAgICAgICAgLy8gbGlrZSB0aG9zZSBmcm9tIGBwYWdlVG9JbmRleCgpYFxuICAgICAgICB0aGlzLnNldFN0YXRlKChzdGF0ZSwgcHJvcHMpID0+IHtcbiAgICAgICAgICAgIC8vIE5PVEU6IGBwcm9wc2AgaGVyZSBpcyB0ZWNobmljYWxseSB0aGUgYG5leHRQcm9wc2AgeW91J2QgcmVjZWl2ZSBmcm9tIHRoZSBmaXJzdCBjV1JQIGFyZ3VtZW50XG4gICAgICAgICAgICAvLyBzbyB0aGF0J3Mgd2h5IHdlJ3JlIGNhY2hpbmcgYG9sZFByb3BzYCBvdXRzaWRlIHRoZSBgc2V0U3RhdGVgXG4gICAgICAgICAgICBpZiAocHJvcHMuaWRlbnRpZmllciAhPT0gb2xkUHJvcHMuaWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleDogMCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLmdldFBhZ2VGb3JJbmRleChzdGF0ZS50YXJnZXRJbmRleCwgcHJvcHMubnVtSXRlbXNQZXJQYWdlKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRJbmRleDogc3RhdGUudGFyZ2V0SW5kZXgsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwYWdlVG9JbmRleCA9IChpKSA9PiB7XG4gICAgICAgIGlmIChpIDwgMCB8fCBpID49IHRoaXMucHJvcHMudG90YWxJdGVtcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihgQ2Fubm90IHBhZ2UgdG8gaW52YWxpZCBpbmRleCAke2l9LmApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5nZXRQYWdlRm9ySW5kZXgoaSksXG4gICAgICAgICAgICB0YXJnZXRJbmRleDogaSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlUGFnZUJ1dHRvbk9wdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXTtcbiAgICAgICAgY29uc3QgY3VycmVudFBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlKCk7XG4gICAgICAgIGNvbnN0IG51bVBhZ2VUb2dnbGVzID0gdGhpcy5wcm9wcy5udW1QYWdlVG9nZ2xlcztcbiAgICAgICAgY29uc3QgdG90YWxQYWdlcyA9IHRoaXMudG90YWxQYWdlcygpO1xuICAgICAgICBjb25zdCBzdGFydFBhZ2UgPSBjdXJyZW50UGFnZSAtICgoY3VycmVudFBhZ2UgLSAxKSAlIG51bVBhZ2VUb2dnbGVzKTtcbiAgICAgICAgY29uc3QgZW5kUGFnZSA9IE1hdGgubWluKHN0YXJ0UGFnZSArIG51bVBhZ2VUb2dnbGVzIC0gMSwgdG90YWxQYWdlcyk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2hvd1BhZ2luYXRpb25TdGF0ZSkge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29udGVudDogaXNGdW5jdGlvbih0aGlzLnByb3BzLnNob3dQYWdpbmF0aW9uU3RhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLnNob3dQYWdpbmF0aW9uU3RhdGUoY3VycmVudFBhZ2UsIHRvdGFsUGFnZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHtjdXJyZW50UGFnZX0gb2YgJHt0b3RhbFBhZ2VzfWAsXG4gICAgICAgICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2ItcGFnaW5hdGlvbi1jb250cm9sIGItcGFnaW5hdGlvbi1jb250cm9sLXN0YXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2hvd0p1bXBUb0ZpcnN0KSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnByb3BzLmp1bXBUb0ZpcnN0Q29udHJvbENvbnRlbnQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFBhZ2luYXRpb24uY29udHJvbHMuRklSU1QsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuY3VycmVudFBhZ2UoKSA9PT0gMSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiLXBhZ2luYXRpb24tY29udHJvbCBiLXBhZ2luYXRpb24tY29udHJvbC1maXJzdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnByb3BzLnByZXZpb3VzUGFnZUNvbnRyb2xDb250ZW50LFxuICAgICAgICAgICAgdmFsdWU6IFBhZ2luYXRpb24uY29udHJvbHMuUFJFVklPVVMsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5jdXJyZW50UGFnZSgpID09PSAxLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtcHJldmlvdXMnLFxuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRQYWdlOyBpIDw9IGVuZFBhZ2U7IGkrKykge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiLXBhZ2luYXRpb24tY29udHJvbCcsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFnZS1udW1iZXInOiBpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBpID09PSB0aGlzLmN1cnJlbnRQYWdlKCksXG4gICAgICAgICAgICAgICAgY29udGVudDogaSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucHJvcHMubmV4dFBhZ2VDb250cm9sQ29udGVudCxcbiAgICAgICAgICAgIHZhbHVlOiBQYWdpbmF0aW9uLmNvbnRyb2xzLk5FWFQsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5jdXJyZW50UGFnZSgpID09PSB0b3RhbFBhZ2VzLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtbmV4dCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNob3dKdW1wVG9MYXN0KSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnByb3BzLmp1bXBUb0xhc3RDb250cm9sQ29udGVudCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogUGFnaW5hdGlvbi5jb250cm9scy5MQVNULFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmN1cnJlbnRQYWdlKCkgPT09IHRvdGFsUGFnZXMsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtbGFzdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmN1c3RvbUNvbnRyb2xDb250ZW50KSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnByb3BzLmN1c3RvbUNvbnRyb2xDb250ZW50LFxuICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkKCksXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtY3VzdG9tJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVJdGVtcygpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgY29uc3QgZmlyc3RJdGVtSW5kZXggPSB0aGlzLmZpcnN0VmlzaWJsZUl0ZW1JbmRleCgpO1xuICAgICAgICBjb25zdCBsYXN0SXRlbUluZGV4ID0gTWF0aC5taW4odGhpcy5wcm9wcy50b3RhbEl0ZW1zLCBmaXJzdEl0ZW1JbmRleCArIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlKSAtIDE7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IGZpcnN0SXRlbUluZGV4OyBpIDw9IGxhc3RJdGVtSW5kZXg7IGkgKz0gMSkge1xuICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXMucHVzaCh7ZGF0YTogdGhpcy5wcm9wcy5nZXRJdGVtKGkpfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2VuZXJhdGVkSXRlbXM7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2sgPSAodmFsdWUpID0+IHtcbiAgICAgICAgbGV0IG5leHRUYXJnZXRJbmRleDtcblxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgIGNhc2UgUGFnaW5hdGlvbi5jb250cm9scy5GSVJTVDpcbiAgICAgICAgICAgIG5leHRUYXJnZXRJbmRleCA9IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYWdpbmF0aW9uLmNvbnRyb2xzLlBSRVZJT1VTOlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gdGhpcy5maXJzdFZpc2libGVJdGVtSW5kZXgoKSAtIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFnaW5hdGlvbi5jb250cm9scy5ORVhUOlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gdGhpcy5maXJzdFZpc2libGVJdGVtSW5kZXgoKSArIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFnaW5hdGlvbi5jb250cm9scy5MQVNUOlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gdGhpcy5wcm9wcy50b3RhbEl0ZW1zIC0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gcGFyc2VJbnQodmFsdWUsIDEwKSAqIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuZ2V0UGFnZUZvckluZGV4KG5leHRUYXJnZXRJbmRleCksXG4gICAgICAgICAgICB0YXJnZXRJbmRleDogbmV4dFRhcmdldEluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzLmxpc3RXcmFwcGVyUHJvcHM7XG4gICAgICAgIGNvbnN0IGluZGV4T2Zmc2V0ID0gdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2UgKiAodGhpcy5jdXJyZW50UGFnZSgpIC0gMSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxBcnJvd0tleU5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICAgICAgcmVmPSdpdGVtTGlzdCdcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXBhZ2luYXRpb24taXRlbXMnLCBwcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5nZW5lcmF0ZUl0ZW1zKCkubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEFzeW5jXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtgaXRlbV8ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXBhZ2luYXRpb24taXRlbScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ItcGFnaW5hdGlvbi1pdGVtLWV2ZW4nOiBpbmRleCAlIDIgPT09IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiLXBhZ2luYXRpb24taXRlbS1vZGQnOiBpbmRleCAlIDIgIT09IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydFRvSlNYRnVuYz17dGhpcy5wcm9wcy5pdGVtVG9KU1hDb252ZXJ0ZXJGdW5jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9e2l0ZW0uZGF0YX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBhZ2luYXRpb24taW5kZXg9e2luZGV4T2Zmc2V0ICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0NvbnRlbnQ9e3RoaXMucHJvcHMuaXRlbUxvYWRpbmdDb250ZW50fSAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9BcnJvd0tleU5hdmlnYXRpb24+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyQ29udHJvbHMocG9zaXRpb24pIHtcbiAgICAgICAgaWYgKCAgIHRoaXMucHJvcHMuaGlkZVBhZ2VySWZOb3ROZWVkZWRcbiAgICAgICAgICAgICYmIHRoaXMucHJvcHMudG90YWxJdGVtcyA8PSB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzLnRvZ2dsZVdyYXBwZXJQcm9wcztcbiAgICAgICAgY29uc3QgcG9zaXRpb25Mb3dlciA9IHBvc2l0aW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uQ2FwaXRhbGl6ZWQgPSBwb3NpdGlvbkxvd2VyWzBdLnRvVXBwZXJDYXNlKCkgKyBwb3NpdGlvbkxvd2VyLnNsaWNlKDEpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2VnbWVudGVkQ29udHJvbFxuICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICByZWY9e2BzZWdtZW50ZWRDb250cm9sJHtwb3NpdGlvbkNhcGl0YWxpemVkfWB9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wYWdpbmF0aW9uLWNvbnRyb2xzJywgcHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgIFtgYi1wYWdpbmF0aW9uLWNvbnRyb2xzLSR7cG9zaXRpb25Mb3dlcn1gXTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICBvcHRpb25zPXt0aGlzLmNyZWF0ZVBhZ2VCdXR0b25PcHRpb25zKCl9XG4gICAgICAgICAgICAgICAgb25PcHRpb25TZWxlY3RlZD17dGhpcy5oYW5kbGVDbGlja30gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJWaWV3KCkge1xuICAgICAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBQYWdpbmF0aW9uLnBvc2l0aW9ucztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHJlZj0ncGFnaW5hdGVkVmlldydcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ItcGFnaW5hdGlvbic+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIChwcm9wcy5wb3NpdGlvbiA9PT0gcG9zaXRpb24uQUJPVkUgfHwgcHJvcHMucG9zaXRpb24gPT09IHBvc2l0aW9uLkJPVEgpXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5yZW5kZXJDb250cm9scyhwb3NpdGlvbi5BQk9WRSlcbiAgICAgICAgICAgICAgICAgICAgOiBub29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtwcm9wcy5iZWZvcmV9XG5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJJdGVtcygpfVxuXG4gICAgICAgICAgICAgICAge3Byb3BzLmFmdGVyfVxuXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIChwcm9wcy5wb3NpdGlvbiA9PT0gcG9zaXRpb24uQkVMT1cgfHwgcHJvcHMucG9zaXRpb24gPT09IHBvc2l0aW9uLkJPVEgpXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5yZW5kZXJDb250cm9scyhwb3NpdGlvbi5CRUxPVylcbiAgICAgICAgICAgICAgICAgICAgOiBub29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFBhZ2luYXRpb24uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wYWdpbmF0aW9uLXdyYXBwZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclZpZXcoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBSZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSB2ZW5kb3ItcHJlZml4ZWQgcHJvcGVydHkgZm9yIHVzZSBpbiBwcm9ncmFtbWF0aWMgdHJhbnNmb3JtIHN0eWxlIG1hbmlwdWxhdGlvbi5cbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHByb3BlcnR5IGtleSAoZS5nLiBgV2Via2l0VHJhbnNmb3JtYCwgYG1zVHJhbnNmb3JtYClcbiAqL1xuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIGRldGVjdFRyYW5zZm9ybVByb3BlcnR5KCkge1xuICAgIGNvbnN0IHByb3BzID0gW1xuICAgICAgICAndHJhbnNmb3JtJyxcbiAgICAgICAgJ1dlYmtpdFRyYW5zZm9ybScsXG4gICAgICAgICdNb3pUcmFuc2Zvcm0nLFxuICAgICAgICAnT1RyYW5zZm9ybScsXG4gICAgICAgICdtc1RyYW5zZm9ybScsXG4gICAgICAgICd3ZWJraXQtdHJhbnNmb3JtJywgLy8gdXNlZCBpbiBKU0RPTVxuICAgIF07XG5cbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gcHJvcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKHByb3BzW2ldIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzW2ldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufSkoKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtmaW5kRE9NTm9kZX0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IERpYWxvZyBmcm9tICcuLi9ib3VuZGxlc3MtZGlhbG9nL2luZGV4JztcbmltcG9ydCBQb3J0YWwgZnJvbSAnLi4vYm91bmRsZXNzLXBvcnRhbC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB0cmFuc2Zvcm1Qcm9wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy10cmFuc2Zvcm0tcHJvcGVydHkvaW5kZXgnO1xuXG5mdW5jdGlvbiBnZXRPcHBvc2l0ZUNhcmRpbmFsKGRpcmVjdGlvbikge1xuICAgIHN3aXRjaCAoZGlyZWN0aW9uWzBdKSB7XG4gICAgY2FzZSAnTic6XG4gICAgICAgIHJldHVybiAnUyc7XG4gICAgY2FzZSAnUyc6XG4gICAgICAgIHJldHVybiAnTic7XG4gICAgY2FzZSAnRSc6XG4gICAgICAgIHJldHVybiAnVyc7XG4gICAgfVxuXG4gICAgcmV0dXJuICdFJztcbn1cblxuZnVuY3Rpb24gd2l0aG91dChhcnIxLCBhcnIyKSB7IHJldHVybiBhcnIxLmZpbHRlcigoaXRlbSkgPT4gYXJyMi5pbmRleE9mKGl0ZW0pID09PSAtMSk7IH1cblxuY29uc3QgQ0xBU1NfUkVNT1ZBTF9SRUdFWCA9IC9cXHM/Yi1wb3BvdmVyLShhbmNob3J8c2VsZiktKHN0YXJ0fG1pZGRsZXxlbmQpL2c7XG5cbmNvbnN0IERFRkFVTFRfQ0FSRVRfQ09NUE9ORU5UID0gKFxuICAgIDxzdmcgdmlld0JveD0nMCAwIDE0IDkuNScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz5cbiAgICAgICAgPGc+XG4gICAgICAgICAgICA8cG9seWdvbiBjbGFzc05hbWU9J2ItcG9wb3Zlci1jYXJldC1ib3JkZXInIGZpbGw9JyMwMDAnIHBvaW50cz0nNyAwIDE0IDEwIDAgMTAnIC8+XG4gICAgICAgICAgICA8cG9seWdvbiBjbGFzc05hbWU9J2ItcG9wb3Zlci1jYXJldC1maWxsJyBmaWxsPScjRkZGJyBwb2ludHM9JzYuOTgyMzA0NDQgMS43NSAxMi43NSAxMCAxLjI1IDEwJyAvPlxuICAgICAgICA8L2c+XG4gICAgPC9zdmc+XG4pO1xuXG5jb25zdCBTVEFSVCA9IDA7XG5jb25zdCBNSURETEUgPSAxO1xuY29uc3QgRU5EID0gMjtcblxuY29uc3QgY29tYmluYXRpb25zID0gW1xuICAgIHtuYW1lOiAnTk5XJywgICBheDogU1RBUlQsICAgICBheTogU1RBUlQsICAgICAgZHg6IFNUQVJULCAgIGR5OiBFTkR9LFxuICAgIHtuYW1lOiAnTicsICAgICBheDogTUlERExFLCAgICBheTogU1RBUlQsICAgICAgZHg6IE1JRERMRSwgIGR5OiBFTkR9LFxuICAgIHtuYW1lOiAnTk5FJywgICBheDogRU5ELCAgICAgICBheTogU1RBUlQsICAgICAgZHg6IEVORCwgICAgIGR5OiBFTkR9LFxuICAgIHtuYW1lOiAnRU5FJywgICBheDogRU5ELCAgICAgICBheTogU1RBUlQsICAgICAgZHg6IFNUQVJULCAgIGR5OiBTVEFSVH0sXG4gICAge25hbWU6ICdFJywgICAgIGF4OiBFTkQsICAgICAgIGF5OiBNSURETEUsICAgICBkeDogU1RBUlQsICAgZHk6IE1JRERMRX0sXG4gICAge25hbWU6ICdFU0UnLCAgIGF4OiBFTkQsICAgICAgIGF5OiBFTkQsICAgICAgICBkeDogU1RBUlQsICAgZHk6IEVORH0sXG4gICAge25hbWU6ICdTU0UnLCAgIGF4OiBFTkQsICAgICAgIGF5OiBFTkQsICAgICAgICBkeDogRU5ELCAgICAgZHk6IFNUQVJUfSxcbiAgICB7bmFtZTogJ1MnLCAgICAgYXg6IE1JRERMRSwgICAgYXk6IEVORCwgICAgICAgIGR4OiBNSURETEUsICBkeTogU1RBUlR9LFxuICAgIHtuYW1lOiAnU1NXJywgICBheDogU1RBUlQsICAgICBheTogRU5ELCAgICAgICAgZHg6IFNUQVJULCAgIGR5OiBTVEFSVH0sXG4gICAge25hbWU6ICdXU1cnLCAgIGF4OiBTVEFSVCwgICAgIGF5OiBFTkQsICAgICAgICBkeDogRU5ELCAgICAgZHk6IEVORH0sXG4gICAge25hbWU6ICdXJywgICAgIGF4OiBTVEFSVCwgICAgIGF5OiBNSURETEUsICAgICBkeDogRU5ELCAgICAgZHk6IE1JRERMRX0sXG4gICAge25hbWU6ICdXTlcnLCAgIGF4OiBTVEFSVCwgICAgIGF5OiBTVEFSVCwgICAgICBkeDogRU5ELCAgICAgZHk6IFNUQVJUfSxcbl07XG5cbi8qKlxuIyBQb3BvdmVyXG5fX0Egbm9uLWJsb2NraW5nIGNvbnRhaW5lciBwb3NpdGlvbmVkIHRvIGEgc3BlY2lmaWMgYW5jaG9yIGVsZW1lbnQuX19cblxuQSBwb3BvdmVyIGlzIGEgdHlwZSBvZiBbRGlhbG9nXSguL0RpYWxvZykgdGhhdCBpcyBtZWFudCB0byBwcm92aWRlIGFkZGl0aW9uYWwgY29udGV4dCB0byBjb250ZW50IChhbiBcImFuY2hvclwiKSBjdXJyZW50bHkgb24tc2NyZWVuLiBUeXBpY2FsbHksIGEgcG9wb3ZlciBpcyBzcGF3bmVkIGJ5IGludGVyYWN0aW5nIHdpdGggdGhlIGNvbnRlbnQgaXQgZW5yaWNoZXMgYW5kIGlzIGRpc21pc3NlZCBieSBjbGlja2luZyBvciBzaGlmdGluZyBmb2N1cyB0byBhbiBhbHRlcm5hdGUgbG9jYXRpb24uXG5cbkFsaWdubWVudCBvcHRpb25zIGZvciB0aGUgcG9wb3ZlciBhcmUgZGVzaWduZWQgdG8gbWlycm9yIGNvbXBhc3MgZGlyZWN0aW9uczpcblxuYGBgXG4gICAgICAg4oaSICAgICAgIOKGkFxuICAgICAgTk5XICBOICBOTkVcbuKGkyBXTlcgICAgICAgICAgICAgRU5FIOKGk1xuICAgIFcgICBBTkNIT1IgICAgRVxu4oaRIFdTVyAgICAgICAgICAgICBFU0Ug4oaRXG4gICAgICBTU1cgIFMgIFNTRVxuICAgICAgIOKGkiAgICAgICDihpBcbmBgYFxuXG5UaGUgYXJyb3dzIGluZGljYXRlIHdoaWNoIHdheSB0aGUgcG9wb3ZlciB3aWxsIGV4dGVuZCwgZS5nLiDihpIgbWVhbnMgdGhlIHBvcG92ZXIgaXMgYWxpZ25lZCB0byB0aGUgbGVmdCBlZGdlIGFuZCBleHRlbmRzIGluIHRoYXQgZGlyZWN0aW9uLiBEaWFnb25hbCBjb3JuZXJzIChOVywgTkUsIFNFLCBTVykgYXJlIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLlxuXG5gYGBqc3hcbjxQb3BvdmVyXG4gICAgYW5jaG9yPXtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc29tZS1hbmNob3ItZWxlbWVudCcpfVxuICAgIHByZXNldD17UG9wb3Zlci5wcmVzZXQuTn0+XG4gICAgTXkgcG9wb3ZlciBjb250ZW50IVxuPC9Qb3BvdmVyPlxuYGBgXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcG92ZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VxdWVuY2VzXG4gICAgc3RhdGljIHByZXNldCA9IGNvbWJpbmF0aW9ucy5yZWR1Y2UoKG1hcCwgZGVmKSA9PiAoKG1hcFtkZWYubmFtZV0gPSBkZWYpLCBtYXApLCB7fSlcblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC4uLkRpYWxvZy5wcm9wVHlwZXMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgRE9NIGVsZW1lbnQgb3IgUmVhY3QgcmVmZXJlbmNlIChyZWYpIHRvIG9uZSBmb3IgcG9zaXRpb25pbmcgcHVycG9zZXNcbiAgICAgICAgICovXG4gICAgICAgIGFuY2hvcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuaW5zdGFuY2VPZihIVE1MRWxlbWVudCksXG4gICAgICAgICAgICBQcm9wVHlwZXMuZWxlbWVudCxcbiAgICAgICAgXSkuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogaWYgdGhlIGdpdmVuIGFsaWdubWVudCBzZXR0aW5ncyB3b3VsZCB0YWtlIHRoZSBwb3BvdmVyIG91dCBvZiBib3VuZHMsIGNoYW5nZSB0aGUgYWxpZ25tZW50IGFzIG5lY2Vzc2FyeSB0byByZW1haW4gaW4gdGhlIHZpZXdwb3J0XG4gICAgICAgICAqL1xuICAgICAgICBhdXRvUmVwb3NpdGlvbjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgRE9NIGVsZW1lbnQgb3IgUmVhY3QgcmVmZXJlbmNlIChyZWYpIHRvIG9uZSBmb3IgcG9zaXRpb25pbmcgcHVycG9zZXMsIHRoZSBjYXJldCBjb21wb25lbnQgd2lsbFxuICAgICAgICAgKiBiZSBhdXRvbWF0aWNhbGx5IHBvc2l0aW9uZWQgdG8gY2VudGVyIG9uIHRoaXMgcHJvdmlkZWQgYW5jaG9yOyBieSBkZWZhdWx0IGl0IHdpbGwgY2VudGVyXG4gICAgICAgICAqIG9uIGBwcm9wcy5hbmNob3JgXG4gICAgICAgICAqL1xuICAgICAgICBjYXJldEFuY2hvcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuaW5zdGFuY2VPZihIVE1MRWxlbWVudCksXG4gICAgICAgICAgICBQcm9wVHlwZXMuZWxlbWVudCxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBKU1ggdGhhdCBpcyByZW5kZXJlZCBhbmQgdXNlZCB0byBwb2ludCBhdCB0aGUgbWlkZGxlIG9mIHRoZSBhbmNob3IgZWxlbWVudCBhbmQgaW5kaWNhdGUgdGhlIGNvbnRleHQgb2YgdGhlIHBvcG92ZXJcbiAgICAgICAgICovXG4gICAgICAgIGNhcmV0Q29tcG9uZW50OiBQcm9wVHlwZXMuZWxlbWVudCxcblxuICAgICAgICBwb3J0YWxQcm9wczogUHJvcFR5cGVzLnNoYXBlKFBvcnRhbC5Qcm9wVHlwZXMpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgYGBqc3hcbiAgICAgICAgICogPFBvcG92ZXJcbiAgICAgICAgICogICAgIGFuY2hvcj17ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvbWUtYW5jaG9yLWVsZW1lbnQnKX1cbiAgICAgICAgICogICAgIHByZXNldD17UG9wb3Zlci5wcmVzZXQuTk5FfT5cbiAgICAgICAgICogICAgIE15IHBvcG92ZXIgY29udGVudCFcbiAgICAgICAgICogPC9Qb3BvdmVyPlxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHByZXNldDogUHJvcFR5cGVzLm9uZU9mKFtcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0Lk5OVyxcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0Lk4sXG4gICAgICAgICAgICBQb3BvdmVyLnByZXNldC5OTkUsXG4gICAgICAgICAgICBQb3BvdmVyLnByZXNldC5FTkUsXG4gICAgICAgICAgICBQb3BvdmVyLnByZXNldC5FLFxuICAgICAgICAgICAgUG9wb3Zlci5wcmVzZXQuRVNFLFxuICAgICAgICAgICAgUG9wb3Zlci5wcmVzZXQuU1NFLFxuICAgICAgICAgICAgUG9wb3Zlci5wcmVzZXQuUyxcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0LlNTVyxcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0LldTVyxcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0LlcsXG4gICAgICAgICAgICBQb3BvdmVyLnByZXNldC5XTlcsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1wb3BvdmVyYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICB3cmFwcGVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgLi4uRGlhbG9nLmRlZmF1bHRQcm9wcyxcbiAgICAgICAgYW5jaG9yOiB1bmRlZmluZWQsXG4gICAgICAgIGF1dG9SZXBvc2l0aW9uOiB0cnVlLFxuICAgICAgICBjYXB0dXJlRm9jdXM6IGZhbHNlLFxuICAgICAgICBjYXJldEFuY2hvcjogdW5kZWZpbmVkLFxuICAgICAgICBjYXJldENvbXBvbmVudDogREVGQVVMVF9DQVJFVF9DT01QT05FTlQsXG4gICAgICAgIGNsb3NlT25Fc2NLZXk6IHRydWUsXG4gICAgICAgIGNsb3NlT25PdXRzaWRlQ2xpY2s6IHRydWUsXG4gICAgICAgIGNsb3NlT25PdXRzaWRlU2Nyb2xsOiB0cnVlLFxuICAgICAgICBwb3J0YWxQcm9wczoge30sXG4gICAgICAgIHByZXNldDogUG9wb3Zlci5wcmVzZXQuUyxcbiAgICAgICAgd3JhcHBlclByb3BzOiB7fSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gd2l0aG91dChPYmplY3Qua2V5cyhQb3BvdmVyLmRlZmF1bHRQcm9wcyksIERpYWxvZy5pbnRlcm5hbEtleXMpXG5cbiAgICBzdGF0aWMgZ2V0QWxpZ25tZW50Q2xhc3NGcmFnbWVudChjb25zdGFudCkge1xuICAgICAgICBzd2l0Y2ggKGNvbnN0YW50KSB7XG4gICAgICAgIGNhc2UgU1RBUlQ6XG4gICAgICAgICAgICByZXR1cm4gJ3N0YXJ0JztcblxuICAgICAgICBjYXNlIE1JRERMRTpcbiAgICAgICAgICAgIHJldHVybiAnbWlkZGxlJztcblxuICAgICAgICBjYXNlIEVORDpcbiAgICAgICAgICAgIHJldHVybiAnZW5kJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNhY2hlVmlld3BvcnRDYXJ0b2dyYXBoeShhbmNob3IsIGNhcmV0QW5jaG9yKSB7XG4gICAgICAgIGNvbnN0IGJvZHlSZWN0ID0gZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICB0aGlzLmFuY2hvclJlY3QgPSBhbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMuY2FyZXRBbmNob3JSZWN0ID0gY2FyZXRBbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgLy8gbm9ybWFsbHkgd2UnZCB1c2Ugc2Nyb2xsVG9wL3Njcm9sbExlZnQsIGJ1dCBzY3JvbGwgYmVoYXZpb3IgY2hhbmdlcyB3aGVuIHBvc2l0aW9uOiBzdGlja3lcbiAgICAgICAgLy8gaXMgZW5hYmxlZCBpbiBDaHJvbWUgYW5kIGludmVydGluZyB0aGUgbmVnYXRpdmUgdmlld3BvcnQgcmVjdCB2YWx1ZSBzZWVtcyB0byB3b3JrIG1vcmVcbiAgICAgICAgLy8gY29uc2lzdGVudGx5XG4gICAgICAgIHRoaXMuYm9keUxlZnQgPSBib2R5UmVjdC5sZWZ0ICogLTE7XG4gICAgICAgIHRoaXMuYm9keVRvcCA9IGJvZHlSZWN0LnRvcCAqIC0xO1xuICAgIH1cblxuICAgIGdldE5leHRDYXJldFhQb3NpdGlvbih7bmFtZSwgYXgsIGR4LCBheSwgZHl9LCBjYXJldCA9IHRoaXMuJGNhcmV0KSB7XG4gICAgICAgIGxldCBuZXh0WCA9IDA7XG5cbiAgICAgICAgaWYgKG5hbWVbMF0gPT09ICdOJyB8fCBuYW1lWzBdID09PSAnUycpIHtcbiAgICAgICAgICAgIC8vIHBvcG92ZXIgaXMgYWJvdmUvYmVsb3csIHNvIHdlIG5lZWQgdG8gZGV0ZWN0IHRoZSBYIHBvc2l0aW9uIG9mIHRoZSBjYXJldCBhbmNob3JcbiAgICAgICAgICAgIG5leHRYID0gdGhpcy5jYXJldEFuY2hvclJlY3QubGVmdCAtIHRoaXMuYW5jaG9yUmVjdC5sZWZ0ICsgdGhpcy5jYXJldEFuY2hvclJlY3Qud2lkdGggLyAyO1xuXG4gICAgICAgICAgICBpZiAoZHggPT09IE1JRERMRSkge1xuICAgICAgICAgICAgICAgIG5leHRYICs9ICh0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGllbnRXaWR0aCAtIHRoaXMuYW5jaG9yUmVjdC53aWR0aCkgLyAyO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkeCA9PT0gRU5EKSB7XG4gICAgICAgICAgICAgICAgbmV4dFggKz0gdGhpcy5kaWFsb2cuJHdyYXBwZXIuY2xpZW50V2lkdGggLSB0aGlzLmFuY2hvclJlY3Qud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBwb3BvdmVyIGlzIGxlZnQvcmlnaHQsIHNvIHdlIG5lZWQgdG8gZGV0ZWN0IHRoZSBZIHBvc2l0aW9uIG9mIHRoZSBjYXJldCBhbmNob3IgKGNhcmV0IGlzIHJvdGF0ZWQgdmlhIENTUylcbiAgICAgICAgICAgIG5leHRYID0gdGhpcy5jYXJldEFuY2hvclJlY3QudG9wIC0gdGhpcy5hbmNob3JSZWN0LnRvcCArIHRoaXMuY2FyZXRBbmNob3JSZWN0LmhlaWdodCAvIDI7XG5cbiAgICAgICAgICAgIGlmIChkeSA9PT0gTUlERExFKSB7XG4gICAgICAgICAgICAgICAgbmV4dFggKz0gKHRoaXMuZGlhbG9nLiR3cmFwcGVyLmNsaWVudEhlaWdodCAtIHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQpIC8gMjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZHkgPT09IEVORCkge1xuICAgICAgICAgICAgICAgIG5leHRYICs9IHRoaXMuZGlhbG9nLiR3cmFwcGVyLmNsaWVudEhlaWdodCAtIHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBuZXh0WCAtPSBjYXJldC5jbGllbnRXaWR0aCAvIDI7XG5cbiAgICAgICAgcmV0dXJuIG5leHRYO1xuICAgIH1cblxuICAgIGdldE5leHREaWFsb2dYUG9zaXRpb24oe2F4LCBkeH0sIGRpYWxvZyA9IHRoaXMuZGlhbG9nLiR3cmFwcGVyKSB7XG4gICAgICAgIGxldCBuZXh0WCA9IHRoaXMuYW5jaG9yUmVjdC5sZWZ0ICsgdGhpcy5ib2R5TGVmdDtcblxuICAgICAgICBzd2l0Y2ggKGF4KSB7XG4gICAgICAgIGNhc2UgTUlERExFOlxuICAgICAgICAgICAgbmV4dFggKz0gdGhpcy5hbmNob3JSZWN0LndpZHRoIC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRU5EOlxuICAgICAgICAgICAgbmV4dFggKz0gdGhpcy5hbmNob3JSZWN0LndpZHRoO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGR4KSB7XG4gICAgICAgIGNhc2UgTUlERExFOlxuICAgICAgICAgICAgbmV4dFggLT0gZGlhbG9nLmNsaWVudFdpZHRoIC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRU5EOlxuICAgICAgICAgICAgbmV4dFggLT0gZGlhbG9nLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dFg7XG4gICAgfVxuXG4gICAgZ2V0TmV4dERpYWxvZ1lQb3NpdGlvbih7YXksIGR5fSwgZGlhbG9nID0gdGhpcy5kaWFsb2cuJHdyYXBwZXIpIHtcbiAgICAgICAgbGV0IG5leHRZID0gdGhpcy5hbmNob3JSZWN0LnRvcCArIHRoaXMuYm9keVRvcDtcblxuICAgICAgICBzd2l0Y2ggKGF5KSB7XG4gICAgICAgIGNhc2UgTUlERExFOlxuICAgICAgICAgICAgbmV4dFkgKz0gdGhpcy5hbmNob3JSZWN0LmhlaWdodCAvIDI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEVORDpcbiAgICAgICAgICAgIG5leHRZICs9IHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoZHkpIHtcbiAgICAgICAgY2FzZSBNSURETEU6XG4gICAgICAgICAgICBuZXh0WSAtPSBkaWFsb2cuY2xpZW50SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRU5EOlxuICAgICAgICAgICAgbmV4dFkgLT0gZGlhbG9nLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5leHRZO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgcG9zaXRpb24gY29tYmluYXRpb24sIHdpbGwgdGhlIHBvcG92ZXIgZml0IGludG8gdGhlIHNwYWNlIHdpdGhvdXQgb2NjbHVzaW9uP1xuICAgICAqXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAgY29uZmlnXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgY29uZmlnLmF4XG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgY29uZmlnLmF5XG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgY29uZmlnLmR4XG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgY29uZmlnLmR5XG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgcEhlaWdodFxuICAgICAqIEBwYXJhbSAge051bWJlcn0gIHBXaWR0aFxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBpc1Bvc2l0aW9uVmFsaWQoe25hbWUsIGF4LCBheSwgZHgsIGR5fSwgcEhlaWdodCwgcFdpZHRoKSB7XG4gICAgICAgIGNvbnN0IGNhcmRpbmFsID0gbmFtZVswXTtcblxuICAgICAgICBpZiAoY2FyZGluYWwgPT09ICdOJyB8fCBjYXJkaW5hbCA9PT0gJ1MnKSB7XG4gICAgICAgICAgICBpZiAoY2FyZGluYWwgPT09ICdOJyAmJiB0aGlzLmFuY2hvclJlY3QudG9wIC0gcEhlaWdodCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgLyogd291bGQgb2NjbHVkZSBhYm92ZSAqL1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjYXJkaW5hbCA9PT0gJ1MnICYmIHRoaXMuYW5jaG9yUmVjdC5ib3R0b20gKyBwSGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAgIC8qIHdvdWxkIG9jY2x1ZGUgYmVsb3cgKi9cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGF4ID09PSBTVEFSVCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LmxlZnQgKyBwV2lkdGggPiB3aW5kb3cuaW5uZXJXaWR0aCkgICAgICAvKiB3b3VsZCBvY2NsdWRlIHJpZ2h0ICovXG4gICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLmFuY2hvclJlY3QubGVmdCA8IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGFuY2hvciBpcyBwYXJ0aWFsbHkgb2Zmc2NyZWVuIHRvIHRoZSBsZWZ0ICovXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXggPT09IE1JRERMRSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LmxlZnQgLSBwV2lkdGggLyAyIDwgMCkgICAgICAgICAgICAgICAgICAvKiB3b3VsZCBvY2NsdWRlIGxlZnQgKi9cbiAgICAgICAgICAgICAgICAgICAgfHwgKHRoaXMuYW5jaG9yUmVjdC5sZWZ0ICsgcFdpZHRoIC8gMiA+IHdpbmRvdy5pbm5lcldpZHRoKSAgLyogd291bGQgb2NjbHVkZSByaWdodCAqL1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgICAgICAgICh0aGlzLmFuY2hvclJlY3QubGVmdCAtIHBXaWR0aCA8IDApICAgICAgICAgICAgICAgICAgLyogd291bGQgb2NjbHVkZSBsZWZ0ICovXG4gICAgICAgICAgICAgICAgfHwgKHRoaXMuYW5jaG9yUmVjdC5yaWdodCA+IHdpbmRvdy5pbm5lcldpZHRoKSAgICAgICAgICAvKiBhbmNob3IgaXMgcGFydGlhbGx5IG9mZnNjcmVlbiB0byB0aGUgcmlnaHQgKi9cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjYXJkaW5hbCA9PT0gJ1cnIHx8IGNhcmRpbmFsID09PSAnRScpIHtcbiAgICAgICAgICAgIGlmIChjYXJkaW5hbCA9PT0gJ1cnICYmIHRoaXMuYW5jaG9yUmVjdC5sZWZ0IC0gcFdpZHRoIDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICAvKiB3b3VsZCBvY2NsdWRlIGxlZnQgKi9cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FyZGluYWwgPT09ICdFJyAmJiB0aGlzLmFuY2hvclJlY3QucmlnaHQgKyBwV2lkdGggPiB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICAvKiB3b3VsZCBvY2NsdWRlIHJpZ2h0ICovXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChheSA9PT0gU1RBUlQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYW5jaG9yUmVjdC50b3AgKyBwSGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0KSAgICAvKiB3b3VsZCBvY2NsdWRlIGJlbG93ICovXG4gICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLmFuY2hvclJlY3QudG9wIDwgMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogYW5jaG9yIGlzIHBhcnRpYWxseSBvZmZzY3JlZW4gYWJvdmUgKi9cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChheSA9PT0gTUlERExFKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEoXG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFuY2hvclJlY3QudG9wICsgdGhpcy5hbmNob3JSZWN0LmhlaWdodCAvIDIgLSBwSGVpZ2h0IC8gMiA8IDApICAgICAgICAgICAgICAgICAgICAgLyogd291bGQgb2NjbHVkZSBhYm92ZSAqL1xuICAgICAgICAgICAgICAgICAgICB8fCAodGhpcy5hbmNob3JSZWN0LnRvcCArIHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQgLyAyICsgcEhlaWdodCAvIDIgPiB3aW5kb3cuaW5uZXJIZWlnaHQpICAgIC8qIHdvdWxkIG9jY2x1ZGUgYmVsb3cgKi9cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LnRvcCAtIHBIZWlnaHQgPCAwKSAgICAgICAgICAgICAgLyogd291bGQgb2NjbHVkZSBhYm92ZSAqL1xuICAgICAgICAgICAgICAgIHx8ICh0aGlzLmFuY2hvclJlY3QuYm90dG9tID4gd2luZG93LmlubmVySGVpZ2h0KSAgICAvKiBhbmNob3IgaXMgcGFydGlhbGx5IG9mZnNjcmVlbiBiZWxvdyAqL1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldFZhbGlkQWxpZ25tZW50UHJlc2V0KCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZGlhbG9nLiR3cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgLy8gZ2l2ZW4gdGhlIGN1cnJlbnQgdmlld3BvcnQgY2FydG9ncmFwaHksIHdoZXJlIGNhbiB3ZSBzdGljayB0aGUgcG9wb3ZlclxuICAgICAgICAvLyBzbyBpdCB3b24ndCBiZSBwYXJ0aWFsbHkgb2NjbHVkZWQ/XG4gICAgICAgIGNvbnN0IHZhbGlkQ29tYm9zID0gY29tYmluYXRpb25zLmZpbHRlcigoY29uZmlnKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1Bvc2l0aW9uVmFsaWQoY29uZmlnLCBoZWlnaHQsIHdpZHRoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMS4gaXMgdGhlIHJlcXVlc3RlZCBwcmVzZXQgaW4gdGhlIGxpc3Q/XG4gICAgICAgIC8vIDIuIGRvZXMgdGhlIGNvbnN1bWVyIG5vdCB3YW50IHVzIGF1dG8tcmVwb3NpdGlvbmluZz9cbiAgICAgICAgLy8gMy4gYXJlIG5vIGNvbWJvcyB2YWxpZD9cbiAgICAgICAgaWYgKHZhbGlkQ29tYm9zLmluZGV4T2YodGhpcy5wcm9wcy5wcmVzZXQpICE9PSAtMSB8fCAhdGhpcy5wcm9wcy5hdXRvUmVwb3NpdGlvbiB8fCAhdmFsaWRDb21ib3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5wcmVzZXQ7IC8vIGp1c3QgZ28gd2l0aCB0aGUgcmVxdWVzdGVkIHByZXNldFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gb3RoZXJ3aXNlLi4uIHdlIHRyeSB0byBmaW5kIHRoZSBiZXN0IHBvc3NpYmxlIGZhbGxiYWNrIG9wdGlvblxuXG4gICAgICAgIC8vIG9wdGltaXplIGZvciB0aGUgcmVxdWVzdGVkIHByZXNldCBoZW1pc3BoZXJlXG4gICAgICAgIGNvbnN0IGJlc3RDb21ib3MgPSB2YWxpZENvbWJvcy5maWx0ZXIoKHtuYW1lfSkgPT4gbmFtZVswXSA9PT0gdGhpcy5wcm9wcy5wcmVzZXQubmFtZVswXSk7XG5cbiAgICAgICAgaWYgKGJlc3RDb21ib3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gYmVzdENvbWJvc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoZW4gdGhlIG9wcG9zaXRlIChlLmcuIHRoZSBlbGVtZW50IGlzIHRvbyBsb3cgaW4gdGhlIHZpZXdwb3J0IHNvIGZsaXAgdXAgaW5zdGVhZCBvZiBkb3duKVxuICAgICAgICBjb25zdCBvcHBvc2l0ZUNhcmRpbmFsID0gZ2V0T3Bwb3NpdGVDYXJkaW5hbCh0aGlzLnByb3BzLnByZXNldC5uYW1lKTtcbiAgICAgICAgY29uc3Qgb2theUNvbWJvcyA9IHZhbGlkQ29tYm9zLmZpbHRlcigoe25hbWV9KSA9PiBuYW1lWzBdID09PSBvcHBvc2l0ZUNhcmRpbmFsKTtcblxuICAgICAgICBpZiAob2theUNvbWJvcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBva2F5Q29tYm9zWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2hhdGV2ZXIncyBsZWZ0IHdpbGwgaGF2ZSB0byBkb1xuICAgICAgICByZXR1cm4gdmFsaWRDb21ib3NbMF07XG4gICAgfVxuXG4gICAgYWxpZ24gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IHRoaXMucHJvcHMuYW5jaG9yIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLmFuY2hvclxuICAgICAgICAgICAgICAgICAgICAgICA6IGZpbmRET01Ob2RlKHRoaXMucHJvcHMuYW5jaG9yKTtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbiAgICAgICAgY29uc3QgY2FyZXRBbmNob3IgPSB0aGlzLnByb3BzLmNhcmV0QW5jaG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLmNhcmV0QW5jaG9yIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5jYXJldEFuY2hvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmaW5kRE9NTm9kZSh0aGlzLnByb3BzLmNhcmV0QW5jaG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYW5jaG9yO1xuXG4gICAgICAgIHRoaXMuY2FjaGVWaWV3cG9ydENhcnRvZ3JhcGh5KGFuY2hvciwgY2FyZXRBbmNob3IpO1xuXG4gICAgICAgIGNvbnN0IHByZXNldCA9IHRoaXMuZ2V0VmFsaWRBbGlnbm1lbnRQcmVzZXQoKTtcbiAgICAgICAgY29uc3QgZnJhZyA9IFBvcG92ZXIuZ2V0QWxpZ25tZW50Q2xhc3NGcmFnbWVudDtcblxuICAgICAgICB0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGFzc05hbWUgPSB0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGFzc05hbWUucmVwbGFjZShDTEFTU19SRU1PVkFMX1JFR0VYLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBgIGItcG9wb3Zlci1hbmNob3IteC0ke2ZyYWcocHJlc2V0LmF4KX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYCBiLXBvcG92ZXItYW5jaG9yLXktJHtmcmFnKHByZXNldC5heSl9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGAgYi1wb3BvdmVyLXNlbGYteC0ke2ZyYWcocHJlc2V0LmR4KX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYCBiLXBvcG92ZXItc2VsZi15LSR7ZnJhZyhwcmVzZXQuZHkpfWA7XG5cbiAgICAgICAgY29uc3QgZHggPSBNYXRoLnJvdW5kKHRoaXMuZ2V0TmV4dERpYWxvZ1hQb3NpdGlvbihwcmVzZXQpKTtcbiAgICAgICAgY29uc3QgZHkgPSBNYXRoLnJvdW5kKHRoaXMuZ2V0TmV4dERpYWxvZ1lQb3NpdGlvbihwcmVzZXQpKTtcblxuICAgICAgICB0aGlzLmRpYWxvZy4kd3JhcHBlci5zdHlsZVt0cmFuc2Zvcm1Qcm9wXSA9IGB0cmFuc2xhdGUoJHtkeH1weCwgJHtkeX1weClgO1xuXG4gICAgICAgIGNvbnN0IGNhcmRpbmFsID0gcHJlc2V0Lm5hbWVbMF07XG4gICAgICAgIGNvbnN0IGxvbmdpdHVkaW5hbCA9IGNhcmRpbmFsID09PSAnTicgfHwgY2FyZGluYWwgPT09ICdTJztcblxuICAgICAgICAvLyB0aGUgY2FyZXQgaXMgaW5pdGlhbGx5IHBvc2l0aW9uZWQgYXQgMCwwIGluc2lkZSB0aGUgZGlhbG9nXG4gICAgICAgIC8vIHdoaWNoIGlzIGFscmVhZHkgcG9zaXRpb25lZCBhdCB0aGUgYW5jaG9yLCBzbyB3ZSBqdXN0IG5lZWQgdG9cbiAgICAgICAgLy8gbWFrZSBzbWFsbCBhZGp1c3RtZW50cyBhcyBuZWNlc3NhcnkgdG8gbGluZSB1cCB0aGUgY2FyZXRcbiAgICAgICAgLy8gd2l0aCB0aGUgdmlzdWFsIGNlbnRlciBvZiB0aGUgYW5jaG9yXG4gICAgICAgIHRoaXMuJGNhcmV0LnN0eWxlW2xvbmdpdHVkaW5hbCA/ICdsZWZ0JyA6ICd0b3AnXSA9IE1hdGgucm91bmQodGhpcy5nZXROZXh0Q2FyZXRYUG9zaXRpb24ocHJlc2V0KSkgKyAncHgnO1xuICAgICAgICB0aGlzLiRjYXJldC5zdHlsZVtsb25naXR1ZGluYWwgPyAndG9wJyA6ICdsZWZ0J10gPSAnMHB4JztcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5hbGlnbigpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5hbGlnbiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB0aGlzLmFsaWduKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmFsaWduLCB0cnVlKTsgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFBvcnRhbCB7Li4ucHJvcHMucG9ydGFsUHJvcHN9PlxuICAgICAgICAgICAgICAgIDxEaWFsb2dcbiAgICAgICAgICAgICAgICAgICAgey4uLm9taXQocHJvcHMsIFBvcG92ZXIuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXsoaW5zdGFuY2UpID0+ICh0aGlzLmRpYWxvZyA9IGluc3RhbmNlKX1cbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNsb25lRWxlbWVudChwcm9wcy5jYXJldENvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogKG5vZGUpID0+ICh0aGlzLiRjYXJldCA9IG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3goJ2ItcG9wb3Zlci1jYXJldCcsIHByb3BzLmNhcmV0Q29tcG9uZW50LnByb3BzLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXJQcm9wcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMud3JhcHBlclByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjeCgnYi1wb3BvdmVyJywgcHJvcHMud3JhcHBlclByb3BzLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICA8L1BvcnRhbD5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbi8qKlxuIyBQcm9ncmVzc2l2ZURpc2Nsb3N1cmVcbl9fSGlkZSBjb250ZW50IHVudGlsIGl0J3MgbmVlZGVkLCB3aXRoIGNvbmZpZ3VyYWJsZSB0ZWFzZXJzLl9fXG5cbk1lY2hhbmljYWxseSwgaGlkZGVuIGRpc2Nsb3N1cmUgY29udGVudCBpcyBub3QgcmVuZGVyZWQgdG8gdGhlIERPTSB1bnRpbCBpdCBpcyBuZWVkZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2dyZXNzaXZlRGlzY2xvc3VyZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKiBpZiBhIGZ1bmN0aW9uIGlzIHBhc3NlZCwgaXQgd2lsbCBub3QgYmUgY2FsbGVkIHVudGlsIHRoZSBkaXNjbG9zdXJlIGNvbnRlbnQgaXMgZHVlIHRvIGJlIHJlbmRlcmVkICovXG4gICAgICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMuYW55LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgdmFsaWQgSFRNTCB0YWcgbmFtZSBvciBhIFJlYWN0IGNvbXBvbmVudCBmYWN0b3J5LCBhbnl0aGluZyB0aGF0IGNhbiBiZSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBSZWFjdC5jcmVhdGVFbGVtZW50YFxuICAgICAgICAgKi9cbiAgICAgICAgY29tcG9uZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFsbG93cyB0aGUgZGlzY2xvc3VyZSB0byBiZSByZW5kZXJlZCBleHBhbmRlZCBieSBkZWZhdWx0XG4gICAgICAgICAqL1xuICAgICAgICBleHBhbmRlZDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBjb250ZW50IGlzIHNob3duOyBub3QgY2FsbGVkIG9uIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAqL1xuICAgICAgICBvbkV4cGFuZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBjb250ZW50IGlzIGhpZGRlbjsgbm90IGNhbGxlZCBvbiBpbml0aWFsIHJlbmRlclxuICAgICAgICAgKi9cbiAgICAgICAgb25IaWRlOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBzaG93biBuZXh0IHRvIHRoZSBleHBhbnNpb24gdG9nZ2xlLCBlLmcuIFwiQWR2YW5jZWQgT3B0aW9uc1wiXG4gICAgICAgICAqL1xuICAgICAgICB0ZWFzZXI6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb250ZW50IHRvIGJlIHNob3duIG5leHQgdG8gdGhlIGV4cGFuc2lvbiB0b2dnbGUgd2hlbiB0aGUgZGlzY2xvc3VyZSBpcyBpbiBcImV4cGFuZGVkXCIgc3RhdGUsIGUuZy4gXCJIaWRlIEFkdmFuY2VkIE9wdGlvbnNcIlxuICAgICAgICAgKi9cbiAgICAgICAgdGVhc2VyRXhwYW5kZWQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1kaXNjbG9zdXJlLXRvZ2dsZWAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgdG9nZ2xlUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGNvbXBvbmVudDogJ2RpdicsXG4gICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcbiAgICAgICAgb25FeHBhbmQ6IG5vb3AsXG4gICAgICAgIG9uSGlkZTogbm9vcCxcbiAgICAgICAgdGVhc2VyOiBudWxsLFxuICAgICAgICB0ZWFzZXJFeHBhbmRlZDogbnVsbCxcbiAgICAgICAgdG9nZ2xlUHJvcHM6IHt9LFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhQcm9ncmVzc2l2ZURpc2Nsb3N1cmUuZGVmYXVsdFByb3BzKVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGV4cGFuZGVkOiB0aGlzLnByb3BzLmV4cGFuZGVkLFxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHMpIHtcbiAgICAgICAgaWYgKG5ld1Byb3BzLmV4cGFuZGVkICE9PSB0aGlzLnByb3BzLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogbmV3UHJvcHMuZXhwYW5kZWR9LCB0aGlzLmRpc3BhdGNoQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGF0Y2hDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wc1t0aGlzLnN0YXRlLmV4cGFuZGVkID8gJ29uRXhwYW5kJyA6ICdvbkhpZGUnXSgpO1xuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZH0sIHRoaXMuZGlzcGF0Y2hDYWxsYmFjayk7XG5cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy50b2dnbGVQcm9wcy5vbkNsaWNrKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy50b2dnbGVQcm9wcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZH0sIHRoaXMuZGlzcGF0Y2hDYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLnRvZ2dsZVByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMudG9nZ2xlUHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSdjb250ZW50J1xuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdiLWRpc2Nsb3N1cmUtY29udGVudCc+XG4gICAgICAgICAgICAgICAgICAgIHtpc0Z1bmN0aW9uKHRoaXMucHJvcHMuY2hpbGRyZW4pID8gdGhpcy5wcm9wcy5jaGlsZHJlbigpIDogdGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBQcm9ncmVzc2l2ZURpc2Nsb3N1cmUuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1kaXNjbG9zdXJlJywgdGhpcy5wcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAnYi1kaXNjbG9zdXJlLWV4cGFuZGVkJzogdGhpcy5zdGF0ZS5leHBhbmRlZCxcbiAgICAgICAgICAgICAgICB9KX0+XG5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLnRvZ2dsZVByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J3RvZ2dsZSdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1kaXNjbG9zdXJlLXRvZ2dsZScsIHRoaXMucHJvcHMudG9nZ2xlUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja31cbiAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PScwJz5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXhwYW5kZWQgPyB0aGlzLnByb3BzLnRlYXNlckV4cGFuZGVkIHx8IHRoaXMucHJvcHMudGVhc2VyIDogdGhpcy5wcm9wcy50ZWFzZXJ9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJDb250ZW50KCl9XG4gICAgICAgICAgICA8L3RoaXMucHJvcHMuY29tcG9uZW50PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vYm91bmRsZXNzLWJ1dHRvbi9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuLyoqXG4jIFByb2dyZXNzXG5fX0FuIHVub3BpbmlvbmF0ZWQgcHJvZ3Jlc3MgaW1wbGVtZW50YXRpb24sIGFsbG93aW5nIGZvciBhIHZhcmlldHkgb2Ygc2hhcGVzIGFuZCBlZmZlY3RzLl9fXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2dyZXNzIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXByb2dyZXNzLWNhbmNlbGAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgY2FuY2VsUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSB2YWxpZCBIVE1MIHRhZyBuYW1lIG9yIGEgUmVhY3QgY29tcG9uZW50IGZhY3RvcnksIGFueXRoaW5nIHRoYXQgY2FuIGJlIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gYFJlYWN0LmNyZWF0ZUVsZW1lbnRgXG4gICAgICAgICAqL1xuICAgICAgICBjb21wb25lbnQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgdmFsdWUgdG8gc2hvdyBhcyBhIGxhYmVsIG9mIHRoZSBwcm9ncmVzcywgZS5nLiBcIjUwJVwiXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXByb2dyZXNzLWxhYmVsYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpZiBzdXBwbGllZCwgYWRkcyBhIGNhbmNlbCBlbGVtZW50IGFuZCBjYWxscyB0aGlzIGZ1bmN0aW9uIHdoZW4gdGhhdCBlbGVtZW50IGlzIGNsaWNrZWRcbiAgICAgICAgICovXG4gICAgICAgIG9uQ2FuY2VsOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIGludGVnZXIgKGFuZCB1bml0LCBpZiBhcHBsaWNhYmxlKSBvZiB0aGUgY3VycmVudCBwcm9ncmVzcyBzdGF0ZSwgZS5nLiAwLjAxIChvcGFjaXR5KVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvZ3Jlc3M6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgUHJvcFR5cGVzLm51bWJlcixcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXByb2dyZXNzYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBwcm9ncmVzc1Byb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgQ1NTIHByb3BlcnR5IHRvIHR3ZWVuIChtdXN0IGFjY2VwdCBwZXJjZW50YWdlcykgLSBkZWZhdWx0cyB0byBcIndpZHRoXCJcbiAgICAgICAgICovXG4gICAgICAgIHR3ZWVuUHJvcGVydHk6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2FuY2VsUHJvcHM6IHt9LFxuICAgICAgICBjb21wb25lbnQ6ICdkaXYnLFxuICAgICAgICBsYWJlbDogbnVsbCxcbiAgICAgICAgbGFiZWxQcm9wczoge30sXG4gICAgICAgIG9uQ2FuY2VsOiBudWxsLFxuICAgICAgICBwcm9ncmVzczogdW5kZWZpbmVkLFxuICAgICAgICBwcm9ncmVzc1Byb3BzOiB7fSxcbiAgICAgICAgdHdlZW5Qcm9wZXJ0eTogJ3dpZHRoJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoUHJvZ3Jlc3MuZGVmYXVsdFByb3BzKVxuXG4gICAgcmVuZGVyTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhYmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMubGFiZWxQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdsYWJlbCdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wcm9ncmVzcy1sYWJlbCcsIHRoaXMucHJvcHMubGFiZWxQcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMubGFiZWx9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyQ2FuY2VsKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNhbmNlbCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmNhbmNlbFByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2NhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wcm9ncmVzcy1jYW5jZWwnLCB0aGlzLnByb3BzLmNhbmNlbFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIG9uUHJlc3NlZD17dGhpcy5wcm9wcy5vbkNhbmNlbH0gLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJQcm9ncmVzcygpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5wcm9ncmVzc1Byb3BzfVxuICAgICAgICAgICAgICAgIHJlZj0ncHJvZ3Jlc3MnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wcm9ncmVzcycsIHRoaXMucHJvcHMucHJvZ3Jlc3NQcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2ItcHJvZ3Jlc3MtaW5kZXRlcm1pbmF0ZSc6IHR5cGVvZiB0aGlzLnByb3BzLnByb2dyZXNzID09PSAndW5kZWZpbmVkJyxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICByb2xlPSdwcmVzZW50YXRpb24nXG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5wcm9wcy5wcm9ncmVzc1Byb3BzLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBbdGhpcy5wcm9wcy50d2VlblByb3BlcnR5XTogdGhpcy5wcm9wcy5wcm9ncmVzcyxcbiAgICAgICAgICAgICAgICB9fSAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0aGlzLnByb3BzLmNvbXBvbmVudFxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFByb2dyZXNzLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcHJvZ3Jlc3Mtd3JhcHBlcicsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyUHJvZ3Jlc3MoKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJMYWJlbCgpfVxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckNhbmNlbCgpfVxuICAgICAgICAgICAgPC90aGlzLnByb3BzLmNvbXBvbmVudD5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5pbXBvcnQgdXVpZCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtdXVpZC9pbmRleCc7XG5cbi8qKlxuIyBSYWRpb1xuX19BbiBhY2Nlc3NpYmxlIHJhZGlvIGZvcm0gY29udHJvbC5fX1xuXG5SYWRpbyBpcyBpbXBsZW1lbnRlZCBhcyBhIFwiY29udHJvbGxlZCBpbnB1dFwiLCBtZWFuaW5nIGl0IGlzIGEgZGlyZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtb2RlbCBkYXRhIHBhc3NlZCBpbnNpZGUuIFVzZXIgaW50ZXJhY3Rpb24gd2lsbCBidWJibGUgY2hhbmdlcyBpbiB0aGUgZm9ybSBvZiBgb25TZWxlY3RlZGAgdGhhdCBhIGNvbnRyb2xsZXIgdmlldyBtdXN0IGludGVyY2VwdCBhbmQgYXBwbHkgYWdhaW5zdCB0aGUgZGF0YSBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFkaW8gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItcmFkaW9gIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGlucHV0UHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBSZWFjdC1yZW5kZXJhYmxlIGNvbnRlbnQsIG1vc3QgY29tbW9ubHkgYSBzaW1wbGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXJhZGlvLWxhYmVsYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBwYXNzdGhyb3VnaCB0byB0aGUgSFRNTCBgbmFtZWAgYXR0cmlidXRlIG9uIHRoZSBgLmItcmFkaW9gIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgYmVjb21lcyBzZWxlY3RlZDsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uU2VsZWN0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkZXRlcm1pbmVzIHRoZSBhY3RpdmF0aW9uIHN0YXRlIG9mIHRoZSByYWRpbyBjb250cm9sLCBzZWUgUmVhY3QgW1wiY29udHJvbGxlZCBpbnB1dHNcIl0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9mb3Jtcy5odG1sI2NvbnRyb2xsZWQtY29tcG9uZW50cykpXG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3RlZDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHBhc3N0aHJvdWdoIHRvIHRoZSBIVE1MIGB2YWx1ZWAgYXR0cmlidXRlIG9uIHRoZSBgLmItcmFkaW9gIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgaW5wdXRQcm9wczoge30sXG4gICAgICAgIGxhYmVsOiBudWxsLFxuICAgICAgICBsYWJlbFByb3BzOiB7fSxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIG9uU2VsZWN0ZWQ6IG5vb3AsXG4gICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6ICcnLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhSYWRpby5kZWZhdWx0UHJvcHMpXG5cbiAgICB1dWlkID0gdXVpZCgpXG5cbiAgICBoYW5kbGVDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uU2VsZWN0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZSkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmlucHV0UHJvcHN9XG4gICAgICAgICAgICAgICAgcmVmPSdpbnB1dCdcbiAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5pZCB8fCB0aGlzLnByb3BzLmlucHV0UHJvcHMuaWQgfHwgdGhpcy51dWlkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcmFkaW8nLCB0aGlzLnByb3BzLmlucHV0UHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICdiLXJhZGlvLXNlbGVjdGVkJzogdGhpcy5wcm9wcy5zZWxlY3RlZCxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5wcm9wcy5zZWxlY3RlZH1cbiAgICAgICAgICAgICAgICBhcmlhLWNoZWNrZWQ9e1N0cmluZyh0aGlzLnByb3BzLnNlbGVjdGVkKX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9IC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhYmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5sYWJlbFByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2xhYmVsJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXJhZGlvLWxhYmVsJywgdGhpcy5wcm9wcy5sYWJlbFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIGh0bWxGb3I9e3RoaXMucHJvcHMuaWQgfHwgdGhpcy5wcm9wcy5pbnB1dFByb3BzLmlkIHx8IHRoaXMudXVpZH0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmxhYmVsfVxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFJhZGlvLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcmFkaW8td3JhcHBlcicsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVySW5wdXQoKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJMYWJlbCgpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIG1hdGNoT3BlcmF0b3JzUmUgPSAvW3xcXFxce30oKVtcXF1eJCsqPy5dL2c7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHN0cikge1xuXHRpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIHN0cmluZycpO1xuXHR9XG5cblx0cmV0dXJuIHN0ci5yZXBsYWNlKG1hdGNoT3BlcmF0b3JzUmUsICdcXFxcJCYnKTtcbn07XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBlc2NhcGVyIGZyb20gJ2VzY2FwZS1zdHJpbmctcmVnZXhwJztcblxuaW1wb3J0IElucHV0IGZyb20gJy4uL2JvdW5kbGVzcy1pbnB1dC9pbmRleCc7XG5pbXBvcnQgZXh0cmFjdENoaWxkUHJvcHMgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb24vaW5kZXgnO1xuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBpc1N0cmluZyBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtc3RyaW5nL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG4vKipcbiMgVHlwZWFoZWFkXG5fX0ludGVsbGlnZW50bHkgcmVjb21tZW5kIGVudGl0aWVzIHZpYSBjdXN0b21pemFibGUsIGZ1enp5IHJlY29nbml0aW9uLl9fXG5cblR5cGVhaGVhZCBpcyBhbiBlbmhhbmNlbWVudCB1cG9uIFtJbnB1dF0oaHR0cHM6Ly9naXRodWIuY29tL2JpYmxpb3RlY2gvdWlraXQvdHJlZS9tYXN0ZXIvcGFja2FnZXMvYm91bmRsZXNzLWlucHV0KSB3aGljaCBwcm92aWRlcyB0d28gYnVpbHQtaW4gbWF0Y2hpbmcgYWxnb3JpdGhtcyAoXCJmdXp6eVwiIFxcW2RlZmF1bHRcXF0gYW5kIFwic3RhcnRzLXdpdGhcIikgYW5kIHN1cHBvcnRzIHRoZSB1c2Ugb2YgY3VzdG9tIG1hdGNoaW5nIGFuZCBtYXJraW5nIGZ1bmN0aW9ucy5cblxuSW4gdGhlIGV4YW1wbGVzIGJlbG93LCBpbWFnaW5lIHRoZSBgPD5gIGluIHRoZSBcIm1hcmtzXCIgc2VjdGlvbiBpcyBhIHdyYXBwaW5nIGA8bWFyaz5gIGVsZW1lbnQ6XG5cbjEuIF9fXCJTdGFydHMtd2l0aFwiIG1hdGNoaW5nICYgbWFya2luZ19fXG4gICBgYGBqc3hcbiAgIDxUeXBlYWhlYWRcbiAgICAgICBhbGdvcml0aG09e1R5cGVhaGVhZC5tb2RlLlNUQVJUU19XSVRIfVxuICAgICAgIGVudGl0aWVzPXtbXG4gICAgICAgICAgIHt0ZXh0OiAnYXBwbGUnfSxcbiAgICAgICAgICAge3RleHQ6ICdhcHJpY290J30sXG4gICAgICAgICAgIHt0ZXh0OiAnZ3JhcGUnfSxcbiAgICAgICBdfVxuICAgICAgIGlucHV0UHJvcHM9e3t2YWx1ZTogJ2EnfX0gLz5cbiAgIGBgYFxuXG4gICArIG1hdGNoZXM6IGBcImFwcGxlXCIsIFwiYXByaWNvdFwiYFxuICAgKyBtYXJrczogYFwiPGE+cHBsZVwiLCBcIjxhPnByaWNvdFwiYFxuXG4xLiBfX1wiRnV6enlcIiBtYXRjaGluZyAmIG1hcmtpbmdfX1xuICAgYGBganN4XG4gICA8VHlwZWFoZWFkXG4gICAgICAgYWxnb3JpdGhtPXtUeXBlYWhlYWQubW9kZS5GVVpaWX1cbiAgICAgICBlbnRpdGllcz17W1xuICAgICAgICAgICB7dGV4dDogJ2FwcGxlJ30sXG4gICAgICAgICAgIHt0ZXh0OiAnYXByaWNvdCd9LFxuICAgICAgICAgICB7dGV4dDogJ2dyYXBlJ30sXG4gICAgICAgXX1cbiAgICAgICBpbnB1dFByb3BzPXt7dmFsdWU6ICdhJ319IC8+XG4gICBgYGBcblxuICAgKyBtYXRjaGVzOiBgXCJhcHBsZVwiLCBcImFwcmljb3RcIiwgXCJncmFwZVwiYFxuICAgKyBtYXJrczogYFwiPGE+cHBsZVwiLCBcIjxhPnByaWNvdFwiLCBcImdyPGE+cGVcImBcblxuMS4gX19DdXN0b20gbWF0Y2hpbmcgJiBtYXJraW5nX19cblxuICAgIE9wdGlvbmFsbHksIHlvdSBjYW4gcHJvdmlkZSB5b3VyIG93biBjb21iaW5hdGlvbiBvZiBtYXRjaGluZyBhbmQgbWFya2luZyBmdW5jdGlvbnMuIEZvciBleGFtcGxlLCBsb29zZW5pbmcgdGhlIG1hdGNoaW5nIHRvIGluY2x1ZGUgdW5pY29kZSB2YXJpYW50cyBvZiBjaGFyYWN0ZXJzIGNvdWxkIGJlIHVzZWZ1bCwgZS5nLiDDpyAmcmFycjsgY1xuXG4gICAgYGBganN4XG4gICAgPFR5cGVhaGVhZFxuICAgICAgICBhbGdvcml0aG09e3tcbiAgICAgICAgICAgIG1hdGNoZXI6IHlvdXJNYXRjaEZ1bmMsXG4gICAgICAgICAgICBtYXJrZXI6IHlvdXJNYXJrRnVuYyxcbiAgICAgICAgfX0gLz5cbiAgICBgYGBcblxuIyMgQ29tcG9uZW50IEluc3RhbmNlIE1ldGhvZHNcblxuV2hlbiB1c2luZyBgVHlwZWFoZWFkYCBpbiB5b3VyIHByb2plY3QsIHlvdSBtYXkgY2FsbCB0aGUgZm9sbG93aW5nIG1ldGhvZHMgb24gYSByZW5kZXJlZCBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50LiBVc2UgW2ByZWZzYF0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9yZWZzLWFuZC10aGUtZG9tLmh0bWwpIHRvIGdldCB0aGUgaW5zdGFuY2UuXG5cbi0gX19gZm9jdXMoKWBfX1xuICBmb2N1c2VzIHRoZSBicm93c2VyIG9vbiB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IGZvciBpbW1lZGlhdGUgdGV4dCBlbnRyeVxuXG4tIF9fYGdldElucHV0Tm9kZSgpYF9fXG4gIHJldHVybnMgdGhlIHJhdyB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgRE9NIG5vZGVcblxuLSBfX2BnZXRTZWxlY3RlZEVudGl0eVRleHQoKWBfX1xuICByZXR1cm5zIHRoZSBgdGV4dGAgcHJvcGVydHkgb2YgdGhlIGN1cnJlbnRseSBoaWdobGlnaHRlZCBlbnRpdHkgKGZyb20gYHByb3BzLmVudGl0aWVzYCksIG9yIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nXG5cbi0gX19gZ2V0VmFsdWUoKWBfX1xuICByZXRyaWV2ZXMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dFxuXG4tIF9fYHNlbGVjdCgpYF9fXG4gIHByb2dyYW1tYXRpY2FsbHkgY3JlYXRlcyBhIGZ1bGwgc2VsZWN0aW9uIG9uIHRoZSB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgc3VjaCB0aGF0IGEgcHJlc3Mgb2YgdGhlIEJhY2tzcGFjZSBrZXkgd291bGQgZnVsbHkgY2xlYXIgdGhlIGlucHV0XG5cbi0gX19gc2V0VmFsdWUodmFsdWU6IHN0cmluZylgX19cbiAgc2V0cyB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IHRvIHRoZSBzcGVjaWZpZWQgdGV4dCBhbmQgdXBkYXRlcyBpbnRlcm5hbCBzdGF0ZTsgZG8gbm90IHVzZSB0aGlzIG1ldGhvZCB3aGVuIHVzaW5nIGBUeXBlYWhlYWRgIGFzIGEgXCJjb250cm9sbGVkIGlucHV0XCJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHlwZWFoZWFkIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIG1vZGUgPSB7XG4gICAgICAgICdTVEFSVFNfV0lUSCc6IHV1aWQoKSxcbiAgICAgICAgJ0ZVWlpZJzogdXVpZCgpLFxuICAgIH1cblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKiBUeXBlYWhlYWQgYWNjZXB0cyBhbGwgc3VwcG9ydGVkIFtJbnB1dCBwcm9wc10oL0lucHV0I3Byb3BzKSAqL1xuICAgICAgICAuLi5JbnB1dC5wcm9wVHlwZXMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAgICB0aGUgbWVjaGFuaXNtIHVzZWQgdG8gaWRlbnRpZnkgYW5kIG1hcmsgbWF0Y2hpbmcgc3Vic3RyaW5nczsgYSBjdXN0b20gc2V0IGNhbiBiZSBwcm92aWRlZCBhcyBhbiBvYmplY3QgKHNlZSB0aGUgcHJvcGVydGllcyBiZWxvdylcbiAgICAgICAgICovXG4gICAgICAgIGFsZ29yaXRobTogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLlNUQVJUU19XSVRILFxuICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiBmb3JtYXQgd2lsbCBiZSB3aGF0IHNob3dzIHVwIGluIHRoZSB0eXBlYWhlYWQgZHJvcGRvd24gbGlzdCAoSlNYIGFycmF5cyBhcmUgYWNjZXB0ZWQsIHRoZSBjb21wb25lbnQgd2lsbCBwcm92aWRlIHRoZSB3cmFwcGVyKVxuXG4gICAgICAgICAgICAgICAgICAgIGFuIGV4YW1wbGUgbWFya2luZyBmdW5jdGlvbjpcblxuICAgICAgICAgICAgICAgICAgICBgYGBqc1xuICAgICAgICAgICAgICAgICAgICBzdGFydHNXaXRoTWFya2luZ0Z1bmMoaW5wdXRUZXh0LCBlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eUNvbnRlbnQgPSBlbnRpdHkudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZWtWYWx1ZSA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFN0YXJ0ID0gZW50aXR5Q29udGVudC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2Vla1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4RW5kID0gaW5kZXhTdGFydCArIHNlZWtWYWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4ga2V5PSdiZWZvcmUnPntlbnRpdHlDb250ZW50LnNsaWNlKDAsIGluZGV4U3RhcnQpfTwvc3Bhbj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hcmsga2V5PSdtYXJrJz57ZW50aXR5Q29udGVudC5zbGljZShpbmRleFN0YXJ0LCBpbmRleEVuZCl9PC9tYXJrPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9J2FmdGVyJz57ZW50aXR5Q29udGVudC5zbGljZShpbmRleEVuZCl9PC9zcGFuPixcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYGBgXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbWFya2VyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgICAgICAgICAgICAgIFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICAgICAgICAgICAgICBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdKSxcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiBmb3JtYXQgZGV0ZXJtaW5lcyB3aGljaCBlbnRpdGllcyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbWFya2luZyBmdW5jdGlvblxuXG4gICAgICAgICAgICAgICAgICAgIGFuIGV4YW1wbGUgbWF0Y2hpbmcgZnVuY3Rpb246XG5cbiAgICAgICAgICAgICAgICAgICAgYGBganNcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRzV2l0aE1hdGNoaW5nRnVuYyhpbnB1dFRleHQsIGVudGl0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWVrVmFsdWUgPSB1c2VyVGV4dC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXRpZXMucmVkdWNlKGZ1bmN0aW9uIHNlZWtNYXRjaChyZXN1bHRzLCBlbnRpdHksIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eS50ZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWVrVmFsdWUpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYGBgXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbWF0Y2hlcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICAgICAgICAgIFByb3BUeXBlcy5mdW5jLFxuICAgICAgICAgICAgICAgICAgICBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgICAgICAgICAgICAgICAgICAgVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgsXG4gICAgICAgICAgICAgICAgICAgICAgICBUeXBlYWhlYWQubW9kZS5GVVpaWSxcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGlmIGB0cnVlYCwgY2xlYXJzIHRoZSBpbnB1dCB0ZXh0IHdoZW4gYSAocGFydGlhbCkgbWF0Y2ggaXMgc2VsZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyT25TZWxlY3Rpb246IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbiBhcnJheSBvZiBvYmplY3RzIHRoYXQgdXNlciBpbnB1dCBpcyBmaWx0ZXJlZCBhZ2FpbnN0OyBhdCBhIG1pbmltdW0sIGVhY2ggb2JqZWN0IG11c3QgaGF2ZSBhIGB0ZXh0YCBwcm9wZXJ0eSBhbmQgYW55IG90aGVyIHN1cHBsaWVkIHByb3BlcnR5IGlzIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSByZXN1bHRpbmcgRE9NIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGVudGl0aWVzOiBQcm9wVHlwZXMuYXJyYXlPZihcbiAgICAgICAgICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogdGhlIHRleHQgdG8gYmUgdXNlZCB0byBkbyBzdHJpbmcgY29tcGFyaXNvbiBhbmQgbWF0Y2ggYWdhaW5zdFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRleHQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlbmRlcnMgYSBkaXNhYmxlZCB0ZXh0ZmllbGQgd2l0aCB0aGUgZnVsbCB0ZXh0IG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaW5wdXQgaGludDsgd2lsbCByZW1haW4gYmxhbmsgaWYgdGhlIG1hdGNoZWQgc3Vic3RyaW5nIGlzIG5vdCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSB1c2VyIGlucHV0XG4gICAgICAgICAqL1xuICAgICAgICBoaW50OiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItdHlwZWFoZWFkLWhpbnRgIEhUTUwgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgaGludFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi10eXBlYWhlYWQtbWF0Y2gtd3JhcHBlcmAgSFRNTCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBtYXRjaFdyYXBwZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIFwib2Zmc2NyZWVuXCIgY2xhc3MgdXNlZCBieSB5b3VyIGFwcGxpY2F0aW9uOyBzcGVjaWZpY2FsbHkgdG8gcmV0YWluIFtBUklBIG5hdmlnYWJpbGl0eV0oaHR0cDovL3Nub29rLmNhL2FyY2hpdmVzL2h0bWxfYW5kX2Nzcy9oaWRpbmctY29udGVudC1mb3ItYWNjZXNzaWJpbGl0eSkgYXMgYGRpc3BsYXk6IG5vbmVgIGV4Y2x1ZGVzIHRoZSBlbGVtZW50IGZyb20gY29uc2lkZXJhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb2Zmc2NyZWVuQ2xhc3M6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgYEVudGVyYCB3aXRoIG5vIGF1dG9zdWdnZXN0IGhpbnQgYXZhaWxhYmxlLCBpbmRpY2F0aW5nIHRoYXQgaW5wdXQgaXMgY29tcGxldGVcbiAgICAgICAgICovXG4gICAgICAgIG9uQ29tcGxldGU6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2l0aCB0aGUgaW5kZXggb2YgdGhlIGhpZ2hsaWdodGVkIGVudGl0eSBkdWUgdG8ga2V5Ym9hcmQgc2VsZWN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBvbkVudGl0eUhpZ2hsaWdodGVkOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdpdGggdGhlIGluZGV4IG9mIHRoZSBlbnRpdHkgc2VsZWN0ZWQgYnkgdGhlIHVzZXJcbiAgICAgICAgICovXG4gICAgICAgIG9uRW50aXR5U2VsZWN0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIC4uLklucHV0LmRlZmF1bHRQcm9wcyxcbiAgICAgICAgYWxnb3JpdGhtOiBUeXBlYWhlYWQubW9kZS5GVVpaWSxcbiAgICAgICAgY2xlYXJPblNlbGVjdGlvbjogZmFsc2UsXG4gICAgICAgIGVudGl0aWVzOiBbXSxcbiAgICAgICAgaGludDogbnVsbCxcbiAgICAgICAgaGludFByb3BzOiB7fSxcbiAgICAgICAgbWF0Y2hXcmFwcGVyUHJvcHM6IHt9LFxuICAgICAgICBvZmZzY3JlZW5DbGFzczogJ2Itb2Zmc2NyZWVuJyxcbiAgICAgICAgb25Db21wbGV0ZTogbm9vcCxcbiAgICAgICAgb25FbnRpdHlIaWdobGlnaHRlZDogbm9vcCxcbiAgICAgICAgb25FbnRpdHlTZWxlY3RlZDogbm9vcCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoVHlwZWFoZWFkLmRlZmF1bHRQcm9wcylcblxuICAgIHN0YXRlID0ge1xuICAgICAgICBlbnRpdHlNYXRjaEluZGV4ZXM6IFtdLFxuICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICBpc0NvbnRyb2xsZWQ6IGlzU3RyaW5nKHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSksXG4gICAgICAgIGlucHV0OiB0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWVcbiAgICAgICAgICAgICAgIHx8IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5kZWZhdWx0VmFsdWVcbiAgICAgICAgICAgICAgIHx8ICcnLFxuICAgICAgICBzZWxlY3RlZEVudGl0eUluZGV4OiAtMSxcbiAgICB9XG5cbiAgICBtb3VudGVkID0gZmFsc2VcblxuICAgIHVwZGF0ZUlucHV0U3RhdGUgPSAodmFsdWUgPSAnJykgPT4gdGhpcy5zZXRTdGF0ZSh7aW5wdXQ6IHZhbHVlfSlcblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSB8fCB0aGlzLnByb3BzLmlucHV0UHJvcHMuZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25FbnRpdHlIaWdobGlnaHRlZCh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wcy5lbnRpdGllcyAhPT0gdGhpcy5wcm9wcy5lbnRpdGllcykge1xuICAgICAgICAgICAgdGhpcy5jb21wdXRlTWF0Y2hlcyhuZXh0UHJvcHMuZW50aXRpZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5leHRQcm9wcy5pbnB1dFByb3BzLnZhbHVlICE9PSB0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXRTdGF0ZShuZXh0UHJvcHMuaW5wdXRQcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZW50aXR5TWF0Y2hJbmRleGVzLmxlbmd0aCAmJiAhcHJldlN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcy5tYXRjaGVzLnNjcm9sbFRvcCA9IDA7XG4gICAgICAgIH0gLy8gZml4IGFuIG9kZCBidWcgaW4gRkYgd2hlcmUgaXQgaW5pdGlhbGl6ZXMgdGhlIGVsZW1lbnQgd2l0aCBhbiBpbmNvcnJlY3Qgc2Nyb2xsVG9wXG5cbiAgICAgICAgaWYgKCAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCA+PSAwXG4gICAgICAgICAgICAmJiB0aGlzLnByb3BzLmVudGl0aWVzW3RoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleF0gIT09IHByZXZQcm9wcy5lbnRpdGllc1twcmV2U3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleF0pIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25FbnRpdHlIaWdobGlnaHRlZCh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGdldFNlbGVjdGVkRW50aXR5VGV4dCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5wcm9wcy5lbnRpdGllc1t0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXhdO1xuXG4gICAgICAgIHJldHVybiBlbnRpdHkgPyBlbnRpdHkudGV4dCA6ICcnO1xuICAgIH1cblxuICAgIGhhbmRsZU1hdGNoQ2xpY2soaW5kZXgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRFbnRpdHlJbmRleDogaW5kZXh9LCB0aGlzLnNldFZhbHVlV2l0aFNlbGVjdGVkRW50aXR5KTtcbiAgICB9XG5cbiAgICBzZWxlY3RNYXRjaChkZWx0YSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5zdGF0ZS5lbnRpdHlNYXRjaEluZGV4ZXM7XG4gICAgICAgIGNvbnN0IHRvdGFsTWF0Y2hlcyA9IG1hdGNoZXMubGVuZ3RoO1xuICAgICAgICBsZXQgbmV4dEluZGV4ID0gbWF0Y2hlcy5pbmRleE9mKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCkgKyBkZWx0YTtcblxuICAgICAgICBpZiAodG90YWxNYXRjaGVzKSB7XG4gICAgICAgICAgICBpZiAobmV4dEluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIG5leHRJbmRleCA9IHRvdGFsTWF0Y2hlcyAtIDE7IC8vIHJldmVyc2UgbG9vcFxuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXh0SW5kZXggPj0gdG90YWxNYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgbmV4dEluZGV4ID0gMDsgLy8gbG9vcFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBtYXRjaEluZGV4ID0gbWF0Y2hlc1tuZXh0SW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlc05vZGUgPSB0aGlzLnJlZnMubWF0Y2hlcztcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXNOb2RlWUVuZCA9IG1hdGNoZXNOb2RlLnNjcm9sbFRvcCArIG1hdGNoZXNOb2RlLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoTm9kZSA9IHRoaXMucmVmc1tgbWF0Y2hfJCR7bWF0Y2hJbmRleH1gXTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoTm9kZVlTdGFydCA9IG1hdGNoTm9kZS5vZmZzZXRUb3A7XG4gICAgICAgICAgICBjb25zdCBtYXRjaE5vZGVZRW5kID0gbWF0Y2hOb2RlWVN0YXJ0ICsgbWF0Y2hOb2RlLmNsaWVudEhlaWdodDtcblxuICAgICAgICAgICAgLy8gYnJpbmcgaW50byB2aWV3IGlmIG5lY2Vzc2FyeVxuICAgICAgICAgICAgaWYgKG1hdGNoTm9kZVlFbmQgPj0gbWF0Y2hlc05vZGVZRW5kKSB7IC8vIGJlbG93XG4gICAgICAgICAgICAgICAgbWF0Y2hlc05vZGUuc2Nyb2xsVG9wICs9IG1hdGNoTm9kZVlFbmQgLSBtYXRjaGVzTm9kZVlFbmQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoTm9kZVlTdGFydCA8PSBtYXRjaGVzTm9kZS5zY3JvbGxUb3ApIHsgLy8gYWJvdmVcbiAgICAgICAgICAgICAgICBtYXRjaGVzTm9kZS5zY3JvbGxUb3AgPSBtYXRjaE5vZGVZU3RhcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkRW50aXR5SW5kZXg6IG1hdGNoSW5kZXh9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc2V0TWF0Y2hlcyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRFbnRpdHlJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgZW50aXR5TWF0Y2hJbmRleGVzOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0SW5wdXROb2RlID0gKCkgPT4gdGhpcy5yZWZzLmlucHV0LnJlZnMuZmllbGRcblxuICAgIHNlbGVjdCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLmdldElucHV0Tm9kZSgpO1xuXG4gICAgICAgIGlucHV0LnNlbGVjdGlvblN0YXJ0ID0gMDtcbiAgICAgICAgaW5wdXQuc2VsZWN0aW9uRW5kID0gdGhpcy5nZXRWYWx1ZSgpLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb2N1cyA9ICgpID0+IHRoaXMuZ2V0SW5wdXROb2RlKCkuZm9jdXMoKVxuICAgIGdldFZhbHVlID0gKCkgPT4gdGhpcy5yZWZzLmlucHV0LmdldFZhbHVlKClcblxuICAgIHNldFZhbHVlID0gKHZhbHVlID0gJycpID0+IHtcbiAgICAgICAgdGhpcy5yZWZzLmlucHV0LnNldFZhbHVlKHZhbHVlKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0U3RhdGUodmFsdWUpO1xuICAgICAgICB0aGlzLnJlc2V0TWF0Y2hlcygpO1xuICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgY3Vyc29yQXRFbmRPZklucHV0KCkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5nZXRJbnB1dE5vZGUoKTtcblxuICAgICAgICByZXR1cm4gICAgbm9kZS5zZWxlY3Rpb25TdGFydCA9PT0gbm9kZS5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICYmIG5vZGUuc2VsZWN0aW9uRW5kID09PSB0aGlzLmdldFZhbHVlKCkubGVuZ3RoO1xuICAgIH1cblxuICAgIHNldFZhbHVlV2l0aFNlbGVjdGVkRW50aXR5ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLm9uRW50aXR5U2VsZWN0ZWQodGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4KTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jbGVhck9uU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKCcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRTZWxlY3RlZEVudGl0eVRleHQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBuZWVkcyB0byBoYXBwZW4gYWZ0ZXIgdGhlIHVwY29taW5nIHJlbmRlciB0aGF0IHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IGBzZXRWYWx1ZWBcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhpcy5yZXNldE1hdGNoZXMsIDApO1xuICAgIH1cblxuICAgIG1hcmtGdXp6eU1hdGNoU3Vic3RyaW5nKGlucHV0LCBlbnRpdHkpIHtcbiAgICAgICAgY29uc3QgZW50aXR5Q29udGVudCA9IGVudGl0eS50ZXh0O1xuICAgICAgICBjb25zdCBmcmFncyA9IGVudGl0eUNvbnRlbnQuc3BsaXQobmV3IFJlZ0V4cCgnKCcgKyBlc2NhcGVyKGlucHV0KSArICcpJywgJ2lnJykpO1xuICAgICAgICBjb25zdCBub3JtYWxpemVkVXNlclRleHQgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCB0aHJlc2hvbGQgPSBmcmFncy5sZW5ndGg7XG4gICAgICAgIGxldCBpID0gLTE7XG5cbiAgICAgICAgd2hpbGUgKCsraSA8IHRocmVzaG9sZCkge1xuICAgICAgICAgICAgaWYgKGZyYWdzW2ldLnRvTG93ZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWRVc2VyVGV4dCkge1xuICAgICAgICAgICAgICAgIGZyYWdzW2ldID0gPG1hcmsga2V5PXtpfSBjbGFzc05hbWU9J2ItdHlwZWFoZWFkLW1hdGNoLWhpZ2hsaWdodCc+e2ZyYWdzW2ldfTwvbWFyaz47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnJhZ3M7XG4gICAgfVxuXG4gICAgbWFya1N0YXJ0c1dpdGhNYXRjaFN1YnN0cmluZyhpbnB1dCwgZW50aXR5KSB7XG4gICAgICAgIGNvbnN0IGVudGl0eUNvbnRlbnQgPSBlbnRpdHkudGV4dDtcbiAgICAgICAgY29uc3Qgc2Vla1ZhbHVlID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgaW5kZXhTdGFydCA9IGVudGl0eUNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlZWtWYWx1ZSk7XG4gICAgICAgIGNvbnN0IGluZGV4RW5kID0gaW5kZXhTdGFydCArIHNlZWtWYWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIDxzcGFuIGtleT0nMCc+e2VudGl0eUNvbnRlbnQuc2xpY2UoMCwgaW5kZXhTdGFydCl9PC9zcGFuPixcbiAgICAgICAgICAgIDxtYXJrIGtleT0nMScgY2xhc3NOYW1lPSdiLXR5cGVhaGVhZC1tYXRjaC1oaWdobGlnaHQnPntlbnRpdHlDb250ZW50LnNsaWNlKGluZGV4U3RhcnQsIGluZGV4RW5kKX08L21hcms+LFxuICAgICAgICAgICAgPHNwYW4ga2V5PScyJz57ZW50aXR5Q29udGVudC5zbGljZShpbmRleEVuZCl9PC9zcGFuPixcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBnZXRNYXJraW5nRnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyh0aGlzLnByb3BzLmFsZ29yaXRobSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmFsZ29yaXRobSA9PT0gVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXJrU3RhcnRzV2l0aE1hdGNoU3Vic3RyaW5nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXJrRnV6enlNYXRjaFN1YnN0cmluZztcblxuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5hbGdvcml0aG0ubWFya2VyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuYWxnb3JpdGhtLm1hcmtlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLndhcm5lZE1hcmtlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLndhcm5lZE1hcmtlciA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1R5cGVhaGVhZDogbm8gYHByb3BzLmFsZ29yaXRobS5tYXJrZXJgIHdhcyBwcm92aWRlZDsgZmFsbGluZyBiYWNrIHRvIHRoZSBkZWZhdWx0IG1hcmtpbmcgYWxnb3JpdGhtIChGVVpaWSkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5tYXJrRnV6enlNYXRjaFN1YnN0cmluZztcbiAgICB9XG5cbiAgICBtYXJrTWF0Y2hTdWJzdHJpbmcgPSAoLi4uYXJncykgPT4gdGhpcy5nZXRNYXJraW5nRnVuY3Rpb24oKSguLi5hcmdzKVxuXG4gICAgZ2V0RnV6enlNYXRjaEluZGV4ZXModXNlclRleHQsIGVudGl0aWVzKSB7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB1c2VyVGV4dC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHJldHVybiBlbnRpdGllcy5yZWR1Y2UoZnVuY3Rpb24gZmluZEluZGV4ZXMocmVzdWx0LCBlbnRpdHksIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gICBlbnRpdHkudGV4dC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yobm9ybWFsaXplZCkgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgPyAocmVzdWx0LnB1c2goaW5kZXgpICYmIHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICA6IHJlc3VsdDtcbiAgICAgICAgfSwgW10pO1xuICAgIH1cblxuICAgIGdldFN0YXJ0c1dpdGhNYXRjaEluZGV4ZXModXNlclRleHQsIGVudGl0aWVzKSB7XG4gICAgICAgIGNvbnN0IHNlZWtWYWx1ZSA9IHVzZXJUZXh0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIGVudGl0aWVzLnJlZHVjZShmdW5jdGlvbiBzZWVrTWF0Y2gocmVzdWx0cywgZW50aXR5LCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGVudGl0eS50ZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWVrVmFsdWUpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cbiAgICAgICAgfSwgW10pO1xuICAgIH1cblxuICAgIGdldE1hdGNoaW5nRnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyh0aGlzLnByb3BzLmFsZ29yaXRobSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmFsZ29yaXRobSA9PT0gVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGFydHNXaXRoTWF0Y2hJbmRleGVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGdXp6eU1hdGNoSW5kZXhlcztcblxuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5hbGdvcml0aG0ubWF0Y2hlcikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmFsZ29yaXRobS5tYXRjaGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMud2FybmVkTWF0Y2hlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLndhcm5lZE1hdGNoZXIgPSB0cnVlO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUeXBlYWhlYWQ6IG5vIGBwcm9wcy5hbGdvcml0aG0ubWF0Y2hlcmAgd2FzIHByb3ZpZGVkOyBmYWxsaW5nIGJhY2sgdG8gdGhlIGRlZmF1bHQgbWF0Y2hpbmcgYWxnb3JpdGhtIChGVVpaWSkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5nZXRGdXp6eU1hdGNoSW5kZXhlcztcbiAgICB9XG5cbiAgICBnZXRNYXRjaEluZGV4ZXMgPSAoLi4uYXJncykgPT4gdGhpcy5nZXRNYXRjaGluZ0Z1bmN0aW9uKCkoLi4uYXJncylcblxuICAgIGNvbXB1dGVNYXRjaGVzKHByb3ZpZGVkRW50aXRpZXMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUsIHByb3BzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRpdGllcyA9IHByb3ZpZGVkRW50aXRpZXMgfHwgcHJvcHMuZW50aXRpZXM7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBzdGF0ZS5pbnB1dDtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBjdXJyZW50VmFsdWUgPT09ICcnID8gW10gOiB0aGlzLmdldE1hdGNoSW5kZXhlcyhjdXJyZW50VmFsdWUsIGVudGl0aWVzKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVudGl0eUluZGV4OiBtYXRjaGVzLmxlbmd0aCA/IG1hdGNoZXNbMF0gOiAtMSxcbiAgICAgICAgICAgICAgICBlbnRpdHlNYXRjaEluZGV4ZXM6IG1hdGNoZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb250cm9sbGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dFN0YXRlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5zZWxlY3Rpb25TdGFydCA+IDEpIHtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnVGFiJzpcbiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICBpZiAoICAgdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4ICE9PSAtMVxuICAgICAgICAgICAgICAgICYmIHRoaXMuY3Vyc29yQXRFbmRPZklucHV0KClcbiAgICAgICAgICAgICAgICAmJiB0aGlzLmdldElucHV0Tm9kZSgpID09PSBldmVudC50YXJnZXRcbiAgICAgICAgICAgICAgICAmJiAhZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICBldmVudC5uYXRpdmVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgICBldmVudC5uYXRpdmVFdmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBibG9jayBjdXJzb3IgbW92ZW1lbnRcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TWF0Y2goLTEpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgIGV2ZW50Lm5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIGJsb2NrIGN1cnNvciBtb3ZlbWVudFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNYXRjaCgxKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0VzY2FwZSc6XG4gICAgICAgICAgICBpZiAoICAgdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4ICE9PSAtMVxuICAgICAgICAgICAgICAgICYmIHRoaXMuZ2V0SW5wdXROb2RlKCkgPT09IGV2ZW50LnRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRNYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICAgIGlmICggICB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggIT09IC0xXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5nZXRJbnB1dE5vZGUoKSA9PT0gZXZlbnQudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhbHVlV2l0aFNlbGVjdGVkRW50aXR5KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Db21wbGV0ZSh0aGlzLnN0YXRlLmlucHV0LCBldmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5vbktleURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uS2V5RG93bihldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJOb3RpZmljYXRpb24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgcmVmPSdhcmlhJ1xuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnN0YXRlLmlkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5wcm9wcy5vZmZzY3JlZW5DbGFzc31cbiAgICAgICAgICAgICAgICBhcmlhLWxpdmU9J3BvbGl0ZSc+XG4gICAgICAgICAgICAgICAge3RoaXMuZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0KCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJIaW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5oaW50KSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyVGV4dCA9IHRoaXMuc3RhdGUuaW5wdXQ7XG4gICAgICAgICAgICBjb25zdCByYXcgPSB0aGlzLmdldFNlbGVjdGVkRW50aXR5VGV4dCgpO1xuICAgICAgICAgICAgbGV0IHByb2Nlc3NlZCA9ICcnO1xuXG4gICAgICAgICAgICBpZiAoICAgcmF3XG4gICAgICAgICAgICAgICAgJiYgcmF3LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih1c2VyVGV4dC50b0xvd2VyQ2FzZSgpKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHJhdy5yZXBsYWNlKG5ldyBSZWdFeHAodXNlclRleHQsICdpJyksIHVzZXJUZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmhpbnRQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdoaW50J1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItaW5wdXQtcGxhY2Vob2xkZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItdHlwZWFoZWFkLWhpbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaW50UHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD0nLTEnPlxuICAgICAgICAgICAgICAgICAgICB7cHJvY2Vzc2VkfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlck1hdGNoZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcy5tYXRjaFdyYXBwZXJQcm9wcztcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdtYXRjaGVzJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXR5cGVhaGVhZC1tYXRjaC13cmFwcGVyJywgcHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5tYXAoKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnByb3BzLmVudGl0aWVzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHtjbGFzc05hbWUsIHRleHQsIC4uLnJlc3R9ID0gZW50aXR5O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17YG1hdGNoXyQke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdHlwZWFoZWFkLW1hdGNoJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYi10eXBlYWhlYWQtbWF0Y2gtc2VsZWN0ZWQnOiB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggPT09IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt0ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZU1hdGNoQ2xpY2suYmluZCh0aGlzLCBpbmRleCl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5tYXJrTWF0Y2hTdWJzdHJpbmcodGhpcy5zdGF0ZS5pbnB1dCwgZW50aXR5KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge3Byb3BzLCBzdGF0ZX0gPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQocHJvcHMsIFR5cGVhaGVhZC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXR5cGVhaGVhZC13cmFwcGVyJywgcHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn0+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTm90aWZpY2F0aW9uKCl9XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVySGludCgpfVxuXG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgIHsuLi5leHRyYWN0Q2hpbGRQcm9wcyhwcm9wcywgSW5wdXQuZGVmYXVsdFByb3BzKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdpbnB1dCdcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1jb250cm9scz17c3RhdGUuaWR9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLmlucHV0UHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN4KCdiLXR5cGVhaGVhZCcsIHByb3BzLmlucHV0UHJvcHMuY2xhc3NOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgfX0gLz5cblxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck1hdGNoZXMoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgVHlwZWFoZWFkIGZyb20gJy4uL2JvdW5kbGVzcy10eXBlYWhlYWQvaW5kZXgnO1xuaW1wb3J0IGV4dHJhY3RDaGlsZFByb3BzIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vYmplY3QtaW50ZXJzZWN0aW9uL2luZGV4JztcbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuY29uc3QgZmlyc3QgPSAoYXJyYXkpID0+IGFycmF5WzBdO1xuY29uc3QgbGFzdCA9IChhcnJheSkgPT4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG5cbi8qKlxuIyBUb2tlbml6ZWRJbnB1dFxuX19EaXN0aWxsIHJpY2ggZW50aXR5IGRhdGEgbWF0Y2hlZCB2aWEgdHlwZWFoZWFkIGlucHV0IGludG8gc2ltcGxlIHZpc3VhbCBhYnN0cmFjdGlvbnMuX19cblxuQmFzaWMgdXNhZ2Ugb2YgdGhpcyBjb21wb25lbnQgaXMgaWRlbnRpY2FsIHRvIHRoYXQgb2YgW1R5cGVhaGVhZF0oaHR0cHM6Ly9naXRodWIuY29tL2JpYmxpb3RlY2gvdWlraXQvdHJlZS9tYXN0ZXIvcGFja2FnZXMvYm91bmRsZXNzLXR5cGVhaGVhZCkuIEFkZGl0aW9uYWwgcHJvcHMgYXJlIGF2YWlsYWJsZSB0byB0YWtlIGFkdmFudGFnZSBvZiB0aGUgdG9rZW5pemF0aW9uIGZ1bmN0aW9uYWxpdHkuXG5cbiMjIENvbXBvbmVudCBJbnN0YW5jZSBNZXRob2RzXG5cbldoZW4gdXNpbmcgYFRva2VuaXplZElucHV0YCBpbiB5b3VyIHByb2plY3QsIHlvdSBtYXkgY2FsbCB0aGUgZm9sbG93aW5nIG1ldGhvZHMgb24gYSByZW5kZXJlZCBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50LiBVc2UgW2ByZWZzYF0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9yZWZzLWFuZC10aGUtZG9tLmh0bWwpIHRvIGdldCB0aGUgaW5zdGFuY2UuXG5cbi0gX19gYWRkKGluZGV4OiBudW1iZXIpYF9fXG4gIHByb2dyYW1tYXRpY2FsbHkgY3JlYXRlcyBhIHRva2VuIGZvciBgcHJvcHMuZW50aXRpZXNbaW5kZXhdYDsgYHByb3BzLmhhbmRsZUFkZFRva2VuYCB3aWxsIGJlIGNhbGxlZCBhcyBhIGhpbnQgdG8gcGVyc2lzdCB0aGUgY2hhbmdlIGluIHlvdXIgY29udHJvbGxlciB2aWV3IG9yIG90aGVyIGFwcGxpY2F0aW9uIHN0YXRlXG5cbi0gX19gZm9jdXMoKWBfX1xuICBmb2N1c2VzIHRoZSBicm93c2VyIG9vbiB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IGZvciBpbW1lZGlhdGUgdGV4dCBlbnRyeVxuXG4tIF9fYGdldElucHV0Tm9kZSgpYF9fXG4gIHJldHVybnMgdGhlIHJhdyB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgRE9NIG5vZGVcblxuLSBfX2BnZXRTZWxlY3RlZEVudGl0eVRleHQoKWBfX1xuICByZXR1cm5zIHRoZSBgdGV4dGAgcHJvcGVydHkgb2YgdGhlIGN1cnJlbnRseSBoaWdobGlnaHRlZCBlbnRpdHkgKGZyb20gYHByb3BzLmVudGl0aWVzYCksIG9yIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nXG5cbi0gX19gZ2V0VmFsdWUoKWBfX1xuICByZXRyaWV2ZXMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dFxuXG4tIF9fYHJlbW92ZShpbmRleDogbnVtYmVyKWBfX1xuICBwcm9ncmFtbWF0aWNhbGx5IHJlbW92ZXMgdGhlIHRva2VuIGZvciBgcHJvcHMuZW50aXRpZXNbaW5kZXhdYDsgYHByb3BzLmhhbmRsZVJlbW92ZVRva2Vuc2Agd2lsbCBiZSBjYWxsZWQgYXMgYSBoaW50IHRvIHBlcnNpc3QgdGhlIGNoYW5nZSBpbiB5b3VyIGNvbnRyb2xsZXIgdmlldyBvciBvdGhlciBhcHBsaWNhdGlvbiBzdGF0ZVxuXG4tIF9fYHNlbGVjdCgpYF9fXG4gIHByb2dyYW1tYXRpY2FsbHkgY3JlYXRlcyBhIGZ1bGwgc2VsZWN0aW9uIG9uIHRoZSB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgc3VjaCB0aGF0IGEgcHJlc3Mgb2YgdGhlIEJhY2tzcGFjZSBrZXkgd291bGQgZnVsbHkgY2xlYXIgdGhlIGlucHV0XG5cbi0gX19gc2V0VmFsdWUodmFsdWU6IHN0cmluZylgX19cbiAgc2V0cyB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IHRvIHRoZSBzcGVjaWZpZWQgdGV4dCBhbmQgdXBkYXRlcyBpbnRlcm5hbCBzdGF0ZTsgZG8gbm90IHVzZSB0aGlzIG1ldGhvZCB3aGVuIHVzaW5nIGBUeXBlYWhlYWRgIGFzIGEgXCJjb250cm9sbGVkIGlucHV0XCJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9rZW5pemVkSW5wdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKiogVG9rZW5pemVkSW5wdXQgYWNjZXB0cyBhbGwgW2BUeXBlYWhlYWRgXSgvVHlwZWFoZWFkI3Byb3BzKSBhbmQgW2BJbnB1dGBdKC9JbnB1dCNwcm9wcykgcHJvcHMgKi9cbiAgICAgICAgLi4uVHlwZWFoZWFkLnByb3BUeXBlcyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZnVuY3Rpb24gaGFuZGxlciB0aGF0IGlzIGNhbGxlZCB3aGVuIGFuIGVudGl0eSBpcyBzZWxlY3RlZCBieSB0aGUgdXNlciBhbmQgYSB0b2tlbiBzaG91bGQgYmUgY3JlYXRlZFxuICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlQWRkVG9rZW46IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBmdW5jdGlvbiBoYW5kbGVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gb25lIG9yIG1vcmUgdG9rZW5zIGFyZSByZW1vdmVkIGJ5IHRoZSB1c2VyIHZpYSBjbGlja2luZyB0aGUgXCJjbG9zZVwiIGJ1dHRvbiBvciBwcmVzc2luZyB0aGUgYEJhY2tzcGFjZWAga2V5IHdoaWxlIHRva2VucyBhcmUgc2VsZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGhhbmRsZVJlbW92ZVRva2VuczogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZ1bmN0aW9uIGhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgd2hlbiBvbmUgb3IgbW9yZSB0b2tlbnMgYXJlIHNlbGVjdGVkIGJ5IHRoZSB1c2VyIHZpYSBjbGljayBvciBrZXlib2FyZCBhY3Rpb25zOyBjYWxsZWQgd2l0aCB3aGF0IHRoZSBuZXcgc2VsZWN0aW9uIHNob3VsZCBiZVxuICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlTmV3U2VsZWN0aW9uOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIEpTWCB1c2VkIGZvciB0aGUgY2xvc2UgYnV0dG9uIGl0c2VsZlxuICAgICAgICAgKi9cbiAgICAgICAgdG9rZW5DbG9zZUNvbXBvbmVudDogUHJvcFR5cGVzLmVsZW1lbnQsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRldGVybWluZXMgaWYgdGhlIGAuYi10b2tlbmZpZWxkLXRva2VuLWNsb3NlYCBlbGVtZW50IHNob3VsZCBiZSByZW5kZXJlZCBmb3IgZWFjaCB0b2tlblxuICAgICAgICAgKi9cbiAgICAgICAgdG9rZW5DbG9zZVZpc2libGU6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgaW5kZXhlcyBvZiBlbnRpdGllcyB0aGF0IHNob3VsZCBiZSByZW5kZXJlZCBhcyBcInRva2Vuc1wiIGluIHRoZSBjb21wb25lbnQgVUlcbiAgICAgICAgICovXG4gICAgICAgIHRva2VuczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm51bWJlciksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBpbmRleGVzIG9mIHRva2VuaXplZCBlbnRpdGllcyB0aGF0IGFyZSBwYXJ0IG9mIGFuIGFjdGl2ZSBzZWxlY3Rpb247IHRoZSB1c2VyIGNhbiBwcmVzcyBgQmFja3NwYWNlYCB0byB0cmlnZ2VyIGBoYW5kbGVSZW1vdmVUb2tlbnNgXG4gICAgICAgICAqL1xuICAgICAgICB0b2tlbnNTZWxlY3RlZDogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm51bWJlciksXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgLi4uVHlwZWFoZWFkLmRlZmF1bHRQcm9wcyxcbiAgICAgICAgaGFuZGxlQWRkVG9rZW46IG5vb3AsXG4gICAgICAgIGhhbmRsZVJlbW92ZVRva2Vuczogbm9vcCxcbiAgICAgICAgaGFuZGxlTmV3U2VsZWN0aW9uOiBub29wLFxuICAgICAgICB0b2tlbkNsb3NlQ29tcG9uZW50OiAoPGRpdj5YPC9kaXY+KSxcbiAgICAgICAgdG9rZW5DbG9zZVZpc2libGU6IHRydWUsXG4gICAgICAgIHRva2VuczogW10sXG4gICAgICAgIHRva2Vuc1NlbGVjdGVkOiBbXSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoVG9rZW5pemVkSW5wdXQuZGVmYXVsdFByb3BzKVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgICBjb25zdCBwcmV2aW91c1NlbGVjdGVkSW5kZXhlcyA9IHByZXZQcm9wcy50b2tlbnNTZWxlY3RlZDtcbiAgICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSW5kZXhlcyA9IHRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudG9rZW5zLmxlbmd0aCA+IHByZXZQcm9wcy50b2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKCcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9zdXBwcmVzc05leHRUb2tlblNlbGVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NOZXh0VG9rZW5TZWxlY3Rpb24gPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAgIHByZXZpb3VzU2VsZWN0ZWRJbmRleGVzICE9PSBjdXJyZW50U2VsZWN0ZWRJbmRleGVzXG4gICAgICAgICAgICAmJiBjdXJyZW50U2VsZWN0ZWRJbmRleGVzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgaWYgKCAgIGN1cnJlbnRTZWxlY3RlZEluZGV4ZXMubGVuZ3RoID09PSAxXG4gICAgICAgICAgICAgICAgICAgICAgIHx8IGN1cnJlbnRTZWxlY3RlZEluZGV4ZXNbMF0gIT09IHByZXZpb3VzU2VsZWN0ZWRJbmRleGVzWzBdIC8qIG11bHRpIHNlbGVjdGlvbiwgbGVmdHdhcmQgKi8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWZzW2B0b2tlbl8ke2N1cnJlbnRTZWxlY3RlZEluZGV4ZXNbMF19YF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFzdChjdXJyZW50U2VsZWN0ZWRJbmRleGVzKSAhPT0gbGFzdChwcmV2aW91c1NlbGVjdGVkSW5kZXhlcykgLyogbXVsdGkgc2VsZWN0aW9uLCByaWdodHdhcmQgKi8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWZzW2B0b2tlbl8ke2xhc3QoY3VycmVudFNlbGVjdGVkSW5kZXhlcyl9YF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5yZWZzW2B0b2tlbl8ke2N1cnJlbnRTZWxlY3RlZEluZGV4ZXNbMF19YF0uZm9jdXMoKTtcbiAgICAgICAgfSAvLyBtb3ZlIGZvY3VzXG4gICAgfVxuXG4gICAgLy8gcGFzc3Rocm91Z2hzIHRvIFR5cGVhaGVhZCBpbnN0YW5jZSBtZXRob2RzXG4gICAgZm9jdXMgPSAoKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLmZvY3VzKClcbiAgICBnZXRJbnB1dE5vZGUgPSAoKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLmdldElucHV0Tm9kZSgpXG4gICAgZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0ID0gKCkgPT4gdGhpcy5yZWZzLnR5cGVhaGVhZC5nZXRTZWxlY3RlZEVudGl0eVRleHQoKVxuICAgIGdldFZhbHVlID0gKCkgPT4gdGhpcy5yZWZzLnR5cGVhaGVhZC5nZXRWYWx1ZSgpXG4gICAgc2VsZWN0ID0gKCkgPT4gdGhpcy5yZWZzLnR5cGVhaGVhZC5zZWxlY3QoKVxuICAgIHNldFZhbHVlID0gKHZhbHVlKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLnNldFZhbHVlKHZhbHVlKVxuXG4gICAgYWRkID0gKGluZGV4KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnRva2Vucy5pbmRleE9mKGluZGV4KSA9PT0gLTEpIHsgdGhpcy5wcm9wcy5oYW5kbGVBZGRUb2tlbihpbmRleCk7IH1cbiAgICB9XG5cbiAgICByZW1vdmUoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgaW5kZXhlcyA9IChBcnJheS5pc0FycmF5KGluZGV4KSA/IGluZGV4IDogW2luZGV4XSkuZmlsdGVyKChpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnRva2Vucy5pbmRleE9mKGlkeCkgIT09IC0xO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaW5kZXhlcy5sZW5ndGgpIHsgdGhpcy5wcm9wcy5oYW5kbGVSZW1vdmVUb2tlbnMoaW5kZXhlcyk7IH1cbiAgICB9XG5cbiAgICBzZWxlY3RUb2tlbihpbmRleCkge1xuICAgICAgICB0aGlzLnByb3BzLmhhbmRsZU5ld1NlbGVjdGlvbihbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBzZWxlY3RUb2tlbnMoaW5kZXhlcykge1xuICAgICAgICB0aGlzLnByb3BzLmhhbmRsZU5ld1NlbGVjdGlvbihpbmRleGVzKTtcbiAgICB9XG5cbiAgICBzZWxlY3RQcmV2aW91c1Rva2VuKGFwcGVuZCkge1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQ7XG4gICAgICAgIGNvbnN0IGluZGV4ZXMgPSB0aGlzLnByb3BzLnRva2VucztcblxuICAgICAgICBpZiAoICAgc2VsZWN0ZWQubGVuZ3RoID09PSAxXG4gICAgICAgICAgICAmJiBmaXJzdChzZWxlY3RlZCkgPT09IGZpcnN0KGluZGV4ZXMpKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIGFscmVhZHkgYXQgbGVmdG1vc3QgYm91bmRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPT09IDApIHsgLy8gcGljayB0aGUgcmlnaHRtb3N0XG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRva2VuKGxhc3QoaW5kZXhlcykpO1xuICAgICAgICB9IGVsc2UgeyAvLyBhZGQgdGhlIG5leHQgbGVmdG1vc3QgdG8gYSByZWNvbnN0cnVjdGVkIFwic2VsZWN0ZWRcIiBhcnJheVxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNUb2tlbiA9IGluZGV4ZXNbaW5kZXhlcy5pbmRleE9mKGZpcnN0KHNlbGVjdGVkKSkgLSAxXTtcblxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUb2tlbnMoYXBwZW5kID8gW3ByZXZpb3VzVG9rZW5dLmNvbmNhdChzZWxlY3RlZCkgOiBbcHJldmlvdXNUb2tlbl0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2VsZWN0TmV4dFRva2VuKGFwcGVuZCkge1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQ7XG4gICAgICAgIGNvbnN0IGluZGV4ZXMgPSB0aGlzLnByb3BzLnRva2VucztcblxuICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGFzdChzZWxlY3RlZCkgPT09IGxhc3QoaW5kZXhlcykpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRUb2tlbiA9IGluZGV4ZXNbaW5kZXhlcy5pbmRleE9mKGxhc3Qoc2VsZWN0ZWQpKSArIDFdO1xuXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRva2VucyhhcHBlbmQgPyBzZWxlY3RlZC5jb25jYXQobmV4dFRva2VuKSA6IFtuZXh0VG9rZW5dKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgICAgICB0aGlzLnByb3BzLmhhbmRsZU5ld1NlbGVjdGlvbihbXSk7XG4gICAgfVxuXG4gICAgaGFuZGxlSW5wdXRDbGljayA9IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2xpY2spKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVJbnB1dEZvY3VzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25Gb2N1cykpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkZvY3VzKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgc3dpdGNoIChldmVudC53aGljaCkge1xuICAgICAgICBjYXNlIDM3OiAgICAvLyBsZWZ0IGFycm93XG4gICAgICAgICAgICB0aGlzLnNlbGVjdFByZXZpb3VzVG9rZW4oZXZlbnQuc2hpZnRLZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAzOTogICAgLy8gcmlnaHQgYXJyb3dcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TmV4dFRva2VuKGV2ZW50LnNoaWZ0S2V5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgODogICAgIC8vIGJhY2tzcGFjZVxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhpcy5wcm9wcy50b2tlbnNTZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDY1OiAgICAvLyBsZXR0ZXIgXCJhXCJcbiAgICAgICAgICAgIGlmIChldmVudC5tZXRhS2V5KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCgpO1xuXG4gICAgICAgICAgICAgICAgLy8gaGFja3ksIGJ1dCB0aGUgb25seSB3YXkgdW5sZXNzIHdlIG1vdmUgc2VsZWN0aW9uIG1hbmFnZW1lbnQgaW50ZXJuYWwgYWdhaW5cbiAgICAgICAgICAgICAgICB0aGlzLl9zdXBwcmVzc05leHRUb2tlblNlbGVjdGlvbiA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhhbmRsZU5ld1NlbGVjdGlvbih0aGlzLnByb3BzLnRva2Vucyk7XG4gICAgICAgICAgICB9IC8vIFwiY21kXCJcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMub25LZXlEb3duKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbktleURvd24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlVG9rZW5DbG9zZUNsaWNrKGluZGV4LCBldmVudCkge1xuICAgICAgICAvLyBpZiB3ZSBkb24ndCBzdG9wIHByb3BhZ2F0aW9uLCB0aGUgZXZlbnQgYnViYmxlcyBhbmQgcmVzdWx0cyBpbiBhIGZhaWxlZCB0b2tlbiBzZWxlY3Rpb25cbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgdGhpcy5yZW1vdmUoaW5kZXgpO1xuICAgICAgICB0aGlzLmZvY3VzKCk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudG9rZW5DbG9zZUNvbXBvbmVudC5wcm9wcy5vbkNsaWNrKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQucHJvcHMub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJUb2tlbkNsb3NlKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnRva2VuQ2xvc2VWaXNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KHRoaXMucHJvcHMudG9rZW5DbG9zZUNvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3goJ2ItdG9rZW5maWVsZC10b2tlbi1jbG9zZScsIHRoaXMucHJvcHMudG9rZW5DbG9zZUNvbXBvbmVudC5wcm9wcy5jbGFzc05hbWUpLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlVG9rZW5DbG9zZUNsaWNrLmJpbmQodGhpcywgaW5kZXgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVUb2tlbktleURvd24oaW5kZXgsIGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQud2hpY2gpIHtcbiAgICAgICAgY2FzZSAxMzogLy8gZW50ZXJcbiAgICAgICAgY2FzZSAzMjogLy8gc3BhY2VcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9rZW4oaW5kZXgpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgODogLy8gYmFja3NwYWNlXG4gICAgICAgICAgICB0aGlzLnJlbW92ZShpbmRleCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJUb2tlbnMoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYi10b2tlbmZpZWxkLXRva2Vucyc+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMudG9rZW5zLm1hcCgoaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e2B0b2tlbl8ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXRva2VuZmllbGQtdG9rZW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ItdG9rZW5maWVsZC10b2tlbi1zZWxlY3RlZCc6IHRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQuaW5kZXhPZihpbmRleCkgIT09IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2VsZWN0VG9rZW4uYmluZCh0aGlzLCBpbmRleCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZVRva2VuS2V5RG93bi5iaW5kKHRoaXMsIGluZGV4KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD0nMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuZW50aXRpZXNbaW5kZXhdLnRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyVG9rZW5DbG9zZShpbmRleCl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBUb2tlbml6ZWRJbnB1dC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXRva2VuZmllbGQtd3JhcHBlcicsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn0+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyVG9rZW5zKCl9XG5cbiAgICAgICAgICAgICAgICA8VHlwZWFoZWFkXG4gICAgICAgICAgICAgICAgICAgIHsuLi5leHRyYWN0Q2hpbGRQcm9wcyh0aGlzLnByb3BzLCBUeXBlYWhlYWQuZGVmYXVsdFByb3BzKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPSd0eXBlYWhlYWQnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYi10b2tlbmZpZWxkJ1xuICAgICAgICAgICAgICAgICAgICBjbGVhck9uU2VsZWN0aW9uPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnByb3BzLmlucHV0UHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUlucHV0Q2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZvY3VzOiB0aGlzLmhhbmRsZUlucHV0Rm9jdXMsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIG9uRW50aXR5U2VsZWN0ZWQ9e3RoaXMuYWRkfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInRlc3QiLCJzb3VyY2UiLCJrZXlzIiwicmVkdWNlIiwiaGFzaCIsImtleSIsIm9taXR0ZWRLZXlzIiwiaW5kZXhPZiIsInN0YXRlIiwiYWN0aXZlQ2hpbGRJbmRleCIsIl90aGlzIiwicHJvcHMiLCJkZWZhdWx0QWN0aXZlQ2hpbGRJbmRleCIsImhhbmRsZUtleURvd24iLCJldmVudCIsIm1vZGUiLCJBcnJvd0tleU5hdmlnYXRpb24iLCJWRVJUSUNBTCIsIkJPVEgiLCJwcmV2ZW50RGVmYXVsdCIsIm1vdmVGb2N1cyIsIkhPUklaT05UQUwiLCJpc0Z1bmN0aW9uIiwib25LZXlEb3duIiwiaGFuZGxlRm9jdXMiLCJ0YXJnZXQiLCJoYXNBdHRyaWJ1dGUiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsIlJlYWN0IiwiQ2hpbGRyZW4iLCJ0b0FycmF5IiwiY2hpbGRyZW4iLCJpbmRleCIsInNldFN0YXRlIiwiY2hpbGQiLCJvbkZvY3VzIiwicHJldlByb3BzIiwicHJldlN0YXRlIiwidGhpcyIsInNldEZvY3VzIiwibmV4dFByb3BzIiwiY291bnQiLCJudW1DaGlsZHJlbiIsInJlZnMiLCJ3cmFwcGVyIiwiZmluZERPTU5vZGUiLCJjaGlsZE5vZGUiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsIk5vZGUiLCJET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkciLCJmb2N1cyIsImRlbHRhIiwibmV4dEluZGV4IiwibWFwIiwiY2xvbmVFbGVtZW50IiwiZGF0YS1mb2N1cy1pbmRleCIsImRhdGEtc2tpcCIsInRhYkluZGV4IiwidW5kZWZpbmVkIiwiX3RoaXMyIiwiY29tcG9uZW50Iiwib21pdCIsImludGVybmFsS2V5cyIsInJlZiIsIlB1cmVDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJvbmVPZlR5cGUiLCJzdHJpbmciLCJmdW5jIiwibnVtYmVyIiwib25lT2YiLCJkZWZhdWx0UHJvcHMiLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmciLCJhcmdUeXBlIiwiY2xhc3NlcyIsInB1c2giLCJBcnJheSIsImlzQXJyYXkiLCJjbGFzc05hbWVzIiwiYXBwbHkiLCJoYXNPd24iLCJjYWxsIiwiam9pbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJiYWJlbEhlbHBlcnMudHlwZW9mIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwibW91bnRlZCIsImRhdGEiLCJ0aGVuIiwicGF5bG9hZCIsImN1cnJlbnRQcm9wcyIsImNvbnZlcnRUb0pTWEZ1bmMiLCJjb250ZW50UmVuZGVyZWRGdW5jIiwiY29udmVydERhdGFUb0pTWE9yV2FpdCIsImZpcmVDYWxsYmFja0lmRGF0YVJlbmRlcmVkIiwiZXh0cmFDbGFzc2VzIiwiY2xhc3NOYW1lIiwiYi1hc3luYy1lcnJvciIsImItYXN5bmMtbG9hZGluZyIsIkFzeW5jIiwiZ2V0Q2xhc3NlcyIsImxvYWRpbmdDb250ZW50IiwiZXJyb3JDb250ZW50IiwiYW55Iiwibm9kZSIsIngiLCJoYW5kbGVDbGljayIsImRpc2FibGVkIiwidG9nZ2xlU3RhdGUiLCJvbkNsaWNrIiwicHJlc3NlZCIsIkJ1dHRvbiIsImN4IiwiYi1idXR0b24tcHJlc3NhYmxlIiwiYi1idXR0b24tcHJlc3NlZCIsImFyaWEtcHJlc3NlZCIsIm9uUHJlc3NlZCIsIm9uVW5wcmVzc2VkIiwiYm9vbCIsIm5vb3AiLCJyZXBsYWNlIiwiYSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsImlkIiwidXVpZCIsImhhbmRsZUNoYW5nZSIsImlucHV0UHJvcHMiLCJjaGVja2VkIiwibmFtZSIsIm9uQ2hhbmdlIiwiaW5wdXQiLCJpbmRldGVybWluYXRlIiwic2V0SW5kZXRlcm1pbmF0ZSIsIlN0cmluZyIsInR5cGUiLCJiLWNoZWNrYm94LW1peGVkIiwiYi1jaGVja2JveC1jaGVja2VkIiwiYi1jaGVja2JveC11bmNoZWNrZWQiLCJhcmlhLWNoZWNrZWQiLCJnZXRBcmlhU3RhdGUiLCJsYWJlbCIsImxhYmVsUHJvcHMiLCJodG1sRm9yIiwiQ2hlY2tib3giLCJyZW5kZXJJbnB1dCIsInJlbmRlckxhYmVsIiwic2hhcGUiLCJ2YWx1ZSIsIm9iamVjdCIsIm9uQ2hlY2tlZCIsIm9uVW5jaGVja2VkIiwiaXRlbXMiLCJldmVyeSIsIml0ZW0iLCJzb21lIiwic2VsZWN0QWxsIiwiYWxsSXRlbXNDaGVja2VkIiwic2VsZWN0QWxsUHJvcHMiLCJhbGxDaGVja2VkIiwiYW55SXRlbXNDaGVja2VkIiwib25BbGxDaGVja2VkIiwib25BbGxVbmNoZWNrZWQiLCJvbkNoaWxkQ2hlY2tlZCIsIm9uQ2hpbGRVbmNoZWNrZWQiLCJyZW5kZXJDaGVja2JveGVzIiwic2VsZWN0QWxsUG9zaXRpb24iLCJCRUZPUkUiLCJ0b0JlUmVuZGVyZWQiLCJ1bnNoaWZ0IiwicmVuZGVyU2VsZWN0QWxsIiwiQUZURVIiLCJDaGVja2JveEdyb3VwIiwicmVuZGVyQ2hpbGRyZW4iLCJhcnJheU9mIiwiaXNSZXF1aXJlZCIsIiRwb3J0YWwiLCIkcGFzc2VuZ2VyIiwiY3JlYXRlRWxlbWVudCIsImRlc3RpbmF0aW9uIiwiYXBwZW5kQ2hpbGQiLCJyZW5kZXJQb3J0YWxsZWRDb250ZW50IiwiaXNWYWxpZEVsZW1lbnQiLCJwb3J0YWxJZCIsIlJlYWN0RE9NIiwidW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIiLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlIiwicmVtb3ZlQ2hpbGQiLCJQb3J0YWwiLCJQT1JUQUxfREFUQV9BVFRSSUJVVEUiLCJDb21wb25lbnQiLCJpbnN0YW5jZU9mIiwiSFRNTEVsZW1lbnQiLCJib2R5IiwicHJvdG90eXBlIiwic2xpY2UiLCJ1dWlkSGVhZGVyIiwidXVpZEJvZHkiLCJuYXRpdmVFdmVudCIsImNhcHR1cmVGb2N1cyIsInNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCIsImlzUGFydE9mRGlhbG9nIiwic2V0VGltZW91dCIsIm9uQ2xvc2UiLCJleHBsaWNpdE9yaWdpbmFsVGFyZ2V0IiwicmVsYXRlZFRhcmdldCIsInByZXZpb3VzIiwiaGFuZGxlSW5zaWRlQ2xpY2siLCJoYW5kbGVPdXRzaWRlQ2xpY2siLCJoYW5kbGVPdXRzaWRlU2Nyb2xsV2hlZWwiLCIkd3JhcHBlciIsImNvbmNhdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkb20iLCJnZXRFbGVtZW50QnlJZCIsIm5vZGVUeXBlIiwiRUxFTUVOVF9OT0RFIiwicGFyZW50Tm9kZSIsImNvbnRhaW5zIiwiZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCIkZGlhbG9nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInByb3AiLCJib2R5UHJvcHMiLCJmb290ZXIiLCJmb290ZXJQcm9wcyIsImhlYWRlciIsImhlYWRlclByb3BzIiwiYXJpYS1oaWRkZW4iLCJ3cmFwcGVyUHJvcHMiLCJyZW5kZXJGb2N1c0JvdW5kYXJ5IiwiYmVmb3JlIiwiRGlhbG9nIiwicm9sZSIsImFyaWEtbGFiZWxsZWRieSIsImFyaWEtZGVzY3JpYmVkYnkiLCJyZW5kZXJIZWFkZXIiLCJyZW5kZXJCb2R5IiwicmVuZGVyRm9vdGVyIiwiYWZ0ZXIiLCJjbG9zZU9uRXNjS2V5IiwiY2xvc2VPbkluc2lkZUNsaWNrIiwiY2xvc2VPbk91dHNpZGVDbGljayIsImNsb3NlT25PdXRzaWRlRm9jdXMiLCJjbG9zZU9uT3V0c2lkZVNjcm9sbCIsInN0cmluZ051bWJlciIsImluc3RhbmNlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInRvSSIsImZvbnRTaXplIiwiY29udGFpbmVyQm94IiwiaGVpZ2h0Iiwid2lkdGgiLCJib3hTaXppbmciLCJjb250YWluZXJIZWlnaHQiLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSIsImNvbnRhaW5lcldpZHRoIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJmbG9vciIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwic3R5bGUiLCJtaW4iLCJtYXhGb250U2l6ZSIsIm9wdGltaXplRm9ySGVpZ2h0Iiwib3B0aW1pemVGb3JXaWR0aCIsImluc3RhbmNlcyIsImZvckVhY2giLCJoYW5kbGVXaW5kb3dSZXNpemUiLCJzcGxpY2UiLCJyZXNjYWxlIiwicmVnaXN0ZXJJbnN0YW5jZSIsInVucmVnaXN0ZXJJbnN0YW5jZSIsIkZpdHRlZFRleHQiLCJOdW1iZXIiLCJNQVhfVkFMVUUiLCJzdGF0dXMiLCJJbWFnZSIsIkxPQURJTkciLCJzcmMiLCJyZXNldFByZWxvYWRlciIsInByZWxvYWQiLCJsb2FkZXIiLCJvbmxvYWQiLCJvbmVycm9yIiwiTE9BREVEIiwiRVJST1IiLCJkaXNwbGF5QXNCYWNrZ3JvdW5kSW1hZ2UiLCJpbWFnZVByb3BzIiwidGl0bGUiLCJhbHQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJvbkxvYWQiLCJvbkVycm9yIiwic3RhdHVzUHJvcHMiLCJiLWltYWdlLWxvYWRpbmciLCJiLWltYWdlLWxvYWRlZCIsImItaW1hZ2UtZXJyb3IiLCJyZW5kZXJJbWFnZSIsInJlbmRlclN0YXR1cyIsImlzQ29udHJvbGxlZCIsImlzU3RyaW5nIiwiaXNGb2N1c2VkIiwic2V0SW5wdXRWYWx1ZSIsImdldFZhbHVlIiwiZmllbGQiLCJoYW5kbGVCbHVyIiwib25CbHVyIiwiZGVmYXVsdFZhbHVlIiwibmV4dFZhbHVlIiwiZGlzcGF0Y2hFdmVudCIsImJ1YmJsZXMiLCJoaWRlUGxhY2Vob2xkZXJPbkZvY3VzIiwiaXNOb25FbXB0eSIsInBsYWNlaG9sZGVyIiwiZ2V0UGxhY2Vob2xkZXJUZXh0IiwiSW5wdXQiLCJyZW5kZXJQbGFjZWhvbGRlciIsIm9iajEiLCJvYmoyIiwiY2hpbGRQcm9wcyIsInBvcnRhbFByb3BzIiwiTW9kYWwiLCIkbW9kYWwiLCJtYXNrUHJvcHMiLCJleHRyYWN0Q2hpbGRQcm9wcyIsIm1vZGFsUHJvcHMiLCJNQVhfSU5URUdFUiIsIk5BTiIsIm9iamVjdFByb3RvIiwidG9JbnRlZ2VyIiwiaXNPYmplY3RMaWtlIiwib2JqZWN0VG9TdHJpbmciLCJzeW1ib2xUYWciLCJ0b051bWJlciIsIklORklOSVRZIiwidG9GaW5pdGUiLCJyZW1haW5kZXIiLCJyZXN1bHQiLCJpc1N5bWJvbCIsImlzT2JqZWN0IiwidmFsdWVPZiIsIm90aGVyIiwicmVUcmltIiwicmVJc0JpbmFyeSIsInJlSXNPY3RhbCIsImZyZWVQYXJzZUludCIsImlzQmluYXJ5IiwicmVJc0JhZEhleCIsImlzSW50ZWdlciIsImluZGV4T2ZPcHRpb25JbkZvY3VzIiwiZ2V0UHJldmlvdXNPcHRpb25JbmRleCIsImFjdGl2ZUl0ZW1JbmRleCIsImdldE5leHRPcHRpb25JbmRleCIsImhhbmRsZU9wdGlvbkNsaWNrIiwib3B0aW9ucyIsIm9wdGlvbiIsInNlbGVjdGVkIiwiY3VycmVudE9wdGlvbkluZGV4IiwibmV4dCIsIm9uT3B0aW9uU2VsZWN0ZWQiLCJkZWZpbml0aW9uIiwiU2VnbWVudGVkQ29udHJvbCIsImludGVybmFsQ2hpbGRLZXlzIiwiYi1zZWdtZW50ZWQtY29udHJvbC1vcHRpb24tc2VsZWN0ZWQiLCJoYW5kbGVPcHRpb25CbHVyIiwiYmluZCIsImhhbmRsZU9wdGlvbkZvY3VzIiwiY29udGVudCIsInJlbmRlck9wdGlvbnMiLCJtaXNzaW5nU2VsZWN0ZWQiLCJzZWVuU2VsZWN0ZWQiLCJtdWx0aXBsZVNlbGVjdGVkIiwiY3VycmVudFBhZ2UiLCJpbml0aWFsUGFnZSIsInRhcmdldEluZGV4IiwibnVtSXRlbXNQZXJQYWdlIiwiZ2V0UGFnZUZvckluZGV4IiwiY2VpbCIsIml0ZW1zUGVyUGFnZSIsInRvdGFsUGFnZXMiLCJ0b3RhbEl0ZW1zIiwiZmlyc3RWaXNpYmxlSXRlbUluZGV4IiwicGFnZVRvSW5kZXgiLCJjb250cm9scyIsIkZJUlNUIiwibmV4dFRhcmdldEluZGV4IiwiUFJFVklPVVMiLCJORVhUIiwiTEFTVCIsIml0ZW1fMCIsImlkZW50aWZpZXIiLCJvbGRQcm9wcyIsIm51bVBhZ2VUb2dnbGVzIiwic3RhcnRQYWdlIiwic2hvd1BhZ2luYXRpb25TdGF0ZSIsInNob3dKdW1wVG9GaXJzdCIsImp1bXBUb0ZpcnN0Q29udHJvbENvbnRlbnQiLCJQYWdpbmF0aW9uIiwicHJldmlvdXNQYWdlQ29udHJvbENvbnRlbnQiLCJlbmRQYWdlIiwiZGF0YS1wYWdlLW51bWJlciIsIm5leHRQYWdlQ29udHJvbENvbnRlbnQiLCJzaG93SnVtcFRvTGFzdCIsImp1bXBUb0xhc3RDb250cm9sQ29udGVudCIsImN1c3RvbUNvbnRyb2xDb250ZW50IiwiZmlyc3RJdGVtSW5kZXgiLCJsYXN0SXRlbUluZGV4IiwiZ2VuZXJhdGVkSXRlbXMiLCJnZXRJdGVtIiwibGlzdFdyYXBwZXJQcm9wcyIsImdlbmVyYXRlSXRlbXMiLCJiLXBhZ2luYXRpb24taXRlbS1ldmVuIiwiYi1wYWdpbmF0aW9uLWl0ZW0tb2RkIiwiX3RoaXMzIiwiaXRlbVRvSlNYQ29udmVydGVyRnVuYyIsImRhdGEtcGFnaW5hdGlvbi1pbmRleCIsImluZGV4T2Zmc2V0IiwiaXRlbUxvYWRpbmdDb250ZW50IiwicG9zaXRpb24iLCJoaWRlUGFnZXJJZk5vdE5lZWRlZCIsInRvZ2dsZVdyYXBwZXJQcm9wcyIsInRvTG93ZXJDYXNlIiwicG9zaXRpb25Mb3dlciIsInRvVXBwZXJDYXNlIiwicG9zaXRpb25DYXBpdGFsaXplZCIsImNyZWF0ZVBhZ2VCdXR0b25PcHRpb25zIiwicG9zaXRpb25zIiwiQUJPVkUiLCJyZW5kZXJDb250cm9scyIsInJlbmRlckl0ZW1zIiwiQkVMT1ciLCJyZW5kZXJWaWV3IiwibnVtYmVyT2ZQYWdlcyIsImlkZW50aXR5IiwibGVuIiwiZG9jdW1lbnRFbGVtZW50IiwiZGlyZWN0aW9uIiwiYXJyMSIsImFycjIiLCJmaWx0ZXIiLCJ2aWV3Qm94IiwieG1sbnMiLCJmaWxsIiwicG9pbnRzIiwiYXgiLCJTVEFSVCIsImF5IiwiZHgiLCJkeSIsIkVORCIsIk1JRERMRSIsImFsaWduIiwiYW5jaG9yIiwiY2FyZXRBbmNob3IiLCJjYWNoZVZpZXdwb3J0Q2FydG9ncmFwaHkiLCJnZXRWYWxpZEFsaWdubWVudFByZXNldCIsIlBvcG92ZXIiLCJnZXRBbGlnbm1lbnRDbGFzc0ZyYWdtZW50IiwiZGlhbG9nIiwiQ0xBU1NfUkVNT1ZBTF9SRUdFWCIsImZyYWciLCJwcmVzZXQiLCJyb3VuZCIsImdldE5leHREaWFsb2dYUG9zaXRpb24iLCJnZXROZXh0RGlhbG9nWVBvc2l0aW9uIiwidHJhbnNmb3JtUHJvcCIsImNhcmRpbmFsIiwiJGNhcmV0IiwibG9uZ2l0dWRpbmFsIiwiZ2V0TmV4dENhcmV0WFBvc2l0aW9uIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYW5jaG9yUmVjdCIsImNhcmV0QW5jaG9yUmVjdCIsImJvZHlMZWZ0IiwiYm9keVJlY3QiLCJsZWZ0IiwiYm9keVRvcCIsInRvcCIsIm5leHRYIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJjYXJldCIsIm5leHRZIiwicEhlaWdodCIsInBXaWR0aCIsImJvdHRvbSIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsInJpZ2h0IiwiY29tYmluYXRpb25zIiwiY29uZmlnIiwiaXNQb3NpdGlvblZhbGlkIiwidmFsaWRDb21ib3MiLCJhdXRvUmVwb3NpdGlvbiIsImJlc3RDb21ib3MiLCJnZXRPcHBvc2l0ZUNhcmRpbmFsIiwib3Bwb3NpdGVDYXJkaW5hbCIsIm9rYXlDb21ib3MiLCJjYXJldENvbXBvbmVudCIsImNvbnN0YW50IiwiZGVmIiwiTk5XIiwiTiIsIk5ORSIsIkVORSIsIkUiLCJFU0UiLCJTU0UiLCJTIiwiU1NXIiwiV1NXIiwiVyIsIldOVyIsIkRFRkFVTFRfQ0FSRVRfQ09NUE9ORU5UIiwid2l0aG91dCIsImV4cGFuZGVkIiwiZGlzcGF0Y2hDYWxsYmFjayIsInRvZ2dsZVByb3BzIiwibmV3UHJvcHMiLCJQcm9ncmVzc2l2ZURpc2Nsb3N1cmUiLCJiLWRpc2Nsb3N1cmUtZXhwYW5kZWQiLCJ0ZWFzZXJFeHBhbmRlZCIsInRlYXNlciIsInJlbmRlckNvbnRlbnQiLCJvbkV4cGFuZCIsIm9uSGlkZSIsIm9uQ2FuY2VsIiwiY2FuY2VsUHJvcHMiLCJwcm9ncmVzc1Byb3BzIiwiYi1wcm9ncmVzcy1pbmRldGVybWluYXRlIiwicHJvZ3Jlc3MiLCJ0d2VlblByb3BlcnR5IiwiUHJvZ3Jlc3MiLCJyZW5kZXJQcm9ncmVzcyIsInJlbmRlckNhbmNlbCIsIm9uU2VsZWN0ZWQiLCJiLXJhZGlvLXNlbGVjdGVkIiwiUmFkaW8iLCJzdHIiLCJtYXRjaE9wZXJhdG9yc1JlIiwiY29tcHV0ZU1hdGNoZXMiLCJzZWxlY3RlZEVudGl0eUluZGV4Iiwib25FbnRpdHlIaWdobGlnaHRlZCIsImVudGl0aWVzIiwidXBkYXRlSW5wdXRTdGF0ZSIsImVudGl0eU1hdGNoSW5kZXhlcyIsIm1hdGNoZXMiLCJzY3JvbGxUb3AiLCJzZXRWYWx1ZVdpdGhTZWxlY3RlZEVudGl0eSIsInRvdGFsTWF0Y2hlcyIsIm1hdGNoZXNOb2RlIiwibWF0Y2hJbmRleCIsIm1hdGNoTm9kZSIsIm9mZnNldFRvcCIsIm1hdGNoTm9kZVlTdGFydCIsIm1hdGNoTm9kZVlFbmQiLCJtYXRjaGVzTm9kZVlFbmQiLCJnZXRJbnB1dE5vZGUiLCJzZWxlY3Rpb25TdGFydCIsInNlbGVjdGlvbkVuZCIsImVudGl0eSIsInRleHQiLCJlbnRpdHlDb250ZW50Iiwic3BsaXQiLCJlc2NhcGVyIiwiZnJhZ3MiLCJ0aHJlc2hvbGQiLCJub3JtYWxpemVkVXNlclRleHQiLCJzZWVrVmFsdWUiLCJpbmRleFN0YXJ0IiwiaW5kZXhFbmQiLCJhbGdvcml0aG0iLCJUeXBlYWhlYWQiLCJTVEFSVFNfV0lUSCIsIm1hcmtTdGFydHNXaXRoTWF0Y2hTdWJzdHJpbmciLCJtYXJrRnV6enlNYXRjaFN1YnN0cmluZyIsIm1hcmtlciIsIndhcm5lZE1hcmtlciIsImNvbnNvbGUiLCJ3YXJuIiwidXNlclRleHQiLCJub3JtYWxpemVkIiwicmVzdWx0cyIsImdldFN0YXJ0c1dpdGhNYXRjaEluZGV4ZXMiLCJnZXRGdXp6eU1hdGNoSW5kZXhlcyIsIm1hdGNoZXIiLCJ3YXJuZWRNYXRjaGVyIiwicHJvdmlkZWRFbnRpdGllcyIsImN1cnJlbnRWYWx1ZSIsImdldE1hdGNoSW5kZXhlcyIsIm9mZnNjcmVlbkNsYXNzIiwiYXJpYS1saXZlIiwiZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0IiwiaGludCIsInJhdyIsInByb2Nlc3NlZCIsImhpbnRQcm9wcyIsIm1hdGNoV3JhcHBlclByb3BzIiwicmVzdCIsImItdHlwZWFoZWFkLW1hdGNoLXNlbGVjdGVkIiwiaGFuZGxlTWF0Y2hDbGljayIsIm1hcmtNYXRjaFN1YnN0cmluZyIsInJlbmRlck5vdGlmaWNhdGlvbiIsInJlbmRlckhpbnQiLCJhcmlhLWNvbnRyb2xzIiwicmVuZGVyTWF0Y2hlcyIsIkZVWlpZIiwiY2xlYXJPblNlbGVjdGlvbiIsIm9uQ29tcGxldGUiLCJvbkVudGl0eVNlbGVjdGVkIiwiX3RoaXM0IiwicmVzZXRNYXRjaGVzIiwic2VsZWN0Iiwic2V0VmFsdWUiLCJnZXRNYXJraW5nRnVuY3Rpb24iLCJnZXRNYXRjaGluZ0Z1bmN0aW9uIiwic3RvcFByb3BhZ2F0aW9uIiwiY3Vyc29yQXRFbmRPZklucHV0Iiwic2hpZnRLZXkiLCJzZWxlY3RNYXRjaCIsImFycmF5IiwidHlwZWFoZWFkIiwiYWRkIiwidG9rZW5zIiwiaGFuZGxlQWRkVG9rZW4iLCJoYW5kbGVJbnB1dENsaWNrIiwiY2xlYXJTZWxlY3Rpb24iLCJoYW5kbGVJbnB1dEZvY3VzIiwid2hpY2giLCJzZWxlY3RQcmV2aW91c1Rva2VuIiwic2VsZWN0TmV4dFRva2VuIiwidG9rZW5zU2VsZWN0ZWQiLCJyZW1vdmUiLCJtZXRhS2V5IiwiX3N1cHByZXNzTmV4dFRva2VuU2VsZWN0aW9uIiwiaGFuZGxlTmV3U2VsZWN0aW9uIiwicHJldmlvdXNTZWxlY3RlZEluZGV4ZXMiLCJjdXJyZW50U2VsZWN0ZWRJbmRleGVzIiwibGFzdCIsImlkeCIsImluZGV4ZXMiLCJoYW5kbGVSZW1vdmVUb2tlbnMiLCJhcHBlbmQiLCJmaXJzdCIsInNlbGVjdFRva2VuIiwic2VsZWN0VG9rZW5zIiwicHJldmlvdXNUb2tlbiIsIm5leHRUb2tlbiIsInRva2VuQ2xvc2VDb21wb25lbnQiLCJ0b2tlbkNsb3NlVmlzaWJsZSIsImhhbmRsZVRva2VuQ2xvc2VDbGljayIsImItdG9rZW5maWVsZC10b2tlbi1zZWxlY3RlZCIsImhhbmRsZVRva2VuS2V5RG93biIsInJlbmRlclRva2VuQ2xvc2UiLCJUb2tlbml6ZWRJbnB1dCIsInJlbmRlclRva2VucyJdLCJtYXBwaW5ncyI6Im9UQUFBLHlCQUFnQkEscUJBQXlCLDhDQ0dRQyxxRUFDN0MsZUFBY0MsS0FBS0QsR0FBUUUsT0FBTyxXQUE4QkMsRUFBTUMsR0FDbEUsR0FBSUMsRUFBWUMsUUFBUUYsTUFBVSxFQUFHLENBQ2pDRCxFQUFLQyxHQUFPSixFQUFPSSxHQUd2Qix5NURDc0RKRyxPQUNJQyxpQkFBa0JDLEVBQUtDLE1BQU1DLDJCQXVEakNDLGNBQWdCLFNBQUNDLEdBQ2IsT0FBUUEsRUFBTVQsS0FDZCxJQUFLLFVBQ0QsR0FBSUssRUFBS0MsTUFBTUksT0FBU0MsRUFBbUJELEtBQUtFLFVBQ3pDUCxFQUFLQyxNQUFNSSxPQUFTQyxFQUFtQkQsS0FBS0csS0FBTSxDQUNyREosRUFBTUssZ0JBQ05ULEdBQUtVLFdBQVcsR0FHcEIsS0FFSixLQUFLLFlBQ0QsR0FBSVYsRUFBS0MsTUFBTUksT0FBU0MsRUFBbUJELEtBQUtNLFlBQ3pDWCxFQUFLQyxNQUFNSSxPQUFTQyxFQUFtQkQsS0FBS0csS0FBTSxDQUNyREosRUFBTUssZ0JBQ05ULEdBQUtVLFdBQVcsR0FHcEIsS0FFSixLQUFLLFlBQ0QsR0FBSVYsRUFBS0MsTUFBTUksT0FBU0MsRUFBbUJELEtBQUtFLFVBQ3pDUCxFQUFLQyxNQUFNSSxPQUFTQyxFQUFtQkQsS0FBS0csS0FBTSxDQUNyREosRUFBTUssZ0JBQ05ULEdBQUtVLFVBQVUs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

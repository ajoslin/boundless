"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var React=require("react");var React__default=_interopDefault(React);var ReactDOM=require("react-dom");var ReactDOM__default=_interopDefault(ReactDOM);var isFunction=function(e){return typeof e==="function"};function omitKeysFromSourceObject(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return Object.keys(e).reduce(function n(o,r){if(t.indexOf(r)===-1){o[r]=e[r]}return o},{})}var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var classCallCheck=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}return function(t,n,o){if(n)e(t.prototype,n);if(o)e(t,o);return t}}();var defineProperty=function(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e};var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n){if(Object.prototype.hasOwnProperty.call(n,o)){e[o]=n[o]}}}return e};var get=function e(t,n,o){if(t===null)t=Function.prototype;var r=Object.getOwnPropertyDescriptor(t,n);if(r===undefined){var s=Object.getPrototypeOf(t);if(s===null){return undefined}else{return e(s,n,o)}}else if("value"in r){return r.value}else{var i=r.get;if(i===undefined){return undefined}return i.call(o)}};var inherits=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var objectWithoutProperties=function(e,t){var n={};for(var o in e){if(t.indexOf(o)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,o))continue;n[o]=e[o]}return n};var possibleConstructorReturn=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var set=function e(t,n,o,r){var s=Object.getOwnPropertyDescriptor(t,n);if(s===undefined){var i=Object.getPrototypeOf(t);if(i!==null){e(i,n,o,r)}}else if("value"in s&&s.writable){s.value=o}else{var a=s.set;if(a!==undefined){a.call(r,o)}}return o};var ArrowKeyNavigation=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.state={activeChildIndex:o.props.defaultActiveChildIndex},o.handleKeyDown=function(e){switch(e.key){case"ArrowUp":if(o.props.mode===t.mode.VERTICAL||o.props.mode===t.mode.BOTH){e.preventDefault();o.moveFocus(-1)}break;case"ArrowLeft":if(o.props.mode===t.mode.HORIZONTAL||o.props.mode===t.mode.BOTH){e.preventDefault();o.moveFocus(-1)}break;case"ArrowDown":if(o.props.mode===t.mode.VERTICAL||o.props.mode===t.mode.BOTH){e.preventDefault();o.moveFocus(1)}break;case"ArrowRight":if(o.props.mode===t.mode.HORIZONTAL||o.props.mode===t.mode.BOTH){e.preventDefault();o.moveFocus(1)}break}if(isFunction(o.props.onKeyDown)){o.props.onKeyDown(e)}},o.handleFocus=function(e){if(e.target.hasAttribute("data-focus-index")){var t=parseInt(e.target.getAttribute("data-focus-index"),10);var n=React__default.Children.toArray(o.props.children)[t];o.setState({activeChildIndex:t});if(n.props.onFocus){n.props.onFocus(e)}}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentDidUpdate",value:function e(t,n){if(this.state.activeChildIndex!==n.activeChildIndex){this.setFocus(this.state.activeChildIndex)}}},{key:"componentWillReceiveProps",value:function e(t){if(this.state.activeChildIndex!==0){var n=t.children?React__default.Children.count(t.children):0;if(n===0){this.setState({activeChildIndex:0})}else if(this.state.activeChildIndex>=n){this.setState({activeChildIndex:n-1})}}}},{key:"setFocus",value:function e(t){var n=(this.refs.wrapper instanceof HTMLElement?this.refs.wrapper:ReactDOM.findDOMNode(this.refs.wrapper)).children[t];if(n&&n.hasAttribute("data-skip")){this.moveFocus(n.compareDocumentPosition(document.activeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}else if(n&&document.activeElement!==n){n.focus()}}},{key:"moveFocus",value:function e(t){var n=this.props.children?React__default.Children.count(this.props.children):0;var o=this.state.activeChildIndex+t;if(o>=n){o=0}else if(o<0){o=n-1}this.setState({activeChildIndex:o})}},{key:"children",value:function e(){var t=this;return React__default.Children.map(this.props.children,function(e,n){return React__default.cloneElement(e,{"data-focus-index":n,"data-skip":parseInt(e.props.tabIndex,10)===-1||undefined,key:e.key||n,tabIndex:t.state.activeChildIndex===n?0:-1})})}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",onFocus:this.handleFocus,onKeyDown:this.handleKeyDown}),this.children())}}]);return t}(React__default.PureComponent);ArrowKeyNavigation.mode={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL",BOTH:"BOTH"};ArrowKeyNavigation.propTypes={component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),defaultActiveChildIndex:React.PropTypes.number,mode:React.PropTypes.oneOf(Object.keys(ArrowKeyNavigation.mode))};ArrowKeyNavigation.defaultProps={component:"div",defaultActiveChildIndex:0,mode:ArrowKeyNavigation.mode.BOTH};ArrowKeyNavigation.internalKeys=Object.keys(ArrowKeyNavigation.defaultProps);function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var index=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});function noop(){}var Button=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.handleClick=function(e){if(o.props.disabled){return}o.toggleState(e);if(isFunction(o.props.onClick)){o.props.onClick(e)}},o.handleKeyDown=function(e){if(o.props.disabled){return}switch(e.key){case"Enter":case"Space":e.preventDefault();o.toggleState(e)}if(isFunction(o.props.onKeyDown)){o.props.onKeyDown(e)}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"toggleState",value:function e(t){this.props[this.props.pressed?"onUnpressed":"onPressed"](t)}},{key:"render",value:function e(){return React__default.createElement("button",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"button",className:index("b-button",this.props.className,{"b-button-pressable":typeof this.props.pressed!=="undefined","b-button-pressed":this.props.pressed}),"aria-pressed":this.props.pressed,onKeyDown:this.handleKeyDown,onClick:this.handleClick}),this.props.children)}}]);return t}(React__default.PureComponent);Button.propTypes={children:React.PropTypes.node,onClick:React.PropTypes.func,onPressed:React.PropTypes.func,onUnpressed:React.PropTypes.func,pressed:React.PropTypes.bool};Button.defaultProps={children:null,onClick:noop,onPressed:noop,onUnpressed:noop,pressed:undefined};Button.internalKeys=Object.keys(Button.defaultProps);var index$1=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});function uuid(){return"b-"+([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^Math.random()*16>>e/4).toString(16)})}var Checkbox=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.id=uuid(),o.handleChange=function(e){if(o.props.inputProps.disabled){return}o.props[!o.props.inputProps.checked?"onChecked":"onUnchecked"](o.props.inputProps.name);if(isFunction(o.props.inputProps.onChange)){o.props.inputProps.onChange(e)}},o.handleClick=function(e){if(o.props.inputProps.disabled){return}o.refs.input.focus();if(isFunction(o.props.inputProps.onClick)){o.props.inputProps.onClick(e)}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentDidMount",value:function e(){if(this.props.inputProps.indeterminate){this.setIndeterminate()}}},{key:"componentDidUpdate",value:function e(t){if(t.inputProps.indeterminate!==this.props.inputProps.indeterminate){this.setIndeterminate()}}},{key:"setIndeterminate",value:function e(){this.refs.input.indeterminate=!!this.props.inputProps.indeterminate}},{key:"getAriaState",value:function e(){return this.props.inputProps.indeterminate?"mixed":String(this.props.inputProps.checked)}},{key:"renderInput",value:function e(){return React__default.createElement("input",_extends({},omitKeysFromSourceObject(this.props.inputProps,"indeterminate"),{ref:"input",type:"checkbox",className:index$1("b-checkbox",this.props.inputProps.className,{"b-checkbox-mixed":this.props.inputProps.indeterminate,"b-checkbox-checked":this.props.inputProps.checked,"b-checkbox-unchecked":!this.props.inputProps.indeterminate&&!this.props.inputProps.checked}),id:this.props.inputProps.id||this.id,"aria-checked":this.getAriaState(),onChange:this.handleChange,onClick:this.handleClick}))}},{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("label",_extends({},this.props.labelProps,{ref:"label",className:index$1("b-checkbox-label",this.props.labelProps.className),htmlFor:this.props.inputProps.id||this.id}),this.props.label)}}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$1("b-checkbox-wrapper",this.props.className)}),this.renderInput(),this.renderLabel())}}]);return t}(React__default.PureComponent);Checkbox.propTypes={inputProps:React.PropTypes.shape({checked:React.PropTypes.bool,className:React.PropTypes.string,disabled:React.PropTypes.bool,id:React.PropTypes.string,indeterminate:React.PropTypes.bool,onChange:React.PropTypes.func,onClick:React.PropTypes.func,name:React.PropTypes.string,value:React.PropTypes.string}),label:React.PropTypes.node,labelProps:React.PropTypes.object,onChecked:React.PropTypes.func,onUnchecked:React.PropTypes.func};Checkbox.defaultProps={inputProps:{checked:false,indeterminate:false},label:null,labelProps:{},onChecked:noop,onUnchecked:noop};Checkbox.internalKeys=Object.keys(Checkbox.defaultProps);var index$2=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var CheckboxGroup=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"allItemsChecked",value:function e(){return this.props.items.every(function(e){return e.inputProps.checked===true})}},{key:"anyItemsChecked",value:function e(){return this.props.items.some(function(e){return e.inputProps.checked===true})}},{key:"renderSelectAll",value:function e(){if(this.props.selectAll){var t=this.allItemsChecked();var n=this.props.selectAllProps.inputProps;return React__default.createElement(Checkbox,_extends({},this.props.selectAllProps,{ref:"select_all",key:"cb_select_all",className:index$2("b-checkbox-group-selectall",this.props.selectAllProps.className),inputProps:_extends({},n,{checked:t,indeterminate:!t&&this.anyItemsChecked(),name:n&&n.name?n.name:"cb_select_all"}),label:this.props.selectAllProps.label||"Select All",onChecked:this.props.onAllChecked,onUnchecked:this.props.onAllUnchecked}))}}},{key:"renderCheckboxes",value:function e(){var t=this;return this.props.items.map(function(e){return React__default.createElement(Checkbox,_extends({},e,{key:e.inputProps.name,onChecked:t.props.onChildChecked,onUnchecked:t.props.onChildUnchecked}))})}},{key:"renderChildren",value:function e(){var n=[this.renderCheckboxes()];if(this.props.selectAll&&this.props.selectAllPosition){switch(this.props.selectAllPosition){case t.Constants.SELECT_ALL_BEFORE:n.unshift(this.renderSelectAll());break;case t.Constants.SELECT_ALL_AFTER:n.push(this.renderSelectAll());break}}return n}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"group",className:index$2("b-checkbox-group",this.props.className)}),this.renderChildren())}}]);return t}(React__default.PureComponent);CheckboxGroup.Constants={SELECT_ALL_BEFORE:"SELECT_ALL_BEFORE",SELECT_ALL_AFTER:"SELECT_ALL_AFTER"};CheckboxGroup.propTypes={items:React.PropTypes.arrayOf(Checkbox.propTypes.inputProps).isRequired,onAllChecked:React.PropTypes.func,onAllUnchecked:React.PropTypes.func,onChildChecked:React.PropTypes.func,onChildUnchecked:React.PropTypes.func,selectAll:React.PropTypes.bool,selectAllProps:React.PropTypes.shape({label:React.PropTypes.string,inputProps:React.PropTypes.object}),selectAllPosition:React.PropTypes.oneOf(Object.keys(CheckboxGroup.Constants))};CheckboxGroup.defaultProps={items:[],onAllChecked:noop,onAllUnchecked:noop,onChildChecked:noop,onChildUnchecked:noop,selectAll:false,selectAllProps:{},selectAllPosition:CheckboxGroup.Constants.SELECT_ALL_BEFORE};CheckboxGroup.internalKeys=Object.keys(CheckboxGroup.defaultProps);var index$3=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var PORTAL_DATA_ATTRIBUTE="data-portal-id";var Portal=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.id=uuid(),o.$portal=null,o.$passenger=null,n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentWillMount",value:function e(){this.$portal=document.createElement("div");this.props.destination.appendChild(this.$portal);this.renderPortalledContent()}},{key:"renderPortalledContent",value:function e(){var t=React__default.isValidElement(this.props.children)?this.props.children:React__default.createElement("div",null,this.props.children);this.$portal.id=this.props.portalId||this.id;ReactDOM__default.unstable_renderSubtreeIntoContainer(this,t,this.$portal);this.$passenger=this.$portal.children[0]}},{key:"componentDidUpdate",value:function e(){this.renderPortalledContent()}},{key:"componentWillUnmount",value:function e(){ReactDOM__default.unmountComponentAtNode(this.$portal);this.props.destination.removeChild(this.$portal)}},{key:"render",value:function e(){return React__default.createElement("span",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),defineProperty({},PORTAL_DATA_ATTRIBUTE,this.props.portalId||this.id)))}}]);return t}(React__default.Component);Portal.propTypes={children:React__default.PropTypes.node.isRequired,destination:React.PropTypes.instanceOf(HTMLElement),portalId:React.PropTypes.string};Portal.defaultProps={children:null,destination:document.body,portalId:null};Portal.internalKeys=Object.keys(Portal.defaultProps);var toArray$1=Array.prototype.slice;var Dialog=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.mounted=false,o.uuidHeader=uuid(),o.uuidBody=uuid(),o.handleFocus=function(e){if(!o.props.captureFocus){if(o.props.closeOnOutsideFocus){if(!o.isPartOfDialog(e.target)){return window.setTimeout(o.props.onClose,0)}}return}var t=e.explicitOriginalTarget||e.relatedTarget;if(o.isPartOfDialog(t)&&!o.isPartOfDialog(e.target)){e.preventDefault();t.focus()}},o.handleKeyDown=function(e){if(o.props.closeOnEscKey&&e.key==="Escape"){window.setTimeout(o.props.onClose,0)}if(isFunction(o.props.onKeyDown)){o.props.onKeyDown(e)}},o.handleOutsideClick=function(e){if(o.props.closeOnOutsideClick&&!o.isPartOfDialog(e.target)){window.setTimeout(o.props.onClose,0)}},o.handleOutsideScrollWheel=function(e){if(o.props.closeOnOutsideScroll&&!o.isPartOfDialog(e.target)){window.setTimeout(o.props.onClose,0)}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"isPartOfDialog",value:function e(t){if(!t||t===window){return false}var n=[this.$wrapper].concat(toArray$1.call(this.$wrapper.querySelectorAll("["+PORTAL_DATA_ATTRIBUTE+"]")).map(function(e){return document.getElementById(e.getAttribute(PORTAL_DATA_ATTRIBUTE))}));var o=t.nodeType!==Node.ELEMENT_NODE?t.parentNode:t;return n.some(function(e){return e.contains(o)})}},{key:"componentDidMount",value:function e(){window.addEventListener("click",this.handleOutsideClick,true);window.addEventListener("contextmenu",this.handleOutsideClick,true);window.addEventListener("focus",this.handleFocus,true);window.addEventListener("scroll",this.handleOutsideScrollWheel,true);window.addEventListener("wheel",this.handleOutsideScrollWheel,true);if(this.props.captureFocus&&!this.isPartOfDialog(document.activeElement)){this.$dialog.focus()}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("click",this.handleOutsideClick,true);window.removeEventListener("contextmenu",this.handleOutsideClick,true);window.removeEventListener("focus",this.handleFocus,true);window.removeEventListener("scroll",this.handleOutsideScrollWheel,true);window.removeEventListener("wheel",this.handleOutsideScrollWheel,true)}},{key:"renderBody",value:function e(){return React__default.createElement("div",_extends({},this.props.bodyProps,{id:this.props.bodyProps.id||this.uuidBody,className:index$3("b-dialog-body",this.props.bodyProps.className)}),this.props.children)}},{key:"renderFooter",value:function e(){if(this.props.footer){return React__default.createElement("footer",_extends({},this.props.footerProps,{className:index$3("b-dialog-footer",this.props.footerProps.className)}),this.props.footer)}}},{key:"renderHeader",value:function e(){if(this.props.header){return React__default.createElement("header",_extends({},this.props.headerProps,{id:this.props.headerProps.id||this.uuidHeader,className:index$3("b-dialog-header",this.props.headerProps.className)}),this.props.header)}}},{key:"renderFocusBoundary",value:function e(){if(this.props.captureFocus){return React__default.createElement("div",{className:"b-offscreen",tabIndex:"0","aria-hidden":"true"}," ")}}},{key:"render",value:function e(){var n=this;return React__default.createElement("div",_extends({},this.props.wrapperProps,{ref:function e(t){return n.$wrapper=t},className:index$3("b-dialog-wrapper",this.props.wrapperProps.className),tabIndex:"0"}),this.renderFocusBoundary(),this.props.before,React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:function e(t){return n.$dialog=t},className:index$3("b-dialog",this.props.className),onKeyDown:this.handleKeyDown,role:"dialog","aria-labelledby":this.uuidHeader,"aria-describedby":this.uuidBody,tabIndex:"0"}),this.renderHeader(),this.renderBody(),this.renderFooter()),this.props.after,this.renderFocusBoundary())}}]);return t}(React__default.PureComponent);Dialog.propTypes={after:React.PropTypes.node,before:React.PropTypes.node,bodyProps:React.PropTypes.object,captureFocus:React.PropTypes.bool,children:React.PropTypes.node,closeOnEscKey:React.PropTypes.bool,closeOnOutsideClick:React.PropTypes.bool,closeOnOutsideFocus:React.PropTypes.bool,closeOnOutsideScroll:React.PropTypes.bool,footer:React.PropTypes.node,footerProps:React.PropTypes.object,header:React.PropTypes.node,headerProps:React.PropTypes.object,onClose:React.PropTypes.func,wrapperProps:React.PropTypes.object};Dialog.defaultProps={after:null,before:null,bodyProps:{},captureFocus:true,children:null,closeOnEscKey:false,closeOnOutsideClick:false,closeOnOutsideFocus:false,closeOnOutsideScroll:false,footer:null,footerProps:{},header:null,headerProps:{},onClose:noop,wrapperProps:{}};Dialog.internalKeys=Object.keys(Dialog.defaultProps);var index$4=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var instances=[];function toI(e){return parseInt(e,10)}function rescale(e){var t=ReactDOM.findDOMNode(e);var n=window.getComputedStyle(t.parentNode);var o=toI(window.getComputedStyle(t).fontSize);var r=toI(n.height);var s=toI(n.width);if(n.boxSizing==="border-box"||n.boxSizing==="padding-box"){r-=toI(n.paddingTop)+toI(n.paddingBottom);s-=toI(n.paddingLeft)+toI(n.paddingRight)}var i=Math.floor(o/t.offsetHeight*r);var a=Math.floor(o/t.offsetWidth*s);t.style.fontSize=(Math.min(e.props.maxFontSize,i,a)||1)+"px"}function handleWindowResize(){instances.forEach(function(e){return rescale(e)})}function registerInstance(e){if(instances.length===0){window.addEventListener("resize",handleWindowResize,true)}instances.push(e)}function unregisterInstance(e){instances.splice(instances.indexOf(e),1);if(instances.length===0){window.removeEventListener("resize",handleWindowResize,true)}}var FittedText=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"componentDidMount",value:function e(){rescale(this);registerInstance(this)}},{key:"componentDidUpdate",value:function e(){rescale(this)}},{key:"componentWillUnmount",value:function e(){unregisterInstance(this)}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:index$4("b-text",this.props.className)}),this.props.children)}}]);return t}(React__default.PureComponent);FittedText.propTypes={children:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),maxFontSize:React.PropTypes.number};FittedText.defaultProps={children:null,component:"span",maxFontSize:Number.MAX_VALUE};FittedText.internalKeys=Object.keys(FittedText.defaultProps);var index$5=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var Image=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.state={status:t.status.LOADING},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentWillReceiveProps",value:function e(n){if(n.src!==this.props.src){this.resetPreloader();this.setState({status:t.status.LOADING})}}},{key:"componentDidMount",value:function e(){this.preload()}},{key:"componentDidUpdate",value:function e(){this.preload()}},{key:"componentWillUnmount",value:function e(){this.resetPreloader()}},{key:"resetPreloader",value:function e(){this.loader.onload=null;this.loader.onerror=null;this.loader=null}},{key:"preload",value:function e(){var n=this;if(this.loader){return}this.loader=document.createElement("img");this.loader.onload=function(){return n.setState({status:t.status.LOADED})};this.loader.onerror=function(){return n.setState({status:t.status.ERROR})};this.loader.src=this.props.src}},{key:"renderImage",value:function e(){if(this.props.displayAsBackgroundImage){return React__default.createElement("div",_extends({},this.props.imageProps,{ref:"image",className:index$5("b-image",this.props.imageProps.className),title:this.props.alt,style:_extends({},this.props.imageProps.style,{backgroundImage:"url("+this.props.src+")"})}))}return React__default.createElement("img",_extends({},this.props.imageProps,{ref:"image",className:index$5("b-image",this.props.imageProps.className),src:this.props.src,alt:this.props.alt,onLoad:noop,onError:noop}))}},{key:"renderStatus",value:function e(){return React__default.createElement("div",_extends({},this.props.statusProps,{ref:"status",className:index$5("b-image-status",this.props.statusProps.className,{"b-image-loading":this.state.status===t.status.LOADING,"b-image-loaded":this.state.status===t.status.LOADED,"b-image-error":this.state.status===t.status.ERROR}),role:"presentation"}))}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$5("b-image-wrapper",this.props.className)}),this.renderImage(),this.renderStatus())}}]);return t}(React__default.PureComponent);Image.status={LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"};Image.propTypes={alt:React.PropTypes.string,displayAsBackgroundImage:React.PropTypes.bool,imageProps:React.PropTypes.object,src:React.PropTypes.string.isRequired,statusProps:React.PropTypes.object};Image.defaultProps={alt:null,displayAsBackgroundImage:false,imageProps:{},src:"about:blank",statusProps:{}};Image.internalKeys=Object.keys(Image.defaultProps);var index$6=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var isString=function(e){return typeof e==="string"};var Input=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.state={input:"",isControlled:isString(o.props.inputProps.value),isFocused:false},o.setInputValue=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return o.setState({input:e})},o.getValue=function(){return o.refs.field.value},o.handleBlur=function(e){o.setState({isFocused:false});if(isFunction(o.props.inputProps.onBlur)===true){o.props.inputProps.onBlur(e)}},o.handleFocus=function(e){o.setState({isFocused:true});if(isFunction(o.props.inputProps.onFocus)===true){o.props.inputProps.onFocus(e)}},o.handleChange=function(e){if(o.state.isControlled===false){o.setInputValue(e.target.value)}if(isFunction(o.props.inputProps.onChange)===true){o.props.inputProps.onChange(e)}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentWillMount",value:function e(){if(this.state.isControlled===true){return this.setInputValue(this.props.inputProps.value)}this.setInputValue(this.props.inputProps.defaultValue)}},{key:"componentWillReceiveProps",value:function e(t){if(t.inputProps.value!==this.props.inputProps.value){this.setInputValue(t.inputProps.value)}}},{key:"setValue",value:function e(t){this.setInputValue(t);this.refs.field.value=t;if(this.state.isControlled===true){this.refs.field.dispatchEvent(new Event("input",{bubbles:true}));this.refs.field.dispatchEvent(new Event("change",{bubbles:true}))}}},{key:"getPlaceholderText",value:function e(){var t=this.state.input!=="";var n=this.props.hidePlaceholderOnFocus===true?this.state.isFocused===false&&t===false:t===false;return n?this.props.inputProps.placeholder:""}},{key:"renderPlaceholder",value:function e(){return React__default.createElement("div",{ref:"placeholder",className:"b-input-placeholder b-input"},this.getPlaceholderText())}},{key:"render",value:function e(){var n=this.props;return React__default.createElement("div",_extends({},omitKeysFromSourceObject(n,t.internalKeys),{ref:"wrapper",className:index$6("b-input-wrapper",n.className),title:this.getPlaceholderText()}),this.renderPlaceholder(),React__default.createElement("input",_extends({},n.inputProps,{ref:"field",className:index$6("b-input",n.inputProps.className),placeholder:null,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange})))}}]);return t}(React__default.PureComponent);Input.propTypes={hidePlaceholderOnFocus:React.PropTypes.bool,inputProps:React.PropTypes.shape({
defaultValue:React.PropTypes.string,onBlur:React.PropTypes.func,onFocus:React.PropTypes.func,onChange:React.PropTypes.func,placeholder:React.PropTypes.string,type:React.PropTypes.string,value:React.PropTypes.string})};Input.defaultProps={hidePlaceholderOnFocus:true,inputProps:{type:"text"}};Input.internalKeys=Object.keys(Input.defaultProps);var index$7=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});function getIntersection(e,t){return Object.keys(t).reduce(function(t,n){if(n in e){t[n]=e[n]}return t},{})}var Modal=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"render",value:function e(){var n=this;var o=this.props;return React__default.createElement(Portal,o.portalProps,React__default.createElement("div",_extends({},omitKeysFromSourceObject(o,t.internalKeys),{ref:function e(t){return n.$modal=t},className:index$7("b-modal-wrapper",o.className)}),React__default.createElement("div",_extends({},o.maskProps,{className:index$7("b-modal-mask",o.maskProps.className)})),React__default.createElement(Dialog,_extends({},getIntersection(o,Dialog.defaultProps),o.modalProps,{className:index$7("b-modal",o.modalProps.className)}),o.children)))}}]);return t}(React__default.PureComponent);Modal.propTypes=_extends({},Dialog.propTypes,{maskProps:React.PropTypes.object,modalProps:React.PropTypes.object,portalProps:React.PropTypes.object});Modal.defaultProps=_extends({},Dialog.defaultProps,{captureFocus:true,maskProps:{},modalProps:{},portalProps:{}});Modal.internalKeys=Object.keys(Modal.defaultProps);var index$8=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var INFINITY=1/0;var MAX_INTEGER=1.7976931348623157e308;var NAN=0/0;var symbolTag="[object Symbol]";var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;var objectProto=Object.prototype;var objectToString=objectProto.toString;function isInteger(e){return typeof e=="number"&&e==toInteger(e)}function isObject(e){var t=typeof e==="undefined"?"undefined":_typeof(e);return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&(typeof e==="undefined"?"undefined":_typeof(e))=="object"}function isSymbol(e){return(typeof e==="undefined"?"undefined":_typeof(e))=="symbol"||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toFinite(e){if(!e){return e===0?e:0}e=toNumber(e);if(e===INFINITY||e===-INFINITY){var t=e<0?-1:1;return t*MAX_INTEGER}return e===e?e:0}function toInteger(e){var t=toFinite(e),n=t%1;return t===t?n?t-n:t:0}function toNumber(e){if(typeof e=="number"){return e}if(isSymbol(e)){return NAN}if(isObject(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=e.replace(reTrim,"");var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var index$9=isInteger;var index$10=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var SegmentedControl=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.state={indexOfOptionInFocus:null},o.handleKeyDown=function(e){var t=e.key;var n=o.state.indexOfOptionInFocus;if(t==="ArrowLeft"){o.setFocus(o.getPreviousOptionIndex(n));e.preventDefault()}else if(t==="ArrowRight"){o.setFocus(o.getNextOptionIndex(n));e.preventDefault()}else if(t==="Enter"){o.handleOptionClick(o.props.options[n]);e.preventDefault()}if(isFunction(o.props.onKeyDown)){o.props.onKeyDown(e)}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"currentValue",value:function e(){var t=void 0;this.props.options.some(function(e){if(e.selected){t=e.value;return true}});return t}},{key:"setFocus",value:function e(t){ReactDOM.findDOMNode(this.refs["option_$"+t]).focus()}},{key:"getNextOptionIndex",value:function e(t){var n=t+1;return n<this.props.options.length?n:0}},{key:"getPreviousOptionIndex",value:function e(t){var n=t-1;return n<0?this.props.options.length-1:n}},{key:"handleOptionBlur",value:function e(t,n){if(this.state.indexOfOptionInFocus===this.props.options.indexOf(t)){this.setState({indexOfOptionInFocus:null})}if(isFunction(t.onBlur)){t.onBlur(n)}}},{key:"handleOptionClick",value:function e(t,n){this.props.onOptionSelected(t.value);if(isFunction(t.onClick)){t.onClick(n)}}},{key:"handleOptionFocus",value:function e(t,n){this.setState({indexOfOptionInFocus:this.props.options.indexOf(t)});if(isFunction(t.onFocus)){t.onFocus(n)}}},{key:"renderOptions",value:function e(){var n=this;return this.props.options.map(function(e,o){return React__default.createElement(Button,_extends({},omitKeysFromSourceObject(e,t.internalChildKeys),{role:"radio","aria-checked":String(e.selected),ref:"option_$"+o,key:e.value,className:index$10("b-segmented-control-option",e.className,{"b-segmented-control-option-selected":e.selected}),tabIndex:e.selected?"0":"-1",onBlur:n.handleOptionBlur.bind(n,e),onPressed:n.handleOptionClick.bind(n,e),onFocus:n.handleOptionFocus.bind(n,e)}),e.content)})}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",role:"radiogroup",className:index$10("b-segmented-control",this.props.className),onKeyDown:this.handleKeyDown}),this.renderOptions())}}]);return t}(React__default.PureComponent);SegmentedControl.propTypes={onOptionSelected:React.PropTypes.func,options:function e(t){if(t.options.length<2){throw new Error("Must provide at least two options.")}var n=t.options.some(function(e){if(!("selected"in e)){return true}});if(n){throw new Error("Must provide a `selected` prop for each option.")}var o=false;var r=t.options.some(function(e){if(e.selected){if(o){return true}o=true}});if(r){throw new Error("Encountered multiple options with `selected: true`. There can be only one.")}if(t.options.some(function(e){return typeof e.value==="undefined"})){throw new Error("Must provide a `value` prop for each option.")}}};SegmentedControl.defaultProps={onOptionSelected:noop,options:[]};SegmentedControl.internalKeys=Object.keys(SegmentedControl.defaultProps);SegmentedControl.internalChildKeys=["content","value","selected"];var identity=function e(t){return t};var Item=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.mounted=false,o.state={},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"convertDataToJSXOrWait",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;if(n.data instanceof Promise){var o=function(){t.setState({component:null});var e=n.data;n.data.then(function(n){if(t.mounted){t.setState(function(t,o){return{component:o.data===e?o.convertToJSXFunc(n,o.index):t.component}})}},noop);return{v:void 0}}();if((typeof o==="undefined"?"undefined":_typeof(o))==="object")return o.v}this.setState({component:n.convertToJSXFunc(n.data,n.index)})}},{key:"componentWillMount",value:function e(){this.convertDataToJSXOrWait()}},{key:"componentDidMount",value:function e(){this.mounted=true}},{key:"componentWillReceiveProps",value:function e(t){this.convertDataToJSXOrWait(t)}},{key:"componentWillUnmount",value:function e(){this.mounted=false}},{key:"getClasses",value:function e(t){return index$8("b-pagination-item",t,{"b-pagination-item-even":this.props.even,"b-pagination-item-odd":!this.props.even,"b-pagination-item-loading":this.state.component===null})}},{key:"render",value:function e(){if(this.state.component===null){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:this.getClasses()}),this.props.loadingContent)}return React__default.cloneElement(this.state.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:this.getClasses(this.state.component.props&&this.state.component.props.className),"data-pagination-index":this.props.index}))}}]);return t}(React__default.PureComponent);Item.propTypes={convertToJSXFunc:React.PropTypes.func,data:React.PropTypes.object,even:React.PropTypes.bool,index:React.PropTypes.number,loadingContent:React.PropTypes.node};Item.defaultProps={convertToJSXFunc:noop,data:null,even:true,index:0,loadingContent:null};Item.internalKeys=Object.keys(Item.defaultProps);var Pagination=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.state={currentPage:o.props.initialPage,targetIndex:(o.props.initialPage-1)*o.props.numItemsPerPage},o.currentPage=function(){return o.state.currentPage},o.getPageForIndex=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o.props.numItemsPerPage;return Math.ceil((e+1)/t)},o.totalPages=function(){return Math.ceil(o.props.totalItems/o.props.numItemsPerPage)},o.firstVisibleItemIndex=function(){return(o.currentPage()-1)*o.props.numItemsPerPage},o.pageToIndex=function(e){if(e<0||e>=o.props.totalItems){return new Error("Cannot page to invalid index "+e+".")}o.setState({currentPage:o.getPageForIndex(e),targetIndex:e})},o.handleClick=function(e){var n=void 0;switch(e){case t.controls.FIRST:n=0;break;case t.controls.PREVIOUS:n=o.firstVisibleItemIndex()-o.props.numItemsPerPage;break;case t.controls.NEXT:n=o.firstVisibleItemIndex()+o.props.numItemsPerPage;break;case t.controls.LAST:n=o.props.totalItems-1;break;default:n=parseInt(e,10)*o.props.numItemsPerPage-1}o.setState({currentPage:o.getPageForIndex(n),targetIndex:n})},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentDidUpdate",value:function e(t,n){if(n.currentPage!==this.currentPage()){ReactDOM.findDOMNode(this.refs.item_0).focus()}}},{key:"componentWillReceiveProps",value:function e(){var t=this;var n=this.props;this.setState(function(e,o){if(o.identifier!==n.identifier){return{currentPage:1,targetIndex:0}}return{currentPage:t.getPageForIndex(e.targetIndex,o.numItemsPerPage),targetIndex:e.targetIndex}})}},{key:"createPageButtonOptions",value:function e(){var n=[];var o=this.currentPage();var r=this.props.numPageToggles;var s=this.totalPages();var i=o-(o-1)%r;var a=Math.min(i+r-1,s);if(this.props.showPaginationState){n.push({selected:false,content:isFunction(this.props.showPaginationState)?this.props.showPaginationState(o,s):o+" of "+s,value:"",disabled:true,className:"b-pagination-control b-pagination-control-state"})}if(this.props.showJumpToFirst){n.push({selected:false,content:this.props.jumpToFirstControlContent,value:t.controls.FIRST,disabled:this.currentPage()===1,className:"b-pagination-control b-pagination-control-first"})}n.push({selected:false,content:this.props.previousPageControlContent,value:t.controls.PREVIOUS,disabled:this.currentPage()===1,className:"b-pagination-control b-pagination-control-previous"});for(var p=i;p<=a;p++){n.push({className:"b-pagination-control","data-page-number":p,selected:p===this.currentPage(),content:p,value:p})}n.push({selected:false,content:this.props.nextPageControlContent,value:t.controls.NEXT,disabled:this.currentPage()===s,className:"b-pagination-control b-pagination-control-next"});if(this.props.showJumpToLast){n.push({selected:false,content:this.props.jumpToLastControlContent,value:t.controls.LAST,disabled:this.currentPage()===s,className:"b-pagination-control b-pagination-control-last"})}if(this.props.customControlContent){n.push({selected:false,content:this.props.customControlContent,value:uuid(),disabled:true,className:"b-pagination-control b-pagination-control-custom"})}return n}},{key:"generateItems",value:function e(){var t=[];var n=this.firstVisibleItemIndex();var o=Math.min(this.props.totalItems,n+this.props.numItemsPerPage)-1;for(var r=n;r<=o;r+=1){t.push({data:this.props.getItem(r)})}return t}},{key:"renderItems",value:function e(){var t=this;var n=this.props.listWrapperProps;var o=this.props.numItemsPerPage*(this.currentPage()-1);return React__default.createElement(ArrowKeyNavigation,_extends({},n,{ref:"itemList",className:index$8("b-pagination-items",n.className)}),this.generateItems().map(function(e,n){return React__default.createElement(Item,{ref:"item_"+n,key:n,convertToJSXFunc:t.props.itemToJSXConverterFunc,data:e.data,even:n%2===0,index:o+n,loadingContent:t.props.itemLoadingContent})}))}},{key:"renderControls",value:function e(t){if(this.props.hidePagerIfNotNeeded&&this.props.totalItems<=this.props.numItemsPerPage){return}var n=this.props.toggleWrapperProps;var o=t.toLowerCase();var r=o[0].toUpperCase()+o.slice(1);return React__default.createElement(SegmentedControl,_extends({},n,{ref:"segmentedControl"+r,className:index$8("b-pagination-controls",n.className,defineProperty({},"b-pagination-controls-"+o,true)),options:this.createPageButtonOptions(),onOptionSelected:this.handleClick}))}},{key:"renderView",value:function e(){var n=this.props;var o=t.positions;return React__default.createElement("div",{ref:"paginatedView",className:"b-pagination"},n.position===o.ABOVE||n.position===o.BOTH?this.renderControls(o.ABOVE):noop,n.before,this.renderItems(),n.after,n.position===o.BELOW||n.position===o.BOTH?this.renderControls(o.BELOW):noop)}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$8("b-pagination-wrapper",this.props.className)}),this.renderView())}}]);return t}(React__default.PureComponent);Pagination.controls={FIRST:"FIRST",PREVIOUS:"PREVIOUS",NEXT:"NEXT",LAST:"LAST"};Pagination.positions={ABOVE:"ABOVE",BELOW:"BELOW",BOTH:"BOTH"};Pagination.propTypes={after:React.PropTypes.node,before:React.PropTypes.node,customControlContent:React.PropTypes.node,getItem:React.PropTypes.func,hidePagerIfNotNeeded:React.PropTypes.bool,identifier:React.PropTypes.string.isRequired,initialPage:function e(t){if(index$9(t.initialPage)===false){return new Error("`initialPage` must be an integer.")}var n=Math.ceil(t.totalItems/t.numItemsPerPage);if(t.initialPage<1||t.initialPage>n){return new Error("`initialPage` must be between 1 and "+n+".")}},itemLoadingContent:React.PropTypes.node,itemToJSXConverterFunc:React.PropTypes.func,jumpToFirstControlContent:React.PropTypes.node,jumpToLastControlContent:React.PropTypes.node,listWrapperProps:React.PropTypes.object,nextPageControlContent:React.PropTypes.node,numItemsPerPage:function e(t){if(index$9(t.numItemsPerPage)===false){return new Error("`numItemsPerPage` must be an integer.")}else if(t.numItemsPerPage<1){return new Error("`numItemsPerPage` must be greater than zero.")}},numPageToggles:React.PropTypes.number,position:React.PropTypes.oneOf(Object.keys(Pagination.positions)),previousPageControlContent:React.PropTypes.node,showJumpToFirst:React.PropTypes.bool,showJumpToLast:React.PropTypes.bool,showPaginationState:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),toggleWrapperProps:React.PropTypes.object,totalItems:React.PropTypes.number.isRequired};Pagination.defaultProps={after:null,before:null,customControlContent:null,getItem:noop,hidePagerIfNotNeeded:false,identifier:uuid(),initialPage:1,itemLoadingContent:null,itemToJSXConverterFunc:identity,jumpToFirstControlContent:"« First",jumpToLastControlContent:"Last »",listWrapperProps:{},nextPageControlContent:"Next ›",numItemsPerPage:10,numPageToggles:5,position:Pagination.positions.ABOVE,previousPageControlContent:"‹ Previous",showJumpToFirst:true,showJumpToLast:true,showPaginationState:true,toggleWrapperProps:{},totalItems:null};Pagination.internalKeys=Object.keys(Pagination.defaultProps);var index$11=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var transformProp=function e(){var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform","webkit-transform"];for(var n=0,o=t.length;n<o;n++){if(t[n]in document.documentElement.style){return t[n]}}return false}();function without(e,t){return e.filter(function(e){return t.indexOf(e)===-1})}function values(e){return Object.keys(e).map(function(t){return e[t]})}var DEFAULT_CARET_COMPONENT=React__default.createElement("svg",{viewBox:"0 0 14 9.5",xmlns:"http://www.w3.org/2000/svg"},React__default.createElement("g",null,React__default.createElement("polygon",{className:"b-popover-caret-border",fill:"#000",points:"7 0 14 10 0 10"}),React__default.createElement("polygon",{className:"b-popover-caret-fill",fill:"#FFF",points:"6.98230444 1.75 12.75 10 1.25 10"})));var Popover=function(e){inherits(t,e);function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.align=function(){var e=n.props.anchor instanceof HTMLElement?n.props.anchor:ReactDOM.findDOMNode(n.props.anchor);n.cacheViewportCartography(e);var t=Math.round(n.getNextDialogXPosition(e));var o=Math.round(n.getNextDialogYPosition(e));var r=n.getAlignmentCorrectionIfOverflowing(t,o);if(r&&n.didAlignmentChange(r)){return n.setState(r)}n.$caret.style.left=Math.round(n.getNextCaretXPosition(e))+"px";n.$caret.style.top=Math.round(n.getNextCaretYPosition(e))+"px";n.applyTranslation(n.$caret,index$11,0);n.applyTranslation(n.dialog.$wrapper,t,o)};n.state={anchorXAlign:e.anchorXAlign||e.preset.anchorXAlign,anchorYAlign:e.anchorYAlign||e.preset.anchorYAlign,selfXAlign:e.selfXAlign||e.preset.selfXAlign,selfYAlign:e.selfYAlign||e.preset.selfYAlign};return n}createClass(t,[{key:"cacheViewportCartography",value:function e(t){var n=t.getBoundingClientRect();var o=document.body.getBoundingClientRect();this.anchorLeft=n.left;this.anchorTop=n.top;this.anchorHeight=n.height;this.anchorWidth=n.width;this.bodyLeft=o.left*-1;this.bodyTop=o.top*-1}},{key:"getNextCaretXPosition",value:function e(n){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.$caret;var r=this.state,s=r.anchorXAlign,i=r.selfXAlign,a=r.anchorYAlign,p=r.selfYAlign;var l=t.position;var c=0;if(i!==l.MIDDLE&&(a===l.START&&p===l.END||a===l.END&&p===l.START)){if(s===l.START){c+=this.anchorWidth/2-o.clientWidth/2}else if(s===l.END){c+=this.dialog.$wrapper.clientWidth-this.anchorWidth/2-o.clientWidth/2}}return c}},{key:"getNextCaretYPosition",value:function e(n){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.$caret;var r=this.state,s=r.anchorXAlign,i=r.selfXAlign,a=r.anchorYAlign,p=r.selfYAlign;var l=t.position;var c=0;if(p!==l.MIDDLE&&(s===l.START&&i===l.END||s===l.END&&i===l.START)){if(a===l.START){c+=this.anchorHeight/2-o.clientWidth/2}else if(a===l.END){c+=this.dialog.$wrapper.clientHeight-this.anchorWidth/2-o.clientWidth/2}}return c}},{key:"getNextDialogXPosition",value:function e(n){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.dialog.$wrapper;var r=this.state,s=r.anchorXAlign,i=r.selfXAlign;var a=t.position;var p=this.anchorLeft+this.bodyLeft;switch(s){case a.MIDDLE:p+=this.anchorWidth/2;break;case a.END:p+=this.anchorWidth;break}switch(i){case a.MIDDLE:p-=o.clientWidth/2;break;case a.END:p-=o.clientWidth;break}return p}},{key:"getNextDialogYPosition",value:function e(n){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.dialog.$wrapper;var r=this.state;var s=t.position;var i=this.anchorTop+this.bodyTop;var a=i+this.anchorHeight;switch(r.anchorYAlign){case s.START:a=i;break;case s.MIDDLE:a=i+this.anchorHeight/2;break}switch(r.selfYAlign){case s.MIDDLE:a-=o.clientHeight/2;break;case s.END:a-=o.clientHeight;break}return a}},{key:"getAlignmentCorrectionIfOverflowing",value:function e(n,o){if(!this.props.autoReposition){return false}var r=_extends({},this.state);var s=t.position;var i=this.dialog.$wrapper.clientWidth;var a=this.dialog.$wrapper.clientHeight;var p=document.body.scrollWidth;var l=document.body.scrollHeight;if(n+i>p){r.anchorXAlign=s.START;r.selfXAlign=s.END}if(n<0){r.anchorXAlign=s.END;r.selfXAlign=s.START}if(o+a>l){if(r.anchorXAlign===s.START&&r.selfXAlign===s.END||r.anchorXAlign===s.END&&r.selfXAlign===s.START){r.anchorYAlign=s.END}else{r.anchorYAlign=s.START}r.selfYAlign=s.END}if(o<0){if(r.anchorXAlign===s.START&&r.selfXAlign===s.END||r.anchorXAlign===s.END&&r.selfXAlign===s.START){r.anchorYAlign=s.START}else{r.anchorYAlign=s.END}r.selfYAlign=s.START}return r}},{key:"applyTranslation",value:function e(t,n,o){if(transformProp){t.style[transformProp]="translate("+n+"px, "+o+"px)"}else{t.style.left=n+"px";t.style.top=o+"px"}}},{key:"didAlignmentChange",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.state;return t.anchorXAlign!==n.anchorXAlign||t.anchorYAlign!==n.anchorYAlign||t.selfXAlign!==n.selfXAlign||t.selfYAlign!==n.selfYAlign}},{key:"componentDidMount",value:function e(){this.align();window.addEventListener("resize",this.align,true)}},{key:"componentDidUpdate",value:function e(){this.align()}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.align,true)}},{key:"getClassAlignmentFragment",value:function e(n){var o=t.position;switch(n){case o.START:return"start";case o.MIDDLE:return"middle";case o.END:return"end"}}},{key:"render",value:function e(){var n=this,o;var r=this.getClassAlignmentFragment,s=this.props,i=this.state;return React__default.createElement(Portal,s.portalProps,React__default.createElement(Dialog,_extends({},omitKeysFromSourceObject(s,t.internalKeys),{ref:function e(t){return n.dialog=t},before:React__default.cloneElement(s.caretComponent,{ref:function e(t){return n.$caret=t},className:index$11("b-popover-caret",s.caretComponent.props.className)}),wrapperProps:_extends({},s.wrapperProps,{className:index$11("b-popover",s.wrapperProps.className,(o={},defineProperty(o,"b-popover-anchor-x-"+r(i.anchorXAlign),true),defineProperty(o,"b-popover-anchor-y-"+r(i.anchorYAlign),true),defineProperty(o,"b-popover-self-x-"+r(i.selfXAlign),true),defineProperty(o,"b-popover-self-y-"+r(i.selfYAlign),true),o))})})))}}]);return t}(React__default.PureComponent);Popover.position={START:"START",MIDDLE:"MIDDLE",END:"END"};Popover.preset={ABOVE:{anchorXAlign:Popover.position.MIDDLE,anchorYAlign:Popover.position.START,selfXAlign:Popover.position.MIDDLE,selfYAlign:Popover.position.END},BELOW:{anchorXAlign:Popover.position.MIDDLE,anchorYAlign:Popover.position.END,selfXAlign:Popover.position.MIDDLE,selfYAlign:Popover.position.START},LEFT:{anchorXAlign:Popover.position.START,anchorYAlign:Popover.position.MIDDLE,selfXAlign:Popover.position.END,selfYAlign:Popover.position.MIDDLE},RIGHT:{anchorXAlign:Popover.position.END,anchorYAlign:Popover.position.MIDDLE,selfXAlign:Popover.position.START,selfYAlign:Popover.position.MIDDLE}};Popover.presetValues=values(Popover.preset);Popover.propTypes=_extends({},Dialog.propTypes,{anchor:React.PropTypes.oneOfType([React.PropTypes.instanceOf(HTMLElement),React.PropTypes.shape({props:React.PropTypes.object,state:React.PropTypes.object})]).isRequired,anchorXAlign:React.PropTypes.oneOf(Object.keys(Popover.position)),anchorYAlign:React.PropTypes.oneOf(Object.keys(Popover.position)),autoReposition:React.PropTypes.bool,caretComponent:React.PropTypes.element,portalProps:React.PropTypes.object,preset:React.PropTypes.oneOf(Popover.presetValues),selfXAlign:React.PropTypes.oneOf(Object.keys(Popover.position)),selfYAlign:React.PropTypes.oneOf(Object.keys(Popover.position)),wrapperProps:React.PropTypes.object});Popover.defaultProps=_extends({},Dialog.defaultProps,{anchor:document.body,anchorXAlign:undefined,anchorYAlign:undefined,autoReposition:true,captureFocus:false,caretComponent:DEFAULT_CARET_COMPONENT,closeOnEscKey:true,closeOnOutsideClick:true,closeOnOutsideScroll:true,portalProps:{},preset:Popover.preset.BELOW,selfXAlign:undefined,selfYAlign:undefined,wrapperProps:{}});Popover.internalKeys=without(Object.keys(Popover.defaultProps),Dialog.internalKeys);var index$12=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var ProgressiveDisclosure=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.state={expanded:o.props.expanded},o.dispatchCallback=function(){o.props[o.state.expanded?"onExpand":"onHide"]()},o.handleClick=function(e){o.setState({expanded:!o.state.expanded},o.dispatchCallback);if(isFunction(o.props.toggleProps.onClick)){o.props.toggleProps.onClick(e)}},o.handleKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault();o.setState({expanded:!o.state.expanded},o.dispatchCallback)}if(isFunction(o.props.toggleProps.onKeyDown)){o.props.toggleProps.onKeyDown(e)}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentWillReceiveProps",value:function e(t){if(t.expanded!==this.props.expanded){this.setState({expanded:t.expanded},this.dispatchCallback)}}},{key:"renderContent",value:function e(){if(this.state.expanded){return React__default.createElement("div",{ref:"content",className:"b-disclosure-content"},this.props.children)}}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$12("b-disclosure",this.props.className,{"b-disclosure-expanded":this.state.expanded})}),React__default.createElement("div",_extends({},this.props.toggleProps,{ref:"toggle",className:index$12("b-disclosure-toggle",this.props.toggleProps.className),onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:"0"}),this.state.expanded?this.props.teaserExpanded||this.props.teaser:this.props.teaser),this.renderContent())}}]);return t}(React__default.PureComponent);ProgressiveDisclosure.propTypes={children:React.PropTypes.node,component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),expanded:React.PropTypes.bool,onExpand:React.PropTypes.func,onHide:React.PropTypes.func,teaser:React.PropTypes.node,teaserExpanded:React.PropTypes.node,toggleProps:React.PropTypes.object};ProgressiveDisclosure.defaultProps={children:null,component:"div",expanded:false,onExpand:noop,onHide:noop,teaser:null,teaserExpanded:null,toggleProps:{}};ProgressiveDisclosure.internalKeys=Object.keys(ProgressiveDisclosure.defaultProps);var index$13=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var Progress=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("div",_extends({},this.props.labelProps,{ref:"label",className:index$13("b-progress-label",this.props.labelProps.className)}),this.props.label)}}},{key:"renderCancel",value:function e(){if(this.props.onCancel){return React__default.createElement(Button,_extends({},this.props.cancelProps,{ref:"cancel",className:index$13("b-progress-cancel",this.props.cancelProps.className),onPressed:this.props.onCancel}))}}},{key:"renderProgress",value:function e(){return React__default.createElement("div",_extends({},this.props.progressProps,{ref:"progress",className:index$13("b-progress",this.props.progressProps.className,{"b-progress-indeterminate":typeof this.props.progress==="undefined"}),role:"presentation",style:_extends({},this.props.progressProps.style,defineProperty({},this.props.tweenProperty,this.props.progress))}))}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$13("b-progress-wrapper",this.props.className)}),this.renderProgress(),this.renderLabel(),this.renderCancel())}}]);return t}(React__default.PureComponent);Progress.propTypes={cancelProps:React.PropTypes.object,component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),label:React.PropTypes.node,labelProps:React.PropTypes.object,onCancel:React.PropTypes.func,progress:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),progressProps:React.PropTypes.object,tweenProperty:React.PropTypes.string};Progress.defaultProps={cancelProps:{},
component:"div",label:null,labelProps:{},onCancel:noop,progress:undefined,progressProps:{},tweenProperty:"width"};Progress.internalKeys=Object.keys(Progress.defaultProps);var index$14=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var Radio=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.uuid=uuid(),o.handleChange=function(e){if(e.target.checked){o.props.onSelected(e.target.value)}if(isFunction(o.props.inputProps.onChange)){o.props.inputProps.onChange(e)}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"renderInput",value:function e(){return React__default.createElement("input",_extends({},this.props.inputProps,{ref:"input",type:"radio",id:this.props.id||this.props.inputProps.id||this.uuid,className:index$14("b-radio",this.props.inputProps.className,{"b-radio-selected":this.props.selected}),name:this.props.name,value:this.props.value,checked:this.props.selected,"aria-checked":String(this.props.selected),onChange:this.handleChange}))}},{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("label",_extends({},this.props.labelProps,{ref:"label",className:index$14("b-radio-label",this.props.labelProps.className),htmlFor:this.props.id||this.props.inputProps.id||this.uuid}),this.props.label)}}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$14("b-radio-wrapper",this.props.className)}),this.renderInput(),this.renderLabel())}}]);return t}(React__default.PureComponent);Radio.propTypes={inputProps:React.PropTypes.object,label:React.PropTypes.node,labelProps:React.PropTypes.object,name:React.PropTypes.string.isRequired,onSelected:React.PropTypes.func,selected:React.PropTypes.bool,value:React.PropTypes.string.isRequired};Radio.defaultProps={inputProps:{},label:null,labelProps:{},name:"",onSelected:noop,selected:false,value:""};Radio.internalKeys=Object.keys(Radio.defaultProps);var index$15=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var index$16=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var matchOperatorsRe=/[|\\{}()[\]^$+*?.]/g;var index$17=function e(t){if(typeof t!=="string"){throw new TypeError("Expected a string")}return t.replace(matchOperatorsRe,"\\$&")};var Typeahead=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),_initialiseProps.call(o),n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentWillMount",value:function e(){if(this.props.inputProps.value||this.props.inputProps.defaultValue){this.computeMatches()}}},{key:"componentDidMount",value:function e(){this.mounted=true;if(this.state.selectedEntityIndex>=0){this.props.onEntityHighlighted(this.state.selectedEntityIndex)}}},{key:"componentWillReceiveProps",value:function e(t){if(t.entities!==this.props.entities){this.computeMatches(t.entities)}if(t.inputProps.value!==this.props.inputProps.value){this.updateInputState(t.inputProps.value);this.computeMatches()}}},{key:"componentDidUpdate",value:function e(t,n){if(this.state.entityMatchIndexes.length&&!n.entityMatchIndexes.length){this.refs.matches.scrollTop=0}if(this.state.selectedEntityIndex>=0&&this.props.entities[this.state.selectedEntityIndex]!==t.entities[n.selectedEntityIndex]){this.props.onEntityHighlighted(this.state.selectedEntityIndex)}}},{key:"componentWillUnmount",value:function e(){this.mounted=false}},{key:"handleMatchClick",value:function e(t){this.setState({selectedEntityIndex:t},this.setValueWithSelectedEntity)}},{key:"selectMatch",value:function e(t){var n=this.state.entityMatchIndexes;var o=n.length;var r=n.indexOf(this.state.selectedEntityIndex)+t;if(o){if(r<0){r=o-1}else if(r>=o){r=0}var s=n[r];var i=this.refs.matches;var a=i.scrollTop+i.clientHeight;var p=this.refs["match_$"+s];var l=p.offsetTop;var c=l+p.clientHeight;if(c>=a){i.scrollTop+=c-a}else if(l<=i.scrollTop){i.scrollTop=l}this.setState({selectedEntityIndex:s})}}},{key:"cursorAtEndOfInput",value:function e(){var t=this.getInputNode();return t.selectionStart===t.selectionEnd&&t.selectionEnd===this.getValue().length}},{key:"markFuzzyMatchSubstring",value:function e(t,n){var o=n.text;var r=o.split(new RegExp("("+index$17(t)+")","ig"));var s=t.toLowerCase();var i=r.length;var a=-1;while(++a<i){if(r[a].toLowerCase()===s){r[a]=React__default.createElement("mark",{key:a,className:"b-typeahead-match-highlight"},r[a])}}return r}},{key:"markStartsWithMatchSubstring",value:function e(t,n){var o=n.text;var r=t.toLowerCase();var s=o.toLowerCase().indexOf(r);var i=s+r.length;return[React__default.createElement("span",{key:"0"},o.slice(0,s)),React__default.createElement("mark",{key:"1",className:"b-typeahead-match-highlight"},o.slice(s,i)),React__default.createElement("span",{key:"2"},o.slice(i))]}},{key:"getMarkingFunction",value:function e(){if(isString(this.props.algorithm)){if(this.props.algorithm===t.mode.STARTS_WITH){return this.markStartsWithMatchSubstring}return this.markFuzzyMatchSubstring}else if(isFunction(this.props.algorithm.marker)){return this.props.algorithm.marker}if(this.warnedMarker===undefined){this.warnedMarker=true;console.warn("Typeahead: no `props.algorithm.marker` was provided; falling back to the default marking algorithm (FUZZY).")}return this.markFuzzyMatchSubstring}},{key:"getFuzzyMatchIndexes",value:function e(t,n){var o=t.toLowerCase();return n.reduce(function e(t,n,r){return n.text.toLowerCase().indexOf(o)!==-1?t.push(r)&&t:t},[])}},{key:"getStartsWithMatchIndexes",value:function e(t,n){var o=t.toLowerCase();return n.reduce(function e(t,n,r){if(n.text.toLowerCase().indexOf(o)===0){t.push(r)}return t},[])}},{key:"getMatchingFunction",value:function e(){if(isString(this.props.algorithm)){if(this.props.algorithm===t.mode.STARTS_WITH){return this.getStartsWithMatchIndexes}return this.getFuzzyMatchIndexes}else if(isFunction(this.props.algorithm.matcher)){return this.props.algorithm.matcher}if(this.warnedMatcher===undefined){this.warnedMatcher=true;console.warn("Typeahead: no `props.algorithm.matcher` was provided; falling back to the default matching algorithm (FUZZY).")}return this.getFuzzyMatchIndexes}},{key:"computeMatches",value:function e(t){var n=this;this.setState(function(e,o){var r=t||o.entities;var s=e.input;var i=s===""?[]:n.getMatchIndexes(s,r);return{selectedEntityIndex:i.length?i[0]:-1,entityMatchIndexes:i}})}},{key:"renderNotification",value:function e(){return React__default.createElement("div",{ref:"aria",id:this.state.id,className:this.props.offscreenClass,"aria-live":"polite"},this.getSelectedEntityText())}},{key:"renderHint",value:function e(){if(this.props.hint){var t=this.state.input;var n=this.getSelectedEntityText();var o="";if(n&&n.toLowerCase().indexOf(t.toLowerCase())===0){o=n.replace(new RegExp(t,"i"),t)}return React__default.createElement("div",_extends({},this.props.hintProps,{ref:"hint",className:index$16("b-input","b-input-placeholder","b-typeahead-hint",this.props.hintProps.className),tabIndex:"-1"}),o)}}},{key:"renderMatches",value:function e(){var t=this;if(this.state.entityMatchIndexes.length){var n=this.props.matchWrapperProps;return React__default.createElement("div",_extends({},n,{ref:"matches",className:index$16("b-typeahead-match-wrapper",n.className)}),this.state.entityMatchIndexes.map(function(e){var n=t.props.entities[e];var o=n.className,r=n.text,s=objectWithoutProperties(n,["className","text"]);return React__default.createElement("div",_extends({},s,{ref:"match_$"+e,className:index$16("b-typeahead-match",o,{"b-typeahead-match-selected":t.state.selectedEntityIndex===e}),key:r,onClick:t.handleMatchClick.bind(t,e)}),t.markMatchSubstring(t.state.input,n))}))}}},{key:"render",value:function e(){var n=this.props,o=this.state;return React__default.createElement("div",_extends({},omitKeysFromSourceObject(n,t.internalKeys),{ref:"wrapper",className:index$16("b-typeahead-wrapper",n.className),onKeyDown:this.handleKeyDown}),this.renderNotification(),this.renderHint(),React__default.createElement(Input,_extends({},getIntersection(n,Input.defaultProps),{ref:"input","aria-controls":o.id,inputProps:_extends({},n.inputProps,{className:index$16("b-typeahead",n.inputProps.className),onChange:this.handleChange})})),this.renderMatches())}}]);return t}(React__default.PureComponent);Typeahead.mode={STARTS_WITH:"STARTS_WITH",FUZZY:"FUZZY"};Typeahead.propTypes=_extends({},Input.propTypes,{algorithm:React.PropTypes.oneOfType([React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY]),React.PropTypes.shape({marker:React.PropTypes.oneOfType([React.PropTypes.func,React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY])]),matcher:React.PropTypes.oneOfType([React.PropTypes.func,React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY])])})]),clearPartialInputOnSelection:React.PropTypes.bool,entities:React.PropTypes.arrayOf(React.PropTypes.shape({text:React.PropTypes.string})),hint:React.PropTypes.bool,hintProps:React.PropTypes.object,matchWrapperProps:React.PropTypes.object,offscreenClass:React.PropTypes.string,onComplete:React.PropTypes.func,onEntityHighlighted:React.PropTypes.func,onEntitySelected:React.PropTypes.func});Typeahead.defaultProps=_extends({},Input.defaultProps,{algorithm:Typeahead.mode.FUZZY,clearPartialInputOnSelection:false,entities:[],hint:null,hintProps:{},matchWrapperProps:{},offscreenClass:"b-offscreen",onComplete:noop,onEntityHighlighted:noop,onEntitySelected:noop});Typeahead.internalKeys=Object.keys(Typeahead.defaultProps);var _initialiseProps=function e(){var t=this;this.state={entityMatchIndexes:[],id:uuid(),isControlled:isString(this.props.inputProps.value),input:this.props.inputProps.value||this.props.inputProps.defaultValue||"",selectedEntityIndex:-1};this.mounted=false;this.updateInputState=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return t.setState({input:e})};this.getSelectedEntityText=function(){var e=t.props.entities[t.state.selectedEntityIndex];return e?e.text:""};this.resetMatches=function(){if(t.mounted){t.setState({selectedEntityIndex:-1,entityMatchIndexes:[]})}};this.getInputNode=function(){return t.refs.input.refs.field};this.select=function(){var e=t.getInputNode();e.selectionStart=0;e.selectionEnd=t.getValue().length};this.focus=function(){return t.getInputNode().focus()};this.getValue=function(){return t.refs.input.getValue()};this.setValue=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";t.refs.input.setValue(e);t.updateInputState(e);t.resetMatches();t.focus()};this.setValueWithSelectedEntity=function(){t.props.onEntitySelected(t.state.selectedEntityIndex);if(t.props.clearPartialInputOnSelection){t.setValue("")}else{t.setValue(t.getSelectedEntityText())}window.setTimeout(t.resetMatches,0)};this.markMatchSubstring=function(){return t.getMarkingFunction().apply(undefined,arguments)};this.getMatchIndexes=function(){return t.getMatchingFunction().apply(undefined,arguments)};this.handleChange=function(e){if(t.state.isControlled===false){t.updateInputState(e.target.value);t.computeMatches()}if(isFunction(t.props.inputProps.onChange)){t.props.inputProps.onChange(e)}};this.handleKeyDown=function(e){switch(e.key){case"ArrowLeft":if(e.target.selectionStart>1){e.stopPropagation()}break;case"Tab":case"ArrowRight":if(t.state.selectedEntityIndex!==-1&&t.cursorAtEndOfInput()&&t.getInputNode()===e.target&&!e.shiftKey){e.nativeEvent.preventDefault();t.setValueWithSelectedEntity()}break;case"ArrowUp":e.nativeEvent.preventDefault();t.selectMatch(-1);t.focus();break;case"ArrowDown":e.nativeEvent.preventDefault();t.selectMatch(1);t.focus();break;case"Escape":if(t.state.selectedEntityIndex!==-1&&t.getInputNode()===e.target){t.resetMatches()}break;case"Enter":if(t.state.selectedEntityIndex!==-1&&t.getInputNode()===e.target){e.nativeEvent.preventDefault();t.setValueWithSelectedEntity()}else{t.props.onComplete(t.state.input,e)}break}if(isFunction(t.props.onKeyDown)){t.props.onKeyDown(e)}}};var first=function e(t){return t[0]};var last=function e(t){return t[t.length-1]};var TokenizedInput=function(e){inherits(t,e);function t(){var e;var n,o,r;classCallCheck(this,t);for(var s=arguments.length,i=Array(s),a=0;a<s;a++){i[a]=arguments[a]}return r=(n=(o=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o),o.focus=function(){return o.refs.typeahead.focus()},o.getInputNode=function(){return o.refs.typeahead.getInputNode()},o.getSelectedEntityText=function(){return o.refs.typeahead.getSelectedEntityText()},o.getValue=function(){return o.refs.typeahead.getValue()},o.select=function(){return o.refs.typeahead.select()},o.setValue=function(e){return o.refs.typeahead.setValue(e)},o.add=function(e){if(o.props.tokens.indexOf(e)===-1){o.props.handleAddToken(e)}},o.handleInputClick=function(e){o.clearSelection();if(isFunction(o.props.inputProps.onClick)){o.props.inputProps.onClick(e)}},o.handleInputFocus=function(e){o.clearSelection();if(isFunction(o.props.inputProps.onFocus)){o.props.inputProps.onFocus(e)}},o.handleKeyDown=function(e){switch(e.which){case 37:o.selectPreviousToken(e.shiftKey);break;case 39:o.selectNextToken(e.shiftKey);break;case 8:if(o.props.tokensSelected.length){o.remove(o.props.tokensSelected);o.focus()}break;case 65:if(e.metaKey){e.preventDefault();o.focus();o.select();o._suppressNextTokenSelection=true;o.props.handleNewSelection(o.props.tokens)}}if(isFunction(o.props.onKeyDown)){o.props.onKeyDown(e)}},n),possibleConstructorReturn(o,r)}createClass(t,[{key:"componentDidUpdate",value:function e(t){var n=t.tokensSelected;var o=this.props.tokensSelected;if(this.props.tokens.length>t.tokens.length){this.setValue("")}if(this._suppressNextTokenSelection){this._suppressNextTokenSelection=false;return}if(n!==o&&o.length!==0){if(o.length===1||o[0]!==n[0]){return this.refs["token_"+o[0]].focus()}else if(last(o)!==last(n)){return this.refs["token_"+last(o)].focus()}this.refs["token_"+o[0]].focus()}}},{key:"remove",value:function e(t){var n=this;var o=(Array.isArray(t)?t:[t]).filter(function(e){return n.props.tokens.indexOf(e)!==-1});if(o.length){this.props.handleRemoveTokens(o)}}},{key:"selectToken",value:function e(t){this.props.handleNewSelection([t])}},{key:"selectTokens",value:function e(t){this.props.handleNewSelection(t)}},{key:"selectPreviousToken",value:function e(t){var n=this.props.tokensSelected;var o=this.props.tokens;if(n.length===1&&first(n)===first(o)){return}if(n.length===0){this.selectToken(last(o))}else{var r=o[o.indexOf(first(n))-1];this.selectTokens(t?[r].concat(n):[r])}}},{key:"selectNextToken",value:function e(t){var n=this.props.tokensSelected;var o=this.props.tokens;if(n.length===0){return}if(last(n)===last(o)){this.clearSelection();this.focus()}else{var r=o[o.indexOf(last(n))+1];this.selectTokens(t?n.concat(r):[r])}}},{key:"clearSelection",value:function e(){this.props.handleNewSelection([])}},{key:"handleTokenCloseClick",value:function e(t,n){n.stopPropagation();this.remove(t);this.focus();if(this.props.tokenCloseComponent.props.onClick){this.props.tokenCloseComponent.props.onClick(n)}}},{key:"renderTokenClose",value:function e(t){if(this.props.tokenCloseVisible){return React__default.cloneElement(this.props.tokenCloseComponent,{className:index$15("b-tokenfield-token-close",this.props.tokenCloseComponent.props.className),onClick:this.handleTokenCloseClick.bind(this,t)})}}},{key:"handleTokenKeyDown",value:function e(t,n){switch(n.which){case 13:case 32:this.selectToken(t);n.preventDefault();break;case 8:this.remove(t);this.focus();n.preventDefault();break}}},{key:"renderTokens",value:function e(){var t=this;return React__default.createElement("div",{className:"b-tokenfield-tokens"},this.props.tokens.map(function(e){return React__default.createElement("div",{ref:"token_"+e,key:e,className:index$15("b-tokenfield-token",{"b-tokenfield-token-selected":t.props.tokensSelected.indexOf(e)!==-1}),onClick:t.selectToken.bind(t,e),onKeyDown:t.handleTokenKeyDown.bind(t,e),tabIndex:"0"},t.props.entities[e].text,t.renderTokenClose(e))}))}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$15("b-tokenfield-wrapper",this.props.className),onKeyDown:this.handleKeyDown}),this.renderTokens(),React__default.createElement(Typeahead,_extends({},getIntersection(this.props,Typeahead.defaultProps),{ref:"typeahead",className:"b-tokenfield",clearPartialInputOnSelection:true,inputProps:_extends({},this.props.inputProps,{onClick:this.handleInputClick,onFocus:this.handleInputFocus}),onEntitySelected:this.add})))}}]);return t}(React__default.PureComponent);TokenizedInput.propTypes=_extends({},Typeahead.propTypes,{handleAddToken:React.PropTypes.func,handleRemoveTokens:React.PropTypes.func,handleNewSelection:React.PropTypes.func,tokenCloseComponent:React.PropTypes.element,tokenCloseVisible:React.PropTypes.bool,tokens:React.PropTypes.arrayOf(React.PropTypes.number),tokensSelected:React.PropTypes.arrayOf(React.PropTypes.number)});TokenizedInput.defaultProps=_extends({},Typeahead.defaultProps,{handleAddToken:noop,handleRemoveTokens:noop,handleNewSelection:noop,tokenCloseComponent:React__default.createElement("div",null,"X"),tokenCloseVisible:true,tokens:[],tokensSelected:[]});TokenizedInput.internalKeys=Object.keys(TokenizedInput.defaultProps);var index$18=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var s=typeof r==="undefined"?"undefined":_typeof(r);if(s==="string"||s==="number"){e.push(r)}else if(Array.isArray(r)){e.push(n.apply(null,r))}else if(s==="object"){for(var i in r){if(t.call(r,i)&&r[i]){e.push(i)}}}}return e.join(" ")}if(typeof e!=="undefined"&&e.exports){e.exports=n}else if(typeof define==="function"&&_typeof(define.amd)==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()});var Tooltip=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"render",value:function e(){var n=this.props.position;return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:index$18("b-tooltip",this.props.className,{"b-tooltip-position-above":n===t.position.ABOVE,"b-tooltip-position-below":n===t.position.BELOW,"b-tooltip-position-before":n===t.position.BEFORE,"b-tooltip-position-after":n===t.position.AFTER}),"data-tooltip":this.props.text,"aria-label":this.props["aria-label"]||this.props.text}),this.props.children)}}]);return t}(React__default.PureComponent);Tooltip.position={ABOVE:"ABOVE",BELOW:"BELOW",BEFORE:"BEFORE",AFTER:"AFTER"};Tooltip.propTypes={component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),position:React.PropTypes.oneOf(Object.keys(Tooltip.position)),text:React.PropTypes.string};Tooltip.defaultProps={component:"div",position:Tooltip.position.ABOVE,text:""};Tooltip.internalKeys=Object.keys(Tooltip.defaultProps);exports.ArrowKeyNavigation=ArrowKeyNavigation;exports.Button=Button;exports.Checkbox=Checkbox;exports.CheckboxGroup=CheckboxGroup;exports.Dialog=Dialog;exports.FittedText=FittedText;exports.Image=Image;exports.Input=Input;exports.Modal=Modal;exports.Pagination=Pagination;exports.Popover=Popover;exports.Portal=Portal;exports.ProgressiveDisclosure=ProgressiveDisclosure;exports.Progress=Progress;exports.Radio=Radio;exports.SegmentedControl=SegmentedControl;exports.TokenizedInput=TokenizedInput;exports.Tooltip=Tooltip;exports.Typeahead=Typeahead;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtYXJyb3cta2V5LW5hdmlnYXRpb24vaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtYnV0dG9uL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWJ1dHRvbi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1jaGVja2JveC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy11dGlscy11dWlkL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWNoZWNrYm94L2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWNoZWNrYm94LWdyb3VwL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWNoZWNrYm94LWdyb3VwL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWRpYWxvZy9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wb3J0YWwvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtZGlhbG9nL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWZpdHRlZC10ZXh0L25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWZpdHRlZC10ZXh0L2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWltYWdlL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWltYWdlL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWlucHV0L25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXV0aWxzLWlzLXN0cmluZy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1pbnB1dC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1tb2RhbC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy11dGlscy1vYmplY3QtaW50ZXJzZWN0aW9uL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLW1vZGFsL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXBhZ2luYXRpb24vbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtcGFnaW5hdGlvbi9ub2RlX21vZHVsZXMvbG9kYXNoLmlzaW50ZWdlci9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1zZWdtZW50ZWQtY29udHJvbC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1zZWdtZW50ZWQtY29udHJvbC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wYWdpbmF0aW9uL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXBvcG92ZXIvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtdHJhbnNmb3JtLXByb3BlcnR5L2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXBvcG92ZXIvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtcHJvZ3Jlc3NpdmUtZGlzY2xvc3VyZS9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wcm9ncmVzc2l2ZS1kaXNjbG9zdXJlL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXByb2dyZXNzL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXByb2dyZXNzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXJhZGlvL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXJhZGlvL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXRva2VuaXplZC1pbnB1dC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy10eXBlYWhlYWQvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdHlwZWFoZWFkL25vZGVfbW9kdWxlcy9lc2NhcGUtc3RyaW5nLXJlZ2V4cC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy10eXBlYWhlYWQvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdG9rZW5pemVkLWlucHV0L2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXRvb2x0aXAvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdG9vbHRpcC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAodGVzdCkgPT4gdHlwZW9mIHRlc3QgPT09ICdmdW5jdGlvbic7XG4iLCIvKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBvYmplY3Qgd2l0aG91dCB0aGUgZ2l2ZW4ga2V5cy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb21pdEtleXNGcm9tU291cmNlT2JqZWN0KHNvdXJjZSwgb21pdHRlZEtleXMgPSBbXSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiByZWxvY2F0ZUFjY2VwdGVkS2V5cyhoYXNoLCBrZXkpIHtcbiAgICAgICAgaWYgKG9taXR0ZWRLZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGhhc2hba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhhc2g7XG5cbiAgICB9LCB7fSk7XG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7ZmluZERPTU5vZGV9IGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJyb3dLZXlOYXZpZ2F0aW9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIG1vZGUgPSB7XG4gICAgICAgIEhPUklaT05UQUw6ICdIT1JJWk9OVEFMJyxcbiAgICAgICAgVkVSVElDQUw6ICdWRVJUSUNBTCcsXG4gICAgICAgIEJPVEg6ICdCT1RIJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICAgIEFueSB2YWxpZCBIVE1MIHRhZyBuYW1lIG9yIGEgUmVhY3QgY29tcG9uZW50IGZhY3RvcnksIGFueXRoaW5nIHRoYXQgY2FuIGJlIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gYFJlYWN0LmNyZWF0ZUVsZW1lbnRgXG4gICAgICAgICovXG4gICAgICAgIGNvbXBvbmVudDogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgICAgQWxsb3dzIGZvciBhIHBhcnRpY3VsYXIgY2hpbGQgdG8gYmUgaW5pdGlhbGx5IHJlYWNoYWJsZSB2aWEgdGFiYmluZ1xuICAgICAgICAqL1xuICAgICAgICBkZWZhdWx0QWN0aXZlQ2hpbGRJbmRleDogUHJvcFR5cGVzLm51bWJlcixcblxuICAgICAgICAvKipcbiAgICAgICAgICAgIENvbnRyb2xzIHdoZW4gYXJyb3cga2V5IHByZXNzZXMgd2lsbCBiZSBjYXVnaHQgYnkgY29tcG9uZW50IGFuZCByZXN1bHQgaW4gdGhlIGFjdGl2ZSBpdGVtIGJlaW5nIGluY3JlbWVudGVkIG9yIGRlY3JlbWVudGVkXG4gICAgICAgICovXG4gICAgICAgIG1vZGU6IFByb3BUeXBlcy5vbmVPZihPYmplY3Qua2V5cyhBcnJvd0tleU5hdmlnYXRpb24ubW9kZSkpLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGNvbXBvbmVudDogJ2RpdicsXG4gICAgICAgIGRlZmF1bHRBY3RpdmVDaGlsZEluZGV4OiAwLFxuICAgICAgICBtb2RlOiBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5CT1RILFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhBcnJvd0tleU5hdmlnYXRpb24uZGVmYXVsdFByb3BzKVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGFjdGl2ZUNoaWxkSW5kZXg6IHRoaXMucHJvcHMuZGVmYXVsdEFjdGl2ZUNoaWxkSW5kZXgsXG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmFjdGl2ZUNoaWxkSW5kZXggIT09IHByZXZTdGF0ZS5hY3RpdmVDaGlsZEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzKHRoaXMuc3RhdGUuYWN0aXZlQ2hpbGRJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5hY3RpdmVDaGlsZEluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBudW1DaGlsZHJlbiA9ICAgbmV4dFByb3BzLmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gUmVhY3QuQ2hpbGRyZW4uY291bnQobmV4dFByb3BzLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDA7XG5cbiAgICAgICAgICAgIGlmIChudW1DaGlsZHJlbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2FjdGl2ZUNoaWxkSW5kZXg6IDB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5hY3RpdmVDaGlsZEluZGV4ID49IG51bUNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlQ2hpbGRJbmRleDogbnVtQ2hpbGRyZW4gLSAxfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRGb2N1cyhpbmRleCkge1xuICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSAoXG4gICAgICAgICAgICB0aGlzLnJlZnMud3JhcHBlciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XG4gICAgICAgICAgPyB0aGlzLnJlZnMud3JhcHBlclxuICAgICAgICAgIDogZmluZERPTU5vZGUodGhpcy5yZWZzLndyYXBwZXIpXG4gICAgICAgICkuY2hpbGRyZW5baW5kZXhdO1xuXG4gICAgICAgIGlmIChjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmhhc0F0dHJpYnV0ZSgnZGF0YS1za2lwJykpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZUZvY3VzKFxuICAgICAgICAgICAgICAgIGNoaWxkTm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkb2N1bWVudC5hY3RpdmVFbGVtZW50KSAmIE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fRk9MTE9XSU5HID8gLTEgOiAxXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKGNoaWxkTm9kZSAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSBjaGlsZE5vZGUpIHtcbiAgICAgICAgICAgIGNoaWxkTm9kZS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbW92ZUZvY3VzKGRlbHRhKSB7XG4gICAgICAgIGNvbnN0IG51bUNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gUmVhY3QuQ2hpbGRyZW4uY291bnQodGhpcy5wcm9wcy5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDA7XG5cbiAgICAgICAgbGV0IG5leHRJbmRleCA9IHRoaXMuc3RhdGUuYWN0aXZlQ2hpbGRJbmRleCArIGRlbHRhO1xuXG4gICAgICAgIGlmIChuZXh0SW5kZXggPj0gbnVtQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIG5leHRJbmRleCA9IDA7IC8vIGxvb3BcbiAgICAgICAgfSBlbHNlIGlmIChuZXh0SW5kZXggPCAwKSB7XG4gICAgICAgICAgICBuZXh0SW5kZXggPSBudW1DaGlsZHJlbiAtIDE7IC8vIHJldmVyc2UgbG9vcFxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlQ2hpbGRJbmRleDogbmV4dEluZGV4fSk7XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLlZFUlRJQ0FMXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5CT1RIKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1cygtMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5IT1JJWk9OVEFMXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5CT1RIKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1cygtMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5WRVJUSUNBTFxuICAgICAgICAgICAgICAgIHx8IHRoaXMucHJvcHMubW9kZSA9PT0gQXJyb3dLZXlOYXZpZ2F0aW9uLm1vZGUuQk9USCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlRm9jdXMoMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kZSA9PT0gQXJyb3dLZXlOYXZpZ2F0aW9uLm1vZGUuSE9SSVpPTlRBTFxuICAgICAgICAgICAgICAgIHx8IHRoaXMucHJvcHMubW9kZSA9PT0gQXJyb3dLZXlOYXZpZ2F0aW9uLm1vZGUuQk9USCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlRm9jdXMoMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5vbktleURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uS2V5RG93bihldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVGb2N1cyA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1mb2N1cy1pbmRleCcpKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMtaW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBSZWFjdC5DaGlsZHJlbi50b0FycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pW2luZGV4XTtcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlQ2hpbGRJbmRleDogaW5kZXh9KTtcblxuICAgICAgICAgICAgaWYgKGNoaWxkLnByb3BzLm9uRm9jdXMpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5wcm9wcy5vbkZvY3VzKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoaWxkcmVuKCkge1xuICAgICAgICByZXR1cm4gUmVhY3QuQ2hpbGRyZW4ubWFwKHRoaXMucHJvcHMuY2hpbGRyZW4sIChjaGlsZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgICAgICAgICAgICAnZGF0YS1mb2N1cy1pbmRleCc6IGluZGV4LFxuICAgICAgICAgICAgICAgICdkYXRhLXNraXAnOiBwYXJzZUludChjaGlsZC5wcm9wcy50YWJJbmRleCwgMTApID09PSAtMSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAga2V5OiBjaGlsZC5rZXkgfHwgaW5kZXgsXG4gICAgICAgICAgICAgICAgdGFiSW5kZXg6IHRoaXMuc3RhdGUuYWN0aXZlQ2hpbGRJbmRleCA9PT0gaW5kZXggPyAwIDogLTEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRoaXMucHJvcHMuY29tcG9uZW50XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgQXJyb3dLZXlOYXZpZ2F0aW9uLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuaGFuZGxlRm9jdXN9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259PlxuICAgICAgICAgICAgICAgIHt0aGlzLmNoaWxkcmVuKCl9XG4gICAgICAgICAgICA8L3RoaXMucHJvcHMuY29tcG9uZW50PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuICAgICAgICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgYmVjb21lcyBcInByZXNzZWRcIiBvciB0cmlnZ2VyZWQgYnkgdGhlIHVzZXIgKG1vdXNlIG9yIGtleWJvYXJkKTsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2U7IHRoaXMgZnVuY3Rpb24gd2lsbCBzdGlsbCBiZSBjYWxsZWQgaWYgYHByb3BzLnByZXNzZWRgIGlzIG5vdCBwYXNzZWRcbiAgICAgICAgICovXG4gICAgICAgIG9uUHJlc3NlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBlbGVtZW50IGJlY29tZXMgXCJ1bnByZXNzZWRcIjsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uVW5wcmVzc2VkOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZW5hYmxlcyBcInByZXNzZWRcIiBzdXBwb3J0IGFuZCBhZGRzIHRoZSBgYXJpYS1wcmVzc2VkYCBhdHRyaWJ1dGUgdG8gdGhlIGAuYi1idXR0b25gIG5vZGU7IGVzc2VudGlhbGx5IGEgXCJzdGF0ZWZ1bFwiIGJ1dHRvbiAoc2VlIHRoZSBcInVucHJlc3NlZC9wcmVzc2VkXCIgZXhhbXBsZSBkZW1vIGFib3ZlKVxuICAgICAgICAgKi9cbiAgICAgICAgcHJlc3NlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIG9uQ2xpY2s6IG5vb3AsXG4gICAgICAgIG9uUHJlc3NlZDogbm9vcCxcbiAgICAgICAgb25VbnByZXNzZWQ6IG5vb3AsXG4gICAgICAgIHByZXNzZWQ6IHVuZGVmaW5lZCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoQnV0dG9uLmRlZmF1bHRQcm9wcylcblxuICAgIHRvZ2dsZVN0YXRlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJvcHNbdGhpcy5wcm9wcy5wcmVzc2VkID8gJ29uVW5wcmVzc2VkJyA6ICdvblByZXNzZWQnXShldmVudCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdGhpcy50b2dnbGVTdGF0ZShldmVudCk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5vbkNsaWNrKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICBjYXNlICdTcGFjZSc6XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVTdGF0ZShldmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBCdXR0b24uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J2J1dHRvbidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWJ1dHRvbicsIHRoaXMucHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICdiLWJ1dHRvbi1wcmVzc2FibGUnOiB0eXBlb2YgdGhpcy5wcm9wcy5wcmVzc2VkICE9PSAndW5kZWZpbmVkJyxcbiAgICAgICAgICAgICAgICAgICAgJ2ItYnV0dG9uLXByZXNzZWQnOiB0aGlzLnByb3BzLnByZXNzZWQsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXt0aGlzLnByb3BzLnByZXNzZWR9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsIi8qKlxuICogR2VuZXJhdGVzIGEgdW5pcXVlIElELiBBZGRzIGEgcHJlZml4IHNvIGl0IGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgYW4gSFRNTCBJRC5cbiAqIEJhc2VkIG9uIHtAbGluayBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qZWQvOTgyODgzIHRoaXMgaW1wbGVtZW50YXRpb259LlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gYSB1bmlxdWUgaWRlbnRpZmllclxuICpcbiAqIEBleGFtcGxlXG4gKiB1dWlkKCk7IC8vIGItMWYyY2QyN2YtMDc1NC00MzQ0LTlkMjAtNDM2YTIwMWIyZjgwXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHV1aWQoKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICByZXR1cm4gJ2ItJyArIChbMWU3XSstMWUzKy00ZTMrLThlMystMWUxMSkucmVwbGFjZSgvWzAxOF0vZyxhPT4oYV5NYXRoLnJhbmRvbSgpKjE2Pj5hLzQpLnRvU3RyaW5nKDE2KSk7XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xufVxuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB1dWlkIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy11dWlkL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hlY2tib3ggZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogYWxsIGlucHV0LXNwZWNpZmljIHByb3BzIGxpa2UgYHZhbHVlYCwgYG5hbWVgLCBldGMgc2hvdWxkIGJlIHBhc3NlZCBoZXJlIC0tIGNvbW1vbiBvbmVzIGFyZSBsaXN0ZWQgYmVsb3cuXG4gICAgICAgICAqIEFsc28gc3VwcG9ydHMgYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItY2hlY2tib3hgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGlucHV0UHJvcHM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGRldGVybWluZXMgaWYgdGhlIGNoZWNrYm94IGlzIHJlbmRlcmVkIGFzIGNoZWNrZWQvdW5jaGVja2VkLCBzZWUgUmVhY3QgW1wiY29udHJvbGxlZCBpbnB1dHNcIl0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9mb3Jtcy5odG1sI2NvbnRyb2xsZWQtY29tcG9uZW50cykpXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNoZWNrZWQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgICAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogcHJldmVudHMgdGhlIGBvbntDaGVja2VkLFVuY2hlY2tlZH1gIGV2ZW50cyBmcm9tIGZpcmluZyB3aGVuIGB0cnVlYFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBpZDogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBlbmFibGVzIG9yIGRpc2FibGVzIFwibWl4ZWRcIiBjaGVja2JveCBzdGF0ZSwgcmVhZCB0aGlzIFtDU1MtVHJpY2tzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vaW5kZXRlcm1pbmF0ZS1jaGVja2JveGVzLykgIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpbmRldGVybWluYXRlOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAgICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICAgICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogcmVuZGVyZWQgYXMgdGhlIGlucHV0IGNvbnRyb2wncyBmb3JtIG5hbWVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiAgcGFzc2VkLXRocm91Z2ggdG8gdGhlIGlucHV0IG5vZGUsIGxpa2UgYG5hbWVgXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICB9KSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFJlYWN0LXJlbmRlcmFibGUgY29udGVudCwgbW9zdCBjb21tb25seSBhIHNpbXBsZSBzdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgIGxhYmVsOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItY2hlY2tib3gtbGFiZWxgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGxhYmVsUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBlbGVtZW50IGJlY29tZXMgY2hlY2tlZDsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uQ2hlY2tlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBlbGVtZW50IGJlY29tZXMgdW5jaGVja2VkOyBiYWNraW5nIGRhdGEgbXVzdCBiZSB1cGRhdGVkIHRvIHBlcnNpc3QgdGhlIHN0YXRlIGNoYW5nZVxuICAgICAgICAgKi9cbiAgICAgICAgb25VbmNoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaW5kZXRlcm1pbmF0ZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGxhYmVsOiBudWxsLFxuICAgICAgICBsYWJlbFByb3BzOiB7fSxcbiAgICAgICAgb25DaGVja2VkOiBub29wLFxuICAgICAgICBvblVuY2hlY2tlZDogbm9vcCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoQ2hlY2tib3guZGVmYXVsdFByb3BzKVxuXG4gICAgaWQgPSB1dWlkKClcblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5pbnB1dFByb3BzLmluZGV0ZXJtaW5hdGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5kZXRlcm1pbmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgICBpZiAocHJldlByb3BzLmlucHV0UHJvcHMuaW5kZXRlcm1pbmF0ZSAhPT0gdGhpcy5wcm9wcy5pbnB1dFByb3BzLmluZGV0ZXJtaW5hdGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5kZXRlcm1pbmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0SW5kZXRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5yZWZzLmlucHV0LmluZGV0ZXJtaW5hdGUgPSAhIXRoaXMucHJvcHMuaW5wdXRQcm9wcy5pbmRldGVybWluYXRlO1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChldmVudCkgPT4geyAvLyBTZW5kIHRoZSBvcHBvc2l0ZSBzaWduYWwgZnJvbSB3aGF0IHdhcyBwYXNzZWQgdG8gdG9nZ2xlIHRoZSBkYXRhXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlucHV0UHJvcHMuZGlzYWJsZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdGhpcy5wcm9wc1shdGhpcy5wcm9wcy5pbnB1dFByb3BzLmNoZWNrZWQgPyAnb25DaGVja2VkJyA6ICdvblVuY2hlY2tlZCddKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5uYW1lKTtcblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5kaXNhYmxlZCkgeyByZXR1cm47IH1cblxuICAgICAgICB0aGlzLnJlZnMuaW5wdXQuZm9jdXMoKTtcblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25DbGljaykpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEFyaWFTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5pbmRldGVybWluYXRlID8gJ21peGVkJyA6IFN0cmluZyh0aGlzLnByb3BzLmlucHV0UHJvcHMuY2hlY2tlZCk7XG4gICAgfVxuXG4gICAgcmVuZGVySW5wdXQoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLmlucHV0UHJvcHMsICdpbmRldGVybWluYXRlJyl9XG4gICAgICAgICAgICAgICAgcmVmPSdpbnB1dCdcbiAgICAgICAgICAgICAgICB0eXBlPSdjaGVja2JveCdcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWNoZWNrYm94JywgdGhpcy5wcm9wcy5pbnB1dFByb3BzLmNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAnYi1jaGVja2JveC1taXhlZCc6IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5pbmRldGVybWluYXRlLFxuICAgICAgICAgICAgICAgICAgICAnYi1jaGVja2JveC1jaGVja2VkJzogdGhpcy5wcm9wcy5pbnB1dFByb3BzLmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICdiLWNoZWNrYm94LXVuY2hlY2tlZCc6ICF0aGlzLnByb3BzLmlucHV0UHJvcHMuaW5kZXRlcm1pbmF0ZSAmJiAhdGhpcy5wcm9wcy5pbnB1dFByb3BzLmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgaWQ9e3RoaXMucHJvcHMuaW5wdXRQcm9wcy5pZCB8fCB0aGlzLmlkfVxuICAgICAgICAgICAgICAgIGFyaWEtY2hlY2tlZD17dGhpcy5nZXRBcmlhU3RhdGUoKX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJMYWJlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubGFiZWwpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmxhYmVsUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0nbGFiZWwnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItY2hlY2tib3gtbGFiZWwnLCB0aGlzLnByb3BzLmxhYmVsUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgaHRtbEZvcj17dGhpcy5wcm9wcy5pbnB1dFByb3BzLmlkIHx8IHRoaXMuaWR9PlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5sYWJlbH1cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBDaGVja2JveC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWNoZWNrYm94LXdyYXBwZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlcklucHV0KCl9XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTGFiZWwoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBDaGVja2JveCBmcm9tICcuLi9ib3VuZGxlc3MtY2hlY2tib3gvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoZWNrYm94R3JvdXAgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgQ29uc3RhbnRzID0ge1xuICAgICAgICBTRUxFQ1RfQUxMX0JFRk9SRTogJ1NFTEVDVF9BTExfQkVGT1JFJyxcbiAgICAgICAgU0VMRUNUX0FMTF9BRlRFUjogJ1NFTEVDVF9BTExfQUZURVInLFxuICAgIH1cblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgZGF0YSB3aXNoZWQgdG8gYmUgcmVuZGVyZWQsIGVhY2ggaXRlbSBtdXN0IGNvbmZvcm0gdG8gdGhlIFtDaGVja2JveCBwcm9wIHNwZWNdKC4uL0NoZWNrYm94I3Byb3BzKVxuICAgICAgICAgKi9cbiAgICAgICAgaXRlbXM6IFByb3BUeXBlcy5hcnJheU9mKENoZWNrYm94LnByb3BUeXBlcy5pbnB1dFByb3BzKS5pc1JlcXVpcmVkLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhbGwgY2hpbGRyZW4gYmVjb21lIGNoZWNrZWQgKG5vdCBmaXJlZCBvbiBmaXJzdCByZW5kZXIpLCBubyByZXR1cm5cbiAgICAgICAgICovXG4gICAgICAgIG9uQWxsQ2hlY2tlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIGFsbCBjaGlsZHJlbiBiZWNvbWUgdW5jaGVja2VkIChub3QgZmlyZWQgb24gZmlyc3QgcmVuZGVyKSwgbm8gcmV0dXJuXG4gICAgICAgICAqL1xuICAgICAgICBvbkFsbFVuY2hlY2tlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIGEgc3BlY2lmaWMgY2hpbGQgaGFzIGJlY29tZSBjaGVja2VkLCByZXR1cm5zIHRoZSBjaGlsZCBkZWZpbml0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBvbkNoaWxkQ2hlY2tlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIGEgc3BlY2lmaWMgY2hpbGQgaGFzIGJlY29tZSBjaGVja2VkLCByZXR1cm5zIHRoZSBjaGlsZCBkZWZpbml0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBvbkNoaWxkVW5jaGVja2VkOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVuZGVycyBhIG1hc3RlciBjaGVja2JveCB0aGF0IGNhbiBtYW5pcHVsYXRlIHRoZSB2YWx1ZXMgb2YgYWxsIGNoaWxkcmVuIHNpbXVsdGFuZW91c2x5XG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3RBbGw6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBtdXN0IGNvbmZvcm0gdG8gdGhlIFtDaGVja2JveCBwcm9wIHNwZWNdKC4uL0NoZWNrYm94I3Byb3BzKVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0QWxsUHJvcHM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHRoZSB0ZXh0IG9yIHJlbmRlcmFibGUgbm9kZSB0byBkaXNwbGF5IG5leHQgdG8gdGhlIGNoZWNrYm94XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgaW5wdXRQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgICAgfSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIChzZWUgW3RoZSBpbXBsZW1lbnRhdGlvbl0oaW5kZXguanMpKSB0aGUgcmVuZGVyaW5nIHBvc2l0aW9uIG9mIHRoZSBcInNlbGVjdCBhbGxcIiBjaGVja2JveCwgZGVmYXVsdHMgdG8gXCJiZWZvcmVcIlxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0QWxsUG9zaXRpb246IFByb3BUeXBlcy5vbmVPZihPYmplY3Qua2V5cyhDaGVja2JveEdyb3VwLkNvbnN0YW50cykpLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgb25BbGxDaGVja2VkOiBub29wLFxuICAgICAgICBvbkFsbFVuY2hlY2tlZDogbm9vcCxcbiAgICAgICAgb25DaGlsZENoZWNrZWQ6IG5vb3AsXG4gICAgICAgIG9uQ2hpbGRVbmNoZWNrZWQ6IG5vb3AsXG4gICAgICAgIHNlbGVjdEFsbDogZmFsc2UsXG4gICAgICAgIHNlbGVjdEFsbFByb3BzOiB7fSxcbiAgICAgICAgc2VsZWN0QWxsUG9zaXRpb246IENoZWNrYm94R3JvdXAuQ29uc3RhbnRzLlNFTEVDVF9BTExfQkVGT1JFLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhDaGVja2JveEdyb3VwLmRlZmF1bHRQcm9wcylcblxuICAgIGFsbEl0ZW1zQ2hlY2tlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbXMuZXZlcnkoKGl0ZW0pID0+IGl0ZW0uaW5wdXRQcm9wcy5jaGVja2VkID09PSB0cnVlKTtcbiAgICB9XG5cbiAgICBhbnlJdGVtc0NoZWNrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW1zLnNvbWUoKGl0ZW0pID0+IGl0ZW0uaW5wdXRQcm9wcy5jaGVja2VkID09PSB0cnVlKTtcbiAgICB9XG5cbiAgICByZW5kZXJTZWxlY3RBbGwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdEFsbCkge1xuICAgICAgICAgICAgY29uc3QgYWxsQ2hlY2tlZCA9IHRoaXMuYWxsSXRlbXNDaGVja2VkKCk7XG4gICAgICAgICAgICBjb25zdCB7aW5wdXRQcm9wc30gPSB0aGlzLnByb3BzLnNlbGVjdEFsbFByb3BzO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdzZWxlY3RfYWxsJ1xuICAgICAgICAgICAgICAgICAgICBrZXk9J2NiX3NlbGVjdF9hbGwnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItY2hlY2tib3gtZ3JvdXAtc2VsZWN0YWxsJywgdGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5pbnB1dFByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogYWxsQ2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU6ICFhbGxDaGVja2VkICYmIHRoaXMuYW55SXRlbXNDaGVja2VkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBpbnB1dFByb3BzICYmIGlucHV0UHJvcHMubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBpbnB1dFByb3BzLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2NiX3NlbGVjdF9hbGwnLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17dGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wcy5sYWJlbCB8fCAnU2VsZWN0IEFsbCd9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tlZD17dGhpcy5wcm9wcy5vbkFsbENoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uVW5jaGVja2VkPXt0aGlzLnByb3BzLm9uQWxsVW5jaGVja2VkfSAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckNoZWNrYm94ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgey4uLml0ZW19XG4gICAgICAgICAgICAgICAgICAgIGtleT17aXRlbS5pbnB1dFByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tlZD17dGhpcy5wcm9wcy5vbkNoaWxkQ2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgb25VbmNoZWNrZWQ9e3RoaXMucHJvcHMub25DaGlsZFVuY2hlY2tlZH0gLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckNoaWxkcmVuKCkge1xuICAgICAgICBjb25zdCB0b0JlUmVuZGVyZWQgPSBbdGhpcy5yZW5kZXJDaGVja2JveGVzKCldO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdEFsbCAmJiB0aGlzLnByb3BzLnNlbGVjdEFsbFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMucHJvcHMuc2VsZWN0QWxsUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgQ2hlY2tib3hHcm91cC5Db25zdGFudHMuU0VMRUNUX0FMTF9CRUZPUkU6XG4gICAgICAgICAgICAgICAgdG9CZVJlbmRlcmVkLnVuc2hpZnQodGhpcy5yZW5kZXJTZWxlY3RBbGwoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQ2hlY2tib3hHcm91cC5Db25zdGFudHMuU0VMRUNUX0FMTF9BRlRFUjpcbiAgICAgICAgICAgICAgICB0b0JlUmVuZGVyZWQucHVzaCh0aGlzLnJlbmRlclNlbGVjdEFsbCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0b0JlUmVuZGVyZWQ7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIENoZWNrYm94R3JvdXAuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J2dyb3VwJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItY2hlY2tib3gtZ3JvdXAnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckNoaWxkcmVuKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG5leHBvcnQgY29uc3QgUE9SVEFMX0RBVEFfQVRUUklCVVRFID0gJ2RhdGEtcG9ydGFsLWlkJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9ydGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvLyBzaW5nbGUgY2hpbGQgb25seSAtIGFycmF5cyBub3QgYWxsb3dlZFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgbm9ybWFsIFJlYWN0IGNoaWxkLCBidXQgbXVzdCBiZSBzaW5ndWxhcjsgbXVsdGlwbGUgc2libGluZyBjaGlsZHJlbiBtdXN0IGhhdmUgYSBjb21tb24gd3JhcHBlciwgc3VjaCBhcyBhIFwibGF5b3V0XCIgYDxkaXY+YFxuXG4gICAgICAgICAqIOKchSBPSzpcblxuICAgICAgICAgKiBgYGBqc3hcbiAgICAgICAgICogPFBvcnRhbD5cbiAgICAgICAgICogICBmb29cbiAgICAgICAgICogPC9Qb3J0YWw+XG5cbiAgICAgICAgICogPFBvcnRhbD5cbiAgICAgICAgICogICA8ZGl2PmZvbzwvZGl2PlxuICAgICAgICAgKiA8L1BvcnRhbD5cblxuICAgICAgICAgKiA8UG9ydGFsPlxuICAgICAgICAgKiAgIDxkaXY+XG4gICAgICAgICAqICAgICAgIDxkaXY+Zm9vPC9kaXY+XG4gICAgICAgICAqICAgICAgIDxkaXY+YmFyPC9kaXY+XG4gICAgICAgICAqICAgPC9kaXY+XG4gICAgICAgICAqIDwvUG9ydGFsPlxuICAgICAgICAgKiBgYGBcblxuICAgICAgICAgKiDim5TvuI8gTm90IE9LOlxuXG4gICAgICAgICAqIGBgYGpzeFxuICAgICAgICAgKiA8UG9ydGFsPlxuICAgICAgICAgKiAgIDxkaXY+Zm9vPC9kaXY+XG4gICAgICAgICAqICAgPGRpdj5iYXI8L2Rpdj5cbiAgICAgICAgICogPC9Qb3J0YWw+XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgY2hpbGRyZW46IFJlYWN0LlByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBsb2NhdGlvbiB0byBhcHBlbmQgdGhlIGdlbmVyYXRlZCBwb3J0YWwgYW5kIGNoaWxkIGVsZW1lbnRzXG4gICAgICAgICAqL1xuICAgICAgICBkZXN0aW5hdGlvbjogUHJvcFR5cGVzLmluc3RhbmNlT2YoSFRNTEVsZW1lbnQpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgSUQgdXNlZCB0byBsaW5rIHRoZSBwb3J0YWwgb3JpZ2luIHRvIHRoZSBkZXN0aW5hdGlvbjsgYWRkZWQgdG8gZ2VuZXJhdGVkIGA8ZGl2PmAgYXBwZW5kZWQgdG8gdGhlIGRlc3RpbmF0aW9uIEhUTUwgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgcG9ydGFsSWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBkb2N1bWVudC5ib2R5LFxuICAgICAgICBwb3J0YWxJZDogbnVsbCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoUG9ydGFsLmRlZmF1bHRQcm9wcylcblxuICAgIGlkID0gdXVpZCgpXG5cbiAgICAvLyB0aGUgPGRpdj4gdGhhdCB0aGUgY2hpbGRyZW4gYXJlIHJlbmRlcmVkIGludG9cbiAgICAkcG9ydGFsID0gbnVsbFxuXG4gICAgLy8gdGhlIHRvcC1sZXZlbCBjaGlsZCByZW5kZXJlZCBpbnRvIHRoZSAkcG9ydGFsXG4gICAgJHBhc3NlbmdlciA9IG51bGw7XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMuJHBvcnRhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLnByb3BzLmRlc3RpbmF0aW9uLmFwcGVuZENoaWxkKHRoaXMuJHBvcnRhbCk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJQb3J0YWxsZWRDb250ZW50KCk7XG4gICAgfVxuXG4gICAgcmVuZGVyUG9ydGFsbGVkQ29udGVudCgpIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBSZWFjdC5pc1ZhbGlkRWxlbWVudCh0aGlzLnByb3BzLmNoaWxkcmVuKSA/IHRoaXMucHJvcHMuY2hpbGRyZW4gOiAoPGRpdj57dGhpcy5wcm9wcy5jaGlsZHJlbn08L2Rpdj4pO1xuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgcG9ydGFsIElEIGxpbmsgaWYgbmVlZGVkXG4gICAgICAgIHRoaXMuJHBvcnRhbC5pZCA9IHRoaXMucHJvcHMucG9ydGFsSWQgfHwgdGhpcy5pZDtcblxuICAgICAgICBSZWFjdERPTS51bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcih0aGlzLCBjaGlsZCwgdGhpcy4kcG9ydGFsKTtcbiAgICAgICAgdGhpcy4kcGFzc2VuZ2VyID0gdGhpcy4kcG9ydGFsLmNoaWxkcmVuWzBdO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHsgdGhpcy5yZW5kZXJQb3J0YWxsZWRDb250ZW50KCk7IH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKHRoaXMuJHBvcnRhbCk7XG4gICAgICAgIHRoaXMucHJvcHMuZGVzdGluYXRpb24ucmVtb3ZlQ2hpbGQodGhpcy4kcG9ydGFsKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFBvcnRhbC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHsuLi57W1BPUlRBTF9EQVRBX0FUVFJJQlVURV06IHRoaXMucHJvcHMucG9ydGFsSWQgfHwgdGhpcy5pZH19IC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCB7UE9SVEFMX0RBVEFfQVRUUklCVVRFfSBmcm9tICcuLi9ib3VuZGxlc3MtcG9ydGFsL2luZGV4JztcbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB1dWlkIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy11dWlkL2luZGV4JztcblxuY29uc3QgdG9BcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlhbG9nIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFyYml0cmFyeSBjb250ZW50IHRvIGJlIHJlbmRlcmVkIGFmdGVyIHRoZSBkaWFsb2cgaW4gdGhlIERPTVxuICAgICAgICAgKi9cbiAgICAgICAgYWZ0ZXI6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhcmJpdHJhcnkgY29udGVudCB0byBiZSByZW5kZXJlZCBiZWZvcmUgdGhlIGRpYWxvZyBpbiB0aGUgRE9NXG4gICAgICAgICAqL1xuICAgICAgICBiZWZvcmU6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1kaWFsb2ctYm9keWAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgYm9keVByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkZXRlcm1pbmVzIGlmIGZvY3VzIGlzIGFsbG93ZWQgdG8gbW92ZSBhd2F5IGZyb20gdGhlIGRpYWxvZ1xuICAgICAgICAgKi9cbiAgICAgICAgY2FwdHVyZUZvY3VzOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZSBkZXRlY3Rpb24gb2YgXCJFc2NhcGVcIiBrZXlwcmVzc2VzIHRvIHRyaWdnZXIgYHByb3BzLm9uQ2xvc2VgXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZU9uRXNjS2V5OiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZW5hYmxlIGRldGVjdGlvbiBvZiBjbGlja3Mgb3V0c2lkZSB0aGUgZGlhbG9nIGFyZWEgdG8gdHJpZ2dlciBgcHJvcHMub25DbG9zZWBcbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlT25PdXRzaWRlQ2xpY2s6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBlbmFibGUgZGV0ZWN0aW9uIG9mIGZvY3VzIG91dHNpZGUgdGhlIGRpYWxvZyBhcmVhIHRvIHRyaWdnZXIgYHByb3BzLm9uQ2xvc2VgXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZU9uT3V0c2lkZUZvY3VzOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZW5hYmxlIGRldGVjdGlvbiBvZiBzY3JvbGwgYW5kIG1vdXNld2hlZWwgZXZlbnRzIG91dHNpZGUgdGhlIGRpYWxvZyBhcmVhIHRvIHRyaWdnZXIgYHByb3BzLm9uQ2xvc2VgXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZU9uT3V0c2lkZVNjcm9sbDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRleHQsIFJlYWN0RWxlbWVudHMsIGV0Yy4gY29tcHJpc2luZyB0aGUgXCJmb290ZXJcIiBhcmVhIG9mIHRoZSBkaWFsb2csIGUuZy4gY29uZmlybS9jYW5jZWwgYnV0dG9uc1xuICAgICAgICAgKi9cbiAgICAgICAgZm9vdGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItZGlhbG9nLWZvb3RlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgZm9vdGVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRleHQsIFJlYWN0RWxlbWVudHMsIGV0Yy4gdG8gcmVwcmVzZW50IHRoZSBcInRpdGxlIGJhclwiIGFyZWEgb2YgdGhlIGRpYWxvZ1xuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItZGlhbG9nLWhlYWRlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgY3VzdG9tIGV2ZW50IGhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZGlhbG9nIHNob3VsZCBiZSB1bnJlbmRlcmVkIGJ5IGl0cyBwYXJlbnQ7IHRoZSBldmVudCBvY2N1cnMgaWYgb25lIG9yIG1vcmUgb2YgdGhlIGBjbG9zZU9uYCBwcm9wcyAoYGNsb3NlT25Fc2NLZXlgLCBgY2xvc2VPbk91dHNpZGVDbGlja2AsIGV0Yy4pIGFyZSBwYXNzZWQgYXMgYHRydWVgIGFuZCB0aGUgZGlzbWlzc2FsIGNyaXRlcmlhIGFyZSBzYXRpc2ZpZWRcbiAgICAgICAgICovXG4gICAgICAgIG9uQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1kaWFsb2ctd3JhcHBlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgd3JhcHBlclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGFmdGVyOiBudWxsLFxuICAgICAgICBiZWZvcmU6IG51bGwsXG4gICAgICAgIGJvZHlQcm9wczoge30sXG4gICAgICAgIGNhcHR1cmVGb2N1czogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGNsb3NlT25Fc2NLZXk6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uT3V0c2lkZUNsaWNrOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbk91dHNpZGVGb2N1czogZmFsc2UsXG4gICAgICAgIGNsb3NlT25PdXRzaWRlU2Nyb2xsOiBmYWxzZSxcbiAgICAgICAgZm9vdGVyOiBudWxsLFxuICAgICAgICBmb290ZXJQcm9wczoge30sXG4gICAgICAgIGhlYWRlcjogbnVsbCxcbiAgICAgICAgaGVhZGVyUHJvcHM6IHt9LFxuICAgICAgICBvbkNsb3NlOiBub29wLFxuICAgICAgICB3cmFwcGVyUHJvcHM6IHt9LFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhEaWFsb2cuZGVmYXVsdFByb3BzKVxuXG4gICAgbW91bnRlZCA9IGZhbHNlXG5cbiAgICAvLyBmYWxsYmFja3MgaWYgb25lIGlzbid0IHBhc3NlZFxuICAgIHV1aWRIZWFkZXIgPSB1dWlkKClcbiAgICB1dWlkQm9keSA9IHV1aWQoKVxuXG4gICAgaXNQYXJ0T2ZEaWFsb2cobm9kZSkge1xuICAgICAgICBpZiAoIW5vZGUgfHwgbm9kZSA9PT0gd2luZG93KSB7IHJldHVybiBmYWxzZTsgfVxuXG4gICAgICAgIGNvbnN0IHJvb3RzID0gW3RoaXMuJHdyYXBwZXJdLmNvbmNhdChcbiAgICAgICAgICAgIHRvQXJyYXkuY2FsbChcbiAgICAgICAgICAgICAgICB0aGlzLiR3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoYFske1BPUlRBTF9EQVRBX0FUVFJJQlVURX1dYClcbiAgICAgICAgICAgICkubWFwKChkb20pID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRvbS5nZXRBdHRyaWJ1dGUoUE9SVEFMX0RBVEFfQVRUUklCVVRFKSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGUubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFID8gbm9kZS5wYXJlbnROb2RlIDogbm9kZTtcblxuICAgICAgICByZXR1cm4gcm9vdHMuc29tZSgoZG9tKSA9PiBkb20uY29udGFpbnMoZWxlbWVudCkpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU91dHNpZGVDbGljaywgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHRoaXMuaGFuZGxlT3V0c2lkZUNsaWNrLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5oYW5kbGVGb2N1cywgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZU91dHNpZGVTY3JvbGxXaGVlbCwgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuaGFuZGxlT3V0c2lkZVNjcm9sbFdoZWVsLCB0cnVlKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYXB0dXJlRm9jdXMgJiYgIXRoaXMuaXNQYXJ0T2ZEaWFsb2coZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlT3V0c2lkZUNsaWNrLCB0cnVlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2ssIHRydWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzLCB0cnVlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlT3V0c2lkZVNjcm9sbFdoZWVsLCB0cnVlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5oYW5kbGVPdXRzaWRlU2Nyb2xsV2hlZWwsIHRydWUpO1xuICAgIH1cblxuICAgIGhhbmRsZUZvY3VzID0gKG5hdGl2ZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5jYXB0dXJlRm9jdXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmNsb3NlT25PdXRzaWRlRm9jdXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNQYXJ0T2ZEaWFsb2cobmF0aXZlRXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQodGhpcy5wcm9wcy5vbkNsb3NlLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGV4cGxpY2l0T3JpZ2luYWxUYXJnZXQgaXMgZm9yIEZpcmVmb3gsIGFzIGl0IGRvZXNuJ3Qgc3VwcG9ydCByZWxhdGVkVGFyZ2V0XG4gICAgICAgIGxldCBwcmV2aW91cyA9IG5hdGl2ZUV2ZW50LmV4cGxpY2l0T3JpZ2luYWxUYXJnZXQgfHwgbmF0aXZlRXZlbnQucmVsYXRlZFRhcmdldDtcblxuICAgICAgICBpZiAoICAgdGhpcy5pc1BhcnRPZkRpYWxvZyhwcmV2aW91cylcbiAgICAgICAgICAgICYmICF0aGlzLmlzUGFydE9mRGlhbG9nKG5hdGl2ZUV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICAgIG5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBwcmV2aW91cy5mb2N1cygpOyAvLyByZXN0b3JlIGZvY3VzXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNsb3NlT25Fc2NLZXkgJiYgZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhpcy5wcm9wcy5vbkNsb3NlLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMub25LZXlEb3duKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbktleURvd24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlT3V0c2lkZUNsaWNrID0gKG5hdGl2ZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNsb3NlT25PdXRzaWRlQ2xpY2sgJiYgIXRoaXMuaXNQYXJ0T2ZEaWFsb2cobmF0aXZlRXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhpcy5wcm9wcy5vbkNsb3NlLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU91dHNpZGVTY3JvbGxXaGVlbCA9IChuYXRpdmVFdmVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5jbG9zZU9uT3V0c2lkZVNjcm9sbCAmJiAhdGhpcy5pc1BhcnRPZkRpYWxvZyhuYXRpdmVFdmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnByb3BzLm9uQ2xvc2UsIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyQm9keSgpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5ib2R5UHJvcHN9XG4gICAgICAgICAgICAgICAgaWQ9e3RoaXMucHJvcHMuYm9keVByb3BzLmlkIHx8IHRoaXMudXVpZEJvZHl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1kaWFsb2ctYm9keScsIHRoaXMucHJvcHMuYm9keVByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyRm9vdGVyKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5mb290ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGZvb3RlclxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5mb290ZXJQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1kaWFsb2ctZm9vdGVyJywgdGhpcy5wcm9wcy5mb290ZXJQcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuZm9vdGVyfVxuICAgICAgICAgICAgICAgIDwvZm9vdGVyPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckhlYWRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaGVhZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuaGVhZGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmhlYWRlclByb3BzLmlkIHx8IHRoaXMudXVpZEhlYWRlcn1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1kaWFsb2ctaGVhZGVyJywgdGhpcy5wcm9wcy5oZWFkZXJQcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaGVhZGVyfVxuICAgICAgICAgICAgICAgIDwvaGVhZGVyPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckZvY3VzQm91bmRhcnkoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNhcHR1cmVGb2N1cykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYi1vZmZzY3JlZW4nIHRhYkluZGV4PScwJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+Jm5ic3A7PC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSAvLyB1c2VkIHRvIGxvY2sgZm9jdXMgaW50byBhIHBhcnRpY3VsYXIgc3Vic2V0IG9mIERPTVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLndyYXBwZXJQcm9wc31cbiAgICAgICAgICAgICAgICByZWY9eyhub2RlKSA9PiAodGhpcy4kd3JhcHBlciA9IG5vZGUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItZGlhbG9nLXdyYXBwZXInLCB0aGlzLnByb3BzLndyYXBwZXJQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIHRhYkluZGV4PScwJz5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJGb2N1c0JvdW5kYXJ5KCl9XG5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5iZWZvcmV9XG5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIERpYWxvZy5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgICAgICByZWY9eyhub2RlKSA9PiAodGhpcy4kZGlhbG9nID0gbm9kZSl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItZGlhbG9nJywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgICAgcm9sZT0nZGlhbG9nJ1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsbGVkYnk9e3RoaXMudXVpZEhlYWRlcn1cbiAgICAgICAgICAgICAgICAgICAgYXJpYS1kZXNjcmliZWRieT17dGhpcy51dWlkQm9keX1cbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9JzAnPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJIZWFkZXIoKX1cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyQm9keSgpfVxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJGb290ZXIoKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmFmdGVyfVxuXG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRm9jdXNCb3VuZGFyeSgpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7ZmluZERPTU5vZGV9IGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuY29uc3QgaW5zdGFuY2VzID0gW107XG5cbmZ1bmN0aW9uIHRvSShzdHJpbmdOdW1iZXIpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoc3RyaW5nTnVtYmVyLCAxMCk7XG59XG5cbmZ1bmN0aW9uIHJlc2NhbGUoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBub2RlID0gZmluZERPTU5vZGUoaW5zdGFuY2UpO1xuICAgIGNvbnN0IGNvbnRhaW5lckJveCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUucGFyZW50Tm9kZSk7XG4gICAgY29uc3QgZm9udFNpemUgPSB0b0kod2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSkuZm9udFNpemUpO1xuXG4gICAgbGV0IGNvbnRhaW5lckhlaWdodCA9IHRvSShjb250YWluZXJCb3guaGVpZ2h0KTtcbiAgICBsZXQgY29udGFpbmVyV2lkdGggPSB0b0koY29udGFpbmVyQm94LndpZHRoKTtcblxuICAgIC8vIG5lZWQgdG8gYWNjb3VudCBmb3IgcGFkZGluZ1xuICAgIGlmIChjb250YWluZXJCb3guYm94U2l6aW5nID09PSAnYm9yZGVyLWJveCcgfHwgY29udGFpbmVyQm94LmJveFNpemluZyA9PT0gJ3BhZGRpbmctYm94Jykge1xuICAgICAgICBjb250YWluZXJIZWlnaHQgLT0gdG9JKGNvbnRhaW5lckJveC5wYWRkaW5nVG9wKSArIHRvSShjb250YWluZXJCb3gucGFkZGluZ0JvdHRvbSk7XG4gICAgICAgIGNvbnRhaW5lcldpZHRoIC09IHRvSShjb250YWluZXJCb3gucGFkZGluZ0xlZnQpICsgdG9JKGNvbnRhaW5lckJveC5wYWRkaW5nUmlnaHQpO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdGltaXplRm9ySGVpZ2h0ID0gTWF0aC5mbG9vcigoZm9udFNpemUgLyBub2RlLm9mZnNldEhlaWdodCkgKiBjb250YWluZXJIZWlnaHQpO1xuICAgIGNvbnN0IG9wdGltaXplRm9yV2lkdGggPSBNYXRoLmZsb29yKChmb250U2l6ZSAvIG5vZGUub2Zmc2V0V2lkdGgpICogY29udGFpbmVyV2lkdGgpO1xuXG4gICAgLy8gdGhlIHx8IDEgaXMgYSBmYWxsYmFjayB0byBwcmV2ZW50IGZvbnRTaXplIGZyb20gYmVpbmcgc2V0IHRvIHplcm8sIHdoaWNoIGZ1YmFycyB0aGluZ3NcbiAgICBub2RlLnN0eWxlLmZvbnRTaXplID0gKE1hdGgubWluKGluc3RhbmNlLnByb3BzLm1heEZvbnRTaXplLCBvcHRpbWl6ZUZvckhlaWdodCwgb3B0aW1pemVGb3JXaWR0aCkgfHwgMSkgKyAncHgnO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVXaW5kb3dSZXNpemUoKSB7XG4gICAgaW5zdGFuY2VzLmZvckVhY2goKGluc3RhbmNlKSA9PiByZXNjYWxlKGluc3RhbmNlKSk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICBpZiAoaW5zdGFuY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlV2luZG93UmVzaXplLCB0cnVlKTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZXMucHVzaChpbnN0YW5jZSk7XG59XG5cbmZ1bmN0aW9uIHVucmVnaXN0ZXJJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgIGluc3RhbmNlcy5zcGxpY2UoaW5zdGFuY2VzLmluZGV4T2YoaW5zdGFuY2UpLCAxKTtcblxuICAgIGlmIChpbnN0YW5jZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVXaW5kb3dSZXNpemUsIHRydWUpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml0dGVkVGV4dCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICBdKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IHZhbGlkIEhUTUwgdGFnIG5hbWUgb3IgYSBSZWFjdCBjb21wb25lbnQgZmFjdG9yeSwgYW55dGhpbmcgdGhhdCBjYW4gYmUgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBgUmVhY3QuY3JlYXRlRWxlbWVudGBcbiAgICAgICAgICovXG4gICAgICAgIGNvbXBvbmVudDogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbiB1cHBlciBib3VuZCAoaW4gcGl4ZWxzKSBmb3IgaG93IGxhcmdlIHRoZSB0ZXh0IGlzIGFsbG93ZWQgdG8gZ3Jvd1xuICAgICAgICAgKi9cbiAgICAgICAgbWF4Rm9udFNpemU6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGNvbXBvbmVudDogJ3NwYW4nLFxuICAgICAgICBtYXhGb250U2l6ZTogTnVtYmVyLk1BWF9WQUxVRSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoRml0dGVkVGV4dC5kZWZhdWx0UHJvcHMpXG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgcmVzY2FsZSh0aGlzKTtcblxuICAgICAgICAvLyB0aGVyZSBhcmUgbGlrZWx5IHRvIGJlIG11bHRpcGxlIGluc3RhbmNlcyBvZiB0aGlzIGNvbXBvbmVudCBvbiBhIHBhZ2UsIHNvIGl0IG1ha2VzIHNlbnNlIHRvIGp1c3QgdXNlXG4gICAgICAgIC8vIGEgc2hhcmVkIGdsb2JhbCByZXNpemUgbGlzdGVuZXIgaW5zdGVhZCBvZiBlYWNoIGNvbXBvbmVudCBoYXZpbmcgaXRzIG93blxuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgcmVzY2FsZSh0aGlzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgdW5yZWdpc3Rlckluc3RhbmNlKHRoaXMpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0aGlzLnByb3BzLmNvbXBvbmVudFxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIEZpdHRlZFRleHQuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXRleHQnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgPC90aGlzLnByb3BzLmNvbXBvbmVudD5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2UgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgc3RhdHVzID0ge1xuICAgICAgICBMT0FESU5HOiAnTE9BRElORycsXG4gICAgICAgIExPQURFRDogJ0xPQURFRCcsXG4gICAgICAgIEVSUk9SOiAnRVJST1InLFxuICAgIH1cblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhIHdyaXR0ZW4gZGVzY3JpcHRpb24gb2YgdGhlIGltYWdlIGZvciBzZWFyY2ggZW5naW5lcywgaG92ZXJ0ZXh0IGFuZCB0aG9zZSB1c2luZyBhY2Nlc3NpYmlsaXR5IHRlY2hub2xvZ2llczsgYXBwbGllZCB0byB0aGUgYC5iLWltYWdlYCBhcyB0aGUgSFRNTCBhdHRyaWJ1dGVzIGBhbHRgIG9yIGB0aXRsZWAsIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiByZW5kZXJlZCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBhbHQ6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVtaXRzIHRoZSBpbWFnZSBhcyBhIGA8ZGl2PmAgd2l0aCBgYmFja2dyb3VuZC1pbWFnZWAgY3NzIHByb3BlcnR5IHNldCBpbnN0ZWFkIG9mIGA8aW1nPmBcbiAgICAgICAgICovXG4gICAgICAgIGRpc3BsYXlBc0JhY2tncm91bmRJbWFnZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLWltYWdlYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBpbWFnZVByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhIHZhbGlkIHBhdGggdG8gdGhlIGRlc2lyZWQgaW1hZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNyYzogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1pbWFnZS1zdGF0dXNgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIHN0YXR1c1Byb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGFsdDogbnVsbCxcbiAgICAgICAgZGlzcGxheUFzQmFja2dyb3VuZEltYWdlOiBmYWxzZSxcbiAgICAgICAgaW1hZ2VQcm9wczoge30sXG4gICAgICAgIHNyYzogJ2Fib3V0OmJsYW5rJyxcbiAgICAgICAgc3RhdHVzUHJvcHM6IHt9LFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhJbWFnZS5kZWZhdWx0UHJvcHMpXG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiBJbWFnZS5zdGF0dXMuTE9BRElORyxcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICBpZiAobmV4dFByb3BzLnNyYyAhPT0gdGhpcy5wcm9wcy5zcmMpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRQcmVsb2FkZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3N0YXR1czogSW1hZ2Uuc3RhdHVzLkxPQURJTkd9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLnByZWxvYWQoKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIHRoaXMucHJlbG9hZCgpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB0aGlzLnJlc2V0UHJlbG9hZGVyKCk7XG4gICAgfVxuXG4gICAgcmVzZXRQcmVsb2FkZXIoKSB7XG4gICAgICAgIHRoaXMubG9hZGVyLm9ubG9hZCA9IG51bGw7XG4gICAgICAgIHRoaXMubG9hZGVyLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLmxvYWRlciA9IG51bGw7XG4gICAgfVxuXG4gICAgcHJlbG9hZCgpIHtcbiAgICAgICAgaWYgKHRoaXMubG9hZGVyKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHRoaXMubG9hZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cbiAgICAgICAgdGhpcy5sb2FkZXIub25sb2FkID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSh7c3RhdHVzOiBJbWFnZS5zdGF0dXMuTE9BREVEfSk7XG4gICAgICAgIHRoaXMubG9hZGVyLm9uZXJyb3IgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHtzdGF0dXM6IEltYWdlLnN0YXR1cy5FUlJPUn0pO1xuXG4gICAgICAgIHRoaXMubG9hZGVyLnNyYyA9IHRoaXMucHJvcHMuc3JjO1xuICAgIH1cblxuICAgIHJlbmRlckltYWdlKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5kaXNwbGF5QXNCYWNrZ3JvdW5kSW1hZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5pbWFnZVByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2ltYWdlJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWltYWdlJywgdGhpcy5wcm9wcy5pbWFnZVByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aGlzLnByb3BzLmFsdH1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvcHMuaW1hZ2VQcm9wcy5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybCgke3RoaXMucHJvcHMuc3JjfSlgLFxuICAgICAgICAgICAgICAgICAgICB9fSAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuaW1hZ2VQcm9wc31cbiAgICAgICAgICAgICAgICByZWY9J2ltYWdlJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItaW1hZ2UnLCB0aGlzLnByb3BzLmltYWdlUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICBzcmM9e3RoaXMucHJvcHMuc3JjfVxuICAgICAgICAgICAgICAgIGFsdD17dGhpcy5wcm9wcy5hbHR9XG4gICAgICAgICAgICAgICAgb25Mb2FkPXtub29wfVxuICAgICAgICAgICAgICAgIG9uRXJyb3I9e25vb3B9IC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiB7Li4udGhpcy5wcm9wcy5zdGF0dXNQcm9wc31cbiAgICAgICAgICAgICAgICAgcmVmPSdzdGF0dXMnXG4gICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItaW1hZ2Utc3RhdHVzJywgdGhpcy5wcm9wcy5zdGF0dXNQcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2ItaW1hZ2UtbG9hZGluZyc6IHRoaXMuc3RhdGUuc3RhdHVzID09PSBJbWFnZS5zdGF0dXMuTE9BRElORyxcbiAgICAgICAgICAgICAgICAgICAgJ2ItaW1hZ2UtbG9hZGVkJzogdGhpcy5zdGF0ZS5zdGF0dXMgPT09IEltYWdlLnN0YXR1cy5MT0FERUQsXG4gICAgICAgICAgICAgICAgICAgICdiLWltYWdlLWVycm9yJzogdGhpcy5zdGF0ZS5zdGF0dXMgPT09IEltYWdlLnN0YXR1cy5FUlJPUixcbiAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgIHJvbGU9J3ByZXNlbnRhdGlvbicgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgSW1hZ2UuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1pbWFnZS13cmFwcGVyJywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJJbWFnZSgpfVxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclN0YXR1cygpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJleHBvcnQgZGVmYXVsdCAodGVzdCkgPT4gdHlwZW9mIHRlc3QgPT09ICdzdHJpbmcnO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgaXNTdHJpbmcgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLXN0cmluZy9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogdHJpZ2dlcnMgdGhlIHBsYWNlaG9sZGVyIHRvIGRpc2FwcGVhciB3aGVuIHRoZSBpbnB1dCBmaWVsZCBpcyBmb2N1c2VkLCByZWFwcGVhcnMgd2hlbiB0aGUgdXNlciBoYXMgdGFiYmVkIGF3YXkgb3IgZm9jdXMgaXMgbW92ZWRcbiAgICAgICAgICovXG4gICAgICAgIGhpZGVQbGFjZWhvbGRlck9uRm9jdXM6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBwcm9wcyB0byBiZSBwYXNzZWQgdGhyb3VnaCB0byB0aGUgaW5wdXQgbm9kZSwgYC5iLXRleHR1YWwtaW5wdXRgOyB0aGlzIGluY2x1ZGVzIHRoZSBzdGFuZGFyZCBzZXQgb2YgUmVhY3QgaW5wdXQgcHJvcHMgbGlrZSBgZGVmYXVsdFZhbHVlYCwgYHZhbHVlYCwgYG5hbWVgLCBgcGxhY2Vob2xkZXJgLCBgYXV0b0ZvY3VzYCwgZXRjLlxuICAgICAgICAgKi9cbiAgICAgICAgaW5wdXRQcm9wczogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICAgIG9uQmx1cjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgICAgICBvbkZvY3VzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICB9KSxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBoaWRlUGxhY2Vob2xkZXJPbkZvY3VzOiB0cnVlLFxuICAgICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgIH0sXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKElucHV0LmRlZmF1bHRQcm9wcylcblxuICAgIHN0YXRlID0ge1xuICAgICAgICBpbnB1dDogJycsXG4gICAgICAgIGlzQ29udHJvbGxlZDogaXNTdHJpbmcodGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlKSxcbiAgICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzQ29udHJvbGxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0SW5wdXRWYWx1ZSh0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5kZWZhdWx0VmFsdWUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcHMuaW5wdXRQcm9wcy52YWx1ZSAhPT0gdGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUobmV4dFByb3BzLmlucHV0UHJvcHMudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0SW5wdXRWYWx1ZSA9ICh2YWx1ZSA9ICcnKSA9PiB0aGlzLnNldFN0YXRlKHtpbnB1dDogdmFsdWV9KVxuXG4gICAgZ2V0VmFsdWUgPSAoKSA9PiB0aGlzLnJlZnMuZmllbGQudmFsdWVcblxuICAgIHNldFZhbHVlKG5leHRWYWx1ZSkge1xuICAgICAgICB0aGlzLnNldElucHV0VmFsdWUobmV4dFZhbHVlKTtcbiAgICAgICAgdGhpcy5yZWZzLmZpZWxkLnZhbHVlID0gbmV4dFZhbHVlO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzQ29udHJvbGxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gc2ltdWxhdGUgaW5wdXQgY2hhbmdlIGV2ZW50IGZsb3dcbiAgICAgICAgICAgIHRoaXMucmVmcy5maWVsZC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnLCB7YnViYmxlczogdHJ1ZX0pKTtcbiAgICAgICAgICAgIHRoaXMucmVmcy5maWVsZC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2hhbmdlJywge2J1YmJsZXM6IHRydWV9KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVCbHVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzRm9jdXNlZDogZmFsc2V9KTtcblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25CbHVyKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQmx1cihldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVGb2N1cyA9IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0ZvY3VzZWQ6IHRydWV9KTtcblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25Gb2N1cykgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkZvY3VzKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgICAvLyBmb3IgXCJjb250cm9sbGVkXCIgc2NlbmFyaW9zLCB1cGRhdGVzIHRvIHRoZSBjYWNoZWQgaW5wdXQgdGV4dCBzaG91bGQgY29tZVxuICAgICAgICAvLyBleGNsdXNpdmVseSB2aWEgcHJvcHMgKGNXUlApIHNvIGl0IGV4YWN0bHkgbWlycm9ycyB0aGUgY3VycmVudCBhcHBsaWNhdGlvblxuICAgICAgICAvLyBzdGF0ZSwgb3RoZXJ3aXNlIGEgcmUtcmVuZGVyIHdpbGwgb2NjdXIgYmVmb3JlIHRoZSBuZXcgdGV4dCBoYXMgY29tcGxldGVkIGl0c1xuICAgICAgICAvLyBmZWVkYmFjayBsb29wIGFuZCB0aGUgY3Vyc29yIHBvc2l0aW9uIGlzIGxvc3RcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb250cm9sbGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UpID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0UGxhY2Vob2xkZXJUZXh0KCkge1xuICAgICAgICBjb25zdCBpc05vbkVtcHR5ID0gdGhpcy5zdGF0ZS5pbnB1dCAhPT0gJyc7XG4gICAgICAgIGNvbnN0IHNob3VsZFNob3dQbGFjZWhvbGRlciA9ICAgdGhpcy5wcm9wcy5oaWRlUGxhY2Vob2xkZXJPbkZvY3VzID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnN0YXRlLmlzRm9jdXNlZCA9PT0gZmFsc2UgJiYgaXNOb25FbXB0eSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGlzTm9uRW1wdHkgPT09IGZhbHNlO1xuXG4gICAgICAgIHJldHVybiBzaG91bGRTaG93UGxhY2Vob2xkZXIgPyB0aGlzLnByb3BzLmlucHV0UHJvcHMucGxhY2Vob2xkZXIgOiAnJztcbiAgICB9XG5cbiAgICByZW5kZXJQbGFjZWhvbGRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgcmVmPSdwbGFjZWhvbGRlcicgY2xhc3NOYW1lPSdiLWlucHV0LXBsYWNlaG9sZGVyIGItaW5wdXQnPlxuICAgICAgICAgICAgICAgIHt0aGlzLmdldFBsYWNlaG9sZGVyVGV4dCgpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHByb3BzLCBJbnB1dC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWlucHV0LXdyYXBwZXInLCBwcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aGlzLmdldFBsYWNlaG9sZGVyVGV4dCgpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJQbGFjZWhvbGRlcigpfVxuXG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHsuLi5wcm9wcy5pbnB1dFByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2ZpZWxkJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWlucHV0JywgcHJvcHMuaW5wdXRQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17bnVsbH1cbiAgICAgICAgICAgICAgICAgICAgb25CbHVyPXt0aGlzLmhhbmRsZUJsdXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuaGFuZGxlRm9jdXN9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBSZXR1cm5zIGFuIGludGVyc2VjdGlvbiBvZiB0aGUgZmlyc3QgYXJndW1lbnQgYWdhaW5zdCB0aGUgc2Vjb25kIGFyZ3VtZW50J3Mga2V5cy5cbiAqIGUuZy4gdXNlZCBpbiBUeXBlYWhlYWQgdG8gaWRlbnRpZnkgd2hpY2ggcHJvcHMgYXJlIG1lYW50IGZvciBJbnB1dFxuICpcbiAqIEBwYXJhbSAge09iamVjdH0gb2JqMVxuICogQHBhcmFtICB7T2JqZWN0fSBvYmoyXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSBrZXk6IHZhbHVlcyBpbiBvYmoxIG1hdGNoaW5nIHRoZSBrZXlzIHN1cHBsaWVkIGluIG9iajJcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24ob2JqMSwgb2JqMikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmoyKS5yZWR1Y2UoKGNoaWxkUHJvcHMsIGtleSkgPT4ge1xuICAgICAgICBpZiAoa2V5IGluIG9iajEpIHtcbiAgICAgICAgICAgIGNoaWxkUHJvcHNba2V5XSA9IG9iajFba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGlsZFByb3BzO1xuXG4gICAgfSwge30pO1xufVxuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBEaWFsb2cgZnJvbSAnLi4vYm91bmRsZXNzLWRpYWxvZy9pbmRleCc7XG5pbXBvcnQgUG9ydGFsIGZyb20gJy4uL2JvdW5kbGVzcy1wb3J0YWwvaW5kZXgnO1xuaW1wb3J0IGV4dHJhY3RDaGlsZFByb3BzIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vYmplY3QtaW50ZXJzZWN0aW9uL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuXG4vKipcbiAqIF9fTW9kYWwgc3VwcG9ydHMgYWxsIFtEaWFsb2cgcHJvcHNdKGJvdW5kbGVzcy1kaWFsb2cvUkVBRE1FLm1kI2F2YWlsYWJsZS1wcm9wcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1tb2RhbGAgbm9kZV9fXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLi4uRGlhbG9nLnByb3BUeXBlcyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItbW9kYWwtbWFza2Agbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgbWFza1Byb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1tb2RhbGAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgbW9kYWxQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55L2FsbCBzdXBwb3J0ZWQgW1BvcnRhbCBwcm9wc10oYm91bmRsZXNzLXBvcnRhbC9SRUFETUUubWQpXG4gICAgICAgICAqL1xuICAgICAgICBwb3J0YWxQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICAuLi5EaWFsb2cuZGVmYXVsdFByb3BzLFxuICAgICAgICBjYXB0dXJlRm9jdXM6IHRydWUsXG4gICAgICAgIG1hc2tQcm9wczoge30sXG4gICAgICAgIG1vZGFsUHJvcHM6IHt9LFxuICAgICAgICBwb3J0YWxQcm9wczoge30sXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKE1vZGFsLmRlZmF1bHRQcm9wcylcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge3Byb3BzfSA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxQb3J0YWwgey4uLnByb3BzLnBvcnRhbFByb3BzfT5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi5vbWl0KHByb3BzLCBNb2RhbC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgICAgICByZWY9eyhub2RlKSA9PiAodGhpcy4kbW9kYWwgPSBub2RlKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1tb2RhbC13cmFwcGVyJywgcHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5wcm9wcy5tYXNrUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLW1vZGFsLW1hc2snLCBwcm9wcy5tYXNrUHJvcHMuY2xhc3NOYW1lKX0gLz5cblxuICAgICAgICAgICAgICAgICAgICA8RGlhbG9nXG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4uZXh0cmFjdENoaWxkUHJvcHMocHJvcHMsIERpYWxvZy5kZWZhdWx0UHJvcHMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzLm1vZGFsUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLW1vZGFsJywgcHJvcHMubW9kYWxQcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2c+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L1BvcnRhbD5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwLFxuICAgIE1BWF9JTlRFR0VSID0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDgsXG4gICAgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBpbnRlZ2VyLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvblxuICogW2BOdW1iZXIuaXNJbnRlZ2VyYF0oaHR0cHM6Ly9tZG4uaW8vTnVtYmVyL2lzSW50ZWdlcikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gaW50ZWdlciwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzSW50ZWdlcigzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0ludGVnZXIoSW5maW5pdHkpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzSW50ZWdlcignMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPT0gdG9JbnRlZ2VyKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBmaW5pdGUgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4xMi4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9GaW5pdGUoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9GaW5pdGUoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvRmluaXRlKEluZmluaXR5KTtcbiAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG4gKlxuICogXy50b0Zpbml0ZSgnMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9GaW5pdGUodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogMDtcbiAgfVxuICB2YWx1ZSA9IHRvTnVtYmVyKHZhbHVlKTtcbiAgaWYgKHZhbHVlID09PSBJTkZJTklUWSB8fCB2YWx1ZSA9PT0gLUlORklOSVRZKSB7XG4gICAgdmFyIHNpZ24gPSAodmFsdWUgPCAwID8gLTEgOiAxKTtcbiAgICByZXR1cm4gc2lnbiAqIE1BWF9JTlRFR0VSO1xuICB9XG4gIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyB2YWx1ZSA6IDA7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBpbnRlZ2VyLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvSW50ZWdlcmBdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2ludGVnZXIpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9JbnRlZ2VyKDMuMik7XG4gKiAvLyA9PiAzXG4gKlxuICogXy50b0ludGVnZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiAwXG4gKlxuICogXy50b0ludGVnZXIoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvSW50ZWdlcignMy4yJyk7XG4gKiAvLyA9PiAzXG4gKi9cbmZ1bmN0aW9uIHRvSW50ZWdlcih2YWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gdG9GaW5pdGUodmFsdWUpLFxuICAgICAgcmVtYWluZGVyID0gcmVzdWx0ICUgMTtcblxuICByZXR1cm4gcmVzdWx0ID09PSByZXN1bHQgPyAocmVtYWluZGVyID8gcmVzdWx0IC0gcmVtYWluZGVyIDogcmVzdWx0KSA6IDA7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0ludGVnZXI7XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtmaW5kRE9NTm9kZX0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi9ib3VuZGxlc3MtYnV0dG9uL2luZGV4JztcbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VnbWVudGVkQ29udHJvbCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIGNoaWxkIGVsZW1lbnQgYmVjb21lcyBzZWxlY3RlZDsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uT3B0aW9uU2VsZWN0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgYmFja2luZyBkYXRhIGZvciB0aGUgc2VnbWVudHMgb2YgdGhlIHJlbmRlcmVkIGNvbnRyb2xcblxuICAgICAgICAgKiA+IF9fVmFsaWRhdGlvbiBDcml0ZXJpYTpfX1xuICAgICAgICAgKiA+XG4gICAgICAgICAqID4gMS4gVGhlcmUgbXVzdCBiZSBhdCBsZWFzdCB0d28gYG9wdGlvbnNgIChhIHNlZ21lbnRlZCBjb250cm9sIHdpdGggb25lIGJ1dHRvbiBpcyBub3QgYWxsb3dlZClcbiAgICAgICAgICogPiAxLiBUaGVyZSBtdXN0IG9ubHkgYmUgb25lIGBvcHRpb25gIHdob3NlIGBzZWxlY3RlZGAgYXR0cmlidXRlIGlzIGB0cnVlYCAobXVsdGlwbGUgc2VsZWN0aW9ucyBhcmUgbm90IGFsbG93ZWQpXG4gICAgICAgICAqID4gMS4gRWFjaCBgdmFsdWVgIGF0dHJpYnV0ZSBtdXN0IGJlIHVuaXF1ZSBhY3Jvc3MgdGhlIHNldCBvZiBgb3B0aW9uc2BcblxuICAgICAgICAgKiAtIF9fb3B0aW9uc1tdLnNlbGVjdGVkX18gYEJvb2xlYW5gXG4gICAgICAgICAqIC0gX19vcHRpb25zW10udmFsdWVfXyBgU3RyaW5nYFxuICAgICAgICAgKiAtIF9fb3B0aW9uc1tdLmNvbnRlbnRfXyBgKmBcbiAgICAgICAgICAgKiB0aGUgY29udGVudCB0byBnbyBpbnNpZGUgdGhlIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9uczogZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25zKHByb3BzKSB7XG4gICAgICAgICAgICBpZiAocHJvcHMub3B0aW9ucy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYXQgbGVhc3QgdHdvIG9wdGlvbnMuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1pc3NpbmdTZWxlY3RlZCA9IHByb3BzLm9wdGlvbnMuc29tZSgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoJ3NlbGVjdGVkJyBpbiBvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAobWlzc2luZ1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYSBgc2VsZWN0ZWRgIHByb3AgZm9yIGVhY2ggb3B0aW9uLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc2VlblNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZVNlbGVjdGVkID0gcHJvcHMub3B0aW9ucy5zb21lKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWVuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VlblNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG11bHRpcGxlU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VuY291bnRlcmVkIG11bHRpcGxlIG9wdGlvbnMgd2l0aCBgc2VsZWN0ZWQ6IHRydWVgLiBUaGVyZSBjYW4gYmUgb25seSBvbmUuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9wcy5vcHRpb25zLnNvbWUoKG9wdGlvbikgPT4gdHlwZW9mIG9wdGlvbi52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYSBgdmFsdWVgIHByb3AgZm9yIGVhY2ggb3B0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIG9uT3B0aW9uU2VsZWN0ZWQ6IG5vb3AsXG4gICAgICAgIG9wdGlvbnM6IFtdLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhTZWdtZW50ZWRDb250cm9sLmRlZmF1bHRQcm9wcylcbiAgICBzdGF0aWMgaW50ZXJuYWxDaGlsZEtleXMgPSBbXG4gICAgICAgICdjb250ZW50JyxcbiAgICAgICAgJ3ZhbHVlJyxcbiAgICAgICAgJ3NlbGVjdGVkJyxcbiAgICBdXG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgaW5kZXhPZk9wdGlvbkluRm9jdXM6IG51bGwsXG4gICAgfVxuXG4gICAgY3VycmVudFZhbHVlKCkge1xuICAgICAgICBsZXQgdmFsdWU7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLnNvbWUoKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gb3B0aW9uLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRGb2N1cyhpbmRleCkge1xuICAgICAgICBmaW5kRE9NTm9kZSh0aGlzLnJlZnNbJ29wdGlvbl8kJyArIGluZGV4XSkuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBnZXROZXh0T3B0aW9uSW5kZXgoY3VycmVudE9wdGlvbkluZGV4KSB7XG4gICAgICAgIGxldCBuZXh0ID0gY3VycmVudE9wdGlvbkluZGV4ICsgMTtcblxuICAgICAgICByZXR1cm4gbmV4dCA8IHRoaXMucHJvcHMub3B0aW9ucy5sZW5ndGggPyBuZXh0IDogMDtcbiAgICB9XG5cbiAgICBnZXRQcmV2aW91c09wdGlvbkluZGV4KGN1cnJlbnRPcHRpb25JbmRleCkge1xuICAgICAgICBsZXQgcHJldmlvdXMgPSBjdXJyZW50T3B0aW9uSW5kZXggLSAxO1xuXG4gICAgICAgIHJldHVybiBwcmV2aW91cyA8IDAgPyB0aGlzLnByb3BzLm9wdGlvbnMubGVuZ3RoIC0gMSA6IHByZXZpb3VzO1xuICAgIH1cblxuICAgIGhhbmRsZU9wdGlvbkJsdXIob3B0aW9uLCBldmVudCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pbmRleE9mT3B0aW9uSW5Gb2N1cyA9PT0gdGhpcy5wcm9wcy5vcHRpb25zLmluZGV4T2Yob3B0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aW5kZXhPZk9wdGlvbkluRm9jdXM6IG51bGx9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9wdGlvbi5vbkJsdXIpKSB7XG4gICAgICAgICAgICBvcHRpb24ub25CbHVyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU9wdGlvbkNsaWNrKG9wdGlvbiwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbk9wdGlvblNlbGVjdGVkKG9wdGlvbi52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9uLm9uQ2xpY2spKSB7XG4gICAgICAgICAgICBvcHRpb24ub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVPcHRpb25Gb2N1cyhvcHRpb24sIGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2luZGV4T2ZPcHRpb25JbkZvY3VzOiB0aGlzLnByb3BzLm9wdGlvbnMuaW5kZXhPZihvcHRpb24pfSk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9uLm9uRm9jdXMpKSB7XG4gICAgICAgICAgICBvcHRpb24ub25Gb2N1cyhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleTtcbiAgICAgICAgY29uc3QgYWN0aXZlSXRlbUluZGV4ID0gdGhpcy5zdGF0ZS5pbmRleE9mT3B0aW9uSW5Gb2N1cztcblxuICAgICAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1cyh0aGlzLmdldFByZXZpb3VzT3B0aW9uSW5kZXgoYWN0aXZlSXRlbUluZGV4KSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzKHRoaXMuZ2V0TmV4dE9wdGlvbkluZGV4KGFjdGl2ZUl0ZW1JbmRleCkpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlT3B0aW9uQ2xpY2sodGhpcy5wcm9wcy5vcHRpb25zW2FjdGl2ZUl0ZW1JbmRleF0pO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMub25LZXlEb3duKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbktleURvd24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyT3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMub3B0aW9ucy5tYXAoKGRlZmluaXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgey4uLm9taXQoZGVmaW5pdGlvbiwgU2VnbWVudGVkQ29udHJvbC5pbnRlcm5hbENoaWxkS2V5cyl9XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWNoZWNrZWQ9e1N0cmluZyhkZWZpbml0aW9uLnNlbGVjdGVkKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXsnb3B0aW9uXyQnICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIGtleT17ZGVmaW5pdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1zZWdtZW50ZWQtY29udHJvbC1vcHRpb24nLCBkZWZpbml0aW9uLmNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2Itc2VnbWVudGVkLWNvbnRyb2wtb3B0aW9uLXNlbGVjdGVkJzogZGVmaW5pdGlvbi5zZWxlY3RlZCxcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXtkZWZpbml0aW9uLnNlbGVjdGVkID8gJzAnIDogJy0xJ31cbiAgICAgICAgICAgICAgICAgICAgb25CbHVyPXt0aGlzLmhhbmRsZU9wdGlvbkJsdXIuYmluZCh0aGlzLCBkZWZpbml0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgb25QcmVzc2VkPXt0aGlzLmhhbmRsZU9wdGlvbkNsaWNrLmJpbmQodGhpcywgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuaGFuZGxlT3B0aW9uRm9jdXMuYmluZCh0aGlzLCBkZWZpbml0aW9uKX0+XG4gICAgICAgICAgICAgICAgICAgIHtkZWZpbml0aW9uLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgU2VnbWVudGVkQ29udHJvbC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICByb2xlPSdyYWRpb2dyb3VwJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2Itc2VnbWVudGVkLWNvbnRyb2wnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck9wdGlvbnMoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtmaW5kRE9NTm9kZX0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBpc0ludGVnZXIgZnJvbSAnbG9kYXNoLmlzaW50ZWdlcic7XG5cbmltcG9ydCBTZWdtZW50ZWRDb250cm9sIGZyb20gJy4uL2JvdW5kbGVzcy1zZWdtZW50ZWQtY29udHJvbC9pbmRleCc7XG5pbXBvcnQgQXJyb3dLZXlOYXZpZ2F0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy1hcnJvdy1rZXktbmF2aWdhdGlvbi9pbmRleCc7XG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5pbXBvcnQgdXVpZCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtdXVpZC9pbmRleCc7XG5cbmNvbnN0IGlkZW50aXR5ID0gKHgpID0+IHg7XG5cbi8qKlxuICogQSB1dGlsaXR5IGNvbXBvbmVudCBmb3IgaGFuZGxpbmcgcHJvbWlzZXMgYXMgY2hpbGRyZW4gYW5kIGV2ZW50dWFsbHkgZG9pbmcgc29tZXRoaW5nIHdpdGggdGhlaXIgcmVzb2x2ZWQgcGF5bG9hZC5cbiAqL1xuY2xhc3MgSXRlbSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGNvbnZlcnRUb0pTWEZ1bmM6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICBkYXRhOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICBldmVuOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgaW5kZXg6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIGxvYWRpbmdDb250ZW50OiBQcm9wVHlwZXMubm9kZSxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBjb252ZXJ0VG9KU1hGdW5jOiBub29wLFxuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBldmVuOiB0cnVlLFxuICAgICAgICBpbmRleDogMCxcbiAgICAgICAgbG9hZGluZ0NvbnRlbnQ6IG51bGwsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEl0ZW0uZGVmYXVsdFByb3BzKVxuXG4gICAgbW91bnRlZCA9IGZhbHNlXG4gICAgc3RhdGUgPSB7fVxuXG4gICAgY29udmVydERhdGFUb0pTWE9yV2FpdChwcm9wcyA9IHRoaXMucHJvcHMpIHtcbiAgICAgICAgaWYgKHByb3BzLmRhdGEgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb21wb25lbnQ6IG51bGx9KTtcblxuICAgICAgICAgICAgY29uc3QgY2xvc3VyZVByb21pc2UgPSBwcm9wcy5kYXRhO1xuXG4gICAgICAgICAgICBwcm9wcy5kYXRhLnRoZW4oKHJlc29sdmVkUGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUsIGN1cnJlbnRQcm9wcykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogY3VycmVudFByb3BzLmRhdGEgPT09IGNsb3N1cmVQcm9taXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY3VycmVudFByb3BzLmNvbnZlcnRUb0pTWEZ1bmMocmVzb2x2ZWRQYXlsb2FkLCBjdXJyZW50UHJvcHMuaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc3RhdGUuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSAvLyBvbmx5IHJlcGxhY2UgaWYgd2UncmUgbG9va2luZyBhdCB0aGUgc2FtZSBwcm9taXNlLCBvdGhlcndpc2UgZG8gbm90aGluZ1xuICAgICAgICAgICAgfSwgbm9vcCk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbXBvbmVudDogcHJvcHMuY29udmVydFRvSlNYRnVuYyhwcm9wcy5kYXRhLCBwcm9wcy5pbmRleCl9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSAgICAgICAgICAgICAgICAgeyB0aGlzLmNvbnZlcnREYXRhVG9KU1hPcldhaXQoKTsgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkgICAgICAgICAgICAgICAgICB7IHRoaXMubW91bnRlZCA9IHRydWU7IH1cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykgeyB0aGlzLmNvbnZlcnREYXRhVG9KU1hPcldhaXQobmV4dFByb3BzKTsgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgICAgICAgICAgICAgICB7IHRoaXMubW91bnRlZCA9IGZhbHNlOyB9XG5cbiAgICBnZXRDbGFzc2VzKGV4dHJhQ2xhc3Nlcykge1xuICAgICAgICByZXR1cm4gY3goJ2ItcGFnaW5hdGlvbi1pdGVtJywgZXh0cmFDbGFzc2VzLCB7XG4gICAgICAgICAgICAnYi1wYWdpbmF0aW9uLWl0ZW0tZXZlbic6IHRoaXMucHJvcHMuZXZlbixcbiAgICAgICAgICAgICdiLXBhZ2luYXRpb24taXRlbS1vZGQnOiAhdGhpcy5wcm9wcy5ldmVuLFxuICAgICAgICAgICAgJ2ItcGFnaW5hdGlvbi1pdGVtLWxvYWRpbmcnOiB0aGlzLnN0YXRlLmNvbXBvbmVudCA9PT0gbnVsbCxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jb21wb25lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiB7Li4ub21pdCh0aGlzLnByb3BzLCBJdGVtLmludGVybmFsS2V5cyl9IGNsYXNzTmFtZT17dGhpcy5nZXRDbGFzc2VzKCl9PlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5sb2FkaW5nQ29udGVudH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KHRoaXMuc3RhdGUuY29tcG9uZW50LCB7XG4gICAgICAgICAgICAuLi5vbWl0KHRoaXMucHJvcHMsIEl0ZW0uaW50ZXJuYWxLZXlzKSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5nZXRDbGFzc2VzKHRoaXMuc3RhdGUuY29tcG9uZW50LnByb3BzICYmIHRoaXMuc3RhdGUuY29tcG9uZW50LnByb3BzLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAnZGF0YS1wYWdpbmF0aW9uLWluZGV4JzogdGhpcy5wcm9wcy5pbmRleCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdpbmF0aW9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIGNvbnRyb2xzID0ge1xuICAgICAgICBGSVJTVDogJ0ZJUlNUJyxcbiAgICAgICAgUFJFVklPVVM6ICdQUkVWSU9VUycsXG4gICAgICAgIE5FWFQ6ICdORVhUJyxcbiAgICAgICAgTEFTVDogJ0xBU1QnLFxuICAgIH1cblxuICAgIHN0YXRpYyBwb3NpdGlvbnMgPSB7XG4gICAgICAgIEFCT1ZFOiAnQUJPVkUnLFxuICAgICAgICBCRUxPVzogJ0JFTE9XJyxcbiAgICAgICAgQk9USDogJ0JPVEgnLFxuICAgIH1cblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhcmJpdHJhcnkgY29udGVudCB0byBiZSByZW5kZXJlZCBhZnRlciB0aGUgaXRlbXMgaW4gdGhlIERPTVxuICAgICAgICAgKi9cbiAgICAgICAgYWZ0ZXI6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhcmJpdHJhcnkgY29udGVudCB0byBiZSByZW5kZXJlZCBiZWZvcmUgdGhlIGl0ZW1zIGluIHRoZSBET01cbiAgICAgICAgICovXG4gICAgICAgIGJlZm9yZTogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFsbG93cyBmb3IgYXJiaXRyYXJ5IGNvbnRlbnQgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgY29udHJvbCBhcmVhXG4gICAgICAgICAqL1xuICAgICAgICBjdXN0b21Db250cm9sQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aXRoIGEgZGVzaXJlZCBpdGVtIGluZGV4IHdoZW4gdGhhdCBpdGVtIGNvbWVzIGludG8gdmlldzsgYWNjZXB0cyBhIGBQcm9taXNlYCBpZiB5b3UgbmVlZCB0byBmZXRjaCB0aGUgcm93IGFzeW5jaHJvbm91c2x5XG4gICAgICAgICAqL1xuICAgICAgICBnZXRJdGVtOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZG9lcyBub3QgcmVuZGVyIHRoZSBwYWdpbmcgY29udHJvbHMgaWYgdGhlIG51bWJlciBvZiBpdGVtcyBzdXBwbGllZCB0byB0aGUgdmlldyBpcyBsZXNzLXRoYW4tb3ItZXF1YWwtdG8gdGhlIG51bWJlciBvZiBpdGVtcyB0byBzaG93IHBlciBwYWdlIHZpYSBgcHJvcHMubnVtSXRlbXNQZXJQYWdlYFxuICAgICAgICAgKi9cbiAgICAgICAgaGlkZVBhZ2VySWZOb3ROZWVkZWQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhIHVuaXF1ZSBuYW1lIGZvciB0aGUgZGF0YXNldCBiZWluZyBjb25zdW1lZDsgcGFzcyBhIGRpZmZlcmVudCBuYW1lIHRvIGNhdXNlIHRoZSB2aWV3IHRvIGZ1bGx5IHJlc2V0IGFuZCBwdWxsIGJyYW5kIG5ldyBkYXRhXG4gICAgICAgICAqL1xuICAgICAgICBpZGVudGlmaWVyOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSAoX29uZS1pbmRleGVkXykgbnVtYmVyIG9mIHRoZSBwYWdlIHRoYXQgc2hvdWxkIGJlIGluaXRpYWxseSBkaXNwbGF5ZWQ7IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdG90YWwgbnVtYmVyIG9mIHBhZ2VzXG4gICAgICAgICAqL1xuICAgICAgICBpbml0aWFsUGFnZTogZnVuY3Rpb24gdmFsaWRhdGVJbml0aWFsUGFnZShwcm9wcykge1xuICAgICAgICAgICAgaWYgKGlzSW50ZWdlcihwcm9wcy5pbml0aWFsUGFnZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignYGluaXRpYWxQYWdlYCBtdXN0IGJlIGFuIGludGVnZXIuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG51bWJlck9mUGFnZXMgPSBNYXRoLmNlaWwocHJvcHMudG90YWxJdGVtcyAvIHByb3BzLm51bUl0ZW1zUGVyUGFnZSk7XG5cbiAgICAgICAgICAgIGlmIChwcm9wcy5pbml0aWFsUGFnZSA8IDEgfHwgcHJvcHMuaW5pdGlhbFBhZ2UgPiBudW1iZXJPZlBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignYGluaXRpYWxQYWdlYCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgJyArIG51bWJlck9mUGFnZXMgKyAnLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbGxvd3MgZm9yIGFyYml0cmFyeSBjb250ZW50IHRvIGJlIHJlbmRlcmVkIGludG8gcGFnaW5hdGlvbiBpdGVtcyBhcyB0aGV5J3JlIGxvYWRpbmcgaWYgdGhlIGJhY2tpbmcgZGF0YSBpcyBhIGBQcm9taXNlYFxuICAgICAgICAgKi9cbiAgICAgICAgaXRlbUxvYWRpbmdDb250ZW50OiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gc3BlY2lmeSBob3cgYW4gaXRlbSBzaG91bGQgYmUgY29udmVydGVkIHRvIEpTWCwgaWYgaXQgaXMgbm90IGFscmVhZHkgcmVuZGVyYWJsZSBieSBSZWFjdFxuICAgICAgICAgKi9cbiAgICAgICAgaXRlbVRvSlNYQ29udmVydGVyRnVuYzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvbnRlbnQgdG8gYmUgZGlzcGxheWVkIGluc2lkZSBvZiB0aGUgXCJGaXJzdCBwYWdlXCIgY29udHJvbCBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIGp1bXBUb0ZpcnN0Q29udHJvbENvbnRlbnQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb250ZW50IHRvIGJlIGRpc3BsYXllZCBpbnNpZGUgb2YgdGhlIFwiTGFzdCBwYWdlXCIgY29udHJvbCBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIGp1bXBUb0xhc3RDb250cm9sQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXBhZ2luYXRpb24taXRlbS1saXN0YCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBsaXN0V3JhcHBlclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb250ZW50IHRvIGJlIGRpc3BsYXllZCBpbnNpZGUgb2YgdGhlIFwiTmV4dCBwYWdlXCIgY29udHJvbCBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIG5leHRQYWdlQ29udHJvbENvbnRlbnQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gYmUgZGlzcGxheWVkIG9uIGVhY2ggcGFnZTsgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyb1xuICAgICAgICAgKi9cbiAgICAgICAgbnVtSXRlbXNQZXJQYWdlOiBmdW5jdGlvbiB2YWxpZGF0ZU51bUl0ZW1zUGVyUGFnZShwcm9wcykge1xuICAgICAgICAgICAgaWYgKGlzSW50ZWdlcihwcm9wcy5udW1JdGVtc1BlclBhZ2UpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ2BudW1JdGVtc1BlclBhZ2VgIG11c3QgYmUgYW4gaW50ZWdlci4nKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcHMubnVtSXRlbXNQZXJQYWdlIDwgMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ2BudW1JdGVtc1BlclBhZ2VgIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBtYXhpbXVtIG51bWJlciBvZiBwYWdlcyB0byBiZSBkaXNwbGF5ZWQgaW4gdGhlIGNvbnRyb2wgYmFyIGF0IG9uZSB0aW1lXG4gICAgICAgICAqL1xuICAgICAgICBudW1QYWdlVG9nZ2xlczogUHJvcFR5cGVzLm51bWJlcixcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwYWdpbmF0aW9uIGNvbnRyb2xzIGFyZSBkaXNwbGF5ZWQgYWJvdmUsIGJlbG93LCBvciBib3RoIGFib3ZlIGFuZCBiZWxvdyB0aGUgY29udGVudFxuICAgICAgICAgKi9cbiAgICAgICAgcG9zaXRpb246IFByb3BUeXBlcy5vbmVPZihPYmplY3Qua2V5cyhQYWdpbmF0aW9uLnBvc2l0aW9ucykpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb250ZW50IHRvIGJlIGRpc3BsYXllZCBpbnNpZGUgb2YgdGhlIFwiUHJldmlvdXMgcGFnZVwiIGNvbnRyb2wgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBwcmV2aW91c1BhZ2VDb250cm9sQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHdoZXRoZXIgdGhlIFwiRmlyc3QgcGFnZVwiIGNvbnRyb2wgYnV0dG9uIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICAgICAgICovXG4gICAgICAgIHNob3dKdW1wVG9GaXJzdDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHdoZXRoZXIgdGhlIFwiTGFzdCBwYWdlXCIgY29udHJvbCBidXR0b24gc2hvdWxkIGJlIGRpc3BsYXllZFxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd0p1bXBUb0xhc3Q6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZW5kZXJzIGFuIGVsZW1lbnQgY2FsbGVkIGAuYi1wYWdpbmF0aW9uLWNvbnRyb2wtc3RhdGVgIHRoYXQgY29udGFpbnMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHBhZ2luYXRpb24gbGlrZSBcIjEgb2YgMTBcIjsgYWx0ZXJuYXRpdmVseSwgdGhpcyBwcm9wIGFsc28gYWNjZXB0cyBhIGZ1bmN0aW9uIHRoYXQgaXQgd2lsbCBjYWxsIHdpdGggdGhlIGN1cnJlbnRQYWdlIGFuZCB0b3RhbFBhZ2VzIGZvciB5b3UgdG8gZm9ybWF0OlxuXG4gICAgICAgICAqIGBgYGpzeFxuICAgICAgICAgKiBzaG93UGFnaW5hdGVkU3RhdGU9e1xuICAgICAgICAgKiAgICAgKGN1cnJlbnRQYWdlLCB0b3RhbFBhZ2VzKSA9PiAoXG4gICAgICAgICAqICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Zvbyc+XG4gICAgICAgICAqICAgICAgICAgICAgIFlvdSdyZSBvbiBwYWdlIHtjdXJyZW50UGFnZX0gb2Yge3RvdGFsUGFnZXN9IHBhZ2VzIVxuICAgICAgICAgKiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgKiAgICAgKVxuICAgICAgICAgKiB9XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd1BhZ2luYXRpb25TdGF0ZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgICAgIFByb3BUeXBlcy5mdW5jLFxuICAgICAgICBdKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBTZWdtZW50ZWRDb250cm9sIG5vZGUocyksIGAuYi1wYWdpbmF0aW9uLWNvbnRyb2xzYFxuICAgICAgICAgKi9cbiAgICAgICAgdG9nZ2xlV3JhcHBlclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgdG90YWwgbnVtYmVyIG9mIGl0ZW1zIHRvIGJlIGRpc3BsYXllZCBpbiB0aGUgdmlld1xuICAgICAgICAgKi9cbiAgICAgICAgdG90YWxJdGVtczogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGFmdGVyOiBudWxsLFxuICAgICAgICBiZWZvcmU6IG51bGwsXG4gICAgICAgIGN1c3RvbUNvbnRyb2xDb250ZW50OiBudWxsLFxuICAgICAgICBnZXRJdGVtOiBub29wLFxuICAgICAgICBoaWRlUGFnZXJJZk5vdE5lZWRlZDogZmFsc2UsXG4gICAgICAgIGlkZW50aWZpZXI6IHV1aWQoKSxcbiAgICAgICAgaW5pdGlhbFBhZ2U6IDEsXG4gICAgICAgIGl0ZW1Mb2FkaW5nQ29udGVudDogbnVsbCxcbiAgICAgICAgaXRlbVRvSlNYQ29udmVydGVyRnVuYzogaWRlbnRpdHksXG4gICAgICAgIGp1bXBUb0ZpcnN0Q29udHJvbENvbnRlbnQ6ICfCqyBGaXJzdCcsXG4gICAgICAgIGp1bXBUb0xhc3RDb250cm9sQ29udGVudDogJ0xhc3QgwrsnLFxuICAgICAgICBsaXN0V3JhcHBlclByb3BzOiB7fSxcbiAgICAgICAgbmV4dFBhZ2VDb250cm9sQ29udGVudDogJ05leHQg4oC6JyxcbiAgICAgICAgbnVtSXRlbXNQZXJQYWdlOiAxMCxcbiAgICAgICAgbnVtUGFnZVRvZ2dsZXM6IDUsXG4gICAgICAgIHBvc2l0aW9uOiBQYWdpbmF0aW9uLnBvc2l0aW9ucy5BQk9WRSxcbiAgICAgICAgcHJldmlvdXNQYWdlQ29udHJvbENvbnRlbnQ6ICfigLkgUHJldmlvdXMnLFxuICAgICAgICBzaG93SnVtcFRvRmlyc3Q6IHRydWUsXG4gICAgICAgIHNob3dKdW1wVG9MYXN0OiB0cnVlLFxuICAgICAgICBzaG93UGFnaW5hdGlvblN0YXRlOiB0cnVlLFxuICAgICAgICB0b2dnbGVXcmFwcGVyUHJvcHM6IHt9LFxuICAgICAgICB0b3RhbEl0ZW1zOiBudWxsLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhQYWdpbmF0aW9uLmRlZmF1bHRQcm9wcylcblxuICAgIHN0YXRlID0ge1xuICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wcm9wcy5pbml0aWFsUGFnZSxcbiAgICAgICAgdGFyZ2V0SW5kZXg6ICh0aGlzLnByb3BzLmluaXRpYWxQYWdlIC0gMSkgKiB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZSxcbiAgICB9XG5cbiAgICBjdXJyZW50UGFnZSA9ICgpID0+IHRoaXMuc3RhdGUuY3VycmVudFBhZ2VcbiAgICBnZXRQYWdlRm9ySW5kZXggPSAoaW5kZXgsIGl0ZW1zUGVyUGFnZSA9IHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlKSA9PiBNYXRoLmNlaWwoKGluZGV4ICsgMSkgLyBpdGVtc1BlclBhZ2UpXG4gICAgdG90YWxQYWdlcyA9ICgpID0+IE1hdGguY2VpbCh0aGlzLnByb3BzLnRvdGFsSXRlbXMgLyB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZSlcblxuICAgIGZpcnN0VmlzaWJsZUl0ZW1JbmRleCA9ICgpID0+ICh0aGlzLmN1cnJlbnRQYWdlKCkgLSAxKSAqIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlXG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHByZXZTdGF0ZS5jdXJyZW50UGFnZSAhPT0gdGhpcy5jdXJyZW50UGFnZSgpKSB7XG4gICAgICAgICAgICBmaW5kRE9NTm9kZSh0aGlzLnJlZnMuaXRlbV8wKS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpIHtcbiAgICAgICAgY29uc3Qgb2xkUHJvcHMgPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIC8vIHVzZSB0cmFuc2FjdGlvbmFsIGBzZXRTdGF0ZSgpYCBzeW50YXggdG8gZW5zdXJlIHRoYXQgcGVuZGluZyBzdGF0ZSB1cGRhdGVzIGFyZSBob25vcmVkLFxuICAgICAgICAvLyBsaWtlIHRob3NlIGZyb20gYHBhZ2VUb0luZGV4KClgXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlLCBwcm9wcykgPT4ge1xuICAgICAgICAgICAgLy8gTk9URTogYHByb3BzYCBoZXJlIGlzIHRlY2huaWNhbGx5IHRoZSBgbmV4dFByb3BzYCB5b3UnZCByZWNlaXZlIGZyb20gdGhlIGZpcnN0IGNXUlAgYXJndW1lbnRcbiAgICAgICAgICAgIC8vIHNvIHRoYXQncyB3aHkgd2UncmUgY2FjaGluZyBgb2xkUHJvcHNgIG91dHNpZGUgdGhlIGBzZXRTdGF0ZWBcbiAgICAgICAgICAgIGlmIChwcm9wcy5pZGVudGlmaWVyICE9PSBvbGRQcm9wcy5pZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IDEsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4OiAwLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuZ2V0UGFnZUZvckluZGV4KHN0YXRlLnRhcmdldEluZGV4LCBwcm9wcy5udW1JdGVtc1BlclBhZ2UpLFxuICAgICAgICAgICAgICAgIHRhcmdldEluZGV4OiBzdGF0ZS50YXJnZXRJbmRleCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHBhZ2VUb0luZGV4ID0gKGkpID0+IHtcbiAgICAgICAgaWYgKGkgPCAwIHx8IGkgPj0gdGhpcy5wcm9wcy50b3RhbEl0ZW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKGBDYW5ub3QgcGFnZSB0byBpbnZhbGlkIGluZGV4ICR7aX0uYCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLmdldFBhZ2VGb3JJbmRleChpKSxcbiAgICAgICAgICAgIHRhcmdldEluZGV4OiBpLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVQYWdlQnV0dG9uT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdO1xuICAgICAgICBjb25zdCBjdXJyZW50UGFnZSA9IHRoaXMuY3VycmVudFBhZ2UoKTtcbiAgICAgICAgY29uc3QgbnVtUGFnZVRvZ2dsZXMgPSB0aGlzLnByb3BzLm51bVBhZ2VUb2dnbGVzO1xuICAgICAgICBjb25zdCB0b3RhbFBhZ2VzID0gdGhpcy50b3RhbFBhZ2VzKCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0UGFnZSA9IGN1cnJlbnRQYWdlIC0gKChjdXJyZW50UGFnZSAtIDEpICUgbnVtUGFnZVRvZ2dsZXMpO1xuICAgICAgICBjb25zdCBlbmRQYWdlID0gTWF0aC5taW4oc3RhcnRQYWdlICsgbnVtUGFnZVRvZ2dsZXMgLSAxLCB0b3RhbFBhZ2VzKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5zaG93UGFnaW5hdGlvblN0YXRlKSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBpc0Z1bmN0aW9uKHRoaXMucHJvcHMuc2hvd1BhZ2luYXRpb25TdGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucHJvcHMuc2hvd1BhZ2luYXRpb25TdGF0ZShjdXJyZW50UGFnZSwgdG90YWxQYWdlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICA6IGAke2N1cnJlbnRQYWdlfSBvZiAke3RvdGFsUGFnZXN9YCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtc3RhdGUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5zaG93SnVtcFRvRmlyc3QpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucHJvcHMuanVtcFRvRmlyc3RDb250cm9sQ29udGVudCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogUGFnaW5hdGlvbi5jb250cm9scy5GSVJTVCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5jdXJyZW50UGFnZSgpID09PSAxLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2ItcGFnaW5hdGlvbi1jb250cm9sIGItcGFnaW5hdGlvbi1jb250cm9sLWZpcnN0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucHJvcHMucHJldmlvdXNQYWdlQ29udHJvbENvbnRlbnQsXG4gICAgICAgICAgICB2YWx1ZTogUGFnaW5hdGlvbi5jb250cm9scy5QUkVWSU9VUyxcbiAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmN1cnJlbnRQYWdlKCkgPT09IDEsXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdiLXBhZ2luYXRpb24tY29udHJvbCBiLXBhZ2luYXRpb24tY29udHJvbC1wcmV2aW91cycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydFBhZ2U7IGkgPD0gZW5kUGFnZTsgaSsrKSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2ItcGFnaW5hdGlvbi1jb250cm9sJyxcbiAgICAgICAgICAgICAgICAnZGF0YS1wYWdlLW51bWJlcic6IGksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGkgPT09IHRoaXMuY3VycmVudFBhZ2UoKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5wcm9wcy5uZXh0UGFnZUNvbnRyb2xDb250ZW50LFxuICAgICAgICAgICAgdmFsdWU6IFBhZ2luYXRpb24uY29udHJvbHMuTkVYVCxcbiAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmN1cnJlbnRQYWdlKCkgPT09IHRvdGFsUGFnZXMsXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdiLXBhZ2luYXRpb24tY29udHJvbCBiLXBhZ2luYXRpb24tY29udHJvbC1uZXh0JyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2hvd0p1bXBUb0xhc3QpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucHJvcHMuanVtcFRvTGFzdENvbnRyb2xDb250ZW50LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBQYWdpbmF0aW9uLmNvbnRyb2xzLkxBU1QsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuY3VycmVudFBhZ2UoKSA9PT0gdG90YWxQYWdlcyxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiLXBhZ2luYXRpb24tY29udHJvbCBiLXBhZ2luYXRpb24tY29udHJvbC1sYXN0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuY3VzdG9tQ29udHJvbENvbnRlbnQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucHJvcHMuY3VzdG9tQ29udHJvbENvbnRlbnQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHV1aWQoKSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiLXBhZ2luYXRpb24tY29udHJvbCBiLXBhZ2luYXRpb24tY29udHJvbC1jdXN0b20nLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUl0ZW1zKCkge1xuICAgICAgICBjb25zdCBnZW5lcmF0ZWRJdGVtcyA9IFtdO1xuICAgICAgICBjb25zdCBmaXJzdEl0ZW1JbmRleCA9IHRoaXMuZmlyc3RWaXNpYmxlSXRlbUluZGV4KCk7XG4gICAgICAgIGNvbnN0IGxhc3RJdGVtSW5kZXggPSBNYXRoLm1pbih0aGlzLnByb3BzLnRvdGFsSXRlbXMsIGZpcnN0SXRlbUluZGV4ICsgdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2UpIC0gMTtcblxuICAgICAgICBmb3IgKGxldCBpID0gZmlyc3RJdGVtSW5kZXg7IGkgPD0gbGFzdEl0ZW1JbmRleDsgaSArPSAxKSB7XG4gICAgICAgICAgICBnZW5lcmF0ZWRJdGVtcy5wdXNoKHtkYXRhOiB0aGlzLnByb3BzLmdldEl0ZW0oaSl9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZW5lcmF0ZWRJdGVtcztcbiAgICB9XG5cbiAgICBoYW5kbGVDbGljayA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICBsZXQgbmV4dFRhcmdldEluZGV4O1xuXG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgY2FzZSBQYWdpbmF0aW9uLmNvbnRyb2xzLkZJUlNUOlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhZ2luYXRpb24uY29udHJvbHMuUFJFVklPVVM6XG4gICAgICAgICAgICBuZXh0VGFyZ2V0SW5kZXggPSB0aGlzLmZpcnN0VmlzaWJsZUl0ZW1JbmRleCgpIC0gdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYWdpbmF0aW9uLmNvbnRyb2xzLk5FWFQ6XG4gICAgICAgICAgICBuZXh0VGFyZ2V0SW5kZXggPSB0aGlzLmZpcnN0VmlzaWJsZUl0ZW1JbmRleCgpICsgdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYWdpbmF0aW9uLmNvbnRyb2xzLkxBU1Q6XG4gICAgICAgICAgICBuZXh0VGFyZ2V0SW5kZXggPSB0aGlzLnByb3BzLnRvdGFsSXRlbXMgLSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBuZXh0VGFyZ2V0SW5kZXggPSBwYXJzZUludCh2YWx1ZSwgMTApICogdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2UgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5nZXRQYWdlRm9ySW5kZXgobmV4dFRhcmdldEluZGV4KSxcbiAgICAgICAgICAgIHRhcmdldEluZGV4OiBuZXh0VGFyZ2V0SW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKCkge1xuICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHMubGlzdFdyYXBwZXJQcm9wcztcbiAgICAgICAgY29uc3QgaW5kZXhPZmZzZXQgPSB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZSAqICh0aGlzLmN1cnJlbnRQYWdlKCkgLSAxKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPEFycm93S2V5TmF2aWdhdGlvblxuICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICByZWY9J2l0ZW1MaXN0J1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcGFnaW5hdGlvbi1pdGVtcycsIHByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLmdlbmVyYXRlSXRlbXMoKS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8SXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17YGl0ZW1fJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydFRvSlNYRnVuYz17dGhpcy5wcm9wcy5pdGVtVG9KU1hDb252ZXJ0ZXJGdW5jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9e2l0ZW0uZGF0YX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVuPXtpbmRleCAlIDIgPT09IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9e2luZGV4T2Zmc2V0ICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0NvbnRlbnQ9e3RoaXMucHJvcHMuaXRlbUxvYWRpbmdDb250ZW50fSAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9BcnJvd0tleU5hdmlnYXRpb24+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyQ29udHJvbHMocG9zaXRpb24pIHtcbiAgICAgICAgaWYgKCAgIHRoaXMucHJvcHMuaGlkZVBhZ2VySWZOb3ROZWVkZWRcbiAgICAgICAgICAgICYmIHRoaXMucHJvcHMudG90YWxJdGVtcyA8PSB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzLnRvZ2dsZVdyYXBwZXJQcm9wcztcbiAgICAgICAgY29uc3QgcG9zaXRpb25Mb3dlciA9IHBvc2l0aW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uQ2FwaXRhbGl6ZWQgPSBwb3NpdGlvbkxvd2VyWzBdLnRvVXBwZXJDYXNlKCkgKyBwb3NpdGlvbkxvd2VyLnNsaWNlKDEpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2VnbWVudGVkQ29udHJvbFxuICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICByZWY9e2BzZWdtZW50ZWRDb250cm9sJHtwb3NpdGlvbkNhcGl0YWxpemVkfWB9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wYWdpbmF0aW9uLWNvbnRyb2xzJywgcHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgIFtgYi1wYWdpbmF0aW9uLWNvbnRyb2xzLSR7cG9zaXRpb25Mb3dlcn1gXTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICBvcHRpb25zPXt0aGlzLmNyZWF0ZVBhZ2VCdXR0b25PcHRpb25zKCl9XG4gICAgICAgICAgICAgICAgb25PcHRpb25TZWxlY3RlZD17dGhpcy5oYW5kbGVDbGlja30gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJWaWV3KCkge1xuICAgICAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBQYWdpbmF0aW9uLnBvc2l0aW9ucztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHJlZj0ncGFnaW5hdGVkVmlldydcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ItcGFnaW5hdGlvbic+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIChwcm9wcy5wb3NpdGlvbiA9PT0gcG9zaXRpb24uQUJPVkUgfHwgcHJvcHMucG9zaXRpb24gPT09IHBvc2l0aW9uLkJPVEgpXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5yZW5kZXJDb250cm9scyhwb3NpdGlvbi5BQk9WRSlcbiAgICAgICAgICAgICAgICAgICAgOiBub29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtwcm9wcy5iZWZvcmV9XG5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJJdGVtcygpfVxuXG4gICAgICAgICAgICAgICAge3Byb3BzLmFmdGVyfVxuXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIChwcm9wcy5wb3NpdGlvbiA9PT0gcG9zaXRpb24uQkVMT1cgfHwgcHJvcHMucG9zaXRpb24gPT09IHBvc2l0aW9uLkJPVEgpXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5yZW5kZXJDb250cm9scyhwb3NpdGlvbi5CRUxPVylcbiAgICAgICAgICAgICAgICAgICAgOiBub29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFBhZ2luYXRpb24uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wYWdpbmF0aW9uLXdyYXBwZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclZpZXcoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBSZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSB2ZW5kb3ItcHJlZml4ZWQgcHJvcGVydHkgZm9yIHVzZSBpbiBwcm9ncmFtbWF0aWMgdHJhbnNmb3JtIHN0eWxlIG1hbmlwdWxhdGlvbi5cbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHByb3BlcnR5IGtleSAoZS5nLiBgV2Via2l0VHJhbnNmb3JtYCwgYG1zVHJhbnNmb3JtYClcbiAqL1xuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIGRldGVjdFRyYW5zZm9ybVByb3BlcnR5KCkge1xuICAgIGNvbnN0IHByb3BzID0gW1xuICAgICAgICAndHJhbnNmb3JtJyxcbiAgICAgICAgJ1dlYmtpdFRyYW5zZm9ybScsXG4gICAgICAgICdNb3pUcmFuc2Zvcm0nLFxuICAgICAgICAnT1RyYW5zZm9ybScsXG4gICAgICAgICdtc1RyYW5zZm9ybScsXG4gICAgICAgICd3ZWJraXQtdHJhbnNmb3JtJywgLy8gdXNlZCBpbiBKU0RPTVxuICAgIF07XG5cbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gcHJvcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKHByb3BzW2ldIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzW2ldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufSkoKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtmaW5kRE9NTm9kZX0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IERpYWxvZyBmcm9tICcuLi9ib3VuZGxlc3MtZGlhbG9nL2luZGV4JztcbmltcG9ydCBQb3J0YWwgZnJvbSAnLi4vYm91bmRsZXNzLXBvcnRhbC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB0cmFuc2Zvcm1Qcm9wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy10cmFuc2Zvcm0tcHJvcGVydHkvaW5kZXgnO1xuXG5mdW5jdGlvbiB3aXRob3V0KGFycjEsIGFycjIpIHsgcmV0dXJuIGFycjEuZmlsdGVyKChpdGVtKSA9PiBhcnIyLmluZGV4T2YoaXRlbSkgPT09IC0xKTsgfVxuZnVuY3Rpb24gdmFsdWVzKG9iaikgICAgICAgICB7IHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcCgoa2V5KSA9PiBvYmpba2V5XSk7IH1cblxuY29uc3QgREVGQVVMVF9DQVJFVF9DT01QT05FTlQgPSAoXG4gICAgPHN2ZyB2aWV3Qm94PScwIDAgMTQgOS41JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPlxuICAgICAgICA8Zz5cbiAgICAgICAgICAgIDxwb2x5Z29uIGNsYXNzTmFtZT0nYi1wb3BvdmVyLWNhcmV0LWJvcmRlcicgZmlsbD0nIzAwMCcgcG9pbnRzPSc3IDAgMTQgMTAgMCAxMCcgLz5cbiAgICAgICAgICAgIDxwb2x5Z29uIGNsYXNzTmFtZT0nYi1wb3BvdmVyLWNhcmV0LWZpbGwnIGZpbGw9JyNGRkYnIHBvaW50cz0nNi45ODIzMDQ0NCAxLjc1IDEyLjc1IDEwIDEuMjUgMTAnIC8+XG4gICAgICAgIDwvZz5cbiAgICA8L3N2Zz5cbik7XG5cbi8qKlxuICogX19Qb3BvdmVyIHN1cHBvcnRzIGFsbCBbRGlhbG9nIHByb3BzXShib3VuZGxlc3MtZGlhbG9nL1JFQURNRS5tZCNhdmFpbGFibGUtcHJvcHMpOyBhcHBsaWVkIHRvIHRoZSBgLmItcG9wb3ZlcmAgbm9kZV9fXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcG92ZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcG9zaXRpb24gPSB7XG4gICAgICAgIFNUQVJUOiAnU1RBUlQnLFxuICAgICAgICBNSURETEU6ICdNSURETEUnLFxuICAgICAgICBFTkQ6ICdFTkQnLFxuICAgIH1cblxuICAgIHN0YXRpYyBwcmVzZXQgPSB7XG4gICAgICAgICdBQk9WRSc6IHtcbiAgICAgICAgICAgIGFuY2hvclhBbGlnbjogUG9wb3Zlci5wb3NpdGlvbi5NSURETEUsXG4gICAgICAgICAgICBhbmNob3JZQWxpZ246IFBvcG92ZXIucG9zaXRpb24uU1RBUlQsXG4gICAgICAgICAgICBzZWxmWEFsaWduOiBQb3BvdmVyLnBvc2l0aW9uLk1JRERMRSxcbiAgICAgICAgICAgIHNlbGZZQWxpZ246IFBvcG92ZXIucG9zaXRpb24uRU5ELFxuICAgICAgICB9LFxuICAgICAgICAnQkVMT1cnOiB7XG4gICAgICAgICAgICBhbmNob3JYQWxpZ246IFBvcG92ZXIucG9zaXRpb24uTUlERExFLFxuICAgICAgICAgICAgYW5jaG9yWUFsaWduOiBQb3BvdmVyLnBvc2l0aW9uLkVORCxcbiAgICAgICAgICAgIHNlbGZYQWxpZ246IFBvcG92ZXIucG9zaXRpb24uTUlERExFLFxuICAgICAgICAgICAgc2VsZllBbGlnbjogUG9wb3Zlci5wb3NpdGlvbi5TVEFSVCxcbiAgICAgICAgfSxcbiAgICAgICAgJ0xFRlQnOiB7XG4gICAgICAgICAgICBhbmNob3JYQWxpZ246IFBvcG92ZXIucG9zaXRpb24uU1RBUlQsXG4gICAgICAgICAgICBhbmNob3JZQWxpZ246IFBvcG92ZXIucG9zaXRpb24uTUlERExFLFxuICAgICAgICAgICAgc2VsZlhBbGlnbjogUG9wb3Zlci5wb3NpdGlvbi5FTkQsXG4gICAgICAgICAgICBzZWxmWUFsaWduOiBQb3BvdmVyLnBvc2l0aW9uLk1JRERMRSxcbiAgICAgICAgfSxcbiAgICAgICAgJ1JJR0hUJzoge1xuICAgICAgICAgICAgYW5jaG9yWEFsaWduOiBQb3BvdmVyLnBvc2l0aW9uLkVORCxcbiAgICAgICAgICAgIGFuY2hvcllBbGlnbjogUG9wb3Zlci5wb3NpdGlvbi5NSURETEUsXG4gICAgICAgICAgICBzZWxmWEFsaWduOiBQb3BvdmVyLnBvc2l0aW9uLlNUQVJULFxuICAgICAgICAgICAgc2VsZllBbGlnbjogUG9wb3Zlci5wb3NpdGlvbi5NSURETEUsXG4gICAgICAgIH0sXG4gICAgfVxuXG4gICAgc3RhdGljIHByZXNldFZhbHVlcyA9IHZhbHVlcyhQb3BvdmVyLnByZXNldClcblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC4uLkRpYWxvZy5wcm9wVHlwZXMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgRE9NIGVsZW1lbnQgb3IgUmVhY3QgcmVmZXJlbmNlIHRvIG9uZSBmb3IgcG9zaXRpb25pbmcgcHVycG9zZXNcbiAgICAgICAgICovXG4gICAgICAgIGFuY2hvcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuaW5zdGFuY2VPZihIVE1MRWxlbWVudCksXG4gICAgICAgICAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgICAgIHByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICAgICAgfSksIC8vIGEgcmVhY3QgZWxlbWVudCBvZiBzb21lIGZhc2hpb24sIFByb3BUeXBlcy5lbGVtZW50IHdhc24ndCB3b3JraW5nXG4gICAgICAgIF0pLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGxvY2F0aW9uIG9uIHRoZSBhbmNob3IgWC1heGlzIHRvIHVzZSBmb3IgYWxpZ25tZW50IGNhbGN1bGF0aW9uc1xuICAgICAgICAgKiAtIGBQb3BvdmVyLnBvc2l0aW9uLlNUQVJUYFxuICAgICAgICAgKiAgIGVxdWF0ZXMgdG8gYHswLCA/fWAgb24gYSAxMDB4MTAwIGNhcnRlc2lhbiBwbGFuZVxuXG4gICAgICAgICAqIC0gYFBvcG92ZXIucG9zaXRpb24uTUlERExFYFxuICAgICAgICAgKiAgIGVxdWF0ZXMgdG8gYHs1MCwgP31gIG9uIGEgMTAweDEwMCBjYXJ0ZXNpYW4gcGxhbmVcblxuICAgICAgICAgKiAtIGBQb3BvdmVyLnBvc2l0aW9uLkVORGBcbiAgICAgICAgICogICBlcXVhdGVzIHRvIGB7MTAwLCA/fWAgb24gYSAxMDB4MTAwIGNhcnRlc2lhbiBwbGFuZVxuICAgICAgICAgKi9cbiAgICAgICAgYW5jaG9yWEFsaWduOiBQcm9wVHlwZXMub25lT2YoT2JqZWN0LmtleXMoUG9wb3Zlci5wb3NpdGlvbikpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBsb2NhdGlvbiBvbiB0aGUgYW5jaG9yIFktYXhpcyB0byB1c2UgZm9yIGFsaWdubWVudCBjYWxjdWxhdGlvbnNcbiAgICAgICAgICogLSBgUG9wb3Zlci5wb3NpdGlvbi5TVEFSVGBcbiAgICAgICAgICogICBlcXVhdGVzIHRvIGB7PywgMH1gIG9uIGEgMTAweDEwMCBjYXJ0ZXNpYW4gcGxhbmVcblxuICAgICAgICAgKiAtIGBQb3BvdmVyLnBvc2l0aW9uLk1JRERMRWBcbiAgICAgICAgICogICBlcXVhdGVzIHRvIGB7PywgNTB9YCBvbiBhIDEwMHgxMDAgY2FydGVzaWFuIHBsYW5lXG5cbiAgICAgICAgICogLSBgUG9wb3Zlci5wb3NpdGlvbi5FTkRgXG4gICAgICAgICAqICAgZXF1YXRlcyB0byBgez8sIDEwMH1gIG9uIGEgMTAweDEwMCBjYXJ0ZXNpYW4gcGxhbmVcbiAgICAgICAgICovXG4gICAgICAgIGFuY2hvcllBbGlnbjogUHJvcFR5cGVzLm9uZU9mKE9iamVjdC5rZXlzKFBvcG92ZXIucG9zaXRpb24pKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogaWYgdGhlIGdpdmVuIGFsaWdubWVudCBzZXR0aW5ncyB3b3VsZCB0YWtlIHRoZSBwb3BvdmVyIG91dCBvZiBib3VuZHMsIGNoYW5nZSB0aGUgYWxpZ25tZW50IGFzIG5lY2Vzc2FyeSB0byByZW1haW4gaW4gdGhlIHZpZXdwb3J0XG4gICAgICAgICAqL1xuICAgICAgICBhdXRvUmVwb3NpdGlvbjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBKU1ggdGhhdCBpcyByZW5kZXJlZCBhbmQgdXNlZCB0byBwb2ludCBhdCB0aGUgbWlkZGxlIG9mIHRoZSBhbmNob3IgZWxlbWVudCBhbmQgaW5kaWNhdGUgdGhlIGNvbnRleHQgb2YgdGhlIHBvcG92ZXJcbiAgICAgICAgICovXG4gICAgICAgIGNhcmV0Q29tcG9uZW50OiBQcm9wVHlwZXMuZWxlbWVudCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55L2FsbCBzdXBwb3J0ZWQgW1BvcnRhbCBwcm9wc10oYm91bmRsZXNzLXBvcnRhbC9SRUFETUUubWQpXG4gICAgICAgICAqL1xuICAgICAgICBwb3J0YWxQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYSBiYXNlbGluZSBzZXQgb2YgYWxpZ25tZW50IHByb3BlcnRpZXMgdGhhdCBjb3ZlciBtb3N0IHVzZSBjYXNlczsgb3ZlcnJpZGUgYSBwYXJ0aWN1bGFyIHN1YnByb3BlcnR5IGJ5IHBhc3NpbmcgaXQgYXMgd2VsbDpcblxuICAgICAgICAgKiBgYGBqc3hcbiAgICAgICAgICogPFBvcG92ZXJcbiAgICAgICAgICogICAgIGFuY2hvcj17SFRNTEVsZW1lbnR9XG4gICAgICAgICAqICAgICBwcmVzZXQ9e1BvcG92ZXIucHJlc2V0LkJFTE9XfVxuICAgICAgICAgKiAgICAgc2VsZlhBbGlnbj17UG9wb3Zlci5wb3NpdGlvbi5TVEFSVH0+XG4gICAgICAgICAqICAgICBNeSBwb3BvdmVyIGNvbnRlbnQhXG4gICAgICAgICAqIDwvUG9wb3Zlcj5cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICBwcmVzZXQ6IFByb3BUeXBlcy5vbmVPZihQb3BvdmVyLnByZXNldFZhbHVlcyksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGxvY2F0aW9uIG9uIHRoZSBwb3BvdmVyIFgtYXhpcyB0byB1c2UgZm9yIGFsaWdubWVudCBjYWxjdWxhdGlvbnNcbiAgICAgICAgICogLSBgUG9wb3Zlci5wb3NpdGlvbi5TVEFSVGBcbiAgICAgICAgICogICBlcXVhdGVzIHRvIGB7MCwgP31gIG9uIGEgMTAweDEwMCBjYXJ0ZXNpYW4gcGxhbmVcblxuICAgICAgICAgKiAtIGBQb3BvdmVyLnBvc2l0aW9uLk1JRERMRWBcbiAgICAgICAgICogICBlcXVhdGVzIHRvIGB7NTAsID99YCBvbiBhIDEwMHgxMDAgY2FydGVzaWFuIHBsYW5lXG5cbiAgICAgICAgICogLSBgUG9wb3Zlci5wb3NpdGlvbi5FTkRgXG4gICAgICAgICAqICAgZXF1YXRlcyB0byBgezEwMCwgP31gIG9uIGEgMTAweDEwMCBjYXJ0ZXNpYW4gcGxhbmVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGZYQWxpZ246IFByb3BUeXBlcy5vbmVPZihPYmplY3Qua2V5cyhQb3BvdmVyLnBvc2l0aW9uKSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGxvY2F0aW9uIG9uIHRoZSBwb3BvdmVyIFktYXhpcyB0byB1c2UgZm9yIGFsaWdubWVudCBjYWxjdWxhdGlvbnNcbiAgICAgICAgICogLSBgUG9wb3Zlci5wb3NpdGlvbi5TVEFSVGBcbiAgICAgICAgICogICBlcXVhdGVzIHRvIGB7PywgMH1gIG9uIGEgMTAweDEwMCBjYXJ0ZXNpYW4gcGxhbmVcblxuICAgICAgICAgKiAtIGBQb3BvdmVyLnBvc2l0aW9uLk1JRERMRWBcbiAgICAgICAgICogICBlcXVhdGVzIHRvIGB7PywgNTB9YCBvbiBhIDEwMHgxMDAgY2FydGVzaWFuIHBsYW5lXG5cbiAgICAgICAgICogLSBgUG9wb3Zlci5wb3NpdGlvbi5FTkRgXG4gICAgICAgICAqICAgZXF1YXRlcyB0byBgez8sIDEwMH1gIG9uIGEgMTAweDEwMCBjYXJ0ZXNpYW4gcGxhbmVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGZZQWxpZ246IFByb3BUeXBlcy5vbmVPZihPYmplY3Qua2V5cyhQb3BvdmVyLnBvc2l0aW9uKSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXBvcG92ZXJgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIHdyYXBwZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICAuLi5EaWFsb2cuZGVmYXVsdFByb3BzLFxuICAgICAgICBhbmNob3I6IGRvY3VtZW50LmJvZHksXG4gICAgICAgIGFuY2hvclhBbGlnbjogdW5kZWZpbmVkLFxuICAgICAgICBhbmNob3JZQWxpZ246IHVuZGVmaW5lZCxcbiAgICAgICAgYXV0b1JlcG9zaXRpb246IHRydWUsXG4gICAgICAgIGNhcHR1cmVGb2N1czogZmFsc2UsXG4gICAgICAgIGNhcmV0Q29tcG9uZW50OiBERUZBVUxUX0NBUkVUX0NPTVBPTkVOVCxcbiAgICAgICAgY2xvc2VPbkVzY0tleTogdHJ1ZSxcbiAgICAgICAgY2xvc2VPbk91dHNpZGVDbGljazogdHJ1ZSxcbiAgICAgICAgY2xvc2VPbk91dHNpZGVTY3JvbGw6IHRydWUsXG4gICAgICAgIHBvcnRhbFByb3BzOiB7fSxcbiAgICAgICAgcHJlc2V0OiBQb3BvdmVyLnByZXNldC5CRUxPVyxcbiAgICAgICAgc2VsZlhBbGlnbjogdW5kZWZpbmVkLFxuICAgICAgICBzZWxmWUFsaWduOiB1bmRlZmluZWQsXG4gICAgICAgIHdyYXBwZXJQcm9wczoge30sXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IHdpdGhvdXQoT2JqZWN0LmtleXMoUG9wb3Zlci5kZWZhdWx0UHJvcHMpLCBEaWFsb2cuaW50ZXJuYWxLZXlzKVxuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgYW5jaG9yWEFsaWduOiBwcm9wcy5hbmNob3JYQWxpZ24gfHwgcHJvcHMucHJlc2V0LmFuY2hvclhBbGlnbixcbiAgICAgICAgICAgIGFuY2hvcllBbGlnbjogcHJvcHMuYW5jaG9yWUFsaWduIHx8IHByb3BzLnByZXNldC5hbmNob3JZQWxpZ24sXG4gICAgICAgICAgICBzZWxmWEFsaWduOiBwcm9wcy5zZWxmWEFsaWduICAgICB8fCBwcm9wcy5wcmVzZXQuc2VsZlhBbGlnbixcbiAgICAgICAgICAgIHNlbGZZQWxpZ246IHByb3BzLnNlbGZZQWxpZ24gICAgIHx8IHByb3BzLnByZXNldC5zZWxmWUFsaWduLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNhY2hlVmlld3BvcnRDYXJ0b2dyYXBoeShhbmNob3IpIHtcbiAgICAgICAgY29uc3QgYW5jaG9yUmVjdCA9IGFuY2hvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgYm9keVJlY3QgPSBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHRoaXMuYW5jaG9yTGVmdCA9IGFuY2hvclJlY3QubGVmdDtcbiAgICAgICAgdGhpcy5hbmNob3JUb3AgPSBhbmNob3JSZWN0LnRvcDtcbiAgICAgICAgdGhpcy5hbmNob3JIZWlnaHQgPSBhbmNob3JSZWN0LmhlaWdodDtcbiAgICAgICAgdGhpcy5hbmNob3JXaWR0aCA9IGFuY2hvclJlY3Qud2lkdGg7XG5cbiAgICAgICAgLy8gbm9ybWFsbHkgd2UnZCB1c2Ugc2Nyb2xsVG9wL3Njcm9sbExlZnQsIGJ1dCBzY3JvbGwgYmVoYXZpb3IgY2hhbmdlcyB3aGVuIHBvc2l0aW9uOiBzdGlja3kgaXMgZW5hYmxlZCBpbiBDaHJvbWVcbiAgICAgICAgLy8gYW5kIGludmVydGluZyB0aGUgbmVnYXRpdmUgdmlld3BvcnQgcmVjdCB2YWx1ZSBzZWVtcyB0byB3b3JrIG1vcmUgY29uc2lzdGVudGx5XG4gICAgICAgIHRoaXMuYm9keUxlZnQgPSBib2R5UmVjdC5sZWZ0ICogLTE7XG4gICAgICAgIHRoaXMuYm9keVRvcCA9IGJvZHlSZWN0LnRvcCAqIC0xO1xuICAgIH1cblxuICAgIGdldE5leHRDYXJldFhQb3NpdGlvbihhbmNob3IsIGNhcmV0ID0gdGhpcy4kY2FyZXQpIHtcbiAgICAgICAgY29uc3Qge2FuY2hvclhBbGlnbiwgc2VsZlhBbGlnbiwgYW5jaG9yWUFsaWduLCBzZWxmWUFsaWdufSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gUG9wb3Zlci5wb3NpdGlvbjtcblxuICAgICAgICBsZXQgbmV4dFggPSAwO1xuXG4gICAgICAgIC8vIHdlIG9ubHkgd2FudCB0byBjaGFuZ2UgdGhlIFggcG9zaXRpb24gd2hlbiB3ZSdyZVxuICAgICAgICAvLyBmdWxseSBhYm92ZSBvciBiZWxvdyB0aGUgYW5jaG9yIGFuZCBzZWxmWEFsaWduIGlzbid0IE1JRERMRVxuXG4gICAgICAgIGlmICggICBzZWxmWEFsaWduICE9PSBwb3NpdGlvbi5NSURETEVcbiAgICAgICAgICAgICYmICggICBhbmNob3JZQWxpZ24gPT09IHBvc2l0aW9uLlNUQVJUICYmIHNlbGZZQWxpZ24gPT09IHBvc2l0aW9uLkVORFxuICAgICAgICAgICAgICAgIHx8IGFuY2hvcllBbGlnbiA9PT0gcG9zaXRpb24uRU5EICYmIHNlbGZZQWxpZ24gPT09IHBvc2l0aW9uLlNUQVJUKSkge1xuXG4gICAgICAgICAgICBpZiAoYW5jaG9yWEFsaWduID09PSBwb3NpdGlvbi5TVEFSVCkge1xuICAgICAgICAgICAgICAgIG5leHRYICs9IHRoaXMuYW5jaG9yV2lkdGggLyAyIC0gY2FyZXQuY2xpZW50V2lkdGggLyAyO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbmNob3JYQWxpZ24gPT09IHBvc2l0aW9uLkVORCkge1xuICAgICAgICAgICAgICAgIG5leHRYICs9IHRoaXMuZGlhbG9nLiR3cmFwcGVyLmNsaWVudFdpZHRoIC0gdGhpcy5hbmNob3JXaWR0aCAvIDIgLSBjYXJldC5jbGllbnRXaWR0aCAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dFg7XG4gICAgfVxuXG4gICAgZ2V0TmV4dENhcmV0WVBvc2l0aW9uKGFuY2hvciwgY2FyZXQgPSB0aGlzLiRjYXJldCkge1xuICAgICAgICBjb25zdCB7YW5jaG9yWEFsaWduLCBzZWxmWEFsaWduLCBhbmNob3JZQWxpZ24sIHNlbGZZQWxpZ259ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBQb3BvdmVyLnBvc2l0aW9uO1xuXG4gICAgICAgIGxldCBuZXh0WSA9IDA7XG5cbiAgICAgICAgLy8gd2Ugb25seSB3YW50IHRvIGNoYW5nZSB0aGUgWSBwb3NpdGlvbiB3aGVuIHdlJ3JlXG4gICAgICAgIC8vIGZ1bGx5IHRvIHRoZSBsZWZ0IG9yIHJpZ2h0IG9mIHRoZSBhbmNob3IgKHN0YXJ0LGVuZCB8IGVuZCxzdGFydClcbiAgICAgICAgLy8gc2VsZllBbGlnbiBpc24ndCBNSURETEVcblxuICAgICAgICBpZiAoICAgc2VsZllBbGlnbiAhPT0gcG9zaXRpb24uTUlERExFXG4gICAgICAgICAgICAmJiAoICAgYW5jaG9yWEFsaWduID09PSBwb3NpdGlvbi5TVEFSVCAmJiBzZWxmWEFsaWduID09PSBwb3NpdGlvbi5FTkRcbiAgICAgICAgICAgICAgICB8fCBhbmNob3JYQWxpZ24gPT09IHBvc2l0aW9uLkVORCAmJiBzZWxmWEFsaWduID09PSBwb3NpdGlvbi5TVEFSVCkpIHtcblxuICAgICAgICAgICAgaWYgKGFuY2hvcllBbGlnbiA9PT0gcG9zaXRpb24uU1RBUlQpIHtcbiAgICAgICAgICAgICAgICBuZXh0WSArPSB0aGlzLmFuY2hvckhlaWdodCAvIDIgLSBjYXJldC5jbGllbnRXaWR0aCAvIDI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFuY2hvcllBbGlnbiA9PT0gcG9zaXRpb24uRU5EKSB7XG4gICAgICAgICAgICAgICAgbmV4dFkgKz0gdGhpcy5kaWFsb2cuJHdyYXBwZXIuY2xpZW50SGVpZ2h0IC0gdGhpcy5hbmNob3JXaWR0aCAvIDIgLSBjYXJldC5jbGllbnRXaWR0aCAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dFk7XG4gICAgfVxuXG4gICAgZ2V0TmV4dERpYWxvZ1hQb3NpdGlvbihhbmNob3IsIGRpYWxvZyA9IHRoaXMuZGlhbG9nLiR3cmFwcGVyKSB7XG4gICAgICAgIGNvbnN0IHthbmNob3JYQWxpZ24sIHNlbGZYQWxpZ259ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBQb3BvdmVyLnBvc2l0aW9uO1xuXG4gICAgICAgIGxldCBuZXh0WCA9IHRoaXMuYW5jaG9yTGVmdCArIHRoaXMuYm9keUxlZnQ7XG5cbiAgICAgICAgc3dpdGNoIChhbmNob3JYQWxpZ24pIHtcbiAgICAgICAgY2FzZSBwb3NpdGlvbi5NSURETEU6XG4gICAgICAgICAgICBuZXh0WCArPSB0aGlzLmFuY2hvcldpZHRoIC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgcG9zaXRpb24uRU5EOlxuICAgICAgICAgICAgbmV4dFggKz0gdGhpcy5hbmNob3JXaWR0aDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChzZWxmWEFsaWduKSB7XG4gICAgICAgIGNhc2UgcG9zaXRpb24uTUlERExFOlxuICAgICAgICAgICAgbmV4dFggLT0gZGlhbG9nLmNsaWVudFdpZHRoIC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgcG9zaXRpb24uRU5EOlxuICAgICAgICAgICAgbmV4dFggLT0gZGlhbG9nLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dFg7XG4gICAgfVxuXG4gICAgZ2V0TmV4dERpYWxvZ1lQb3NpdGlvbihhbmNob3IsIGRpYWxvZyA9IHRoaXMuZGlhbG9nLiR3cmFwcGVyKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBQb3BvdmVyLnBvc2l0aW9uO1xuICAgICAgICBjb25zdCBhbmNob3JZID0gdGhpcy5hbmNob3JUb3AgKyB0aGlzLmJvZHlUb3A7XG5cbiAgICAgICAgbGV0IG5leHRZID0gYW5jaG9yWSArIHRoaXMuYW5jaG9ySGVpZ2h0O1xuXG4gICAgICAgIHN3aXRjaCAoc3RhdGUuYW5jaG9yWUFsaWduKSB7XG4gICAgICAgIGNhc2UgcG9zaXRpb24uU1RBUlQ6XG4gICAgICAgICAgICBuZXh0WSA9IGFuY2hvclk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIHBvc2l0aW9uLk1JRERMRTpcbiAgICAgICAgICAgIG5leHRZID0gYW5jaG9yWSArIHRoaXMuYW5jaG9ySGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChzdGF0ZS5zZWxmWUFsaWduKSB7XG4gICAgICAgIGNhc2UgcG9zaXRpb24uTUlERExFOlxuICAgICAgICAgICAgbmV4dFkgLT0gZGlhbG9nLmNsaWVudEhlaWdodCAvIDI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIHBvc2l0aW9uLkVORDpcbiAgICAgICAgICAgIG5leHRZIC09IGRpYWxvZy5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0WTtcbiAgICB9XG5cbiAgICBnZXRBbGlnbm1lbnRDb3JyZWN0aW9uSWZPdmVyZmxvd2luZyh4LCB5KSB7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5hdXRvUmVwb3NpdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29ycmVjdGlvbnMgPSB7Li4udGhpcy5zdGF0ZX07XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gUG9wb3Zlci5wb3NpdGlvbjtcblxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZGlhbG9nLiR3cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGllbnRIZWlnaHQ7XG4gICAgICAgIGNvbnN0IHhNYXggPSBkb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoO1xuICAgICAgICBjb25zdCB5TWF4ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7XG5cbiAgICAgICAgaWYgKHggKyB3aWR0aCA+IHhNYXgpIHsgLy8gb3ZlcmZsb3dpbmcgb2ZmIHRvIHRoZSByaWdodFxuICAgICAgICAgICAgY29ycmVjdGlvbnMuYW5jaG9yWEFsaWduID0gcG9zaXRpb24uU1RBUlQ7XG4gICAgICAgICAgICBjb3JyZWN0aW9ucy5zZWxmWEFsaWduID0gcG9zaXRpb24uRU5EO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHggPCAwKSB7IC8vIG92ZXJmbG93aW5nIG9mZiB0byB0aGUgbGVmdFxuICAgICAgICAgICAgY29ycmVjdGlvbnMuYW5jaG9yWEFsaWduID0gcG9zaXRpb24uRU5EO1xuICAgICAgICAgICAgY29ycmVjdGlvbnMuc2VsZlhBbGlnbiA9IHBvc2l0aW9uLlNUQVJUO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHkgKyBoZWlnaHQgPiB5TWF4KSB7IC8vIG92ZXJmbG93aW5nIGJlbG93XG4gICAgICAgICAgICAvLyBpZiBsZWZ0L3JpZ2h0XG4gICAgICAgICAgICBpZiAoICAgKGNvcnJlY3Rpb25zLmFuY2hvclhBbGlnbiA9PT0gcG9zaXRpb24uU1RBUlQgJiYgY29ycmVjdGlvbnMuc2VsZlhBbGlnbiA9PT0gcG9zaXRpb24uRU5EKVxuICAgICAgICAgICAgICAgIHx8IChjb3JyZWN0aW9ucy5hbmNob3JYQWxpZ24gPT09IHBvc2l0aW9uLkVORCAmJiBjb3JyZWN0aW9ucy5zZWxmWEFsaWduID09PSBwb3NpdGlvbi5TVEFSVCkpIHtcbiAgICAgICAgICAgICAgICBjb3JyZWN0aW9ucy5hbmNob3JZQWxpZ24gPSBwb3NpdGlvbi5FTkQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25zLmFuY2hvcllBbGlnbiA9IHBvc2l0aW9uLlNUQVJUO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb3JyZWN0aW9ucy5zZWxmWUFsaWduID0gcG9zaXRpb24uRU5EO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHkgPCAwKSB7IC8vIG92ZXJmbG93aW5nIGFib3ZlXG4gICAgICAgICAgICAvLyBpZiBsZWZ0L3JpZ2h0XG4gICAgICAgICAgICBpZiAoICAgKGNvcnJlY3Rpb25zLmFuY2hvclhBbGlnbiA9PT0gcG9zaXRpb24uU1RBUlQgJiYgY29ycmVjdGlvbnMuc2VsZlhBbGlnbiA9PT0gcG9zaXRpb24uRU5EKVxuICAgICAgICAgICAgICAgIHx8IChjb3JyZWN0aW9ucy5hbmNob3JYQWxpZ24gPT09IHBvc2l0aW9uLkVORCAmJiBjb3JyZWN0aW9ucy5zZWxmWEFsaWduID09PSBwb3NpdGlvbi5TVEFSVCkpIHtcbiAgICAgICAgICAgICAgICBjb3JyZWN0aW9ucy5hbmNob3JZQWxpZ24gPSBwb3NpdGlvbi5TVEFSVDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29ycmVjdGlvbnMuYW5jaG9yWUFsaWduID0gcG9zaXRpb24uRU5EO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb3JyZWN0aW9ucy5zZWxmWUFsaWduID0gcG9zaXRpb24uU1RBUlQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29ycmVjdGlvbnM7XG4gICAgfVxuXG4gICAgYXBwbHlUcmFuc2xhdGlvbihub2RlLCB4LCB5KSB7XG4gICAgICAgIGlmICh0cmFuc2Zvcm1Qcm9wKSB7XG4gICAgICAgICAgICBub2RlLnN0eWxlW3RyYW5zZm9ybVByb3BdID0gYHRyYW5zbGF0ZSgke3h9cHgsICR7eX1weClgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5zdHlsZS5sZWZ0ID0geCArICdweCc7XG4gICAgICAgICAgICBub2RlLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlkQWxpZ25tZW50Q2hhbmdlKG5leHRBbGlnbm1lbnQsIGN1cnJlbnRBbGlnbm1lbnQgPSB0aGlzLnN0YXRlKSB7XG4gICAgICAgIHJldHVybiAgICBuZXh0QWxpZ25tZW50LmFuY2hvclhBbGlnbiAhPT0gY3VycmVudEFsaWdubWVudC5hbmNob3JYQWxpZ25cbiAgICAgICAgICAgICAgIHx8IG5leHRBbGlnbm1lbnQuYW5jaG9yWUFsaWduICE9PSBjdXJyZW50QWxpZ25tZW50LmFuY2hvcllBbGlnblxuICAgICAgICAgICAgICAgfHwgbmV4dEFsaWdubWVudC5zZWxmWEFsaWduICE9PSBjdXJyZW50QWxpZ25tZW50LnNlbGZYQWxpZ25cbiAgICAgICAgICAgICAgIHx8IG5leHRBbGlnbm1lbnQuc2VsZllBbGlnbiAhPT0gY3VycmVudEFsaWdubWVudC5zZWxmWUFsaWduO1xuICAgIH1cblxuICAgIGFsaWduID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBhbmNob3IgPSAgIHRoaXMucHJvcHMuYW5jaG9yIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLmFuY2hvclxuICAgICAgICAgICAgICAgICAgICAgICA6IGZpbmRET01Ob2RlKHRoaXMucHJvcHMuYW5jaG9yKTtcblxuICAgICAgICB0aGlzLmNhY2hlVmlld3BvcnRDYXJ0b2dyYXBoeShhbmNob3IpO1xuXG4gICAgICAgIGNvbnN0IGR4ID0gTWF0aC5yb3VuZCh0aGlzLmdldE5leHREaWFsb2dYUG9zaXRpb24oYW5jaG9yKSk7XG4gICAgICAgIGNvbnN0IGR5ID0gTWF0aC5yb3VuZCh0aGlzLmdldE5leHREaWFsb2dZUG9zaXRpb24oYW5jaG9yKSk7XG5cbiAgICAgICAgY29uc3QgYWxpZ25tZW50Q29ycmVjdGlvbiA9IHRoaXMuZ2V0QWxpZ25tZW50Q29ycmVjdGlvbklmT3ZlcmZsb3dpbmcoZHgsIGR5KTtcblxuICAgICAgICBpZiAoYWxpZ25tZW50Q29ycmVjdGlvbiAmJiB0aGlzLmRpZEFsaWdubWVudENoYW5nZShhbGlnbm1lbnRDb3JyZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoYWxpZ25tZW50Q29ycmVjdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGUgY2FyZXQgaXMgaW5pdGlhbGx5IHBvc2l0aW9uZWQgYXQgMCwwIGluc2lkZSB0aGUgZGlhbG9nXG4gICAgICAgIC8vIHdoaWNoIGlzIGFscmVhZHkgcG9zaXRpb25lZCBhdCB0aGUgYW5jaG9yLCBzbyB3ZSBqdXN0IG5lZWQgdG9cbiAgICAgICAgLy8gbWFrZSBzbWFsbCBhZGp1c3RtZW50cyBhcyBuZWNlc3NhcnkgdG8gbGluZSB1cCB0aGUgY2FyZXRcbiAgICAgICAgLy8gd2l0aCB0aGUgdmlzdWFsIGNlbnRlciBvZiB0aGUgYW5jaG9yXG5cbiAgICAgICAgdGhpcy4kY2FyZXQuc3R5bGUubGVmdCA9IE1hdGgucm91bmQodGhpcy5nZXROZXh0Q2FyZXRYUG9zaXRpb24oYW5jaG9yKSkgKyAncHgnO1xuICAgICAgICB0aGlzLiRjYXJldC5zdHlsZS50b3AgPSBNYXRoLnJvdW5kKHRoaXMuZ2V0TmV4dENhcmV0WVBvc2l0aW9uKGFuY2hvcikpICsgJ3B4JztcblxuICAgICAgICB0aGlzLmFwcGx5VHJhbnNsYXRpb24odGhpcy4kY2FyZXQsIGN4LCAwKTtcbiAgICAgICAgdGhpcy5hcHBseVRyYW5zbGF0aW9uKHRoaXMuZGlhbG9nLiR3cmFwcGVyLCBkeCwgZHkpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLmFsaWduKCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmFsaWduLCB0cnVlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7IHRoaXMuYWxpZ24oKTsgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgeyB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5hbGlnbiwgdHJ1ZSk7IH1cblxuICAgIGdldENsYXNzQWxpZ25tZW50RnJhZ21lbnQoY29uc3RhbnQpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBQb3BvdmVyLnBvc2l0aW9uO1xuXG4gICAgICAgIHN3aXRjaCAoY29uc3RhbnQpIHtcbiAgICAgICAgY2FzZSBwb3NpdGlvbi5TVEFSVDpcbiAgICAgICAgICAgIHJldHVybiAnc3RhcnQnO1xuXG4gICAgICAgIGNhc2UgcG9zaXRpb24uTUlERExFOlxuICAgICAgICAgICAgcmV0dXJuICdtaWRkbGUnO1xuXG4gICAgICAgIGNhc2UgcG9zaXRpb24uRU5EOlxuICAgICAgICAgICAgcmV0dXJuICdlbmQnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7Z2V0Q2xhc3NBbGlnbm1lbnRGcmFnbWVudDogZ2V0RnJhZywgcHJvcHMsIHN0YXRlfSA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxQb3J0YWwgey4uLnByb3BzLnBvcnRhbFByb3BzfT5cbiAgICAgICAgICAgICAgICA8RGlhbG9nXG4gICAgICAgICAgICAgICAgICAgIHsuLi5vbWl0KHByb3BzLCBQb3BvdmVyLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgICAgIHJlZj17KGluc3RhbmNlKSA9PiAodGhpcy5kaWFsb2cgPSBpbnN0YW5jZSl9XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZT17XG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jbG9uZUVsZW1lbnQocHJvcHMuY2FyZXRDb21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IChub2RlKSA9PiAodGhpcy4kY2FyZXQgPSBub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN4KCdiLXBvcG92ZXItY2FyZXQnLCBwcm9wcy5jYXJldENvbXBvbmVudC5wcm9wcy5jbGFzc05hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyUHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLndyYXBwZXJQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3goJ2ItcG9wb3ZlcicsIHByb3BzLndyYXBwZXJQcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYGItcG9wb3Zlci1hbmNob3IteC0ke2dldEZyYWcoc3RhdGUuYW5jaG9yWEFsaWduKX1gXTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYGItcG9wb3Zlci1hbmNob3IteS0ke2dldEZyYWcoc3RhdGUuYW5jaG9yWUFsaWduKX1gXTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYGItcG9wb3Zlci1zZWxmLXgtJHtnZXRGcmFnKHN0YXRlLnNlbGZYQWxpZ24pfWBdOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtgYi1wb3BvdmVyLXNlbGYteS0ke2dldEZyYWcoc3RhdGUuc2VsZllBbGlnbil9YF06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgfX0gLz5cbiAgICAgICAgICAgIDwvUG9ydGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZ3Jlc3NpdmVEaXNjbG9zdXJlIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgdmFsaWQgSFRNTCB0YWcgbmFtZSBvciBhIFJlYWN0IGNvbXBvbmVudCBmYWN0b3J5LCBhbnl0aGluZyB0aGF0IGNhbiBiZSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBSZWFjdC5jcmVhdGVFbGVtZW50YFxuICAgICAgICAgKi9cbiAgICAgICAgY29tcG9uZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFsbG93cyB0aGUgZGlzY2xvc3VyZSB0byBiZSByZW5kZXJlZCBleHBhbmRlZCBieSBkZWZhdWx0XG4gICAgICAgICAqL1xuICAgICAgICBleHBhbmRlZDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBjb250ZW50IGlzIHNob3duOyBub3QgY2FsbGVkIG9uIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAqL1xuICAgICAgICBvbkV4cGFuZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBjb250ZW50IGlzIGhpZGRlbjsgbm90IGNhbGxlZCBvbiBpbml0aWFsIHJlbmRlclxuICAgICAgICAgKi9cbiAgICAgICAgb25IaWRlOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBzaG93biBuZXh0IHRvIHRoZSBleHBhbnNpb24gdG9nZ2xlLCBlLmcuIFwiQWR2YW5jZWQgT3B0aW9uc1wiXG4gICAgICAgICAqL1xuICAgICAgICB0ZWFzZXI6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb250ZW50IHRvIGJlIHNob3duIG5leHQgdG8gdGhlIGV4cGFuc2lvbiB0b2dnbGUgd2hlbiB0aGUgZGlzY2xvc3VyZSBpcyBpbiBcImV4cGFuZGVkXCIgc3RhdGUsIGUuZy4gXCJIaWRlIEFkdmFuY2VkIE9wdGlvbnNcIlxuICAgICAgICAgKi9cbiAgICAgICAgdGVhc2VyRXhwYW5kZWQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1kaXNjbG9zdXJlLXRvZ2dsZWAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgdG9nZ2xlUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGNvbXBvbmVudDogJ2RpdicsXG4gICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcbiAgICAgICAgb25FeHBhbmQ6IG5vb3AsXG4gICAgICAgIG9uSGlkZTogbm9vcCxcbiAgICAgICAgdGVhc2VyOiBudWxsLFxuICAgICAgICB0ZWFzZXJFeHBhbmRlZDogbnVsbCxcbiAgICAgICAgdG9nZ2xlUHJvcHM6IHt9LFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhQcm9ncmVzc2l2ZURpc2Nsb3N1cmUuZGVmYXVsdFByb3BzKVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGV4cGFuZGVkOiB0aGlzLnByb3BzLmV4cGFuZGVkLFxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHMpIHtcbiAgICAgICAgaWYgKG5ld1Byb3BzLmV4cGFuZGVkICE9PSB0aGlzLnByb3BzLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogbmV3UHJvcHMuZXhwYW5kZWR9LCB0aGlzLmRpc3BhdGNoQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGF0Y2hDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wc1t0aGlzLnN0YXRlLmV4cGFuZGVkID8gJ29uRXhwYW5kJyA6ICdvbkhpZGUnXSgpO1xuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZH0sIHRoaXMuZGlzcGF0Y2hDYWxsYmFjayk7XG5cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy50b2dnbGVQcm9wcy5vbkNsaWNrKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy50b2dnbGVQcm9wcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZH0sIHRoaXMuZGlzcGF0Y2hDYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLnRvZ2dsZVByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMudG9nZ2xlUHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSdjb250ZW50J1xuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdiLWRpc2Nsb3N1cmUtY29udGVudCc+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0aGlzLnByb3BzLmNvbXBvbmVudFxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFByb2dyZXNzaXZlRGlzY2xvc3VyZS5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWRpc2Nsb3N1cmUnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICdiLWRpc2Nsb3N1cmUtZXhwYW5kZWQnOiB0aGlzLnN0YXRlLmV4cGFuZGVkLFxuICAgICAgICAgICAgICAgIH0pfT5cblxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMudG9nZ2xlUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0ndG9nZ2xlJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWRpc2Nsb3N1cmUtdG9nZ2xlJywgdGhpcy5wcm9wcy50b2dnbGVQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfVxuICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9JzAnPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5leHBhbmRlZCA/IHRoaXMucHJvcHMudGVhc2VyRXhwYW5kZWQgfHwgdGhpcy5wcm9wcy50ZWFzZXIgOiB0aGlzLnByb3BzLnRlYXNlcn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckNvbnRlbnQoKX1cbiAgICAgICAgICAgIDwvdGhpcy5wcm9wcy5jb21wb25lbnQ+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi9ib3VuZGxlc3MtYnV0dG9uL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9ncmVzcyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1wcm9ncmVzcy1jYW5jZWxgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGNhbmNlbFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgdmFsaWQgSFRNTCB0YWcgbmFtZSBvciBhIFJlYWN0IGNvbXBvbmVudCBmYWN0b3J5LCBhbnl0aGluZyB0aGF0IGNhbiBiZSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBSZWFjdC5jcmVhdGVFbGVtZW50YFxuICAgICAgICAgKi9cbiAgICAgICAgY29tcG9uZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgIFByb3BUeXBlcy5mdW5jLFxuICAgICAgICBdKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIHZhbHVlIHRvIHNob3cgYXMgYSBsYWJlbCBvZiB0aGUgcHJvZ3Jlc3MsIGUuZy4gXCI1MCVcIlxuICAgICAgICAgKi9cbiAgICAgICAgbGFiZWw6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1wcm9ncmVzcy1sYWJlbGAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgbGFiZWxQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogaWYgc3VwcGxpZWQsIGFkZHMgYSBjYW5jZWwgZWxlbWVudCBhbmQgY2FsbHMgdGhpcyBmdW5jdGlvbiB3aGVuIHRoYXQgZWxlbWVudCBpcyBjbGlja2VkXG4gICAgICAgICAqL1xuICAgICAgICBvbkNhbmNlbDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBpbnRlZ2VyIChhbmQgdW5pdCwgaWYgYXBwbGljYWJsZSkgb2YgdGhlIGN1cnJlbnQgcHJvZ3Jlc3Mgc3RhdGUsIGUuZy4gMC4wMSAob3BhY2l0eSlcbiAgICAgICAgICovXG4gICAgICAgIHByb2dyZXNzOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgIFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1wcm9ncmVzc2Agbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvZ3Jlc3NQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIENTUyBwcm9wZXJ0eSB0byB0d2VlbiAobXVzdCBhY2NlcHQgcGVyY2VudGFnZXMpIC0gZGVmYXVsdHMgdG8gXCJ3aWR0aFwiXG4gICAgICAgICAqL1xuICAgICAgICB0d2VlblByb3BlcnR5OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGNhbmNlbFByb3BzOiB7fSxcbiAgICAgICAgY29tcG9uZW50OiAnZGl2JyxcbiAgICAgICAgbGFiZWw6IG51bGwsXG4gICAgICAgIGxhYmVsUHJvcHM6IHt9LFxuICAgICAgICBvbkNhbmNlbDogbm9vcCxcbiAgICAgICAgcHJvZ3Jlc3M6IHVuZGVmaW5lZCxcbiAgICAgICAgcHJvZ3Jlc3NQcm9wczoge30sXG4gICAgICAgIHR3ZWVuUHJvcGVydHk6ICd3aWR0aCcsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKFByb2dyZXNzLmRlZmF1bHRQcm9wcylcblxuICAgIHJlbmRlckxhYmVsKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5sYWJlbCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmxhYmVsUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0nbGFiZWwnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcHJvZ3Jlc3MtbGFiZWwnLCB0aGlzLnByb3BzLmxhYmVsUHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmxhYmVsfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25DYW5jZWwpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5jYW5jZWxQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdjYW5jZWwnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcHJvZ3Jlc3MtY2FuY2VsJywgdGhpcy5wcm9wcy5jYW5jZWxQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgICAgICBvblByZXNzZWQ9e3RoaXMucHJvcHMub25DYW5jZWx9IC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyUHJvZ3Jlc3MoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMucHJvZ3Jlc3NQcm9wc31cbiAgICAgICAgICAgICAgICByZWY9J3Byb2dyZXNzJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcHJvZ3Jlc3MnLCB0aGlzLnByb3BzLnByb2dyZXNzUHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICdiLXByb2dyZXNzLWluZGV0ZXJtaW5hdGUnOiB0eXBlb2YgdGhpcy5wcm9wcy5wcm9ncmVzcyA9PT0gJ3VuZGVmaW5lZCcsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgcm9sZT0ncHJlc2VudGF0aW9uJ1xuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvcHMucHJvZ3Jlc3NQcm9wcy5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgW3RoaXMucHJvcHMudHdlZW5Qcm9wZXJ0eV06IHRoaXMucHJvcHMucHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgfX0gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBQcm9ncmVzcy5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXByb2dyZXNzLXdyYXBwZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclByb2dyZXNzKCl9XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTGFiZWwoKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJDYW5jZWwoKX1cbiAgICAgICAgICAgIDwvdGhpcy5wcm9wcy5jb21wb25lbnQ+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYWRpbyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1yYWRpb2Agbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgaW5wdXRQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFJlYWN0LXJlbmRlcmFibGUgY29udGVudCwgbW9zdCBjb21tb25seSBhIHNpbXBsZSBzdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgIGxhYmVsOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItcmFkaW8tbGFiZWxgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGxhYmVsUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHBhc3N0aHJvdWdoIHRvIHRoZSBIVE1MIGBuYW1lYCBhdHRyaWJ1dGUgb24gdGhlIGAuYi1yYWRpb2Agbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBiZWNvbWVzIHNlbGVjdGVkOyBiYWNraW5nIGRhdGEgbXVzdCBiZSB1cGRhdGVkIHRvIHBlcnNpc3QgdGhlIHN0YXRlIGNoYW5nZVxuICAgICAgICAgKi9cbiAgICAgICAgb25TZWxlY3RlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRldGVybWluZXMgdGhlIGFjdGl2YXRpb24gc3RhdGUgb2YgdGhlIHJhZGlvIGNvbnRyb2wsIHNlZSBSZWFjdCBbXCJjb250cm9sbGVkIGlucHV0c1wiXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL2Zvcm1zLmh0bWwjY29udHJvbGxlZC1jb21wb25lbnRzKSlcbiAgICAgICAgICovXG4gICAgICAgIHNlbGVjdGVkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcGFzc3Rocm91Z2ggdG8gdGhlIEhUTUwgYHZhbHVlYCBhdHRyaWJ1dGUgb24gdGhlIGAuYi1yYWRpb2Agbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBpbnB1dFByb3BzOiB7fSxcbiAgICAgICAgbGFiZWw6IG51bGwsXG4gICAgICAgIGxhYmVsUHJvcHM6IHt9LFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgb25TZWxlY3RlZDogbm9vcCxcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogJycsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKFJhZGlvLmRlZmF1bHRQcm9wcylcblxuICAgIHV1aWQgPSB1dWlkKClcblxuICAgIGhhbmRsZUNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25TZWxlY3RlZChldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2hhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2hhbmdlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcklucHV0KCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuaW5wdXRQcm9wc31cbiAgICAgICAgICAgICAgICByZWY9J2lucHV0J1xuICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlkIHx8IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5pZCB8fCB0aGlzLnV1aWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1yYWRpbycsIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2ItcmFkaW8tc2VsZWN0ZWQnOiB0aGlzLnByb3BzLnNlbGVjdGVkLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy52YWx1ZX1cbiAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnByb3BzLnNlbGVjdGVkfVxuICAgICAgICAgICAgICAgIGFyaWEtY2hlY2tlZD17U3RyaW5nKHRoaXMucHJvcHMuc2VsZWN0ZWQpfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJMYWJlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubGFiZWwpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmxhYmVsUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0nbGFiZWwnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcmFkaW8tbGFiZWwnLCB0aGlzLnByb3BzLmxhYmVsUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgaHRtbEZvcj17dGhpcy5wcm9wcy5pZCB8fCB0aGlzLnByb3BzLmlucHV0UHJvcHMuaWQgfHwgdGhpcy51dWlkfT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMubGFiZWx9XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgUmFkaW8uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1yYWRpby13cmFwcGVyJywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJJbnB1dCgpfVxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckxhYmVsKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbWF0Y2hPcGVyYXRvcnNSZSA9IC9bfFxcXFx7fSgpW1xcXV4kKyo/Ll0vZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc3RyKSB7XG5cdGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgc3RyaW5nJyk7XG5cdH1cblxuXHRyZXR1cm4gc3RyLnJlcGxhY2UobWF0Y2hPcGVyYXRvcnNSZSwgJ1xcXFwkJicpO1xufTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IGVzY2FwZXIgZnJvbSAnZXNjYXBlLXN0cmluZy1yZWdleHAnO1xuXG5pbXBvcnQgSW5wdXQgZnJvbSAnLi4vYm91bmRsZXNzLWlucHV0L2luZGV4JztcbmltcG9ydCBleHRyYWN0Q2hpbGRQcm9wcyBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb2JqZWN0LWludGVyc2VjdGlvbi9pbmRleCc7XG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXgnO1xuaW1wb3J0IGlzU3RyaW5nIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1zdHJpbmcvaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5pbXBvcnQgdXVpZCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtdXVpZC9pbmRleCc7XG5cbi8qKlxuICogX19UeXBlYWhlYWQgYWNjZXB0cyBhbGwgc3VwcG9ydGVkIFtJbnB1dCBwcm9wc10oLi4vSW5wdXQvUkVBRE1FLm1kI2F2YWlsYWJsZS1wcm9wcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi10ZXh0dWFsLWlucHV0LXdyYXBwZXJgIG5vZGVfX1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUeXBlYWhlYWQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgbW9kZSA9IHtcbiAgICAgICAgJ1NUQVJUU19XSVRIJzogJ1NUQVJUU19XSVRIJyxcbiAgICAgICAgJ0ZVWlpZJzogJ0ZVWlpZJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAuLi5JbnB1dC5wcm9wVHlwZXMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBtZWNoYW5pc20gdXNlZCB0byBpZGVudGlmeSBhbmQgbWFyayBtYXRjaGluZyBzdWJzdHJpbmdzOyBhIGN1c3RvbSBzZXQgY2FuIGJlIHByb3ZpZGVkIHdpdGggdGhlIE9iamVjdCBmb3JtYXQ6PGJyLz48YnIvPlxuXG4gICAgICAgICAqIC0gX19hbGdvcml0aG0ubWF0Y2hlcl9fIGBGdW5jdGlvbnxUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSHxUeXBlYWhlYWQubW9kZS5GVVpaWWBcbiAgICAgICAgICAgICBwcm92aWRlIGEgY3VzdG9tIG1hdGNoaW5nIGFsZ29yaXRobSwgYWRoZXJpbmcgdG8gdGhpcyBmb3JtYXQ6XG5cbiAgICAgICAgICogYGBganNcbiAgICAgICAgICogbXlNYXRjaEZ1bmMoaW5wdXRUZXh0LCBlbnRpdGllcykge1xuICAgICAgICAgKiAgICAgLy8gLi4uXG4gICAgICAgICAqICAgICByZXR1cm4gW21hdGNoMUluZGV4LCBtYXRjaDJJbmRleCwgLi4uIF07XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG5cbiAgICAgICAgICogdGhlIGluZGV4IGlzIHN0b3JlZCBpbnN0ZWFkIG9mIHRoZSBlbnRpcmUgZW50aXR5IHRvIGNvbnNlcnZlIG1lbW9yeSBhbmQgcmVkdWNlIGRhdGEgZHVwbGljYXRpb25cblxuICAgICAgICAgKiAtIF9fYWxnb3JpdGhtLm1hcmtlcl9fIGBGdW5jdGlvbnxUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSHxUeXBlYWhlYWQubW9kZS5GVVpaWWBcbiAgICAgICAgICogICBwcm92aWRlIGEgY3VzdG9tIG1hcmtpbmcgZnVuY3Rpb24sIGFsbG93cyBmb3IgdGhlIHVzZSBvZiBjdXN0b20gdGVtcGxhdGluZyAvIGRldmVsb3Blci1kZWZpbmVkIENTUyBob29rcywgYWRoZXJpbmcgdG8gdGhpcyBmb3JtYXQ6XG5cbiAgICAgICAgICogYGBganNcbiAgICAgICAgICogbXlNYXJrRnVuYyhpbnB1dFRleHQsIGVudGl0eSkge1xuICAgICAgICAgKiAgICAgcmV0dXJuIDxkZXNpcmVkIEpTWCB0ZW1wbGF0aW5nPiBdO1xuICAgICAgICAgKiB9XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgYWxnb3JpdGhtOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICAgICAgVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgsXG4gICAgICAgICAgICAgICAgVHlwZWFoZWFkLm1vZGUuRlVaWlksXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAgICAgbWFya2VyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgICAgICAgICAgICAgIFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICAgICAgICAgICAgICBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBtYXRjaGVyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgICAgICAgICAgICAgIFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICAgICAgICAgICAgICBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBdKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogaWYgYHRydWVgLCBjbGVhcnMgdGhlIGlucHV0IHRleHQgd2hlbiBhIChwYXJ0aWFsKSBtYXRjaCBpcyBzZWxlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJQYXJ0aWFsSW5wdXRPblNlbGVjdGlvbjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYXBwcm9wcmlhdGUgYC5iLXR5cGVhaGVhZC1tYXRjaGAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgZW50aXRpZXM6IFByb3BUeXBlcy5hcnJheU9mKFxuICAgICAgICAgICAgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCB0byBiZSB1c2VkIHRvIGRvIHN0cmluZyBjb21wYXJpc29uIGFuZCBtYXRjaCBhZ2FpbnN0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdGV4dDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlbmRlcnMgYSBkaXNhYmxlZCB0ZXh0ZmllbGQgd2l0aCB0aGUgZnVsbCB0ZXh0IG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaW5wdXQgaGludDsgd2lsbCByZW1haW4gYmxhbmsgaWYgdGhlIG1hdGNoZWQgc3Vic3RyaW5nIGlzIG5vdCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSB1c2VyIGlucHV0XG4gICAgICAgICAqL1xuICAgICAgICBoaW50OiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItdHlwZWFoZWFkLWhpbnRgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGhpbnRQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItdHlwZWFoZWFkLW1hdGNoLXdyYXBwZXJgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIG1hdGNoV3JhcHBlclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgXCJvZmZzY3JlZW5cIiBjbGFzcyB1c2VkIGJ5IHlvdXIgYXBwbGljYXRpb247IHNwZWNpZmljYWxseSB0byByZXRhaW4gW0FSSUEgbmF2aWdhYmlsaXR5XShodHRwOi8vc25vb2suY2EvYXJjaGl2ZXMvaHRtbF9hbmRfY3NzL2hpZGluZy1jb250ZW50LWZvci1hY2Nlc3NpYmlsaXR5KSBhcyBgZGlzcGxheTogbm9uZWAgZXhjbHVkZXMgdGhlIGVsZW1lbnQgZnJvbSBjb25zaWRlcmF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBvZmZzY3JlZW5DbGFzczogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdoZW4gdGhlIHVzZXIgcHJlc3NlcyBgRW50ZXJgIHdpdGggbm8gYXV0b3N1Z2dlc3QgaGludCBhdmFpbGFibGUsIGluZGljYXRpbmcgdGhhdCBpbnB1dCBpcyBjb21wbGV0ZVxuICAgICAgICAgKi9cbiAgICAgICAgb25Db21wbGV0ZTogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aXRoIHRoZSBpbmRleCBvZiB0aGUgaGlnaGxpZ2h0ZWQgZW50aXR5IGR1ZSB0byBrZXlib2FyZCBzZWxlY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIG9uRW50aXR5SGlnaGxpZ2h0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2l0aCB0aGUgaW5kZXggb2YgdGhlIGVudGl0eSBzZWxlY3RlZCBieSB0aGUgdXNlclxuICAgICAgICAgKi9cbiAgICAgICAgb25FbnRpdHlTZWxlY3RlZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgLi4uSW5wdXQuZGVmYXVsdFByb3BzLFxuICAgICAgICBhbGdvcml0aG06IFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICBjbGVhclBhcnRpYWxJbnB1dE9uU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgICAgZW50aXRpZXM6IFtdLFxuICAgICAgICBoaW50OiBudWxsLFxuICAgICAgICBoaW50UHJvcHM6IHt9LFxuICAgICAgICBtYXRjaFdyYXBwZXJQcm9wczoge30sXG4gICAgICAgIG9mZnNjcmVlbkNsYXNzOiAnYi1vZmZzY3JlZW4nLFxuICAgICAgICBvbkNvbXBsZXRlOiBub29wLFxuICAgICAgICBvbkVudGl0eUhpZ2hsaWdodGVkOiBub29wLFxuICAgICAgICBvbkVudGl0eVNlbGVjdGVkOiBub29wLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhUeXBlYWhlYWQuZGVmYXVsdFByb3BzKVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGVudGl0eU1hdGNoSW5kZXhlczogW10sXG4gICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgIGlzQ29udHJvbGxlZDogaXNTdHJpbmcodGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlKSxcbiAgICAgICAgaW5wdXQ6IHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZVxuICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5pbnB1dFByb3BzLmRlZmF1bHRWYWx1ZVxuICAgICAgICAgICAgICAgfHwgJycsXG4gICAgICAgIHNlbGVjdGVkRW50aXR5SW5kZXg6IC0xLFxuICAgIH1cblxuICAgIG1vdW50ZWQgPSBmYWxzZVxuXG4gICAgdXBkYXRlSW5wdXRTdGF0ZSA9ICh2YWx1ZSA9ICcnKSA9PiB0aGlzLnNldFN0YXRlKHtpbnB1dDogdmFsdWV9KVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlIHx8IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkVudGl0eUhpZ2hsaWdodGVkKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICBpZiAobmV4dFByb3BzLmVudGl0aWVzICE9PSB0aGlzLnByb3BzLmVudGl0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGVzKG5leHRQcm9wcy5lbnRpdGllcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFByb3BzLmlucHV0UHJvcHMudmFsdWUgIT09IHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dFN0YXRlKG5leHRQcm9wcy5pbnB1dFByb3BzLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lbnRpdHlNYXRjaEluZGV4ZXMubGVuZ3RoICYmICFwcmV2U3RhdGUuZW50aXR5TWF0Y2hJbmRleGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5yZWZzLm1hdGNoZXMuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgfSAvLyBmaXggYW4gb2RkIGJ1ZyBpbiBGRiB3aGVyZSBpdCBpbml0aWFsaXplcyB0aGUgZWxlbWVudCB3aXRoIGFuIGluY29ycmVjdCBzY3JvbGxUb3BcblxuICAgICAgICBpZiAoICAgdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4ID49IDBcbiAgICAgICAgICAgICYmIHRoaXMucHJvcHMuZW50aXRpZXNbdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4XSAhPT0gcHJldlByb3BzLmVudGl0aWVzW3ByZXZTdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4XSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkVudGl0eUhpZ2hsaWdodGVkKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnByb3BzLmVudGl0aWVzW3RoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleF07XG5cbiAgICAgICAgcmV0dXJuIGVudGl0eSA/IGVudGl0eS50ZXh0IDogJyc7XG4gICAgfVxuXG4gICAgaGFuZGxlTWF0Y2hDbGljayhpbmRleCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZEVudGl0eUluZGV4OiBpbmRleH0sIHRoaXMuc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkpO1xuICAgIH1cblxuICAgIHNlbGVjdE1hdGNoKGRlbHRhKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB0aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcztcbiAgICAgICAgY29uc3QgdG90YWxNYXRjaGVzID0gbWF0Y2hlcy5sZW5ndGg7XG4gICAgICAgIGxldCBuZXh0SW5kZXggPSBtYXRjaGVzLmluZGV4T2YodGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4KSArIGRlbHRhO1xuXG4gICAgICAgIGlmICh0b3RhbE1hdGNoZXMpIHtcbiAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgbmV4dEluZGV4ID0gdG90YWxNYXRjaGVzIC0gMTsgLy8gcmV2ZXJzZSBsb29wXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5leHRJbmRleCA+PSB0b3RhbE1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICBuZXh0SW5kZXggPSAwOyAvLyBsb29wXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoSW5kZXggPSBtYXRjaGVzW25leHRJbmRleF07XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzTm9kZSA9IHRoaXMucmVmcy5tYXRjaGVzO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlc05vZGVZRW5kID0gbWF0Y2hlc05vZGUuc2Nyb2xsVG9wICsgbWF0Y2hlc05vZGUuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hOb2RlID0gdGhpcy5yZWZzW2BtYXRjaF8kJHttYXRjaEluZGV4fWBdO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hOb2RlWVN0YXJ0ID0gbWF0Y2hOb2RlLm9mZnNldFRvcDtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoTm9kZVlFbmQgPSBtYXRjaE5vZGVZU3RhcnQgKyBtYXRjaE5vZGUuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgICAgICAvLyBicmluZyBpbnRvIHZpZXcgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICBpZiAobWF0Y2hOb2RlWUVuZCA+PSBtYXRjaGVzTm9kZVlFbmQpIHsgLy8gYmVsb3dcbiAgICAgICAgICAgICAgICBtYXRjaGVzTm9kZS5zY3JvbGxUb3AgKz0gbWF0Y2hOb2RlWUVuZCAtIG1hdGNoZXNOb2RlWUVuZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hOb2RlWVN0YXJ0IDw9IG1hdGNoZXNOb2RlLnNjcm9sbFRvcCkgeyAvLyBhYm92ZVxuICAgICAgICAgICAgICAgIG1hdGNoZXNOb2RlLnNjcm9sbFRvcCA9IG1hdGNoTm9kZVlTdGFydDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRFbnRpdHlJbmRleDogbWF0Y2hJbmRleH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRNYXRjaGVzID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5tb3VudGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVudGl0eUluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICBlbnRpdHlNYXRjaEluZGV4ZXM6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRJbnB1dE5vZGUgPSAoKSA9PiB0aGlzLnJlZnMuaW5wdXQucmVmcy5maWVsZFxuXG4gICAgc2VsZWN0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuZ2V0SW5wdXROb2RlKCk7XG5cbiAgICAgICAgaW5wdXQuc2VsZWN0aW9uU3RhcnQgPSAwO1xuICAgICAgICBpbnB1dC5zZWxlY3Rpb25FbmQgPSB0aGlzLmdldFZhbHVlKCkubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvY3VzID0gKCkgPT4gdGhpcy5nZXRJbnB1dE5vZGUoKS5mb2N1cygpXG4gICAgZ2V0VmFsdWUgPSAoKSA9PiB0aGlzLnJlZnMuaW5wdXQuZ2V0VmFsdWUoKVxuXG4gICAgc2V0VmFsdWUgPSAodmFsdWUgPSAnJykgPT4ge1xuICAgICAgICB0aGlzLnJlZnMuaW5wdXQuc2V0VmFsdWUodmFsdWUpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXRTdGF0ZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMucmVzZXRNYXRjaGVzKCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBjdXJzb3JBdEVuZE9mSW5wdXQoKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdldElucHV0Tm9kZSgpO1xuXG4gICAgICAgIHJldHVybiAgICBub2RlLnNlbGVjdGlvblN0YXJ0ID09PSBub2RlLnNlbGVjdGlvbkVuZFxuICAgICAgICAgICAgICAgJiYgbm9kZS5zZWxlY3Rpb25FbmQgPT09IHRoaXMuZ2V0VmFsdWUoKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMucHJvcHMub25FbnRpdHlTZWxlY3RlZCh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXgpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNsZWFyUGFydGlhbElucHV0T25TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLmdldFNlbGVjdGVkRW50aXR5VGV4dCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5lZWRzIHRvIGhhcHBlbiBhZnRlciB0aGUgdXBjb21pbmcgcmVuZGVyIHRoYXQgd2lsbCBiZSB0cmlnZ2VyZWQgYnkgYHNldFZhbHVlYFxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnJlc2V0TWF0Y2hlcywgMCk7XG4gICAgfVxuXG4gICAgbWFya0Z1enp5TWF0Y2hTdWJzdHJpbmcoaW5wdXQsIGVudGl0eSkge1xuICAgICAgICBjb25zdCBlbnRpdHlDb250ZW50ID0gZW50aXR5LnRleHQ7XG4gICAgICAgIGNvbnN0IGZyYWdzID0gZW50aXR5Q29udGVudC5zcGxpdChuZXcgUmVnRXhwKCcoJyArIGVzY2FwZXIoaW5wdXQpICsgJyknLCAnaWcnKSk7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRVc2VyVGV4dCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHRocmVzaG9sZCA9IGZyYWdzLmxlbmd0aDtcbiAgICAgICAgbGV0IGkgPSAtMTtcblxuICAgICAgICB3aGlsZSAoKytpIDwgdGhyZXNob2xkKSB7XG4gICAgICAgICAgICBpZiAoZnJhZ3NbaV0udG9Mb3dlckNhc2UoKSA9PT0gbm9ybWFsaXplZFVzZXJUZXh0KSB7XG4gICAgICAgICAgICAgICAgZnJhZ3NbaV0gPSA8bWFyayBrZXk9e2l9IGNsYXNzTmFtZT0nYi10eXBlYWhlYWQtbWF0Y2gtaGlnaGxpZ2h0Jz57ZnJhZ3NbaV19PC9tYXJrPjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmcmFncztcbiAgICB9XG5cbiAgICBtYXJrU3RhcnRzV2l0aE1hdGNoU3Vic3RyaW5nKGlucHV0LCBlbnRpdHkpIHtcbiAgICAgICAgY29uc3QgZW50aXR5Q29udGVudCA9IGVudGl0eS50ZXh0O1xuICAgICAgICBjb25zdCBzZWVrVmFsdWUgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBpbmRleFN0YXJ0ID0gZW50aXR5Q29udGVudC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2Vla1ZhbHVlKTtcbiAgICAgICAgY29uc3QgaW5kZXhFbmQgPSBpbmRleFN0YXJ0ICsgc2Vla1ZhbHVlLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgPHNwYW4ga2V5PScwJz57ZW50aXR5Q29udGVudC5zbGljZSgwLCBpbmRleFN0YXJ0KX08L3NwYW4+LFxuICAgICAgICAgICAgPG1hcmsga2V5PScxJyBjbGFzc05hbWU9J2ItdHlwZWFoZWFkLW1hdGNoLWhpZ2hsaWdodCc+e2VudGl0eUNvbnRlbnQuc2xpY2UoaW5kZXhTdGFydCwgaW5kZXhFbmQpfTwvbWFyaz4sXG4gICAgICAgICAgICA8c3BhbiBrZXk9JzInPntlbnRpdHlDb250ZW50LnNsaWNlKGluZGV4RW5kKX08L3NwYW4+LFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIGdldE1hcmtpbmdGdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKHRoaXMucHJvcHMuYWxnb3JpdGhtKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuYWxnb3JpdGhtID09PSBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcmtTdGFydHNXaXRoTWF0Y2hTdWJzdHJpbmc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcmtGdXp6eU1hdGNoU3Vic3RyaW5nO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmFsZ29yaXRobS5tYXJrZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5hbGdvcml0aG0ubWFya2VyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMud2FybmVkTWFya2VyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMud2FybmVkTWFya2VyID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVHlwZWFoZWFkOiBubyBgcHJvcHMuYWxnb3JpdGhtLm1hcmtlcmAgd2FzIHByb3ZpZGVkOyBmYWxsaW5nIGJhY2sgdG8gdGhlIGRlZmF1bHQgbWFya2luZyBhbGdvcml0aG0gKEZVWlpZKS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLm1hcmtGdXp6eU1hdGNoU3Vic3RyaW5nO1xuICAgIH1cblxuICAgIG1hcmtNYXRjaFN1YnN0cmluZyA9ICguLi5hcmdzKSA9PiB0aGlzLmdldE1hcmtpbmdGdW5jdGlvbigpKC4uLmFyZ3MpXG5cbiAgICBnZXRGdXp6eU1hdGNoSW5kZXhlcyh1c2VyVGV4dCwgZW50aXRpZXMpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHVzZXJUZXh0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIGVudGl0aWVzLnJlZHVjZShmdW5jdGlvbiBmaW5kSW5kZXhlcyhyZXN1bHQsIGVudGl0eSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiAgIGVudGl0eS50ZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihub3JtYWxpemVkKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICA/IChyZXN1bHQucHVzaChpbmRleCkgJiYgcmVzdWx0KVxuICAgICAgICAgICAgICAgICAgIDogcmVzdWx0O1xuICAgICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgZ2V0U3RhcnRzV2l0aE1hdGNoSW5kZXhlcyh1c2VyVGV4dCwgZW50aXRpZXMpIHtcbiAgICAgICAgY29uc3Qgc2Vla1ZhbHVlID0gdXNlclRleHQudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICByZXR1cm4gZW50aXRpZXMucmVkdWNlKGZ1bmN0aW9uIHNlZWtNYXRjaChyZXN1bHRzLCBlbnRpdHksIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZW50aXR5LnRleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlZWtWYWx1ZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcblxuICAgICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgZ2V0TWF0Y2hpbmdGdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKHRoaXMucHJvcHMuYWxnb3JpdGhtKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuYWxnb3JpdGhtID09PSBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0YXJ0c1dpdGhNYXRjaEluZGV4ZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZ1enp5TWF0Y2hJbmRleGVzO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmFsZ29yaXRobS5tYXRjaGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuYWxnb3JpdGhtLm1hdGNoZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy53YXJuZWRNYXRjaGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMud2FybmVkTWF0Y2hlciA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1R5cGVhaGVhZDogbm8gYHByb3BzLmFsZ29yaXRobS5tYXRjaGVyYCB3YXMgcHJvdmlkZWQ7IGZhbGxpbmcgYmFjayB0byB0aGUgZGVmYXVsdCBtYXRjaGluZyBhbGdvcml0aG0gKEZVWlpZKS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZ1enp5TWF0Y2hJbmRleGVzO1xuICAgIH1cblxuICAgIGdldE1hdGNoSW5kZXhlcyA9ICguLi5hcmdzKSA9PiB0aGlzLmdldE1hdGNoaW5nRnVuY3Rpb24oKSguLi5hcmdzKVxuXG4gICAgY29tcHV0ZU1hdGNoZXMocHJvdmlkZWRFbnRpdGllcykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKChzdGF0ZSwgcHJvcHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudGl0aWVzID0gcHJvdmlkZWRFbnRpdGllcyB8fCBwcm9wcy5lbnRpdGllcztcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHN0YXRlLmlucHV0O1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGN1cnJlbnRWYWx1ZSA9PT0gJycgPyBbXSA6IHRoaXMuZ2V0TWF0Y2hJbmRleGVzKGN1cnJlbnRWYWx1ZSwgZW50aXRpZXMpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkRW50aXR5SW5kZXg6IG1hdGNoZXMubGVuZ3RoID8gbWF0Y2hlc1swXSA6IC0xLFxuICAgICAgICAgICAgICAgIGVudGl0eU1hdGNoSW5kZXhlczogbWF0Y2hlcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0NvbnRyb2xsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0U3RhdGUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZSkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LnNlbGVjdGlvblN0YXJ0ID4gMSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdUYWInOlxuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcbiAgICAgICAgICAgIGlmICggICB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggIT09IC0xXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5jdXJzb3JBdEVuZE9mSW5wdXQoKVxuICAgICAgICAgICAgICAgICYmIHRoaXMuZ2V0SW5wdXROb2RlKCkgPT09IGV2ZW50LnRhcmdldFxuICAgICAgICAgICAgICAgICYmICFldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIGV2ZW50Lm5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZVdpdGhTZWxlY3RlZEVudGl0eSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICAgIGV2ZW50Lm5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIGJsb2NrIGN1cnNvciBtb3ZlbWVudFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNYXRjaCgtMSk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgICAgZXZlbnQubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gYmxvY2sgY3Vyc29yIG1vdmVtZW50XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1hdGNoKDEpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgICAgIGlmICggICB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggIT09IC0xXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5nZXRJbnB1dE5vZGUoKSA9PT0gZXZlbnQudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldE1hdGNoZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICAgaWYgKCAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCAhPT0gLTFcbiAgICAgICAgICAgICAgICAmJiB0aGlzLmdldElucHV0Tm9kZSgpID09PSBldmVudC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5uYXRpdmVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNvbXBsZXRlKHRoaXMuc3RhdGUuaW5wdXQsIGV2ZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlck5vdGlmaWNhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICByZWY9J2FyaWEnXG4gICAgICAgICAgICAgICAgaWQ9e3RoaXMuc3RhdGUuaWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnByb3BzLm9mZnNjcmVlbkNsYXNzfVxuICAgICAgICAgICAgICAgIGFyaWEtbGl2ZT0ncG9saXRlJz5cbiAgICAgICAgICAgICAgICB7dGhpcy5nZXRTZWxlY3RlZEVudGl0eVRleHQoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlckhpbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhpbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJUZXh0ID0gdGhpcy5zdGF0ZS5pbnB1dDtcbiAgICAgICAgICAgIGNvbnN0IHJhdyA9IHRoaXMuZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0KCk7XG4gICAgICAgICAgICBsZXQgcHJvY2Vzc2VkID0gJyc7XG5cbiAgICAgICAgICAgIGlmICggICByYXdcbiAgICAgICAgICAgICAgICAmJiByYXcudG9Mb3dlckNhc2UoKS5pbmRleE9mKHVzZXJUZXh0LnRvTG93ZXJDYXNlKCkpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gcmF3LnJlcGxhY2UobmV3IFJlZ0V4cCh1c2VyVGV4dCwgJ2knKSwgdXNlclRleHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuaGludFByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2hpbnQnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goXG4gICAgICAgICAgICAgICAgICAgICAgICAnYi1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnYi1pbnB1dC1wbGFjZWhvbGRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnYi10eXBlYWhlYWQtaGludCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhpbnRQcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PSctMSc+XG4gICAgICAgICAgICAgICAgICAgIHtwcm9jZXNzZWR9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyTWF0Y2hlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZW50aXR5TWF0Y2hJbmRleGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzLm1hdGNoV3JhcHBlclByb3BzO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J21hdGNoZXMnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdHlwZWFoZWFkLW1hdGNoLXdyYXBwZXInLCBwcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZW50aXR5TWF0Y2hJbmRleGVzLm1hcCgoaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHRoaXMucHJvcHMuZW50aXRpZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge2NsYXNzTmFtZSwgdGV4dCwgLi4ucmVzdH0gPSBlbnRpdHk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtgbWF0Y2hfJCR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi10eXBlYWhlYWQtbWF0Y2gnLCBjbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiLXR5cGVhaGVhZC1tYXRjaC1zZWxlY3RlZCc6IHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCA9PT0gaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3RleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlTWF0Y2hDbGljay5iaW5kKHRoaXMsIGluZGV4KX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLm1hcmtNYXRjaFN1YnN0cmluZyh0aGlzLnN0YXRlLmlucHV0LCBlbnRpdHkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7cHJvcHMsIHN0YXRlfSA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4ub21pdChwcm9wcywgVHlwZWFoZWFkLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdHlwZWFoZWFkLXdyYXBwZXInLCBwcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVLZXlEb3dufT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJOb3RpZmljYXRpb24oKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJIaW50KCl9XG5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgey4uLmV4dHJhY3RDaGlsZFByb3BzKHByb3BzLCBJbnB1dC5kZWZhdWx0UHJvcHMpfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2lucHV0J1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWNvbnRyb2xzPXtzdGF0ZS5pZH1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMuaW5wdXRQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3goJ2ItdHlwZWFoZWFkJywgcHJvcHMuaW5wdXRQcm9wcy5jbGFzc05hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICB9fSAvPlxuXG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTWF0Y2hlcygpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBUeXBlYWhlYWQgZnJvbSAnLi4vYm91bmRsZXNzLXR5cGVhaGVhZC9pbmRleCc7XG5pbXBvcnQgZXh0cmFjdENoaWxkUHJvcHMgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb24vaW5kZXgnO1xuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuXG5jb25zdCBmaXJzdCA9IChhcnJheSkgPT4gYXJyYXlbMF07XG5jb25zdCBsYXN0ID0gKGFycmF5KSA9PiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcblxuLyoqXG4gKiBfX1Rva2VuaXplZElucHV0IGFjY2VwdHMgYWxsIFtgVHlwZWFoZWFkYF0oVHlwZWFoZWFkL1JFQURNRS5tZCkgYW5kIFtgSW5wdXRgXSguLi9JbnB1dC9SRUFETUUubWQpIHByb3BzX19cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9rZW5pemVkSW5wdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAuLi5UeXBlYWhlYWQucHJvcFR5cGVzLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBmdW5jdGlvbiBoYW5kbGVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gYW4gZW50aXR5IGlzIHNlbGVjdGVkIGJ5IHRoZSB1c2VyIGFuZCBhIHRva2VuIHNob3VsZCBiZSBjcmVhdGVkXG4gICAgICAgICAqL1xuICAgICAgICBoYW5kbGVBZGRUb2tlbjogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZ1bmN0aW9uIGhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgd2hlbiBvbmUgb3IgbW9yZSB0b2tlbnMgYXJlIHJlbW92ZWQgYnkgdGhlIHVzZXIgdmlhIGNsaWNraW5nIHRoZSBcImNsb3NlXCIgYnV0dG9uIG9yIHByZXNzaW5nIHRoZSBgQmFja3NwYWNlYCBrZXkgd2hpbGUgdG9rZW5zIGFyZSBzZWxlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlUmVtb3ZlVG9rZW5zOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZnVuY3Rpb24gaGFuZGxlciB0aGF0IGlzIGNhbGxlZCB3aGVuIG9uZSBvciBtb3JlIHRva2VucyBhcmUgc2VsZWN0ZWQgYnkgdGhlIHVzZXIgdmlhIGNsaWNrIG9yIGtleWJvYXJkIGFjdGlvbnM7IGNhbGxlZCB3aXRoIHdoYXQgdGhlIG5ldyBzZWxlY3Rpb24gc2hvdWxkIGJlXG4gICAgICAgICAqL1xuICAgICAgICBoYW5kbGVOZXdTZWxlY3Rpb246IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgSlNYIHVzZWQgZm9yIHRoZSBjbG9zZSBidXR0b24gaXRzZWxmXG4gICAgICAgICAqL1xuICAgICAgICB0b2tlbkNsb3NlQ29tcG9uZW50OiBQcm9wVHlwZXMuZWxlbWVudCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyBpZiB0aGUgYC5iLXRva2VuZmllbGQtdG9rZW4tY2xvc2VgIGVsZW1lbnQgc2hvdWxkIGJlIHJlbmRlcmVkIGZvciBlYWNoIHRva2VuXG4gICAgICAgICAqL1xuICAgICAgICB0b2tlbkNsb3NlVmlzaWJsZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBpbmRleGVzIG9mIGVudGl0aWVzIHRoYXQgc2hvdWxkIGJlIHJlbmRlcmVkIGFzIFwidG9rZW5zXCIgaW4gdGhlIGNvbXBvbmVudCBVSVxuICAgICAgICAgKi9cbiAgICAgICAgdG9rZW5zOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubnVtYmVyKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIGluZGV4ZXMgb2YgdG9rZW5pemVkIGVudGl0aWVzIHRoYXQgYXJlIHBhcnQgb2YgYW4gYWN0aXZlIHNlbGVjdGlvbjsgdGhlIHVzZXIgY2FuIHByZXNzIGBCYWNrc3BhY2VgIHRvIHRyaWdnZXIgYGhhbmRsZVJlbW92ZVRva2Vuc2BcbiAgICAgICAgICovXG4gICAgICAgIHRva2Vuc1NlbGVjdGVkOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubnVtYmVyKSxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICAuLi5UeXBlYWhlYWQuZGVmYXVsdFByb3BzLFxuICAgICAgICBoYW5kbGVBZGRUb2tlbjogbm9vcCxcbiAgICAgICAgaGFuZGxlUmVtb3ZlVG9rZW5zOiBub29wLFxuICAgICAgICBoYW5kbGVOZXdTZWxlY3Rpb246IG5vb3AsXG4gICAgICAgIHRva2VuQ2xvc2VDb21wb25lbnQ6ICg8ZGl2Plg8L2Rpdj4pLFxuICAgICAgICB0b2tlbkNsb3NlVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgdG9rZW5zOiBbXSxcbiAgICAgICAgdG9rZW5zU2VsZWN0ZWQ6IFtdLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhUb2tlbml6ZWRJbnB1dC5kZWZhdWx0UHJvcHMpXG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2VsZWN0ZWRJbmRleGVzID0gcHJldlByb3BzLnRva2Vuc1NlbGVjdGVkO1xuICAgICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJbmRleGVzID0gdGhpcy5wcm9wcy50b2tlbnNTZWxlY3RlZDtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy50b2tlbnMubGVuZ3RoID4gcHJldlByb3BzLnRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX3N1cHByZXNzTmV4dFRva2VuU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBwcmVzc05leHRUb2tlblNlbGVjdGlvbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICAgcHJldmlvdXNTZWxlY3RlZEluZGV4ZXMgIT09IGN1cnJlbnRTZWxlY3RlZEluZGV4ZXNcbiAgICAgICAgICAgICYmIGN1cnJlbnRTZWxlY3RlZEluZGV4ZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBpZiAoICAgY3VycmVudFNlbGVjdGVkSW5kZXhlcy5sZW5ndGggPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgfHwgY3VycmVudFNlbGVjdGVkSW5kZXhlc1swXSAhPT0gcHJldmlvdXNTZWxlY3RlZEluZGV4ZXNbMF0gLyogbXVsdGkgc2VsZWN0aW9uLCBsZWZ0d2FyZCAqLykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnNbYHRva2VuXyR7Y3VycmVudFNlbGVjdGVkSW5kZXhlc1swXX1gXS5mb2N1cygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0KGN1cnJlbnRTZWxlY3RlZEluZGV4ZXMpICE9PSBsYXN0KHByZXZpb3VzU2VsZWN0ZWRJbmRleGVzKSAvKiBtdWx0aSBzZWxlY3Rpb24sIHJpZ2h0d2FyZCAqLykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnNbYHRva2VuXyR7bGFzdChjdXJyZW50U2VsZWN0ZWRJbmRleGVzKX1gXS5mb2N1cygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnJlZnNbYHRva2VuXyR7Y3VycmVudFNlbGVjdGVkSW5kZXhlc1swXX1gXS5mb2N1cygpO1xuICAgICAgICB9IC8vIG1vdmUgZm9jdXNcbiAgICB9XG5cbiAgICAvLyBwYXNzdGhyb3VnaHMgdG8gVHlwZWFoZWFkIGluc3RhbmNlIG1ldGhvZHNcbiAgICBmb2N1cyA9ICgpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuZm9jdXMoKVxuICAgIGdldElucHV0Tm9kZSA9ICgpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuZ2V0SW5wdXROb2RlKClcbiAgICBnZXRTZWxlY3RlZEVudGl0eVRleHQgPSAoKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLmdldFNlbGVjdGVkRW50aXR5VGV4dCgpXG4gICAgZ2V0VmFsdWUgPSAoKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLmdldFZhbHVlKClcbiAgICBzZWxlY3QgPSAoKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLnNlbGVjdCgpXG4gICAgc2V0VmFsdWUgPSAodmFsdWUpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuc2V0VmFsdWUodmFsdWUpXG5cbiAgICBhZGQgPSAoaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudG9rZW5zLmluZGV4T2YoaW5kZXgpID09PSAtMSkgeyB0aGlzLnByb3BzLmhhbmRsZUFkZFRva2VuKGluZGV4KTsgfVxuICAgIH1cblxuICAgIHJlbW92ZShpbmRleCkge1xuICAgICAgICBjb25zdCBpbmRleGVzID0gKEFycmF5LmlzQXJyYXkoaW5kZXgpID8gaW5kZXggOiBbaW5kZXhdKS5maWx0ZXIoKGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMudG9rZW5zLmluZGV4T2YoaWR4KSAhPT0gLTE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChpbmRleGVzLmxlbmd0aCkgeyB0aGlzLnByb3BzLmhhbmRsZVJlbW92ZVRva2VucyhpbmRleGVzKTsgfVxuICAgIH1cblxuICAgIHNlbGVjdFRva2VuKGluZGV4KSB7XG4gICAgICAgIHRoaXMucHJvcHMuaGFuZGxlTmV3U2VsZWN0aW9uKFtpbmRleF0pO1xuICAgIH1cblxuICAgIHNlbGVjdFRva2VucyhpbmRleGVzKSB7XG4gICAgICAgIHRoaXMucHJvcHMuaGFuZGxlTmV3U2VsZWN0aW9uKGluZGV4ZXMpO1xuICAgIH1cblxuICAgIHNlbGVjdFByZXZpb3VzVG9rZW4oYXBwZW5kKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5wcm9wcy50b2tlbnNTZWxlY3RlZDtcbiAgICAgICAgY29uc3QgaW5kZXhlcyA9IHRoaXMucHJvcHMudG9rZW5zO1xuXG4gICAgICAgIGlmICggICBzZWxlY3RlZC5sZW5ndGggPT09IDFcbiAgICAgICAgICAgICYmIGZpcnN0KHNlbGVjdGVkKSA9PT0gZmlyc3QoaW5kZXhlcykpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gYWxyZWFkeSBhdCBsZWZ0bW9zdCBib3VuZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgeyAvLyBwaWNrIHRoZSByaWdodG1vc3RcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9rZW4obGFzdChpbmRleGVzKSk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGFkZCB0aGUgbmV4dCBsZWZ0bW9zdCB0byBhIHJlY29uc3RydWN0ZWQgXCJzZWxlY3RlZFwiIGFycmF5XG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c1Rva2VuID0gaW5kZXhlc1tpbmRleGVzLmluZGV4T2YoZmlyc3Qoc2VsZWN0ZWQpKSAtIDFdO1xuXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRva2VucyhhcHBlbmQgPyBbcHJldmlvdXNUb2tlbl0uY29uY2F0KHNlbGVjdGVkKSA6IFtwcmV2aW91c1Rva2VuXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxlY3ROZXh0VG9rZW4oYXBwZW5kKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5wcm9wcy50b2tlbnNTZWxlY3RlZDtcbiAgICAgICAgY29uc3QgaW5kZXhlcyA9IHRoaXMucHJvcHMudG9rZW5zO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsYXN0KHNlbGVjdGVkKSA9PT0gbGFzdChpbmRleGVzKSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbmV4dFRva2VuID0gaW5kZXhlc1tpbmRleGVzLmluZGV4T2YobGFzdChzZWxlY3RlZCkpICsgMV07XG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9rZW5zKGFwcGVuZCA/IHNlbGVjdGVkLmNvbmNhdChuZXh0VG9rZW4pIDogW25leHRUb2tlbl0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xlYXJTZWxlY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucHJvcHMuaGFuZGxlTmV3U2VsZWN0aW9uKFtdKTtcbiAgICB9XG5cbiAgICBoYW5kbGVJbnB1dENsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25DbGljaykpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUlucHV0Rm9jdXMgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkZvY3VzKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uRm9jdXMoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG4gICAgICAgIGNhc2UgMzc6ICAgIC8vIGxlZnQgYXJyb3dcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0UHJldmlvdXNUb2tlbihldmVudC5zaGlmdEtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDM5OiAgICAvLyByaWdodCBhcnJvd1xuICAgICAgICAgICAgdGhpcy5zZWxlY3ROZXh0VG9rZW4oZXZlbnQuc2hpZnRLZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA4OiAgICAgLy8gYmFja3NwYWNlXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy50b2tlbnNTZWxlY3RlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgNjU6ICAgIC8vIGxldHRlciBcImFcIlxuICAgICAgICAgICAgaWYgKGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBoYWNreSwgYnV0IHRoZSBvbmx5IHdheSB1bmxlc3Mgd2UgbW92ZSBzZWxlY3Rpb24gbWFuYWdlbWVudCBpbnRlcm5hbCBhZ2FpblxuICAgICAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzTmV4dFRva2VuU2VsZWN0aW9uID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaGFuZGxlTmV3U2VsZWN0aW9uKHRoaXMucHJvcHMudG9rZW5zKTtcbiAgICAgICAgICAgIH0gLy8gXCJjbWRcIlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5vbktleURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uS2V5RG93bihldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVUb2tlbkNsb3NlQ2xpY2soaW5kZXgsIGV2ZW50KSB7XG4gICAgICAgIC8vIGlmIHdlIGRvbid0IHN0b3AgcHJvcGFnYXRpb24sIHRoZSBldmVudCBidWJibGVzIGFuZCByZXN1bHRzIGluIGEgZmFpbGVkIHRva2VuIHNlbGVjdGlvblxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB0aGlzLnJlbW92ZShpbmRleCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy50b2tlbkNsb3NlQ29tcG9uZW50LnByb3BzLm9uQ2xpY2spIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMudG9rZW5DbG9zZUNvbXBvbmVudC5wcm9wcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlclRva2VuQ2xvc2UoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudG9rZW5DbG9zZVZpc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy50b2tlbkNsb3NlQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjeCgnYi10b2tlbmZpZWxkLXRva2VuLWNsb3NlJywgdGhpcy5wcm9wcy50b2tlbkNsb3NlQ29tcG9uZW50LnByb3BzLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVUb2tlbkNsb3NlQ2xpY2suYmluZCh0aGlzLCBpbmRleCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVRva2VuS2V5RG93bihpbmRleCwgZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC53aGljaCkge1xuICAgICAgICBjYXNlIDEzOiAvLyBlbnRlclxuICAgICAgICBjYXNlIDMyOiAvLyBzcGFjZVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUb2tlbihpbmRleCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA4OiAvLyBiYWNrc3BhY2VcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlclRva2VucygpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdiLXRva2VuZmllbGQtdG9rZW5zJz5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy50b2tlbnMubWFwKChpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17YHRva2VuXyR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdG9rZW5maWVsZC10b2tlbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYi10b2tlbmZpZWxkLXRva2VuLXNlbGVjdGVkJzogdGhpcy5wcm9wcy50b2tlbnNTZWxlY3RlZC5pbmRleE9mKGluZGV4KSAhPT0gLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zZWxlY3RUb2tlbi5iaW5kKHRoaXMsIGluZGV4KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlVG9rZW5LZXlEb3duLmJpbmQodGhpcywgaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PScwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5lbnRpdGllc1tpbmRleF0udGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJUb2tlbkNsb3NlKGluZGV4KX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFRva2VuaXplZElucHV0LmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdG9rZW5maWVsZC13cmFwcGVyJywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVLZXlEb3dufT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJUb2tlbnMoKX1cblxuICAgICAgICAgICAgICAgIDxUeXBlYWhlYWRcbiAgICAgICAgICAgICAgICAgICAgey4uLmV4dHJhY3RDaGlsZFByb3BzKHRoaXMucHJvcHMsIFR5cGVhaGVhZC5kZWZhdWx0UHJvcHMpfVxuICAgICAgICAgICAgICAgICAgICByZWY9J3R5cGVhaGVhZCdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdiLXRva2VuZmllbGQnXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyUGFydGlhbElucHV0T25TZWxlY3Rpb249e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvcHMuaW5wdXRQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlSW5wdXRDbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRm9jdXM6IHRoaXMuaGFuZGxlSW5wdXRGb2N1cyxcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25FbnRpdHlTZWxlY3RlZD17dGhpcy5hZGR9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9vbHRpcCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwb3NpdGlvbiA9IHtcbiAgICAgICAgQUJPVkU6ICdBQk9WRScsXG4gICAgICAgIEJFTE9XOiAnQkVMT1cnLFxuICAgICAgICBCRUZPUkU6ICdCRUZPUkUnLFxuICAgICAgICBBRlRFUjogJ0FGVEVSJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogYW55IHZhbGlkIEhUTUwgdGFnIG5hbWUgb3IgYSBSZWFjdCBjb21wb25lbnQgZmFjdG9yeSwgYW55dGhpbmcgdGhhdCBjYW4gYmUgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBgUmVhY3QuY3JlYXRlRWxlbWVudGBcbiAgICAgICAgICovXG4gICAgICAgIGNvbXBvbmVudDogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkZXRlcm1pbmVzIHRoZSBjb3JyZWN0IGNsYXNzIHRvIGFwcGx5IHRvIHBvc2l0aW9uIHRoZSB0b29sdGlwXG4gICAgICAgICAqL1xuICAgICAgICBwb3NpdGlvbjogUHJvcFR5cGVzLm9uZU9mKE9iamVjdC5rZXlzKFRvb2x0aXAucG9zaXRpb24pKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIGNvbnRlbnQgdG8gYmUgc2hvd24gaW4gdGhlIHRvb2x0aXBcbiAgICAgICAgICovXG4gICAgICAgIHRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY29tcG9uZW50OiAnZGl2JyxcbiAgICAgICAgcG9zaXRpb246IFRvb2x0aXAucG9zaXRpb24uQUJPVkUsXG4gICAgICAgIHRleHQ6ICcnLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhUb29sdGlwLmRlZmF1bHRQcm9wcylcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge3Bvc2l0aW9ufSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0aGlzLnByb3BzLmNvbXBvbmVudFxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFRvb2x0aXAuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXRvb2x0aXAnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAnYi10b29sdGlwLXBvc2l0aW9uLWFib3ZlJzogcG9zaXRpb24gPT09IFRvb2x0aXAucG9zaXRpb24uQUJPVkUsXG4gICAgICAgICAgICAgICAgICAgICdiLXRvb2x0aXAtcG9zaXRpb24tYmVsb3cnOiBwb3NpdGlvbiA9PT0gVG9vbHRpcC5wb3NpdGlvbi5CRUxPVyxcbiAgICAgICAgICAgICAgICAgICAgJ2ItdG9vbHRpcC1wb3NpdGlvbi1iZWZvcmUnOiBwb3NpdGlvbiA9PT0gVG9vbHRpcC5wb3NpdGlvbi5CRUZPUkUsXG4gICAgICAgICAgICAgICAgICAgICdiLXRvb2x0aXAtcG9zaXRpb24tYWZ0ZXInOiBwb3NpdGlvbiA9PT0gVG9vbHRpcC5wb3NpdGlvbi5BRlRFUixcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICBkYXRhLXRvb2x0aXA9e3RoaXMucHJvcHMudGV4dH1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXt0aGlzLnByb3BzWydhcmlhLWxhYmVsJ10gfHwgdGhpcy5wcm9wcy50ZXh0fT5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgIDwvdGhpcy5wcm9wcy5jb21wb25lbnQ+XG4gICAgICAgICk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInRlc3QiLCJzb3VyY2UiLCJrZXlzIiwicmVkdWNlIiwiaGFzaCIsImtleSIsIm9taXR0ZWRLZXlzIiwiaW5kZXhPZiIsInN0YXRlIiwiYWN0aXZlQ2hpbGRJbmRleCIsIl90aGlzIiwicHJvcHMiLCJkZWZhdWx0QWN0aXZlQ2hpbGRJbmRleCIsImhhbmRsZUtleURvd24iLCJldmVudCIsIm1vZGUiLCJBcnJvd0tleU5hdmlnYXRpb24iLCJWRVJUSUNBTCIsIkJPVEgiLCJwcmV2ZW50RGVmYXVsdCIsIm1vdmVGb2N1cyIsIkhPUklaT05UQUwiLCJpc0Z1bmN0aW9uIiwib25LZXlEb3duIiwiaGFuZGxlRm9jdXMiLCJ0YXJnZXQiLCJoYXNBdHRyaWJ1dGUiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsIlJlYWN0IiwiQ2hpbGRyZW4iLCJ0b0FycmF5IiwiY2hpbGRyZW4iLCJpbmRleCIsInNldFN0YXRlIiwiY2hpbGQiLCJvbkZvY3VzIiwicHJldlByb3BzIiwicHJldlN0YXRlIiwidGhpcyIsInNldEZvY3VzIiwibmV4dFByb3BzIiwiY291bnQiLCJudW1DaGlsZHJlbiIsInJlZnMiLCJ3cmFwcGVyIiwiZmluZERPTU5vZGUiLCJjaGlsZE5vZGUiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsIk5vZGUiLCJET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkciLCJmb2N1cyIsImRlbHRhIiwibmV4dEluZGV4IiwibWFwIiwiY2xvbmVFbGVtZW50IiwiZGF0YS1mb2N1cy1pbmRleCIsImRhdGEtc2tpcCIsInRhYkluZGV4IiwidW5kZWZpbmVkIiwiX3RoaXMyIiwiY29tcG9uZW50Iiwib21pdCIsImludGVybmFsS2V5cyIsInJlZiIsIlB1cmVDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJvbmVPZlR5cGUiLCJzdHJpbmciLCJmdW5jIiwibnVtYmVyIiwib25lT2YiLCJPYmplY3QiLCJkZWZhdWx0UHJvcHMiLCJoYXNPd25Qcm9wZXJ0eSIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmciLCJhcmdUeXBlIiwiY2xhc3NlcyIsInB1c2giLCJBcnJheSIsImlzQXJyYXkiLCJjbGFzc05hbWVzIiwiYXBwbHkiLCJoYXNPd24iLCJjYWxsIiwiam9pbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJiYWJlbEhlbHBlcnMudHlwZW9mIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaGFuZGxlQ2xpY2siLCJkaXNhYmxlZCIsInRvZ2dsZVN0YXRlIiwib25DbGljayIsInByZXNzZWQiLCJCdXR0b24iLCJjbGFzc05hbWUiLCJjeCIsImItYnV0dG9uLXByZXNzYWJsZSIsImItYnV0dG9uLXByZXNzZWQiLCJhcmlhLXByZXNzZWQiLCJub2RlIiwib25QcmVzc2VkIiwib25VbnByZXNzZWQiLCJib29sIiwibm9vcCIsInJlcGxhY2UiLCJhIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiaWQiLCJ1dWlkIiwiaGFuZGxlQ2hhbmdlIiwiaW5wdXRQcm9wcyIsImNoZWNrZWQiLCJuYW1lIiwib25DaGFuZ2UiLCJpbnB1dCIsImluZGV0ZXJtaW5hdGUiLCJzZXRJbmRldGVybWluYXRlIiwiU3RyaW5nIiwidHlwZSIsImItY2hlY2tib3gtbWl4ZWQiLCJiLWNoZWNrYm94LWNoZWNrZWQiLCJiLWNoZWNrYm94LXVuY2hlY2tlZCIsImFyaWEtY2hlY2tlZCIsImdldEFyaWFTdGF0ZSIsImxhYmVsIiwibGFiZWxQcm9wcyIsImh0bWxGb3IiLCJDaGVja2JveCIsInJlbmRlcklucHV0IiwicmVuZGVyTGFiZWwiLCJzaGFwZSIsInZhbHVlIiwib2JqZWN0Iiwib25DaGVja2VkIiwib25VbmNoZWNrZWQiLCJpdGVtcyIsImV2ZXJ5IiwiaXRlbSIsInNvbWUiLCJzZWxlY3RBbGwiLCJhbGxJdGVtc0NoZWNrZWQiLCJzZWxlY3RBbGxQcm9wcyIsImFsbENoZWNrZWQiLCJhbnlJdGVtc0NoZWNrZWQiLCJvbkFsbENoZWNrZWQiLCJvbkFsbFVuY2hlY2tlZCIsIm9uQ2hpbGRDaGVja2VkIiwib25DaGlsZFVuY2hlY2tlZCIsInJlbmRlckNoZWNrYm94ZXMiLCJzZWxlY3RBbGxQb3NpdGlvbiIsIkNvbnN0YW50cyIsIlNFTEVDVF9BTExfQkVGT1JFIiwidG9CZVJlbmRlcmVkIiwidW5zaGlmdCIsInJlbmRlclNlbGVjdEFsbCIsIlNFTEVDVF9BTExfQUZURVIiLCJDaGVja2JveEdyb3VwIiwicmVuZGVyQ2hpbGRyZW4iLCJhcnJheU9mIiwiaXNSZXF1aXJlZCIsIiRwb3J0YWwiLCIkcGFzc2VuZ2VyIiwiY3JlYXRlRWxlbWVudCIsImRlc3RpbmF0aW9uIiwiYXBwZW5kQ2hpbGQiLCJyZW5kZXJQb3J0YWxsZWRDb250ZW50IiwiaXNWYWxpZEVsZW1lbnQiLCJwb3J0YWxJZCIsIlJlYWN0RE9NIiwidW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIiLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlIiwicmVtb3ZlQ2hpbGQiLCJQb3J0YWwiLCJQT1JUQUxfREFUQV9BVFRSSUJVVEUiLCJDb21wb25lbnQiLCJpbnN0YW5jZU9mIiwiSFRNTEVsZW1lbnQiLCJib2R5IiwicHJvdG90eXBlIiwic2xpY2UiLCJtb3VudGVkIiwidXVpZEhlYWRlciIsInV1aWRCb2R5IiwibmF0aXZlRXZlbnQiLCJjYXB0dXJlRm9jdXMiLCJjbG9zZU9uT3V0c2lkZUZvY3VzIiwiaXNQYXJ0T2ZEaWFsb2ciLCJzZXRUaW1lb3V0Iiwib25DbG9zZSIsImV4cGxpY2l0T3JpZ2luYWxUYXJnZXQiLCJyZWxhdGVkVGFyZ2V0IiwicHJldmlvdXMiLCJjbG9zZU9uRXNjS2V5IiwiaGFuZGxlT3V0c2lkZUNsaWNrIiwiY2xvc2VPbk91dHNpZGVDbGljayIsImhhbmRsZU91dHNpZGVTY3JvbGxXaGVlbCIsImNsb3NlT25PdXRzaWRlU2Nyb2xsIiwiJHdyYXBwZXIiLCJjb25jYXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZG9tIiwiZ2V0RWxlbWVudEJ5SWQiLCJub2RlVHlwZSIsIkVMRU1FTlRfTk9ERSIsInBhcmVudE5vZGUiLCJjb250YWlucyIsImVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiJGRpYWxvZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJib2R5UHJvcHMiLCJmb290ZXIiLCJmb290ZXJQcm9wcyIsImhlYWRlciIsImhlYWRlclByb3BzIiwiYXJpYS1oaWRkZW4iLCJ3cmFwcGVyUHJvcHMiLCJyZW5kZXJGb2N1c0JvdW5kYXJ5IiwiYmVmb3JlIiwiRGlhbG9nIiwicm9sZSIsImFyaWEtbGFiZWxsZWRieSIsImFyaWEtZGVzY3JpYmVkYnkiLCJyZW5kZXJIZWFkZXIiLCJyZW5kZXJCb2R5IiwicmVuZGVyRm9vdGVyIiwiYWZ0ZXIiLCJzdHJpbmdOdW1iZXIiLCJpbnN0YW5jZSIsImdldENvbXB1dGVkU3R5bGUiLCJ0b0kiLCJmb250U2l6ZSIsImNvbnRhaW5lckJveCIsImhlaWdodCIsIndpZHRoIiwiYm94U2l6aW5nIiwiY29udGFpbmVySGVpZ2h0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJjb250YWluZXJXaWR0aCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwiZmxvb3IiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsInN0eWxlIiwibWluIiwibWF4Rm9udFNpemUiLCJvcHRpbWl6ZUZvckhlaWdodCIsIm9wdGltaXplRm9yV2lkdGgiLCJpbnN0YW5jZXMiLCJmb3JFYWNoIiwiaGFuZGxlV2luZG93UmVzaXplIiwic3BsaWNlIiwicmVzY2FsZSIsInJlZ2lzdGVySW5zdGFuY2UiLCJ1bnJlZ2lzdGVySW5zdGFuY2UiLCJGaXR0ZWRUZXh0IiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwic3RhdHVzIiwiSW1hZ2UiLCJMT0FESU5HIiwic3JjIiwicmVzZXRQcmVsb2FkZXIiLCJwcmVsb2FkIiwibG9hZGVyIiwib25sb2FkIiwib25lcnJvciIsIkxPQURFRCIsIkVSUk9SIiwiZGlzcGxheUFzQmFja2dyb3VuZEltYWdlIiwiaW1hZ2VQcm9wcyIsInRpdGxlIiwiYWx0IiwiYmFja2dyb3VuZEltYWdlIiwib25Mb2FkIiwib25FcnJvciIsInN0YXR1c1Byb3BzIiwiYi1pbWFnZS1sb2FkaW5nIiwiYi1pbWFnZS1sb2FkZWQiLCJiLWltYWdlLWVycm9yIiwicmVuZGVySW1hZ2UiLCJyZW5kZXJTdGF0dXMiLCJpc0NvbnRyb2xsZWQiLCJpc1N0cmluZyIsImlzRm9jdXNlZCIsInNldElucHV0VmFsdWUiLCJnZXRWYWx1ZSIsImZpZWxkIiwiaGFuZGxlQmx1ciIsIm9uQmx1ciIsImRlZmF1bHRWYWx1ZSIsIm5leHRWYWx1ZSIsImRpc3BhdGNoRXZlbnQiLCJidWJibGVzIiwiaGlkZVBsYWNlaG9sZGVyT25Gb2N1cyIsImlzTm9uRW1wdHkiLCJwbGFjZWhvbGRlciIsImdldFBsYWNlaG9sZGVyVGV4dCIsIklucHV0IiwicmVuZGVyUGxhY2Vob2xkZXIiLCJvYmoxIiwib2JqMiIsImNoaWxkUHJvcHMiLCJwb3J0YWxQcm9wcyIsIk1vZGFsIiwiJG1vZGFsIiwibWFza1Byb3BzIiwiZXh0cmFjdENoaWxkUHJvcHMiLCJtb2RhbFByb3BzIiwiTUFYX0lOVEVHRVIiLCJOQU4iLCJvYmplY3RQcm90byIsInRvSW50ZWdlciIsImlzT2JqZWN0TGlrZSIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwidG9OdW1iZXIiLCJJTkZJTklUWSIsInRvRmluaXRlIiwicmVtYWluZGVyIiwicmVzdWx0IiwiaXNTeW1ib2wiLCJpc09iamVjdCIsInZhbHVlT2YiLCJvdGhlciIsInJlVHJpbSIsInJlSXNCaW5hcnkiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJpc0JpbmFyeSIsInJlSXNCYWRIZXgiLCJpc0ludGVnZXIiLCJpbmRleE9mT3B0aW9uSW5Gb2N1cyIsImdldFByZXZpb3VzT3B0aW9uSW5kZXgiLCJhY3RpdmVJdGVtSW5kZXgiLCJnZXROZXh0T3B0aW9uSW5kZXgiLCJoYW5kbGVPcHRpb25DbGljayIsIm9wdGlvbnMiLCJvcHRpb24iLCJzZWxlY3RlZCIsImN1cnJlbnRPcHRpb25JbmRleCIsIm5leHQiLCJvbk9wdGlvblNlbGVjdGVkIiwiZGVmaW5pdGlvbiIsIlNlZ21lbnRlZENvbnRyb2wiLCJpbnRlcm5hbENoaWxkS2V5cyIsImItc2VnbWVudGVkLWNvbnRyb2wtb3B0aW9uLXNlbGVjdGVkIiwiaGFuZGxlT3B0aW9uQmx1ciIsImJpbmQiLCJoYW5kbGVPcHRpb25Gb2N1cyIsImNvbnRlbnQiLCJyZW5kZXJPcHRpb25zIiwibWlzc2luZ1NlbGVjdGVkIiwic2VlblNlbGVjdGVkIiwibXVsdGlwbGVTZWxlY3RlZCIsIngiLCJkYXRhIiwidGhlbiIsInJlc29sdmVkUGF5bG9hZCIsImN1cnJlbnRQcm9wcyIsImNsb3N1cmVQcm9taXNlIiwiY29udmVydFRvSlNYRnVuYyIsImNvbnZlcnREYXRhVG9KU1hPcldhaXQiLCJleHRyYUNsYXNzZXMiLCJiLXBhZ2luYXRpb24taXRlbS1ldmVuIiwiZXZlbiIsImItcGFnaW5hdGlvbi1pdGVtLW9kZCIsImItcGFnaW5hdGlvbi1pdGVtLWxvYWRpbmciLCJJdGVtIiwiZ2V0Q2xhc3NlcyIsImxvYWRpbmdDb250ZW50IiwiZGF0YS1wYWdpbmF0aW9uLWluZGV4IiwiY3VycmVudFBhZ2UiLCJfdGhpczMiLCJpbml0aWFsUGFnZSIsInRhcmdldEluZGV4IiwibnVtSXRlbXNQZXJQYWdlIiwiZ2V0UGFnZUZvckluZGV4IiwiY2VpbCIsIml0ZW1zUGVyUGFnZSIsInRvdGFsUGFnZXMiLCJ0b3RhbEl0ZW1zIiwiZmlyc3RWaXNpYmxlSXRlbUluZGV4IiwicGFnZVRvSW5kZXgiLCJjb250cm9scyIsIkZJUlNUIiwibmV4dFRhcmdldEluZGV4IiwiUFJFVklPVVMiLCJORVhUIiwiTEFTVCIsIml0ZW1fMCIsImlkZW50aWZpZXIiLCJvbGRQcm9wcyIsIl90aGlzNCIsIm51bVBhZ2VUb2dnbGVzIiwic3RhcnRQYWdlIiwic2hvd1BhZ2luYXRpb25TdGF0ZSIsInNob3dKdW1wVG9GaXJzdCIsImp1bXBUb0ZpcnN0Q29udHJvbENvbnRlbnQiLCJQYWdpbmF0aW9uIiwicHJldmlvdXNQYWdlQ29udHJvbENvbnRlbnQiLCJlbmRQYWdlIiwiZGF0YS1wYWdlLW51bWJlciIsIm5leHRQYWdlQ29udHJvbENvbnRlbnQiLCJzaG93SnVtcFRvTGFzdCIsImp1bXBUb0xhc3RDb250cm9sQ29udGVudCIsImN1c3RvbUNvbnRyb2xDb250ZW50IiwiZmlyc3RJdGVtSW5kZXgiLCJsYXN0SXRlbUluZGV4IiwiZ2VuZXJhdGVkSXRlbXMiLCJnZXRJdGVtIiwibGlzdFdyYXBwZXJQcm9wcyIsImdlbmVyYXRlSXRlbXMiLCJfdGhpczUiLCJpdGVtVG9KU1hDb252ZXJ0ZXJGdW5jIiwiaW5kZXhPZmZzZXQiLCJpdGVtTG9hZGluZ0NvbnRlbnQiLCJwb3NpdGlvbiIsImhpZGVQYWdlcklmTm90TmVlZGVkIiwidG9nZ2xlV3JhcHBlclByb3BzIiwidG9Mb3dlckNhc2UiLCJwb3NpdGlvbkxvd2VyIiwidG9VcHBlckNhc2UiLCJwb3NpdGlvbkNhcGl0YWxpemVkIiwiY3JlYXRlUGFnZUJ1dHRvbk9wdGlvbnMiLCJwb3NpdGlvbnMiLCJBQk9WRSIsInJlbmRlckNvbnRyb2xzIiwicmVuZGVySXRlbXMiLCJCRUxPVyIsInJlbmRlclZpZXciLCJudW1iZXJPZlBhZ2VzIiwiaWRlbnRpdHkiLCJsZW4iLCJkb2N1bWVudEVsZW1lbnQiLCJhcnIxIiwiYXJyMiIsImZpbHRlciIsIm9iaiIsInZpZXdCb3giLCJ4bWxucyIsImZpbGwiLCJwb2ludHMiLCJhbGlnbiIsImFuY2hvciIsImNhY2hlVmlld3BvcnRDYXJ0b2dyYXBoeSIsInJvdW5kIiwiZ2V0TmV4dERpYWxvZ1hQb3NpdGlvbiIsImdldE5leHREaWFsb2dZUG9zaXRpb24iLCJnZXRBbGlnbm1lbnRDb3JyZWN0aW9uSWZPdmVyZmxvd2luZyIsImR4IiwiZHkiLCJhbGlnbm1lbnRDb3JyZWN0aW9uIiwiZGlkQWxpZ25tZW50Q2hhbmdlIiwiJGNhcmV0IiwibGVmdCIsImdldE5leHRDYXJldFhQb3NpdGlvbiIsInRvcCIsImdldE5leHRDYXJldFlQb3NpdGlvbiIsImFwcGx5VHJhbnNsYXRpb24iLCJkaWFsb2ciLCJhbmNob3JYQWxpZ24iLCJwcmVzZXQiLCJhbmNob3JZQWxpZ24iLCJzZWxmWEFsaWduIiwic2VsZllBbGlnbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImFuY2hvckxlZnQiLCJhbmNob3JSZWN0IiwiYW5jaG9yVG9wIiwiYW5jaG9ySGVpZ2h0IiwiYW5jaG9yV2lkdGgiLCJib2R5TGVmdCIsImJvZHlSZWN0IiwiYm9keVRvcCIsIlBvcG92ZXIiLCJNSURETEUiLCJTVEFSVCIsIkVORCIsIm5leHRYIiwiY2FyZXQiLCJjbGllbnRXaWR0aCIsIm5leHRZIiwiY2xpZW50SGVpZ2h0IiwiYW5jaG9yWSIsInkiLCJhdXRvUmVwb3NpdGlvbiIsInNjcm9sbFdpZHRoIiwic2Nyb2xsSGVpZ2h0IiwieE1heCIsImNvcnJlY3Rpb25zIiwieU1heCIsInRyYW5zZm9ybVByb3AiLCJuZXh0QWxpZ25tZW50IiwiY3VycmVudEFsaWdubWVudCIsImNvbnN0YW50IiwiZ2V0Q2xhc3NBbGlnbm1lbnRGcmFnbWVudCIsImNhcmV0Q29tcG9uZW50IiwiZ2V0RnJhZyIsIkxFRlQiLCJSSUdIVCIsInByZXNldFZhbHVlcyIsInZhbHVlcyIsIkRFRkFVTFRfQ0FSRVRfQ09NUE9ORU5UIiwid2l0aG91dCIsImV4cGFuZGVkIiwiZGlzcGF0Y2hDYWxsYmFjayIsInRvZ2dsZVByb3BzIiwibmV3UHJvcHMiLCJQcm9ncmVzc2l2ZURpc2Nsb3N1cmUiLCJiLWRpc2Nsb3N1cmUtZXhwYW5kZWQiLCJ0ZWFzZXJFeHBhbmRlZCIsInRlYXNlciIsInJlbmRlckNvbnRlbnQiLCJvbkV4cGFuZCIsIm9uSGlkZSIsIm9uQ2FuY2VsIiwiY2FuY2VsUHJvcHMiLCJwcm9ncmVzc1Byb3BzIiwiYi1wcm9ncmVzcy1pbmRldGVybWluYXRlIiwicHJvZ3Jlc3MiLCJ0d2VlblByb3BlcnR5IiwiUHJvZ3Jlc3MiLCJyZW5kZXJQcm9ncmVzcyIsInJlbmRlckNhbmNlbCIsIm9uU2VsZWN0ZWQiLCJiLXJhZGlvLXNlbGVjdGVkIiwiUmFkaW8iLCJzdHIiLCJtYXRjaE9wZXJhdG9yc1JlIiwiY29tcHV0ZU1hdGNoZXMiLCJzZWxlY3RlZEVudGl0eUluZGV4Iiwib25FbnRpdHlIaWdobGlnaHRlZCIsImVudGl0aWVzIiwidXBkYXRlSW5wdXRTdGF0ZSIsImVudGl0eU1hdGNoSW5kZXhlcyIsIm1hdGNoZXMiLCJzY3JvbGxUb3AiLCJzZXRWYWx1ZVdpdGhTZWxlY3RlZEVudGl0eSIsInRvdGFsTWF0Y2hlcyIsIm1hdGNoZXNOb2RlIiwibWF0Y2hJbmRleCIsIm1hdGNoTm9kZSIsIm9mZnNldFRvcCIsIm1hdGNoTm9kZVlTdGFydCIsIm1hdGNoTm9kZVlFbmQiLCJtYXRjaGVzTm9kZVlFbmQiLCJnZXRJbnB1dE5vZGUiLCJzZWxlY3Rpb25TdGFydCIsInNlbGVjdGlvbkVuZCIsImVudGl0eSIsInRleHQiLCJlbnRpdHlDb250ZW50Iiwic3BsaXQiLCJlc2NhcGVyIiwiZnJhZ3MiLCJ0aHJlc2hvbGQiLCJub3JtYWxpemVkVXNlclRleHQiLCJzZWVrVmFsdWUiLCJpbmRleFN0YXJ0IiwiaW5kZXhFbmQiLCJhbGdvcml0aG0iLCJUeXBlYWhlYWQiLCJTVEFSVFNfV0lUSCIsIm1hcmtTdGFydHNXaXRoTWF0Y2hTdWJzdHJpbmciLCJtYXJrRnV6enlNYXRjaFN1YnN0cmluZyIsIm1hcmtlciIsIndhcm5lZE1hcmtlciIsImNvbnNvbGUiLCJ3YXJuIiwidXNlclRleHQiLCJub3JtYWxpemVkIiwicmVzdWx0cyIsImdldFN0YXJ0c1dpdGhNYXRjaEluZGV4ZXMiLCJnZXRGdXp6eU1hdGNoSW5kZXhlcyIsIm1hdGNoZXIiLCJ3YXJuZWRNYXRjaGVyIiwicHJvdmlkZWRFbnRpdGllcyIsImN1cnJlbnRWYWx1ZSIsImdldE1hdGNoSW5kZXhlcyIsIm9mZnNjcmVlbkNsYXNzIiwiYXJpYS1saXZlIiwiZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0IiwiaGludCIsInJhdyIsInByb2Nlc3NlZCIsImhpbnRQcm9wcyIsIm1hdGNoV3JhcHBlclByb3BzIiwicmVzdCIsImItdHlwZWFoZWFkLW1hdGNoLXNlbGVjdGVkIiwiaGFuZGxlTWF0Y2hDbGljayIsIm1hcmtNYXRjaFN1YnN0cmluZyIsInJlbmRlck5vdGlmaWNhdGlvbiIsInJlbmRlckhpbnQiLCJhcmlhLWNvbnRyb2xzIiwicmVuZGVyTWF0Y2hlcyIsIkZVWlpZIiwiY2xlYXJQYXJ0aWFsSW5wdXRPblNlbGVjdGlvbiIsIm9uQ29tcGxldGUiLCJvbkVudGl0eVNlbGVjdGVkIiwicmVzZXRNYXRjaGVzIiwic2VsZWN0Iiwic2V0VmFsdWUiLCJnZXRNYXJraW5nRnVuY3Rpb24iLCJnZXRNYXRjaGluZ0Z1bmN0aW9uIiwic3RvcFByb3BhZ2F0aW9uIiwiY3Vyc29yQXRFbmRPZklucHV0Iiwic2hpZnRLZXkiLCJzZWxlY3RNYXRjaCIsImFycmF5IiwidHlwZWFoZWFkIiwiYWRkIiwidG9rZW5zIiwiaGFuZGxlQWRkVG9rZW4iLCJoYW5kbGVJbnB1dENsaWNrIiwiY2xlYXJTZWxlY3Rpb24iLCJoYW5kbGVJbnB1dEZvY3VzIiwid2hpY2giLCJzZWxlY3RQcmV2aW91c1Rva2VuIiwic2VsZWN0TmV4dFRva2VuIiwidG9rZW5zU2VsZWN0ZWQiLCJyZW1vdmUiLCJtZXRhS2V5IiwiX3N1cHByZXNzTmV4dFRva2VuU2VsZWN0aW9uIiwiaGFuZGxlTmV3U2VsZWN0aW9uIiwicHJldmlvdXNTZWxlY3RlZEluZGV4ZXMiLCJjdXJyZW50U2VsZWN0ZWRJbmRleGVzIiwibGFzdCIsImlkeCIsImluZGV4ZXMiLCJoYW5kbGVSZW1vdmVUb2tlbnMiLCJhcHBlbmQiLCJmaXJzdCIsInNlbGVjdFRva2VuIiwic2VsZWN0VG9rZW5zIiwicHJldmlvdXNUb2tlbiIsIm5leHRUb2tlbiIsInRva2VuQ2xvc2VDb21wb25lbnQiLCJ0b2tlbkNsb3NlVmlzaWJsZSIsImhhbmRsZVRva2VuQ2xvc2VDbGljayIsImItdG9rZW5maWVsZC10b2tlbi1zZWxlY3RlZCIsImhhbmRsZVRva2VuS2V5RG93biIsInJlbmRlclRva2VuQ2xvc2UiLCJUb2tlbml6ZWRJbnB1dCIsInJlbmRlclRva2VucyIsIlRvb2x0aXAiLCJiLXRvb2x0aXAtcG9zaXRpb24tYWJvdmUiLCJiLXRvb2x0aXAtcG9zaXRpb24tYmVsb3ciLCJiLXRvb2x0aXAtcG9zaXRpb24tYmVmb3JlIiwiQkVGT1JFIiwiYi10b29sdGlwLXBvc2l0aW9uLWFmdGVyIiwiQUZURVIiLCJkYXRhLXRvb2x0aXAiLCJhcmlhLWxhYmVsIl0sIm1hcHBpbmdzIjoib1RBQUEseUJBQWdCQSxxQkFBeUIsOENDR1FDLHFFQUM3QyxlQUFjQyxLQUFLRCxHQUFRRSxPQUFPLFdBQThCQyxFQUFNQyxHQUNsRSxHQUFJQyxFQUFZQyxRQUFRRixNQUFVLEVBQUcsQ0FDakNELEVBQUtDLEdBQU9KLEVBQU9JLEdBR3ZCLHE4RUNnQ0pHLE9BQ0lDLGlCQUFrQkMsRUFBS0MsTUFBTUMsMkJBdURqQ0MsY0FBZ0IsU0FBQ0MsR0FDYixPQUFRQSxFQUFNVCxLQUNkLElBQUssVUFDRCxHQUFJSyxFQUFLQyxNQUFNSSxPQUFTQyxFQUFtQkQsS0FBS0UsVUFDekNQLEVBQUtDLE1BQU1JLE9BQVNDLEVBQW1CRCxLQUFLRyxLQUFNLENBQ3JESixFQUFN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

"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var React=require("react");var React__default=_interopDefault(React);var ReactDOM=require("react-dom");var ReactDOM__default=_interopDefault(ReactDOM);var isFunction=function(e){return typeof e==="function"};function omitKeysFromSourceObject(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return Object.keys(e).reduce(function n(r,o){if(t.indexOf(o)===-1){r[o]=e[o]}return r},{})}var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var classCallCheck=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var defineProperty=function(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e};var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var inherits=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var objectWithoutProperties=function(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n};var possibleConstructorReturn=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var ArrowKeyNavigation=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={activeChildIndex:r.props.defaultActiveChildIndex},r.handleKeyDown=function(e){switch(e.key){case"ArrowUp":if(r.props.mode===t.mode.VERTICAL||r.props.mode===t.mode.BOTH){e.preventDefault();r.moveFocus(-1)}break;case"ArrowLeft":if(r.props.mode===t.mode.HORIZONTAL||r.props.mode===t.mode.BOTH){e.preventDefault();r.moveFocus(-1)}break;case"ArrowDown":if(r.props.mode===t.mode.VERTICAL||r.props.mode===t.mode.BOTH){e.preventDefault();r.moveFocus(1)}break;case"ArrowRight":if(r.props.mode===t.mode.HORIZONTAL||r.props.mode===t.mode.BOTH){e.preventDefault();r.moveFocus(1)}break}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},r.handleFocus=function(e){if(e.target.hasAttribute("data-focus-index")){var t=parseInt(e.target.getAttribute("data-focus-index"),10);var n=React__default.Children.toArray(r.props.children)[t];r.setState({activeChildIndex:t});if(n.props.onFocus){n.props.onFocus(e)}}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentDidUpdate",value:function e(t,n){if(this.state.activeChildIndex!==n.activeChildIndex){this.setFocus(this.state.activeChildIndex)}}},{key:"componentWillReceiveProps",value:function e(t){if(this.state.activeChildIndex!==0){var n=t.children?React__default.Children.count(t.children):0;if(n===0){this.setState({activeChildIndex:0})}else if(this.state.activeChildIndex>=n){this.setState({activeChildIndex:n-1})}}}},{key:"setFocus",value:function e(t){var n=(this.refs.wrapper instanceof HTMLElement?this.refs.wrapper:ReactDOM.findDOMNode(this.refs.wrapper)).children[t];if(n&&n.hasAttribute("data-skip")){this.moveFocus(n.compareDocumentPosition(document.activeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}else if(n&&document.activeElement!==n){n.focus()}}},{key:"moveFocus",value:function e(t){var n=this.props.children?React__default.Children.count(this.props.children):0;var r=this.state.activeChildIndex+t;if(r>=n){r=0}else if(r<0){r=n-1}this.setState({activeChildIndex:r})}},{key:"children",value:function e(){var t=this;return React__default.Children.map(this.props.children,function(e,n){return React__default.cloneElement(e,{"data-focus-index":n,"data-skip":parseInt(e.props.tabIndex,10)===-1||undefined,key:e.key||n,tabIndex:t.state.activeChildIndex===n?0:-1})})}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",onFocus:this.handleFocus,onKeyDown:this.handleKeyDown}),this.children())}}]);return t}(React__default.PureComponent);ArrowKeyNavigation.mode={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL",BOTH:"BOTH"};ArrowKeyNavigation.propTypes={component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),defaultActiveChildIndex:React.PropTypes.number,mode:React.PropTypes.oneOf([ArrowKeyNavigation.mode.BOTH,ArrowKeyNavigation.mode.HORIZONTAL,ArrowKeyNavigation.mode.VERTICAL])};ArrowKeyNavigation.defaultProps={component:"div",defaultActiveChildIndex:0,mode:ArrowKeyNavigation.mode.BOTH};ArrowKeyNavigation.internalKeys=Object.keys(ArrowKeyNavigation.defaultProps);function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var index=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Async=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.mounted=false,r.state={},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"convertDataToJSXOrWait",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;var r=n.data;if(r instanceof Promise){this.setState({component:null});return r.then(function(e){if(t.mounted){t.setState(function(t,n){return{component:n.data===r?n.convertToJSXFunc(e):t.component}})}},function(){return t.setState({component:false})})}this.setState({component:n.convertToJSXFunc(r)})}},{key:"fireCallbackIfDataRendered",value:function e(){if(this.state.component){this.props.contentRenderedFunc()}}},{key:"componentWillMount",value:function e(){this.convertDataToJSXOrWait()}},{key:"componentDidMount",value:function e(){this.mounted=true;this.fireCallbackIfDataRendered()}},{key:"componentDidUpdate",value:function e(){this.fireCallbackIfDataRendered()}},{key:"componentWillReceiveProps",value:function e(t){this.convertDataToJSXOrWait(t)}},{key:"componentWillUnmount",value:function e(){this.mounted=false}},{key:"getClasses",value:function e(t){return index("b-async",this.props.className,t,{"b-async-error":this.state.component===false,"b-async-loading":this.state.component===null})}},{key:"render",value:function e(){if(this.state.component===null||this.state.component===false){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:this.getClasses()}),this.state.component===null?this.props.loadingContent:this.props.errorContent)}return React__default.cloneElement(this.state.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:this.getClasses(this.state.component.props&&this.state.component.props.className)}))}}]);return t}(React__default.PureComponent);Async.propTypes={contentRenderedFunc:React.PropTypes.func,convertToJSXFunc:React.PropTypes.func,data:React.PropTypes.any,errorContent:React.PropTypes.node,loadingContent:React.PropTypes.node};Async.defaultProps={contentRenderedFunc:function e(){},convertToJSXFunc:function e(t){return t},data:null,errorContent:"⚠️",loadingContent:null};Async.internalKeys=Object.keys(Async.defaultProps);var index$1=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});function noop(){}var Button=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.handleClick=function(e){if(r.props.disabled){return}r.toggleState(e);if(isFunction(r.props.onClick)){r.props.onClick(e)}},r.handleKeyDown=function(e){if(r.props.disabled){return}switch(e.key){case"Enter":case"Space":e.preventDefault();r.toggleState(e)}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"toggleState",value:function e(t){this.props[this.props.pressed?"onUnpressed":"onPressed"](t)}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"button",className:index$1("b-button",this.props.className,{"b-button-pressable":typeof this.props.pressed!=="undefined","b-button-pressed":this.props.pressed}),"aria-pressed":this.props.pressed,onKeyDown:this.handleKeyDown,onClick:this.handleClick}),this.props.children)}}]);return t}(React__default.PureComponent);Button.propTypes={children:React.PropTypes.node,component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),onClick:React.PropTypes.func,onPressed:React.PropTypes.func,onUnpressed:React.PropTypes.func,pressed:React.PropTypes.bool};Button.defaultProps={children:null,component:"button",onClick:noop,onPressed:noop,onUnpressed:noop,pressed:undefined};Button.internalKeys=Object.keys(Button.defaultProps);var index$2=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});function uuid(){return"b-"+([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^Math.random()*16>>e/4).toString(16)})}var Checkbox=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.id=uuid(),r.handleChange=function(e){if(r.props.inputProps.disabled){return}r.props[!r.props.inputProps.checked?"onChecked":"onUnchecked"](r.props.inputProps.name);if(isFunction(r.props.inputProps.onChange)){r.props.inputProps.onChange(e)}},r.handleClick=function(e){if(r.props.inputProps.disabled){return}r.refs.input.focus();if(isFunction(r.props.inputProps.onClick)){r.props.inputProps.onClick(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentDidMount",value:function e(){if(this.props.inputProps.indeterminate){this.setIndeterminate()}}},{key:"componentDidUpdate",value:function e(t){if(t.inputProps.indeterminate!==this.props.inputProps.indeterminate){this.setIndeterminate()}}},{key:"setIndeterminate",value:function e(){this.refs.input.indeterminate=!!this.props.inputProps.indeterminate}},{key:"getAriaState",value:function e(){return this.props.inputProps.indeterminate?"mixed":String(this.props.inputProps.checked)}},{key:"renderInput",value:function e(){return React__default.createElement("input",_extends({},omitKeysFromSourceObject(this.props.inputProps,"indeterminate"),{ref:"input",type:"checkbox",className:index$2("b-checkbox",this.props.inputProps.className,{"b-checkbox-mixed":this.props.inputProps.indeterminate,"b-checkbox-checked":this.props.inputProps.checked,"b-checkbox-unchecked":!this.props.inputProps.indeterminate&&!this.props.inputProps.checked}),id:this.props.inputProps.id||this.id,"aria-checked":this.getAriaState(),onChange:this.handleChange,onClick:this.handleClick}))}},{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("label",_extends({},this.props.labelProps,{ref:"label",className:index$2("b-checkbox-label",this.props.labelProps.className),htmlFor:this.props.inputProps.id||this.id}),this.props.label)}}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$2("b-checkbox-wrapper",this.props.className)}),this.renderInput(),this.renderLabel())}}]);return t}(React__default.PureComponent);Checkbox.propTypes={inputProps:React.PropTypes.shape({checked:React.PropTypes.bool,className:React.PropTypes.string,disabled:React.PropTypes.bool,id:React.PropTypes.string,indeterminate:React.PropTypes.bool,onChange:React.PropTypes.func,onClick:React.PropTypes.func,name:React.PropTypes.string,value:React.PropTypes.string}),label:React.PropTypes.node,labelProps:React.PropTypes.object,onChecked:React.PropTypes.func,onUnchecked:React.PropTypes.func};Checkbox.defaultProps={inputProps:{checked:false,indeterminate:false},label:null,labelProps:{},onChecked:noop,onUnchecked:noop};Checkbox.internalKeys=Object.keys(Checkbox.defaultProps);var index$3=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var CheckboxGroup=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"allItemsChecked",value:function e(){return this.props.items.every(function(e){return e.inputProps.checked===true})}},{key:"anyItemsChecked",value:function e(){return this.props.items.some(function(e){return e.inputProps.checked===true})}},{key:"renderSelectAll",value:function e(){if(this.props.selectAll){var t=this.allItemsChecked();var n=this.props.selectAllProps.inputProps;return React__default.createElement(Checkbox,_extends({},this.props.selectAllProps,{ref:"select_all",key:"cb_select_all",className:index$3("b-checkbox-group-selectall",this.props.selectAllProps.className),inputProps:_extends({},n,{checked:t,indeterminate:!t&&this.anyItemsChecked(),name:n&&n.name?n.name:"cb_select_all"}),label:this.props.selectAllProps.label||"Select All",onChecked:this.props.onAllChecked,onUnchecked:this.props.onAllUnchecked}))}}},{key:"renderCheckboxes",value:function e(){var t=this;return this.props.items.map(function(e){return React__default.createElement(Checkbox,_extends({},e,{key:e.inputProps.name,onChecked:t.props.onChildChecked,onUnchecked:t.props.onChildUnchecked}))})}},{key:"renderChildren",value:function e(){var n=[this.renderCheckboxes()];if(this.props.selectAll&&this.props.selectAllPosition){switch(this.props.selectAllPosition){case t.selectAllPosition.BEFORE:n.unshift(this.renderSelectAll());break;case t.selectAllPosition.AFTER:n.push(this.renderSelectAll());break}}return n}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"group",className:index$3("b-checkbox-group",this.props.className)}),this.renderChildren())}}]);return t}(React__default.PureComponent);CheckboxGroup.selectAllPosition={BEFORE:uuid(),AFTER:uuid()};CheckboxGroup.propTypes={items:React.PropTypes.arrayOf(Checkbox.propTypes.inputProps).isRequired,onAllChecked:React.PropTypes.func,onAllUnchecked:React.PropTypes.func,onChildChecked:React.PropTypes.func,onChildUnchecked:React.PropTypes.func,selectAll:React.PropTypes.bool,selectAllProps:React.PropTypes.shape({label:React.PropTypes.string,inputProps:React.PropTypes.object}),selectAllPosition:React.PropTypes.oneOf([CheckboxGroup.selectAllPosition.BEFORE,CheckboxGroup.selectAllPosition.AFTER])};CheckboxGroup.defaultProps={items:[],onAllChecked:noop,onAllUnchecked:noop,onChildChecked:noop,onChildUnchecked:noop,selectAll:false,selectAllProps:{},selectAllPosition:CheckboxGroup.selectAllPosition.BEFORE};CheckboxGroup.internalKeys=Object.keys(CheckboxGroup.defaultProps);var index$4=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Portal=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.id=uuid(),r.$portal=null,r.$passenger=null,n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillMount",value:function e(){this.$portal=document.createElement("div");this.props.destination.appendChild(this.$portal);this.renderPortalledContent()}},{key:"renderPortalledContent",value:function e(){var t=React__default.isValidElement(this.props.children)?this.props.children:React__default.createElement("div",null,this.props.children);this.$portal.id=this.props.portalId||this.id;ReactDOM__default.unstable_renderSubtreeIntoContainer(this,t,this.$portal);this.$passenger=this.$portal.children[0]}},{key:"componentDidUpdate",value:function e(){this.renderPortalledContent()}},{key:"componentWillUnmount",value:function e(){ReactDOM__default.unmountComponentAtNode(this.$portal);this.props.destination.removeChild(this.$portal)}},{key:"render",value:function e(){return React__default.createElement("span",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),defineProperty({},t.PORTAL_DATA_ATTRIBUTE,this.props.portalId||this.id)))}}]);return t}(React__default.Component);Portal.propTypes={children:React__default.PropTypes.node,destination:React.PropTypes.instanceOf(HTMLElement),portalId:React.PropTypes.string};Portal.defaultProps={children:null,destination:document.body,portalId:null};Portal.internalKeys=Object.keys(Portal.defaultProps);Portal.PORTAL_DATA_ATTRIBUTE="data-portal-id";var toArray$1=Array.prototype.slice;var Dialog=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.mounted=false,r.uuidHeader=uuid(),r.uuidBody=uuid(),r.handleFocus=function(e){if(!r.props.captureFocus){if(r.shouldDialogCloseOnEvent("closeOnOutsideFocus",e)&&!r.isPartOfDialog(e.target)){return window.setTimeout(r.props.onClose,0)}return}var t=e.explicitOriginalTarget||e.relatedTarget;if(r.isPartOfDialog(t)&&!r.isPartOfDialog(e.target)){e.preventDefault();t.focus()}},r.handleKeyDown=function(e){if(e.key==="Escape"){if(r.shouldDialogCloseOnEvent("closeOnEscKey",e)){window.setTimeout(r.props.onClose,0)}}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},r.handleInsideClick=function(e){if(r.shouldDialogCloseOnEvent("closeOnInsideClick",e)){window.setTimeout(r.props.onClose,0)}},r.handleOutsideClick=function(e){if(r.shouldDialogCloseOnEvent("closeOnOutsideClick",e)&&!r.isPartOfDialog(e.target)){window.setTimeout(r.props.onClose,0)}},r.handleOutsideScrollWheel=function(e){if(r.shouldDialogCloseOnEvent("closeOnOutsideScroll",e)&&!r.isPartOfDialog(e.target)){window.setTimeout(r.props.onClose,0)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"isPartOfDialog",value:function e(t){if(!t||t===window){return false}var n=[this.$wrapper].concat(toArray$1.call(this.$wrapper.querySelectorAll("["+Portal.PORTAL_DATA_ATTRIBUTE+"]")).map(function(e){return document.getElementById(e.getAttribute(Portal.PORTAL_DATA_ATTRIBUTE))}));var r=t.nodeType!==Node.ELEMENT_NODE?t.parentNode:t;return n.some(function(e){return e.contains(r)})}},{key:"componentDidMount",value:function e(){window.addEventListener("click",this.handleOutsideClick,true);window.addEventListener("contextmenu",this.handleOutsideClick,true);window.addEventListener("focus",this.handleFocus,true);window.addEventListener("scroll",this.handleOutsideScrollWheel,true);window.addEventListener("wheel",this.handleOutsideScrollWheel,true);if(this.props.captureFocus&&!this.isPartOfDialog(document.activeElement)){this.$dialog.focus()}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("click",this.handleOutsideClick,true);window.removeEventListener("contextmenu",this.handleOutsideClick,true);window.removeEventListener("focus",this.handleFocus,true);window.removeEventListener("scroll",this.handleOutsideScrollWheel,true);window.removeEventListener("wheel",this.handleOutsideScrollWheel,true)}},{key:"shouldDialogCloseOnEvent",value:function e(t,n){return isFunction(this.props[t])?this.props[t](n):this.props[t]}},{key:"renderBody",value:function e(){return React__default.createElement("div",_extends({},this.props.bodyProps,{id:this.props.bodyProps.id||this.uuidBody,className:index$4("b-dialog-body",this.props.bodyProps.className)}),this.props.children)}},{key:"renderFooter",value:function e(){if(this.props.footer){return React__default.createElement("footer",_extends({},this.props.footerProps,{className:index$4("b-dialog-footer",this.props.footerProps.className)}),this.props.footer)}}},{key:"renderHeader",value:function e(){if(this.props.header){return React__default.createElement("header",_extends({},this.props.headerProps,{id:this.props.headerProps.id||this.uuidHeader,className:index$4("b-dialog-header",this.props.headerProps.className)}),this.props.header)}}},{key:"renderFocusBoundary",value:function e(){if(this.props.captureFocus){return React__default.createElement("div",{className:"b-offscreen",tabIndex:"0","aria-hidden":"true"}," ")}}},{key:"render",value:function e(){var n=this;return React__default.createElement("div",_extends({},this.props.wrapperProps,{ref:function e(t){return n.$wrapper=t},className:index$4("b-dialog-wrapper",this.props.wrapperProps.className),tabIndex:"0"}),this.renderFocusBoundary(),this.props.before,React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:function e(t){return n.$dialog=t},className:index$4("b-dialog",this.props.className),onClick:this.handleInsideClick,onKeyDown:this.handleKeyDown,role:"dialog","aria-labelledby":this.uuidHeader,"aria-describedby":this.uuidBody,tabIndex:"0"}),this.renderHeader(),this.renderBody(),this.renderFooter()),this.props.after,this.renderFocusBoundary())}}]);return t}(React__default.PureComponent);Dialog.propTypes={after:React.PropTypes.node,before:React.PropTypes.node,bodyProps:React.PropTypes.object,captureFocus:React.PropTypes.bool,children:React.PropTypes.node,closeOnEscKey:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),closeOnInsideClick:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),closeOnOutsideClick:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),closeOnOutsideFocus:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),closeOnOutsideScroll:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),footer:React.PropTypes.node,footerProps:React.PropTypes.object,header:React.PropTypes.node,headerProps:React.PropTypes.object,onClose:React.PropTypes.func,wrapperProps:React.PropTypes.object};Dialog.defaultProps={after:null,before:null,bodyProps:{},captureFocus:true,children:null,closeOnEscKey:false,closeOnInsideClick:false,closeOnOutsideClick:false,closeOnOutsideFocus:false,closeOnOutsideScroll:false,footer:null,footerProps:{},header:null,headerProps:{},onClose:noop,wrapperProps:{}};Dialog.internalKeys=Object.keys(Dialog.defaultProps);var index$5=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var instances=[];function toI(e){return parseInt(e,10)}function rescale(e){var t=ReactDOM.findDOMNode(e);var n=window.getComputedStyle(t.parentNode);var r=toI(window.getComputedStyle(t).fontSize);var o=toI(n.height);var s=toI(n.width);if(n.boxSizing==="border-box"||n.boxSizing==="padding-box"){o-=toI(n.paddingTop)+toI(n.paddingBottom);s-=toI(n.paddingLeft)+toI(n.paddingRight)}var a=Math.floor(r/t.offsetHeight*o);var i=Math.floor(r/t.offsetWidth*s);t.style.fontSize=(Math.min(e.props.maxFontSize,a,i)||1)+"px"}function handleWindowResize(){instances.forEach(function(e){return rescale(e)})}function registerInstance(e){if(instances.length===0){window.addEventListener("resize",handleWindowResize,true)}instances.push(e)}function unregisterInstance(e){instances.splice(instances.indexOf(e),1);if(instances.length===0){window.removeEventListener("resize",handleWindowResize,true)}}var FittedText=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"componentDidMount",value:function e(){rescale(this);registerInstance(this)}},{key:"componentDidUpdate",value:function e(){rescale(this)}},{key:"componentWillUnmount",value:function e(){unregisterInstance(this)}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{className:index$5("b-text",this.props.className)}),this.props.children)}}]);return t}(React__default.PureComponent);FittedText.propTypes={component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),maxFontSize:React.PropTypes.number};FittedText.defaultProps={component:"span",maxFontSize:Number.MAX_VALUE};FittedText.internalKeys=Object.keys(FittedText.defaultProps);var index$6=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Image=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={status:t.status.LOADING},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillReceiveProps",value:function e(n){if(n.src!==this.props.src){this.resetPreloader();this.setState({status:t.status.LOADING})}}},{key:"componentDidMount",value:function e(){this.preload()}},{key:"componentDidUpdate",value:function e(){this.preload()}},{key:"componentWillUnmount",value:function e(){this.resetPreloader()}},{key:"resetPreloader",value:function e(){this.loader.onload=null;this.loader.onerror=null;this.loader=null}},{key:"preload",value:function e(){var n=this;if(this.loader){return}this.loader=document.createElement("img");this.loader.onload=function(){return n.setState({status:t.status.LOADED})};this.loader.onerror=function(){return n.setState({status:t.status.ERROR})};this.loader.src=this.props.src}},{key:"renderImage",value:function e(){if(this.props.displayAsBackgroundImage){return React__default.createElement("div",_extends({},this.props.imageProps,{ref:"image",className:index$6("b-image",this.props.imageProps.className),title:this.props.alt,style:_extends({},this.props.imageProps.style,{backgroundImage:"url("+this.props.src+")"})}))}return React__default.createElement("img",_extends({},this.props.imageProps,{ref:"image",className:index$6("b-image",this.props.imageProps.className),src:this.props.src,alt:this.props.alt,onLoad:noop,onError:noop}))}},{key:"renderStatus",value:function e(){return React__default.createElement("div",_extends({},this.props.statusProps,{ref:"status",className:index$6("b-image-status",this.props.statusProps.className,{"b-image-loading":this.state.status===t.status.LOADING,"b-image-loaded":this.state.status===t.status.LOADED,"b-image-error":this.state.status===t.status.ERROR}),role:"presentation"}))}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$6("b-image-wrapper",this.props.className)}),this.renderImage(),this.renderStatus())}}]);return t}(React__default.PureComponent);Image.status={LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"};Image.propTypes={alt:React.PropTypes.string,displayAsBackgroundImage:React.PropTypes.bool,imageProps:React.PropTypes.object,src:React.PropTypes.string.isRequired,statusProps:React.PropTypes.object};Image.defaultProps={alt:null,displayAsBackgroundImage:false,imageProps:{},src:"about:blank",statusProps:{}
};Image.internalKeys=Object.keys(Image.defaultProps);var index$7=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var isString=function(e){return typeof e==="string"};var Input=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={input:"",isControlled:isString(r.props.inputProps.value),isFocused:false},r.setInputValue=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return r.setState({input:e})},r.getValue=function(){return r.refs.field.value},r.handleBlur=function(e){r.setState({isFocused:false});if(isFunction(r.props.inputProps.onBlur)===true){r.props.inputProps.onBlur(e)}},r.handleFocus=function(e){r.setState({isFocused:true});if(isFunction(r.props.inputProps.onFocus)===true){r.props.inputProps.onFocus(e)}},r.handleChange=function(e){if(r.state.isControlled===false){r.setInputValue(e.target.value)}if(isFunction(r.props.inputProps.onChange)===true){r.props.inputProps.onChange(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillMount",value:function e(){if(this.state.isControlled===true){return this.setInputValue(this.props.inputProps.value)}this.setInputValue(this.props.inputProps.defaultValue)}},{key:"componentWillReceiveProps",value:function e(t){if(t.inputProps.value!==this.props.inputProps.value){this.setInputValue(t.inputProps.value)}}},{key:"setValue",value:function e(t){this.setInputValue(t);this.refs.field.value=t;if(this.state.isControlled===true){this.refs.field.dispatchEvent(new Event("input",{bubbles:true}));this.refs.field.dispatchEvent(new Event("change",{bubbles:true}))}}},{key:"getPlaceholderText",value:function e(){var t=this.state.input!=="";var n=this.props.hidePlaceholderOnFocus===true?this.state.isFocused===false&&t===false:t===false;return n?this.props.inputProps.placeholder:""}},{key:"renderPlaceholder",value:function e(){return React__default.createElement("div",{ref:"placeholder",className:"b-input-placeholder b-input"},this.getPlaceholderText())}},{key:"render",value:function e(){var n=this.props;return React__default.createElement("div",_extends({},omitKeysFromSourceObject(n,t.internalKeys),{ref:"wrapper",className:index$7("b-input-wrapper",n.className),title:this.getPlaceholderText()}),this.renderPlaceholder(),React__default.createElement("input",_extends({},n.inputProps,{ref:"field",className:index$7("b-input",n.inputProps.className),placeholder:null,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange})))}}]);return t}(React__default.PureComponent);Input.propTypes={hidePlaceholderOnFocus:React.PropTypes.bool,inputProps:React.PropTypes.shape({defaultValue:React.PropTypes.string,onBlur:React.PropTypes.func,onFocus:React.PropTypes.func,onChange:React.PropTypes.func,placeholder:React.PropTypes.string,type:React.PropTypes.string,value:React.PropTypes.string})};Input.defaultProps={hidePlaceholderOnFocus:true,inputProps:{type:"text"}};Input.internalKeys=Object.keys(Input.defaultProps);var index$8=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});function getIntersection(e,t){return Object.keys(t).reduce(function(t,n){if(n in e){t[n]=e[n]}return t},{})}var Modal=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"render",value:function e(){var n=this;var r=this.props;return React__default.createElement(Portal,r.portalProps,React__default.createElement("div",_extends({},omitKeysFromSourceObject(r,t.internalKeys),{ref:function e(t){return n.$modal=t},className:index$8("b-modal-wrapper",r.className)}),React__default.createElement("div",_extends({},r.maskProps,{className:index$8("b-modal-mask",r.maskProps.className)})),React__default.createElement(Dialog,_extends({},getIntersection(r,Dialog.defaultProps),r.modalProps,{className:index$8("b-modal",r.modalProps.className)}),r.children)))}}]);return t}(React__default.PureComponent);Modal.propTypes=_extends({},Dialog.propTypes,{maskProps:React.PropTypes.object,modalProps:React.PropTypes.object,portalProps:React.PropTypes.shape(Portal.propTypes)});Modal.defaultProps=_extends({},Dialog.defaultProps,{captureFocus:true,maskProps:{},modalProps:{},portalProps:{}});Modal.internalKeys=Object.keys(Modal.defaultProps);var index$9=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var INFINITY=1/0;var MAX_INTEGER=1.7976931348623157e308;var NAN=0/0;var symbolTag="[object Symbol]";var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;var objectProto=Object.prototype;var objectToString=objectProto.toString;function isInteger(e){return typeof e=="number"&&e==toInteger(e)}function isObject(e){var t=typeof e==="undefined"?"undefined":_typeof(e);return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&(typeof e==="undefined"?"undefined":_typeof(e))=="object"}function isSymbol(e){return(typeof e==="undefined"?"undefined":_typeof(e))=="symbol"||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toFinite(e){if(!e){return e===0?e:0}e=toNumber(e);if(e===INFINITY||e===-INFINITY){var t=e<0?-1:1;return t*MAX_INTEGER}return e===e?e:0}function toInteger(e){var t=toFinite(e),n=t%1;return t===t?n?t-n:t:0}function toNumber(e){if(typeof e=="number"){return e}if(isSymbol(e)){return NAN}if(isObject(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=e.replace(reTrim,"");var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var index$10=isInteger;var index$11=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var SegmentedControl=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={indexOfOptionInFocus:null},r.handleKeyDown=function(e){var t=e.key;var n=r.state.indexOfOptionInFocus;if(t==="ArrowLeft"){r.setFocus(r.getPreviousOptionIndex(n));e.preventDefault()}else if(t==="ArrowRight"){r.setFocus(r.getNextOptionIndex(n));e.preventDefault()}else if(t==="Enter"){r.handleOptionClick(r.props.options[n]);e.preventDefault()}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"currentValue",value:function e(){var t=void 0;this.props.options.some(function(e){if(e.selected){t=e.value;return true}});return t}},{key:"setFocus",value:function e(t){ReactDOM.findDOMNode(this.refs["option_$"+t]).focus()}},{key:"getNextOptionIndex",value:function e(t){var n=t+1;return n<this.props.options.length?n:0}},{key:"getPreviousOptionIndex",value:function e(t){var n=t-1;return n<0?this.props.options.length-1:n}},{key:"handleOptionBlur",value:function e(t,n){if(this.state.indexOfOptionInFocus===this.props.options.indexOf(t)){this.setState({indexOfOptionInFocus:null})}if(isFunction(t.onBlur)){t.onBlur(n)}}},{key:"handleOptionClick",value:function e(t,n){this.props.onOptionSelected(t.value);if(isFunction(t.onClick)){t.onClick(n)}}},{key:"handleOptionFocus",value:function e(t,n){this.setState({indexOfOptionInFocus:this.props.options.indexOf(t)});if(isFunction(t.onFocus)){t.onFocus(n)}}},{key:"renderOptions",value:function e(){var n=this;return this.props.options.map(function(e,r){return React__default.createElement(Button,_extends({},omitKeysFromSourceObject(e,t.internalChildKeys),{role:"radio","aria-checked":String(e.selected),ref:"option_$"+r,key:e.value,className:index$11("b-segmented-control-option",e.className,{"b-segmented-control-option-selected":e.selected}),tabIndex:e.selected?"0":"-1",onBlur:n.handleOptionBlur.bind(n,e),onPressed:n.handleOptionClick.bind(n,e),onFocus:n.handleOptionFocus.bind(n,e)}),e.content)})}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",role:"radiogroup",className:index$11("b-segmented-control",this.props.className),onKeyDown:this.handleKeyDown}),this.renderOptions())}}]);return t}(React__default.PureComponent);SegmentedControl.propTypes={onOptionSelected:React.PropTypes.func,options:function e(t){if(t.options.length<2){throw new Error("Must provide at least two options.")}var n=t.options.some(function(e){if(!("selected"in e)){return true}});if(n){throw new Error("Must provide a `selected` prop for each option.")}var r=false;var o=t.options.some(function(e){if(e.selected){if(r){return true}r=true}});if(o){throw new Error("Encountered multiple options with `selected: true`. There can be only one.")}if(t.options.some(function(e){return typeof e.value==="undefined"})){throw new Error("Must provide a `value` prop for each option.")}}};SegmentedControl.defaultProps={onOptionSelected:noop,options:[]};SegmentedControl.internalKeys=Object.keys(SegmentedControl.defaultProps);SegmentedControl.internalChildKeys=["content","value","selected"];var identity=function e(t){return t};var Pagination=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={currentPage:r.props.initialPage,targetIndex:(r.props.initialPage-1)*r.props.numItemsPerPage},r.currentPage=function(){return r.state.currentPage},r.getPageForIndex=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:r.props.numItemsPerPage;return Math.ceil((e+1)/t)},r.totalPages=function(){return Math.ceil(r.props.totalItems/r.props.numItemsPerPage)},r.firstVisibleItemIndex=function(){return(r.currentPage()-1)*r.props.numItemsPerPage},r.pageToIndex=function(e){if(e<0||e>=r.props.totalItems){return new Error("Cannot page to invalid index "+e+".")}r.setState({currentPage:r.getPageForIndex(e),targetIndex:e})},r.handleClick=function(e){var n=void 0;switch(e){case t.controls.FIRST:n=0;break;case t.controls.PREVIOUS:n=r.firstVisibleItemIndex()-r.props.numItemsPerPage;break;case t.controls.NEXT:n=r.firstVisibleItemIndex()+r.props.numItemsPerPage;break;case t.controls.LAST:n=r.props.totalItems-1;break;default:n=parseInt(e,10)*r.props.numItemsPerPage-1}r.setState({currentPage:r.getPageForIndex(n),targetIndex:n})},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentDidUpdate",value:function e(t,n){if(n.currentPage!==this.currentPage()){ReactDOM.findDOMNode(this.refs.item_0).focus()}}},{key:"componentWillReceiveProps",value:function e(){var t=this;var n=this.props;this.setState(function(e,r){if(r.identifier!==n.identifier){return{currentPage:1,targetIndex:0}}return{currentPage:t.getPageForIndex(e.targetIndex,r.numItemsPerPage),targetIndex:e.targetIndex}})}},{key:"createPageButtonOptions",value:function e(){var n=[];var r=this.currentPage();var o=this.props.numPageToggles;var s=this.totalPages();var a=r-(r-1)%o;var i=Math.min(a+o-1,s);if(this.props.showPaginationState){n.push({selected:false,content:isFunction(this.props.showPaginationState)?this.props.showPaginationState(r,s):r+" of "+s,value:"",disabled:true,className:"b-pagination-control b-pagination-control-state"})}if(this.props.showJumpToFirst){n.push({selected:false,content:this.props.jumpToFirstControlContent,value:t.controls.FIRST,disabled:this.currentPage()===1,className:"b-pagination-control b-pagination-control-first"})}n.push({selected:false,content:this.props.previousPageControlContent,value:t.controls.PREVIOUS,disabled:this.currentPage()===1,className:"b-pagination-control b-pagination-control-previous"});for(var p=a;p<=i;p++){n.push({className:"b-pagination-control","data-page-number":p,selected:p===this.currentPage(),content:p,value:p})}n.push({selected:false,content:this.props.nextPageControlContent,value:t.controls.NEXT,disabled:this.currentPage()===s,className:"b-pagination-control b-pagination-control-next"});if(this.props.showJumpToLast){n.push({selected:false,content:this.props.jumpToLastControlContent,value:t.controls.LAST,disabled:this.currentPage()===s,className:"b-pagination-control b-pagination-control-last"})}if(this.props.customControlContent){n.push({selected:false,content:this.props.customControlContent,value:uuid(),disabled:true,className:"b-pagination-control b-pagination-control-custom"})}return n}},{key:"generateItems",value:function e(){var t=[];var n=this.firstVisibleItemIndex();var r=Math.min(this.props.totalItems,n+this.props.numItemsPerPage)-1;for(var o=n;o<=r;o+=1){t.push({data:this.props.getItem(o)})}return t}},{key:"renderItems",value:function e(){var t=this;var n=this.props.listWrapperProps;var r=this.props.numItemsPerPage*(this.currentPage()-1);return React__default.createElement(ArrowKeyNavigation,_extends({},n,{ref:"itemList",className:index$9("b-pagination-items",n.className)}),this.generateItems().map(function(e,n){return React__default.createElement(Async,{ref:"item_"+n,key:n,className:index$9("b-pagination-item",{"b-pagination-item-even":n%2===0,"b-pagination-item-odd":n%2!==0}),convertToJSXFunc:t.props.itemToJSXConverterFunc,data:e.data,"data-pagination-index":r+n,loadingContent:t.props.itemLoadingContent})}))}},{key:"renderControls",value:function e(t){if(this.props.hidePagerIfNotNeeded&&this.props.totalItems<=this.props.numItemsPerPage){return}var n=this.props.toggleWrapperProps;var r=t.toLowerCase();var o=r[0].toUpperCase()+r.slice(1);return React__default.createElement(SegmentedControl,_extends({},n,{ref:"segmentedControl"+o,className:index$9("b-pagination-controls",n.className,defineProperty({},"b-pagination-controls-"+r,true)),options:this.createPageButtonOptions(),onOptionSelected:this.handleClick}))}},{key:"renderView",value:function e(){var n=this.props;var r=t.positions;return React__default.createElement("div",{ref:"paginatedView",className:"b-pagination"},n.position===r.ABOVE||n.position===r.BOTH?this.renderControls(r.ABOVE):noop,n.before,this.renderItems(),n.after,n.position===r.BELOW||n.position===r.BOTH?this.renderControls(r.BELOW):noop)}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$9("b-pagination-wrapper",this.props.className)}),this.renderView())}}]);return t}(React__default.PureComponent);Pagination.controls={FIRST:"FIRST",PREVIOUS:"PREVIOUS",NEXT:"NEXT",LAST:"LAST"};Pagination.positions={ABOVE:"ABOVE",BELOW:"BELOW",BOTH:"BOTH"};Pagination.propTypes={after:React.PropTypes.node,before:React.PropTypes.node,customControlContent:React.PropTypes.node,getItem:React.PropTypes.func,hidePagerIfNotNeeded:React.PropTypes.bool,identifier:React.PropTypes.string.isRequired,initialPage:function e(t){if(index$10(t.initialPage)===false){return new Error("`initialPage` must be an integer.")}var n=Math.ceil(t.totalItems/t.numItemsPerPage);if(t.initialPage<1||t.initialPage>n){return new Error("`initialPage` must be between 1 and "+n+".")}},itemLoadingContent:React.PropTypes.node,itemToJSXConverterFunc:React.PropTypes.func,jumpToFirstControlContent:React.PropTypes.node,jumpToLastControlContent:React.PropTypes.node,listWrapperProps:React.PropTypes.object,nextPageControlContent:React.PropTypes.node,numItemsPerPage:function e(t){if(index$10(t.numItemsPerPage)===false){return new Error("`numItemsPerPage` must be an integer.")}else if(t.numItemsPerPage<1){return new Error("`numItemsPerPage` must be greater than zero.")}},numPageToggles:React.PropTypes.number,position:React.PropTypes.oneOf(Object.keys(Pagination.positions)),previousPageControlContent:React.PropTypes.node,showJumpToFirst:React.PropTypes.bool,showJumpToLast:React.PropTypes.bool,showPaginationState:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.func]),toggleWrapperProps:React.PropTypes.object,totalItems:React.PropTypes.number.isRequired};Pagination.defaultProps={after:null,before:null,customControlContent:null,getItem:noop,hidePagerIfNotNeeded:false,identifier:uuid(),initialPage:1,itemLoadingContent:null,itemToJSXConverterFunc:identity,jumpToFirstControlContent:"« First",jumpToLastControlContent:"Last »",listWrapperProps:{},nextPageControlContent:"Next ›",numItemsPerPage:10,numPageToggles:5,position:Pagination.positions.ABOVE,previousPageControlContent:"‹ Previous",showJumpToFirst:true,showJumpToLast:true,showPaginationState:true,toggleWrapperProps:{},totalItems:null};Pagination.internalKeys=Object.keys(Pagination.defaultProps);var index$12=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var transformProp=function e(){var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform","webkit-transform"];for(var n=0,r=t.length;n<r;n++){if(t[n]in document.documentElement.style){return t[n]}}return false}();function getOppositeCardinal(e){switch(e[0]){case"N":return"S";case"S":return"N";case"E":return"W"}return"E"}function without(e,t){return e.filter(function(e){return t.indexOf(e)===-1})}var CLASS_REMOVAL_REGEX=/\s?b-popover-(anchor|self)-(start|middle|end)/g;var DEFAULT_CARET_COMPONENT=React__default.createElement("svg",{viewBox:"0 0 14 9.5",xmlns:"http://www.w3.org/2000/svg"},React__default.createElement("g",null,React__default.createElement("polygon",{className:"b-popover-caret-border",fill:"#000",points:"7 0 14 10 0 10"}),React__default.createElement("polygon",{className:"b-popover-caret-fill",fill:"#FFF",points:"6.98230444 1.75 12.75 10 1.25 10"})));var START=0;var MIDDLE=1;var END=2;var combinations=[{name:"NNW",ax:START,ay:START,dx:START,dy:END},{name:"N",ax:MIDDLE,ay:START,dx:MIDDLE,dy:END},{name:"NNE",ax:END,ay:START,dx:END,dy:END},{name:"ENE",ax:END,ay:START,dx:START,dy:START},{name:"E",ax:END,ay:MIDDLE,dx:START,dy:MIDDLE},{name:"ESE",ax:END,ay:END,dx:START,dy:END},{name:"SSE",ax:END,ay:END,dx:END,dy:START},{name:"S",ax:MIDDLE,ay:END,dx:MIDDLE,dy:START},{name:"SSW",ax:START,ay:END,dx:START,dy:START},{name:"WSW",ax:START,ay:END,dx:END,dy:END},{name:"W",ax:START,ay:MIDDLE,dx:END,dy:MIDDLE},{name:"WNW",ax:START,ay:START,dx:END,dy:START}];var Popover=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.align=function(){var e=r.props.anchor instanceof HTMLElement?r.props.anchor:ReactDOM.findDOMNode(r.props.anchor);var n=r.props.caretAnchor?r.props.caretAnchor instanceof HTMLElement?r.props.caretAnchor:ReactDOM.findDOMNode(r.props.caretAnchor):e;r.cacheViewportCartography(e,n);var o=r.getValidAlignmentPreset();var s=t.getAlignmentClassFragment;r.dialog.$wrapper.className=r.dialog.$wrapper.className.replace(CLASS_REMOVAL_REGEX,"")+(" b-popover-anchor-x-"+s(o.ax))+(" b-popover-anchor-y-"+s(o.ay))+(" b-popover-self-x-"+s(o.dx))+(" b-popover-self-y-"+s(o.dy));var a=Math.round(r.getNextDialogXPosition(o));var i=Math.round(r.getNextDialogYPosition(o));r.dialog.$wrapper.style[transformProp]="translate("+a+"px, "+i+"px)";var p=o.name[0];var c=p==="N"||p==="S";r.$caret.style[c?"left":"top"]=Math.round(r.getNextCaretXPosition(o))+"px";r.$caret.style[c?"top":"left"]="0px"},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"cacheViewportCartography",value:function e(t,n){var r=document.body.getBoundingClientRect();this.anchorRect=t.getBoundingClientRect();this.caretAnchorRect=n.getBoundingClientRect();this.bodyLeft=r.left*-1;this.bodyTop=r.top*-1}},{key:"getNextCaretXPosition",value:function e(t){var n=t.name,r=t.ax,o=t.dx,s=t.ay,a=t.dy;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.$caret;var p=0;if(n[0]==="N"||n[0]==="S"){p=this.caretAnchorRect.left-this.anchorRect.left+this.caretAnchorRect.width/2;if(o===MIDDLE){p+=(this.dialog.$wrapper.clientWidth-this.anchorRect.width)/2}else if(o===END){p+=this.dialog.$wrapper.clientWidth-this.anchorRect.width}}else{p=this.caretAnchorRect.top-this.anchorRect.top+this.caretAnchorRect.height/2;if(a===MIDDLE){p+=(this.dialog.$wrapper.clientHeight-this.anchorRect.height)/2}else if(a===END){p+=this.dialog.$wrapper.clientHeight-this.anchorRect.height}}p-=i.clientWidth/2;return p}},{key:"getNextDialogXPosition",value:function e(t){var n=t.ax,r=t.dx;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.dialog.$wrapper;var s=this.anchorRect.left+this.bodyLeft;switch(n){case MIDDLE:s+=this.anchorRect.width/2;break;case END:s+=this.anchorRect.width;break}switch(r){case MIDDLE:s-=o.clientWidth/2;break;case END:s-=o.clientWidth;break}return s}},{key:"getNextDialogYPosition",value:function e(t){var n=t.ay,r=t.dy;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.dialog.$wrapper;var s=this.anchorRect.top+this.bodyTop;switch(n){case MIDDLE:s+=this.anchorRect.height/2;break;case END:s+=this.anchorRect.height;break}switch(r){case MIDDLE:s-=o.clientHeight/2;break;case END:s-=o.clientHeight;break}return s}},{key:"isPositionValid",value:function e(t,n,r){var o=t.name,s=t.ax,a=t.ay,i=t.dx,p=t.dy;var c=o[0];if(c==="N"||c==="S"){if(c==="N"&&this.anchorRect.top-n<0){return false}else if(c==="S"&&this.anchorRect.bottom+n>window.innerHeight){return false}if(s===START){return!(this.anchorRect.left+r>window.innerWidth||this.anchorRect.left<0)}else if(s===MIDDLE){return!(this.anchorRect.left-r/2<0||this.anchorRect.left+r/2>window.innerWidth)}return!(this.anchorRect.left-r<0||this.anchorRect.right>window.innerWidth)}else if(c==="W"||c==="E"){if(c==="W"&&this.anchorRect.left-r<0){return false}else if(c==="E"&&this.anchorRect.right+r>window.innerWidth){return false}if(a===START){return!(this.anchorRect.top+n>window.innerHeight||this.anchorRect.top<0)}else if(a===MIDDLE){return!(this.anchorRect.top+this.anchorRect.height/2-n/2<0||this.anchorRect.top+this.anchorRect.height/2+n/2>window.innerHeight)}return!(this.anchorRect.top-n<0||this.anchorRect.bottom>window.innerHeight)}return true}},{key:"getValidAlignmentPreset",value:function e(){var t=this;var n=this.dialog.$wrapper.clientWidth;var r=this.dialog.$wrapper.clientHeight;var o=combinations.filter(function(e){return t.isPositionValid(e,r,n)});if(o.indexOf(this.props.preset)!==-1||!this.props.autoReposition||!o.length){return this.props.preset}var s=o.filter(function(e){var n=e.name;return n[0]===t.props.preset.name[0]});if(s.length){return s[0]}var a=getOppositeCardinal(this.props.preset.name);var i=o.filter(function(e){var t=e.name;return t[0]===a});if(i.length){return i[0]}return o[0]}},{key:"componentDidMount",value:function e(){this.align();window.addEventListener("resize",this.align,true)}},{key:"componentDidUpdate",value:function e(){this.align()}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.align,true)}},{key:"render",value:function e(){var n=this;var r=this.props;return React__default.createElement(Portal,r.portalProps,React__default.createElement(Dialog,_extends({},omitKeysFromSourceObject(r,t.internalKeys),{ref:function e(t){return n.dialog=t},before:React__default.cloneElement(r.caretComponent,{ref:function e(t){return n.$caret=t},className:index$12("b-popover-caret",r.caretComponent.props.className)}),wrapperProps:_extends({},r.wrapperProps,{className:index$12("b-popover",r.wrapperProps.className)})})))}}],[{key:"getAlignmentClassFragment",value:function e(t){switch(t){case START:return"start";case MIDDLE:return"middle";case END:return"end"}}}]);return t}(React__default.PureComponent);Popover.preset=combinations.reduce(function(e,t){return e[t.name]=t,e},{});Popover.propTypes=_extends({},Dialog.propTypes,{anchor:React.PropTypes.oneOfType([React.PropTypes.instanceOf(HTMLElement),React.PropTypes.element]).isRequired,autoReposition:React.PropTypes.bool,caretAnchor:React.PropTypes.oneOfType([React.PropTypes.instanceOf(HTMLElement),React.PropTypes.element]),caretComponent:React.PropTypes.element,portalProps:React.PropTypes.shape(Portal.PropTypes),preset:React.PropTypes.oneOf([Popover.preset.NNW,Popover.preset.N,Popover.preset.NNE,Popover.preset.ENE,Popover.preset.E,Popover.preset.ESE,Popover.preset.SSE,Popover.preset.S,Popover.preset.SSW,Popover.preset.WSW,Popover.preset.W,Popover.preset.WNW]),wrapperProps:React.PropTypes.object});Popover.defaultProps=_extends({},Dialog.defaultProps,{anchor:undefined,autoReposition:true,captureFocus:false,caretAnchor:undefined,caretComponent:DEFAULT_CARET_COMPONENT,closeOnEscKey:true,closeOnOutsideClick:true,closeOnOutsideScroll:true,portalProps:{},preset:Popover.preset.S,wrapperProps:{}});Popover.internalKeys=without(Object.keys(Popover.defaultProps),Dialog.internalKeys);var index$13=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var ProgressiveDisclosure=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.state={expanded:r.props.expanded},r.dispatchCallback=function(){r.props[r.state.expanded?"onExpand":"onHide"]()},r.handleClick=function(e){r.setState({expanded:!r.state.expanded},r.dispatchCallback);if(isFunction(r.props.toggleProps.onClick)){r.props.toggleProps.onClick(e)}},r.handleKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault();r.setState({expanded:!r.state.expanded},r.dispatchCallback)}if(isFunction(r.props.toggleProps.onKeyDown)){r.props.toggleProps.onKeyDown(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillReceiveProps",value:function e(t){if(t.expanded!==this.props.expanded){this.setState({expanded:t.expanded},this.dispatchCallback)}}},{key:"renderContent",value:function e(){if(this.state.expanded){return React__default.createElement("div",{ref:"content",className:"b-disclosure-content"},isFunction(this.props.children)?this.props.children():this.props.children)}}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$13("b-disclosure",this.props.className,{"b-disclosure-expanded":this.state.expanded})}),React__default.createElement("div",_extends({},this.props.toggleProps,{ref:"toggle",className:index$13("b-disclosure-toggle",this.props.toggleProps.className),onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:"0"}),this.state.expanded?this.props.teaserExpanded||this.props.teaser:this.props.teaser),this.renderContent())}}]);return t}(React__default.PureComponent);ProgressiveDisclosure.propTypes={children:React.PropTypes.any,component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),expanded:React.PropTypes.bool,onExpand:React.PropTypes.func,onHide:React.PropTypes.func,teaser:React.PropTypes.node,teaserExpanded:React.PropTypes.node,toggleProps:React.PropTypes.object};ProgressiveDisclosure.defaultProps={children:null,component:"div",expanded:false,onExpand:noop,onHide:noop,teaser:null,teaserExpanded:null,toggleProps:{}};ProgressiveDisclosure.internalKeys=Object.keys(ProgressiveDisclosure.defaultProps);var index$14=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Progress=function(e){inherits(t,e);function t(){classCallCheck(this,t);return possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}createClass(t,[{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("div",_extends({},this.props.labelProps,{ref:"label",className:index$14("b-progress-label",this.props.labelProps.className)}),this.props.label)}}},{key:"renderCancel",value:function e(){
if(this.props.onCancel){return React__default.createElement(Button,_extends({},this.props.cancelProps,{ref:"cancel",className:index$14("b-progress-cancel",this.props.cancelProps.className),onPressed:this.props.onCancel}))}}},{key:"renderProgress",value:function e(){return React__default.createElement("div",_extends({},this.props.progressProps,{ref:"progress",className:index$14("b-progress",this.props.progressProps.className,{"b-progress-indeterminate":typeof this.props.progress==="undefined"}),role:"presentation",style:_extends({},this.props.progressProps.style,defineProperty({},this.props.tweenProperty,this.props.progress))}))}},{key:"render",value:function e(){return React__default.createElement(this.props.component,_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$14("b-progress-wrapper",this.props.className)}),this.renderProgress(),this.renderLabel(),this.renderCancel())}}]);return t}(React__default.PureComponent);Progress.propTypes={cancelProps:React.PropTypes.object,component:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.func]),label:React.PropTypes.node,labelProps:React.PropTypes.object,onCancel:React.PropTypes.func,progress:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),progressProps:React.PropTypes.object,tweenProperty:React.PropTypes.string};Progress.defaultProps={cancelProps:{},component:"div",label:null,labelProps:{},onCancel:null,progress:undefined,progressProps:{},tweenProperty:"width"};Progress.internalKeys=Object.keys(Progress.defaultProps);var index$15=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var Radio=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.uuid=uuid(),r.handleChange=function(e){if(e.target.checked){r.props.onSelected(e.target.value)}if(isFunction(r.props.inputProps.onChange)){r.props.inputProps.onChange(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"renderInput",value:function e(){return React__default.createElement("input",_extends({},this.props.inputProps,{ref:"input",type:"radio",id:this.props.id||this.props.inputProps.id||this.uuid,className:index$15("b-radio",this.props.inputProps.className,{"b-radio-selected":this.props.selected}),name:this.props.name,value:this.props.value,checked:this.props.selected,"aria-checked":String(this.props.selected),onChange:this.handleChange}))}},{key:"renderLabel",value:function e(){if(this.props.label){return React__default.createElement("label",_extends({},this.props.labelProps,{ref:"label",className:index$15("b-radio-label",this.props.labelProps.className),htmlFor:this.props.id||this.props.inputProps.id||this.uuid}),this.props.label)}}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$15("b-radio-wrapper",this.props.className)}),this.renderInput(),this.renderLabel())}}]);return t}(React__default.PureComponent);Radio.propTypes={inputProps:React.PropTypes.object,label:React.PropTypes.node,labelProps:React.PropTypes.object,name:React.PropTypes.string.isRequired,onSelected:React.PropTypes.func,selected:React.PropTypes.bool,value:React.PropTypes.string.isRequired};Radio.defaultProps={inputProps:{},label:null,labelProps:{},name:"",onSelected:noop,selected:false,value:""};Radio.internalKeys=Object.keys(Radio.defaultProps);var index$16=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var index$17=createCommonjsModule(function(e){(function(){"use strict";var t={}.hasOwnProperty;function n(){var e=[];for(var r=0;r<arguments.length;r++){var o=arguments[r];if(!o)continue;var s=typeof o==="undefined"?"undefined":_typeof(o);if(s==="string"||s==="number"){e.push(o)}else if(Array.isArray(o)){e.push(n.apply(null,o))}else if(s==="object"){for(var a in o){if(t.call(o,a)&&o[a]){e.push(a)}}}}return e.join(" ")}if("object"!=="undefined"&&e.exports){e.exports=n}else if(typeof undefined==="function"&&_typeof(undefined.amd)==="object"&&undefined.amd){undefined("classnames",[],function(){return n})}else{window.classNames=n}})()});var matchOperatorsRe=/[|\\{}()[\]^$+*?.]/g;var index$18=function e(t){if(typeof t!=="string"){throw new TypeError("Expected a string")}return t.replace(matchOperatorsRe,"\\$&")};var Typeahead=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),_initialiseProps.call(r),n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentWillMount",value:function e(){if(this.props.inputProps.value||this.props.inputProps.defaultValue){this.computeMatches()}}},{key:"componentDidMount",value:function e(){this.mounted=true;if(this.state.selectedEntityIndex>=0){this.props.onEntityHighlighted(this.state.selectedEntityIndex)}}},{key:"componentWillReceiveProps",value:function e(t){if(t.entities!==this.props.entities){this.computeMatches(t.entities)}if(t.inputProps.value!==this.props.inputProps.value){this.updateInputState(t.inputProps.value);this.computeMatches()}}},{key:"componentDidUpdate",value:function e(t,n){if(this.state.entityMatchIndexes.length&&!n.entityMatchIndexes.length){this.refs.matches.scrollTop=0}if(this.state.selectedEntityIndex>=0&&this.props.entities[this.state.selectedEntityIndex]!==t.entities[n.selectedEntityIndex]){this.props.onEntityHighlighted(this.state.selectedEntityIndex)}}},{key:"componentWillUnmount",value:function e(){this.mounted=false}},{key:"handleMatchClick",value:function e(t){this.setState({selectedEntityIndex:t},this.setValueWithSelectedEntity)}},{key:"selectMatch",value:function e(t){var n=this.state.entityMatchIndexes;var r=n.length;var o=n.indexOf(this.state.selectedEntityIndex)+t;if(r){if(o<0){o=r-1}else if(o>=r){o=0}var s=n[o];var a=this.refs.matches;var i=a.scrollTop+a.clientHeight;var p=this.refs["match_$"+s];var c=p.offsetTop;var l=c+p.clientHeight;if(l>=i){a.scrollTop+=l-i}else if(c<=a.scrollTop){a.scrollTop=c}this.setState({selectedEntityIndex:s})}}},{key:"cursorAtEndOfInput",value:function e(){var t=this.getInputNode();return t.selectionStart===t.selectionEnd&&t.selectionEnd===this.getValue().length}},{key:"markFuzzyMatchSubstring",value:function e(t,n){var r=n.text;var o=r.split(new RegExp("("+index$18(t)+")","ig"));var s=t.toLowerCase();var a=o.length;var i=-1;while(++i<a){if(o[i].toLowerCase()===s){o[i]=React__default.createElement("mark",{key:i,className:"b-typeahead-match-highlight"},o[i])}}return o}},{key:"markStartsWithMatchSubstring",value:function e(t,n){var r=n.text;var o=t.toLowerCase();var s=r.toLowerCase().indexOf(o);var a=s+o.length;return[React__default.createElement("span",{key:"0"},r.slice(0,s)),React__default.createElement("mark",{key:"1",className:"b-typeahead-match-highlight"},r.slice(s,a)),React__default.createElement("span",{key:"2"},r.slice(a))]}},{key:"getMarkingFunction",value:function e(){if(isString(this.props.algorithm)){if(this.props.algorithm===t.mode.STARTS_WITH){return this.markStartsWithMatchSubstring}return this.markFuzzyMatchSubstring}else if(isFunction(this.props.algorithm.marker)){return this.props.algorithm.marker}if(this.warnedMarker===undefined){this.warnedMarker=true;console.warn("Typeahead: no `props.algorithm.marker` was provided; falling back to the default marking algorithm (FUZZY).")}return this.markFuzzyMatchSubstring}},{key:"getFuzzyMatchIndexes",value:function e(t,n){var r=t.toLowerCase();return n.reduce(function e(t,n,o){return n.text.toLowerCase().indexOf(r)!==-1?t.push(o)&&t:t},[])}},{key:"getStartsWithMatchIndexes",value:function e(t,n){var r=t.toLowerCase();return n.reduce(function e(t,n,o){if(n.text.toLowerCase().indexOf(r)===0){t.push(o)}return t},[])}},{key:"getMatchingFunction",value:function e(){if(isString(this.props.algorithm)){if(this.props.algorithm===t.mode.STARTS_WITH){return this.getStartsWithMatchIndexes}return this.getFuzzyMatchIndexes}else if(isFunction(this.props.algorithm.matcher)){return this.props.algorithm.matcher}if(this.warnedMatcher===undefined){this.warnedMatcher=true;console.warn("Typeahead: no `props.algorithm.matcher` was provided; falling back to the default matching algorithm (FUZZY).")}return this.getFuzzyMatchIndexes}},{key:"computeMatches",value:function e(t){var n=this;this.setState(function(e,r){var o=t||r.entities;var s=e.input;var a=s===""?[]:n.getMatchIndexes(s,o);return{selectedEntityIndex:a.length?a[0]:-1,entityMatchIndexes:a}})}},{key:"renderNotification",value:function e(){return React__default.createElement("div",{ref:"aria",id:this.state.id,className:this.props.offscreenClass,"aria-live":"polite"},this.getSelectedEntityText())}},{key:"renderHint",value:function e(){if(this.props.hint){var t=this.state.input;var n=this.getSelectedEntityText();var r="";if(n&&n.toLowerCase().indexOf(t.toLowerCase())===0){r=n.replace(new RegExp(t,"i"),t)}return React__default.createElement("div",_extends({},this.props.hintProps,{ref:"hint",className:index$17("b-input","b-input-placeholder","b-typeahead-hint",this.props.hintProps.className),tabIndex:"-1"}),r)}}},{key:"renderMatches",value:function e(){var t=this;if(this.state.entityMatchIndexes.length){var n=this.props.matchWrapperProps;return React__default.createElement("div",_extends({},n,{ref:"matches",className:index$17("b-typeahead-match-wrapper",n.className)}),this.state.entityMatchIndexes.map(function(e){var n=t.props.entities[e];var r=n.className,o=n.text,s=objectWithoutProperties(n,["className","text"]);return React__default.createElement("div",_extends({},s,{ref:"match_$"+e,className:index$17("b-typeahead-match",r,{"b-typeahead-match-selected":t.state.selectedEntityIndex===e}),key:o,onClick:t.handleMatchClick.bind(t,e)}),t.markMatchSubstring(t.state.input,n))}))}}},{key:"render",value:function e(){var n=this.props,r=this.state;return React__default.createElement("div",_extends({},omitKeysFromSourceObject(n,t.internalKeys),{ref:"wrapper",className:index$17("b-typeahead-wrapper",n.className),onKeyDown:this.handleKeyDown}),this.renderNotification(),this.renderHint(),React__default.createElement(Input,_extends({},getIntersection(n,Input.defaultProps),{ref:"input","aria-controls":r.id,inputProps:_extends({},n.inputProps,{className:index$17("b-typeahead",n.inputProps.className),onChange:this.handleChange})})),this.renderMatches())}}]);return t}(React__default.PureComponent);Typeahead.mode={STARTS_WITH:uuid(),FUZZY:uuid()};Typeahead.propTypes=_extends({},Input.propTypes,{algorithm:React.PropTypes.oneOfType([React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY]),React.PropTypes.shape({marker:React.PropTypes.oneOfType([React.PropTypes.func,React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY])]),matcher:React.PropTypes.oneOfType([React.PropTypes.func,React.PropTypes.oneOf([Typeahead.mode.STARTS_WITH,Typeahead.mode.FUZZY])])})]),clearOnSelection:React.PropTypes.bool,entities:React.PropTypes.arrayOf(React.PropTypes.shape({text:React.PropTypes.string.isRequired})),hint:React.PropTypes.bool,hintProps:React.PropTypes.object,matchWrapperProps:React.PropTypes.object,offscreenClass:React.PropTypes.string,onComplete:React.PropTypes.func,onEntityHighlighted:React.PropTypes.func,onEntitySelected:React.PropTypes.func});Typeahead.defaultProps=_extends({},Input.defaultProps,{algorithm:Typeahead.mode.FUZZY,clearOnSelection:false,entities:[],hint:null,hintProps:{},matchWrapperProps:{},offscreenClass:"b-offscreen",onComplete:noop,onEntityHighlighted:noop,onEntitySelected:noop});Typeahead.internalKeys=Object.keys(Typeahead.defaultProps);var _initialiseProps=function e(){var t=this;this.state={entityMatchIndexes:[],id:uuid(),isControlled:isString(this.props.inputProps.value),input:this.props.inputProps.value||this.props.inputProps.defaultValue||"",selectedEntityIndex:-1};this.mounted=false;this.updateInputState=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return t.setState({input:e})};this.getSelectedEntityText=function(){var e=t.props.entities[t.state.selectedEntityIndex];return e?e.text:""};this.resetMatches=function(){if(t.mounted){t.setState({selectedEntityIndex:-1,entityMatchIndexes:[]})}};this.getInputNode=function(){return t.refs.input.refs.field};this.select=function(){var e=t.getInputNode();e.selectionStart=0;e.selectionEnd=t.getValue().length};this.focus=function(){return t.getInputNode().focus()};this.getValue=function(){return t.refs.input.getValue()};this.setValue=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";t.refs.input.setValue(e);t.updateInputState(e);t.resetMatches();t.focus()};this.setValueWithSelectedEntity=function(){t.props.onEntitySelected(t.state.selectedEntityIndex);if(t.props.clearOnSelection){t.setValue("")}else{t.setValue(t.getSelectedEntityText())}window.setTimeout(t.resetMatches,0)};this.markMatchSubstring=function(){return t.getMarkingFunction().apply(undefined,arguments)};this.getMatchIndexes=function(){return t.getMatchingFunction().apply(undefined,arguments)};this.handleChange=function(e){if(t.state.isControlled===false){t.updateInputState(e.target.value);t.computeMatches()}if(isFunction(t.props.inputProps.onChange)){t.props.inputProps.onChange(e)}};this.handleKeyDown=function(e){switch(e.key){case"ArrowLeft":if(e.target.selectionStart>1){e.stopPropagation()}break;case"Tab":case"ArrowRight":if(t.state.selectedEntityIndex!==-1&&t.cursorAtEndOfInput()&&t.getInputNode()===e.target&&!e.shiftKey){e.nativeEvent.preventDefault();t.setValueWithSelectedEntity()}break;case"ArrowUp":e.nativeEvent.preventDefault();t.selectMatch(-1);t.focus();break;case"ArrowDown":e.nativeEvent.preventDefault();t.selectMatch(1);t.focus();break;case"Escape":if(t.state.selectedEntityIndex!==-1&&t.getInputNode()===e.target){t.resetMatches()}break;case"Enter":if(t.state.selectedEntityIndex!==-1&&t.getInputNode()===e.target){e.nativeEvent.preventDefault();t.setValueWithSelectedEntity()}else{t.props.onComplete(t.state.input,e)}break}if(isFunction(t.props.onKeyDown)){t.props.onKeyDown(e)}}};var first=function e(t){return t[0]};var last=function e(t){return t[t.length-1]};var TokenizedInput=function(e){inherits(t,e);function t(){var e;var n,r,o;classCallCheck(this,t);for(var s=arguments.length,a=Array(s),i=0;i<s;i++){a[i]=arguments[i]}return o=(n=(r=possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r),r.focus=function(){return r.refs.typeahead.focus()},r.getInputNode=function(){return r.refs.typeahead.getInputNode()},r.getSelectedEntityText=function(){return r.refs.typeahead.getSelectedEntityText()},r.getValue=function(){return r.refs.typeahead.getValue()},r.select=function(){return r.refs.typeahead.select()},r.setValue=function(e){return r.refs.typeahead.setValue(e)},r.add=function(e){if(r.props.tokens.indexOf(e)===-1){r.props.handleAddToken(e)}},r.handleInputClick=function(e){r.clearSelection();if(isFunction(r.props.inputProps.onClick)){r.props.inputProps.onClick(e)}},r.handleInputFocus=function(e){r.clearSelection();if(isFunction(r.props.inputProps.onFocus)){r.props.inputProps.onFocus(e)}},r.handleKeyDown=function(e){switch(e.which){case 37:r.selectPreviousToken(e.shiftKey);break;case 39:r.selectNextToken(e.shiftKey);break;case 8:if(r.props.tokensSelected.length){r.remove(r.props.tokensSelected);r.focus()}break;case 65:if(e.metaKey){e.preventDefault();r.focus();r.select();r._suppressNextTokenSelection=true;r.props.handleNewSelection(r.props.tokens)}}if(isFunction(r.props.onKeyDown)){r.props.onKeyDown(e)}},n),possibleConstructorReturn(r,o)}createClass(t,[{key:"componentDidUpdate",value:function e(t){var n=t.tokensSelected;var r=this.props.tokensSelected;if(this.props.tokens.length>t.tokens.length){this.setValue("")}if(this._suppressNextTokenSelection){this._suppressNextTokenSelection=false;return}if(n!==r&&r.length!==0){if(r.length===1||r[0]!==n[0]){return this.refs["token_"+r[0]].focus()}else if(last(r)!==last(n)){return this.refs["token_"+last(r)].focus()}this.refs["token_"+r[0]].focus()}}},{key:"remove",value:function e(t){var n=this;var r=(Array.isArray(t)?t:[t]).filter(function(e){return n.props.tokens.indexOf(e)!==-1});if(r.length){this.props.handleRemoveTokens(r)}}},{key:"selectToken",value:function e(t){this.props.handleNewSelection([t])}},{key:"selectTokens",value:function e(t){this.props.handleNewSelection(t)}},{key:"selectPreviousToken",value:function e(t){var n=this.props.tokensSelected;var r=this.props.tokens;if(n.length===1&&first(n)===first(r)){return}if(n.length===0){this.selectToken(last(r))}else{var o=r[r.indexOf(first(n))-1];this.selectTokens(t?[o].concat(n):[o])}}},{key:"selectNextToken",value:function e(t){var n=this.props.tokensSelected;var r=this.props.tokens;if(n.length===0){return}if(last(n)===last(r)){this.clearSelection();this.focus()}else{var o=r[r.indexOf(last(n))+1];this.selectTokens(t?n.concat(o):[o])}}},{key:"clearSelection",value:function e(){this.props.handleNewSelection([])}},{key:"handleTokenCloseClick",value:function e(t,n){n.stopPropagation();this.remove(t);this.focus();if(this.props.tokenCloseComponent.props.onClick){this.props.tokenCloseComponent.props.onClick(n)}}},{key:"renderTokenClose",value:function e(t){if(this.props.tokenCloseVisible){return React__default.cloneElement(this.props.tokenCloseComponent,{className:index$16("b-tokenfield-token-close",this.props.tokenCloseComponent.props.className),onClick:this.handleTokenCloseClick.bind(this,t)})}}},{key:"handleTokenKeyDown",value:function e(t,n){switch(n.which){case 13:case 32:this.selectToken(t);n.preventDefault();break;case 8:this.remove(t);this.focus();n.preventDefault();break}}},{key:"renderTokens",value:function e(){var t=this;return React__default.createElement("div",{className:"b-tokenfield-tokens"},this.props.tokens.map(function(e){return React__default.createElement("div",{ref:"token_"+e,key:e,className:index$16("b-tokenfield-token",{"b-tokenfield-token-selected":t.props.tokensSelected.indexOf(e)!==-1}),onClick:t.selectToken.bind(t,e),onKeyDown:t.handleTokenKeyDown.bind(t,e),tabIndex:"0"},t.props.entities[e].text,t.renderTokenClose(e))}))}},{key:"render",value:function e(){return React__default.createElement("div",_extends({},omitKeysFromSourceObject(this.props,t.internalKeys),{ref:"wrapper",className:index$16("b-tokenfield-wrapper",this.props.className),onKeyDown:this.handleKeyDown}),this.renderTokens(),React__default.createElement(Typeahead,_extends({},getIntersection(this.props,Typeahead.defaultProps),{ref:"typeahead",className:"b-tokenfield",clearOnSelection:true,inputProps:_extends({},this.props.inputProps,{onClick:this.handleInputClick,onFocus:this.handleInputFocus}),onEntitySelected:this.add})))}}]);return t}(React__default.PureComponent);TokenizedInput.propTypes=_extends({},Typeahead.propTypes,{handleAddToken:React.PropTypes.func,handleRemoveTokens:React.PropTypes.func,handleNewSelection:React.PropTypes.func,tokenCloseComponent:React.PropTypes.element,tokenCloseVisible:React.PropTypes.bool,tokens:React.PropTypes.arrayOf(React.PropTypes.number),tokensSelected:React.PropTypes.arrayOf(React.PropTypes.number)});TokenizedInput.defaultProps=_extends({},Typeahead.defaultProps,{handleAddToken:noop,handleRemoveTokens:noop,handleNewSelection:noop,tokenCloseComponent:React__default.createElement("div",null,"X"),tokenCloseVisible:true,tokens:[],tokensSelected:[]});TokenizedInput.internalKeys=Object.keys(TokenizedInput.defaultProps);exports.ArrowKeyNavigation=ArrowKeyNavigation;exports.Async=Async;exports.Button=Button;exports.Checkbox=Checkbox;exports.CheckboxGroup=CheckboxGroup;exports.Dialog=Dialog;exports.FittedText=FittedText;exports.Image=Image;exports.Input=Input;exports.Modal=Modal;exports.Pagination=Pagination;exports.Popover=Popover;exports.Portal=Portal;exports.ProgressiveDisclosure=ProgressiveDisclosure;exports.Progress=Progress;exports.Radio=Radio;exports.SegmentedControl=SegmentedControl;exports.TokenizedInput=TokenizedInput;exports.Typeahead=Typeahead;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm91bmRsZXNzLmpzIiwic291cmNlcyI6WyIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWFycm93LWtleS1uYXZpZ2F0aW9uL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWFzeW5jL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWFzeW5jL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWJ1dHRvbi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1idXR0b24vaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtY2hlY2tib3gvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtdXVpZC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1jaGVja2JveC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1jaGVja2JveC1ncm91cC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1jaGVja2JveC1ncm91cC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1kaWFsb2cvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtcG9ydGFsL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLWRpYWxvZy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1maXR0ZWQtdGV4dC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1maXR0ZWQtdGV4dC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1pbWFnZS9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1pbWFnZS9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1pbnB1dC9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy11dGlscy1pcy1zdHJpbmcvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtaW5wdXQvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtbW9kYWwvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdXRpbHMtb2JqZWN0LWludGVyc2VjdGlvbi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1tb2RhbC9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wYWdpbmF0aW9uL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXBhZ2luYXRpb24vbm9kZV9tb2R1bGVzL2xvZGFzaC5pc2ludGVnZXIvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3Mtc2VnbWVudGVkLWNvbnRyb2wvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3Mtc2VnbWVudGVkLWNvbnRyb2wvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtcGFnaW5hdGlvbi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wb3BvdmVyL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXV0aWxzLXRyYW5zZm9ybS1wcm9wZXJ0eS9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wb3BvdmVyL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXByb2dyZXNzaXZlLWRpc2Nsb3N1cmUvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtcHJvZ3Jlc3NpdmUtZGlzY2xvc3VyZS9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wcm9ncmVzcy9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1wcm9ncmVzcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1yYWRpby9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy1yYWRpby9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL2JvdW5kbGVzcy10b2tlbml6ZWQtaW5wdXQvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdHlwZWFoZWFkL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXR5cGVhaGVhZC9ub2RlX21vZHVsZXMvZXNjYXBlLXN0cmluZy1yZWdleHAvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9ib3VuZGxlc3MtdHlwZWFoZWFkL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvYm91bmRsZXNzLXRva2VuaXplZC1pbnB1dC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAodGVzdCkgPT4gdHlwZW9mIHRlc3QgPT09ICdmdW5jdGlvbic7XG4iLCIvKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBvYmplY3Qgd2l0aG91dCB0aGUgZ2l2ZW4ga2V5cy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb21pdEtleXNGcm9tU291cmNlT2JqZWN0KHNvdXJjZSwgb21pdHRlZEtleXMgPSBbXSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiByZWxvY2F0ZUFjY2VwdGVkS2V5cyhoYXNoLCBrZXkpIHtcbiAgICAgICAgaWYgKG9taXR0ZWRLZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGhhc2hba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhhc2g7XG5cbiAgICB9LCB7fSk7XG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7ZmluZERPTU5vZGV9IGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuLyoqXG4jIEFycm93S2V5TmF2aWdhdGlvblxuX19BIGhpZ2hlci1vcmRlciBjb21wb25lbnQgZm9yIGFycm93IGtleSBuYXZpZ2F0aW9uIG9uIGEgZ3JvdXBpbmcgb2YgY2hpbGRyZW4uX19cblxuQXJyb3dLZXlOYXZpZ2F0aW9uIGlzIGRlc2lnbmVkIG5vdCB0byBjYXJlIGFib3V0IHRoZSBjb21wb25lbnQgdHlwZXMgaXQgaXMgd3JhcHBpbmcuIER1ZSB0byB0aGlzLCB5b3UgY2FuIHBhc3NcbndoYXRldmVyIEhUTUwgdGFnIHlvdSBsaWtlIGludG8gYHByb3BzLmNvbXBvbmVudGAgb3IgZXZlbiBhIFJlYWN0IGNvbXBvbmVudCB5b3UndmUgbWFkZSBlbHNld2hlcmUuIEFkZGl0aW9uYWxcbnByb3BzIHBhc3NlZCB0byBgPEFycm93S2V5TmF2aWdhdGlvbiAuLi4+YCB3aWxsIGJlIGZvcndhcmRlZCBvbiB0byB0aGUgY29tcG9uZW50IG9yIEhUTUwgdGFnIG5hbWUgeW91J3ZlIHN1cHBsaWVkLlxuXG5UaGUgY2hpbGRyZW4sIHNpbWlsYXJseSwgY2FuIGJlIGFueSB0eXBlIG9mIGNvbXBvbmVudC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJyb3dLZXlOYXZpZ2F0aW9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIG1vZGUgPSB7XG4gICAgICAgIEhPUklaT05UQUw6ICdIT1JJWk9OVEFMJyxcbiAgICAgICAgVkVSVElDQUw6ICdWRVJUSUNBTCcsXG4gICAgICAgIEJPVEg6ICdCT1RIJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICAgIEFueSB2YWxpZCBIVE1MIHRhZyBuYW1lIG9yIGEgUmVhY3QgY29tcG9uZW50IGZhY3RvcnksIGFueXRoaW5nIHRoYXQgY2FuIGJlIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gYFJlYWN0LmNyZWF0ZUVsZW1lbnRgXG4gICAgICAgICovXG4gICAgICAgIGNvbXBvbmVudDogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgICAgQWxsb3dzIGZvciBhIHBhcnRpY3VsYXIgY2hpbGQgdG8gYmUgaW5pdGlhbGx5IHJlYWNoYWJsZSB2aWEgdGFiYmluZ1xuICAgICAgICAqL1xuICAgICAgICBkZWZhdWx0QWN0aXZlQ2hpbGRJbmRleDogUHJvcFR5cGVzLm51bWJlcixcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udHJvbHMgd2hpY2ggYXJyb3cga2V5IGV2ZW50cyBhcmUgY2FwdHVyZWQgdG8gbW92ZSBhY3RpdmUgZm9jdXMgd2l0aGluIHRoZSBsaXN0OlxuICAgICAgICAgKlxuICAgICAgICAgKiBNb2RlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBLZXlzXG4gICAgICAgICAqIC0tLS0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IC0tLS1cbiAgICAgICAgICogYEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkJPVEhgICAgICAgIHwg4qyF77iPIOKeoe+4jyDirIbvuI8g4qyH77iPXG4gICAgICAgICAqIGBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5IT1JJWk9OVEFMYCB8IOKshe+4jyDinqHvuI9cbiAgICAgICAgICogYEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLlZFUlRJQ0FMYCAgIHwg4qyG77iPIOKsh++4j1xuICAgICAgICAgKlxuICAgICAgICAgKiBfTm90ZTogZm9jdXMgbG9vcHMgd2hlbiBhcnJvd2luZyBwYXN0IG9uZSBvZiB0aGUgYm91bmRhcmllczsgdGFiYmluZyBtb3ZlcyB0aGUgdXNlciBhd2F5IGZyb20gdGhlIGxpc3QuX1xuICAgICAgICAqL1xuICAgICAgICBtb2RlOiBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgICAgICAgQXJyb3dLZXlOYXZpZ2F0aW9uLm1vZGUuQk9USCxcbiAgICAgICAgICAgIEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkhPUklaT05UQUwsXG4gICAgICAgICAgICBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5WRVJUSUNBTCxcbiAgICAgICAgXSksXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY29tcG9uZW50OiAnZGl2JyxcbiAgICAgICAgZGVmYXVsdEFjdGl2ZUNoaWxkSW5kZXg6IDAsXG4gICAgICAgIG1vZGU6IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkJPVEgsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEFycm93S2V5TmF2aWdhdGlvbi5kZWZhdWx0UHJvcHMpXG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgYWN0aXZlQ2hpbGRJbmRleDogdGhpcy5wcm9wcy5kZWZhdWx0QWN0aXZlQ2hpbGRJbmRleCxcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuYWN0aXZlQ2hpbGRJbmRleCAhPT0gcHJldlN0YXRlLmFjdGl2ZUNoaWxkSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXModGhpcy5zdGF0ZS5hY3RpdmVDaGlsZEluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmFjdGl2ZUNoaWxkSW5kZXggIT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG51bUNoaWxkcmVuID0gICBuZXh0UHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBSZWFjdC5DaGlsZHJlbi5jb3VudChuZXh0UHJvcHMuY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcblxuICAgICAgICAgICAgaWYgKG51bUNoaWxkcmVuID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWN0aXZlQ2hpbGRJbmRleDogMH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmFjdGl2ZUNoaWxkSW5kZXggPj0gbnVtQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthY3RpdmVDaGlsZEluZGV4OiBudW1DaGlsZHJlbiAtIDF9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEZvY3VzKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IChcbiAgICAgICAgICAgIHRoaXMucmVmcy53cmFwcGVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcbiAgICAgICAgICA/IHRoaXMucmVmcy53cmFwcGVyXG4gICAgICAgICAgOiBmaW5kRE9NTm9kZSh0aGlzLnJlZnMud3JhcHBlcilcbiAgICAgICAgKS5jaGlsZHJlbltpbmRleF07XG5cbiAgICAgICAgaWYgKGNoaWxkTm9kZSAmJiBjaGlsZE5vZGUuaGFzQXR0cmlidXRlKCdkYXRhLXNraXAnKSkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlRm9jdXMoXG4gICAgICAgICAgICAgICAgY2hpbGROb2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpICYgTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkcgPyAtMSA6IDFcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hpbGROb2RlICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGNoaWxkTm9kZSkge1xuICAgICAgICAgICAgY2hpbGROb2RlLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtb3ZlRm9jdXMoZGVsdGEpIHtcbiAgICAgICAgY29uc3QgbnVtQ2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBSZWFjdC5DaGlsZHJlbi5jb3VudCh0aGlzLnByb3BzLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcblxuICAgICAgICBsZXQgbmV4dEluZGV4ID0gdGhpcy5zdGF0ZS5hY3RpdmVDaGlsZEluZGV4ICsgZGVsdGE7XG5cbiAgICAgICAgaWYgKG5leHRJbmRleCA+PSBudW1DaGlsZHJlbikge1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gMDsgLy8gbG9vcFxuICAgICAgICB9IGVsc2UgaWYgKG5leHRJbmRleCA8IDApIHtcbiAgICAgICAgICAgIG5leHRJbmRleCA9IG51bUNoaWxkcmVuIC0gMTsgLy8gcmV2ZXJzZSBsb29wXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHthY3RpdmVDaGlsZEluZGV4OiBuZXh0SW5kZXh9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kZSA9PT0gQXJyb3dLZXlOYXZpZ2F0aW9uLm1vZGUuVkVSVElDQUxcbiAgICAgICAgICAgICAgICB8fCB0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkJPVEgpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUZvY3VzKC0xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkhPUklaT05UQUxcbiAgICAgICAgICAgICAgICB8fCB0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLkJPVEgpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUZvY3VzKC0xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT09IEFycm93S2V5TmF2aWdhdGlvbi5tb2RlLlZFUlRJQ0FMXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5CT1RIKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1cygxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5IT1JJWk9OVEFMXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5tb2RlID09PSBBcnJvd0tleU5hdmlnYXRpb24ubW9kZS5CT1RIKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1cygxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUZvY3VzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWZvY3VzLWluZGV4JykpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1mb2N1cy1pbmRleCcpLCAxMCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbilbaW5kZXhdO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthY3RpdmVDaGlsZEluZGV4OiBpbmRleH0pO1xuXG4gICAgICAgICAgICBpZiAoY2hpbGQucHJvcHMub25Gb2N1cykge1xuICAgICAgICAgICAgICAgIGNoaWxkLnByb3BzLm9uRm9jdXMoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2hpbGRyZW4oKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi5tYXAodGhpcy5wcm9wcy5jaGlsZHJlbiwgKGNoaWxkLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICAgICAgICAgICdkYXRhLWZvY3VzLWluZGV4JzogaW5kZXgsXG4gICAgICAgICAgICAgICAgJ2RhdGEtc2tpcCc6IHBhcnNlSW50KGNoaWxkLnByb3BzLnRhYkluZGV4LCAxMCkgPT09IC0xIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBrZXk6IGNoaWxkLmtleSB8fCBpbmRleCxcbiAgICAgICAgICAgICAgICB0YWJJbmRleDogdGhpcy5zdGF0ZS5hY3RpdmVDaGlsZEluZGV4ID09PSBpbmRleCA/IDAgOiAtMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBBcnJvd0tleU5hdmlnYXRpb24uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5oYW5kbGVGb2N1c31cbiAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn0+XG4gICAgICAgICAgICAgICAge3RoaXMuY2hpbGRyZW4oKX1cbiAgICAgICAgICAgIDwvdGhpcy5wcm9wcy5jb21wb25lbnQ+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cblxuLyoqXG4gKiAjIEFzeW5jXG4gKiBfX0EgaGlnaGVyLW9yZGVyIGNvbXBvbmVudCBmb3IgcmVuZGVyaW5nIGRhdGEgdGhhdCBpc24ndCByZWFkeSB5ZXQuX19cbiAqXG4gKiBUaGVyZSBhcmUgcGxlbnR5IG9mIHNpdHVhdGlvbnMgd2hlcmUgeW91IG5lZWQgdG8gZmV0Y2ggY29udGVudCB0byBiZSBkaXNwbGF5ZWQsIGJ1dCB3YW50XG4gKiB0byBzaG93IHNvbWUgc29ydCBvZiBsb2FkaW5nIGdyYXBoaWMgaW4gdGhlIGludGVyaW0uIFRoaXMgY29tcG9uZW50IGhlbHBzIHRvIHNpbXBsaWZ5XG4gKiB0aGF0IHBhdHRlcm4gYnkgaGFuZGxpbmcgY29tbW9uIHR5cGVzIG9mIHByb21pc2VzIGFuZCBwcm92aWRpbmcgYSBzaW1wbGUgbWVjaGFuaXNtXG4gKiBmb3IgbWF0ZXJpYWxpemluZyB0aGUgcmVzb2x2ZWQgZGF0YSBpbnRvIEpTWC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXN5bmMgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKiogYSBjYWxsYmFjayBmb3Igd2hlbiByZWFsIGNvbnRlbnQgaGFzIGJlZW4gcmVuZGVyZWQ7IGVpdGhlciBub3JtYWwgcGFzc2VkIGRhdGEgb3Igd2hlbiBhIHBhc3NlZCBwcm9taXNlIHJlc29sdmVzICovXG4gICAgICAgIGNvbnRlbnRSZW5kZXJlZEZ1bmM6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKiBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIHJlc29sdmVkIHBheWxvYWQgb2YgYSBwcm9taXNlIHByb3ZpZGVkIGJ5IGBwcm9wcy5kYXRhYCBhbmQgcmV0dXJucyByZW5kZXJhYmxlIEpTWDsgZGVmYXVsdHMgdG8gdHJ5aW5nIHRvIHJlbmRlciB0aGUgcmVzb2x2ZWQgdmFsdWUgb2YgdGhlIFByb21pc2UgKi9cbiAgICAgICAgY29udmVydFRvSlNYRnVuYzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqIGEgcHJvbWlzZSwgb3Igc29tZSBvdGhlciBwaWVjZSBvZiBkYXRhIHRvIGJlIHJ1biB0aHJvdWdoIGBwcm9wcy5jb252ZXJ0VG9KU1hGdW5jYCAqL1xuICAgICAgICBkYXRhOiBQcm9wVHlwZXMuYW55LFxuXG4gICAgICAgIC8qKiBjb250ZW50IHRvIGJlIHNob3duIGlmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkICovXG4gICAgICAgIGVycm9yQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqIGNvbnRlbnQgdG8gYmUgc2hvd24gd2hpbGUgdGhlIHByb21pc2UgaXMgaW4gcGVuZGluZyBzdGF0ZSAqL1xuICAgICAgICBsb2FkaW5nQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY29udGVudFJlbmRlcmVkRnVuYzogKCkgPT4ge30sXG4gICAgICAgIGNvbnZlcnRUb0pTWEZ1bmM6ICh4KSA9PiB4LFxuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvckNvbnRlbnQ6ICfimqDvuI8nLFxuICAgICAgICBsb2FkaW5nQ29udGVudDogbnVsbCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoQXN5bmMuZGVmYXVsdFByb3BzKVxuXG4gICAgbW91bnRlZCA9IGZhbHNlXG4gICAgc3RhdGUgPSB7fVxuXG4gICAgY29udmVydERhdGFUb0pTWE9yV2FpdChwcm9wcyA9IHRoaXMucHJvcHMpIHtcbiAgICAgICAgY29uc3Qge2RhdGF9ID0gcHJvcHM7XG5cbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb21wb25lbnQ6IG51bGx9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGEudGhlbigocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSByZXBsYWNlIGlmIHdlJ3JlIGxvb2tpbmcgYXQgdGhlIHNhbWUgcHJvbWlzZSwgb3RoZXJ3aXNlIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUsIGN1cnJlbnRQcm9wcykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogY3VycmVudFByb3BzLmRhdGEgPT09IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjdXJyZW50UHJvcHMuY29udmVydFRvSlNYRnVuYyhwYXlsb2FkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN0YXRlLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sICgpID0+IHRoaXMuc2V0U3RhdGUoe2NvbXBvbmVudDogZmFsc2V9KSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtjb21wb25lbnQ6IHByb3BzLmNvbnZlcnRUb0pTWEZ1bmMoZGF0YSl9KTtcbiAgICB9XG5cbiAgICBmaXJlQ2FsbGJhY2tJZkRhdGFSZW5kZXJlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmNvbnRlbnRSZW5kZXJlZEZ1bmMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpICAgICAgICAgICAgICAgICB7IHRoaXMuY29udmVydERhdGFUb0pTWE9yV2FpdCgpOyB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSAgICAgICAgICAgICAgICAgIHsgdGhpcy5tb3VudGVkID0gdHJ1ZTsgdGhpcy5maXJlQ2FsbGJhY2tJZkRhdGFSZW5kZXJlZCgpOyB9XG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkgICAgICAgICAgICAgICAgIHsgdGhpcy5maXJlQ2FsbGJhY2tJZkRhdGFSZW5kZXJlZCgpOyB9XG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHsgdGhpcy5jb252ZXJ0RGF0YVRvSlNYT3JXYWl0KG5leHRQcm9wcyk7IH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpICAgICAgICAgICAgICAgeyB0aGlzLm1vdW50ZWQgPSBmYWxzZTsgfVxuXG4gICAgZ2V0Q2xhc3NlcyhleHRyYUNsYXNzZXMpIHtcbiAgICAgICAgcmV0dXJuIGN4KCdiLWFzeW5jJywgdGhpcy5wcm9wcy5jbGFzc05hbWUsIGV4dHJhQ2xhc3Nlcywge1xuICAgICAgICAgICAgJ2ItYXN5bmMtZXJyb3InOiB0aGlzLnN0YXRlLmNvbXBvbmVudCA9PT0gZmFsc2UsXG4gICAgICAgICAgICAnYi1hc3luYy1sb2FkaW5nJzogdGhpcy5zdGF0ZS5jb21wb25lbnQgPT09IG51bGwsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY29tcG9uZW50ID09PSBudWxsIHx8IHRoaXMuc3RhdGUuY29tcG9uZW50ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IHsuLi5vbWl0KHRoaXMucHJvcHMsIEFzeW5jLmludGVybmFsS2V5cyl9IGNsYXNzTmFtZT17dGhpcy5nZXRDbGFzc2VzKCl9PlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5jb21wb25lbnQgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5sb2FkaW5nQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmVycm9yQ29udGVudH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KHRoaXMuc3RhdGUuY29tcG9uZW50LCB7XG4gICAgICAgICAgICAuLi5vbWl0KHRoaXMucHJvcHMsIEFzeW5jLmludGVybmFsS2V5cyksXG4gICAgICAgICAgICBjbGFzc05hbWU6IHRoaXMuZ2V0Q2xhc3Nlcyh0aGlzLnN0YXRlLmNvbXBvbmVudC5wcm9wcyAmJiB0aGlzLnN0YXRlLmNvbXBvbmVudC5wcm9wcy5jbGFzc05hbWUpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbi8qKlxuIyBCdXR0b25cbl9fQSBjb250cm9sIHdpdGggXCJwcmVzc2VkXCIgc3RhdGUgc3VwcG9ydC5fX1xuXG5CdXR0b24gaGFzIHR3byBtb2RlcyBvZiBvcGVyYXRpb246XG5cbjEuIHN0YXRlbGVzcyAobGlrZSBhIG5vcm1hbCBgPGJ1dHRvbj5gKVxuICAgYGBganN4XG4gICA8QnV0dG9uIG9uUHJlc3NlZD17ZG9Tb21ldGhpbmd9PmZvbzwvQnV0dG9uPlxuICAgYGBgXG5cbiAgID4gTm90ZSB0aGF0IGluc3RlYWQgb2YgYG9uQ2xpY2tgLCBCdXR0b24gdXNlcyBgb25QcmVzc2VkYC4gVGhpcyBpcyBiZWNhdXNlIHRoZSBjb21wb25lbnQgYWxzbyBsaXN0ZW5zIGZvciBrZXlib2FyZCA8a2JkPkVudGVyPC9rYmQ+IGV2ZW50cywgc28gYG9uQ2xpY2tgIG9ubHkgdGVsbHMgaGFsZiB0aGUgc3RvcnkuIFlvdSBjYW4gc3RpbGwgYmluZCB0byB0aGF0IHBhcnRpY3VsYXIgUmVhY3QgZXZlbnQgdGhvdWdoIGlmIHRoZXJlJ3MgYSBuZWVkIHRvIHRlbGwgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBjbGlja3MgYW5kIEVudGVyIHByZXNzZXMuXG5cbjIuIHN0YXRlZnVsIChsaWtlIGEgdG9nZ2xlLCBlLmcuIGJvbGQtbW9kZSBpbiBhIHJpY2ggdGV4dCBlZGl0b3IpXG5cbiAgIFwic3RhdGVmdWxcIiBtb2RlIGlzIHRyaWdnZXJlZCBieSBwYXNzaW5nIGEgYm9vbGVhbiB0byBgcHJlc3NlZGAuIFRoaXMgZW5hYmxlcyB0aGUgYnV0dG9uIHRvIGFjdCBsaWtlIGEgY29udHJvbGxlZCBjb21wb25lbnQuIFRoZSBgb25VbnByZXNzZWRgIGV2ZW50IGNhbGxiYWNrIHdpbGwgYWxzbyBub3cgYmUgZmlyZWQgd2hlbiBhcHByb3ByaWF0ZS5cblxuICAgYGBganN4XG4gICA8QnV0dG9uXG4gICAgICAgcHJlc3NlZD17dHJ1ZX1cbiAgICAgICBvblByZXNzZWQ9e2RvU29tZXRoaW5nfVxuICAgICAgIG9uVW5wcmVzc2VkPXtkb1NvbWV0aGluZ0Vsc2V9PlxuICAgICAgIGZvb1xuICAgPC9CdXR0b24+XG4gICBgYGBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgICAgQW55IHZhbGlkIEhUTUwgdGFnIG5hbWUgb3IgYSBSZWFjdCBjb21wb25lbnQgZmFjdG9yeSwgYW55dGhpbmcgdGhhdCBjYW4gYmUgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBgUmVhY3QuY3JlYXRlRWxlbWVudGBcbiAgICAgICAgKi9cbiAgICAgICAgY29tcG9uZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBlbGVtZW50IGJlY29tZXMgXCJwcmVzc2VkXCIgb3IgdHJpZ2dlcmVkIGJ5IHRoZSB1c2VyIChtb3VzZSBvciBrZXlib2FyZCk7IGJhY2tpbmcgZGF0YSBtdXN0IGJlIHVwZGF0ZWQgdG8gcGVyc2lzdCB0aGUgc3RhdGUgY2hhbmdlOyB0aGlzIGZ1bmN0aW9uIHdpbGwgc3RpbGwgYmUgY2FsbGVkIGlmIGBwcm9wcy5wcmVzc2VkYCBpcyBub3QgcGFzc2VkXG4gICAgICAgICAqL1xuICAgICAgICBvblByZXNzZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBiZWNvbWVzIFwidW5wcmVzc2VkXCI7IGJhY2tpbmcgZGF0YSBtdXN0IGJlIHVwZGF0ZWQgdG8gcGVyc2lzdCB0aGUgc3RhdGUgY2hhbmdlXG4gICAgICAgICAqL1xuICAgICAgICBvblVucHJlc3NlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZXMgXCJwcmVzc2VkXCIgc3VwcG9ydCBhbmQgYWRkcyB0aGUgYGFyaWEtcHJlc3NlZGAgYXR0cmlidXRlIHRvIHRoZSBgLmItYnV0dG9uYCBub2RlOyBlc3NlbnRpYWxseSBhIFwic3RhdGVmdWxcIiBidXR0b24gKHNlZSB0aGUgXCJ1bnByZXNzZWQvcHJlc3NlZFwiIGV4YW1wbGUgZGVtbyBhYm92ZSlcbiAgICAgICAgICovXG4gICAgICAgIHByZXNzZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGNoaWxkcmVuOiBudWxsLFxuICAgICAgICBjb21wb25lbnQ6ICdidXR0b24nLFxuICAgICAgICBvbkNsaWNrOiBub29wLFxuICAgICAgICBvblByZXNzZWQ6IG5vb3AsXG4gICAgICAgIG9uVW5wcmVzc2VkOiBub29wLFxuICAgICAgICBwcmVzc2VkOiB1bmRlZmluZWQsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEJ1dHRvbi5kZWZhdWx0UHJvcHMpXG5cbiAgICB0b2dnbGVTdGF0ZShldmVudCkge1xuICAgICAgICB0aGlzLnByb3BzW3RoaXMucHJvcHMucHJlc3NlZCA/ICdvblVucHJlc3NlZCcgOiAnb25QcmVzc2VkJ10oZXZlbnQpO1xuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVkKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlU3RhdGUoZXZlbnQpO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMub25DbGljaykpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVkKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgY2FzZSAnU3BhY2UnOlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU3RhdGUoZXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5vbktleURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uS2V5RG93bihldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBCdXR0b24uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J2J1dHRvbidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWJ1dHRvbicsIHRoaXMucHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICdiLWJ1dHRvbi1wcmVzc2FibGUnOiB0eXBlb2YgdGhpcy5wcm9wcy5wcmVzc2VkICE9PSAndW5kZWZpbmVkJyxcbiAgICAgICAgICAgICAgICAgICAgJ2ItYnV0dG9uLXByZXNzZWQnOiB0aGlzLnByb3BzLnByZXNzZWQsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXt0aGlzLnByb3BzLnByZXNzZWR9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgICAgICA8L3RoaXMucHJvcHMuY29tcG9uZW50PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBHZW5lcmF0ZXMgYSB1bmlxdWUgSUQuIEFkZHMgYSBwcmVmaXggc28gaXQgaXMgc3VpdGFibGUgZm9yIHVzZSBhcyBhbiBIVE1MIElELlxuICogQmFzZWQgb24ge0BsaW5rIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2plZC85ODI4ODMgdGhpcyBpbXBsZW1lbnRhdGlvbn0uXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBhIHVuaXF1ZSBpZGVudGlmaWVyXG4gKlxuICogQGV4YW1wbGVcbiAqIHV1aWQoKTsgLy8gYi0xZjJjZDI3Zi0wNzU0LTQzNDQtOWQyMC00MzZhMjAxYjJmODBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXVpZCgpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgIHJldHVybiAnYi0nICsgKFsxZTddKy0xZTMrLTRlMystOGUzKy0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLGE9PihhXk1hdGgucmFuZG9tKCkqMTY+PmEvNCkudG9TdHJpbmcoMTYpKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlICovXG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG4vKipcbiMgQ2hlY2tib3hcbl9fQW4gYWNjZXNzaWJsZSBjaGVja2JveCB3aXRoIGluZGV0ZXJtaW5hdGUgc3VwcG9ydC5fX1xuXG5DaGVja2JveCBpcyBpbXBsZW1lbnRlZCBhcyBhIFwiY29udHJvbGxlZCBpbnB1dFwiLCBtZWFuaW5nIGl0IGlzIGEgZGlyZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtb2RlbCBkYXRhIHBhc3NlZFxuaW5zaWRlLiBVc2VyIGludGVyYWN0aW9uIHdpbGwgYnViYmxlIGNoYW5nZXMgaW4gdGhlIGZvcm0gb2YgYG9uQ2hlY2tlZGAgYW5kIGBvblVuY2hlY2tlZGAgdGhhdCBhIGNvbnRyb2xsZXJcbnZpZXcgbXVzdCBpbnRlcmNlcHQgYW5kIGFwcGx5IGFnYWluc3QgdGhlIGRhdGEgcHJvdmlkZXIuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoZWNrYm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFsbCBpbnB1dC1zcGVjaWZpYyBwcm9wcyBsaWtlIGB2YWx1ZWAsIGBuYW1lYCwgZXRjIHNob3VsZCBiZSBwYXNzZWQgaGVyZSAtLSBjb21tb24gb25lcyBhcmUgbGlzdGVkIGJlbG93LlxuICAgICAgICAgKiBBbHNvIHN1cHBvcnRzIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLWNoZWNrYm94YCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBpbnB1dFByb3BzOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBkZXRlcm1pbmVzIGlmIHRoZSBjaGVja2JveCBpcyByZW5kZXJlZCBhcyBjaGVja2VkL3VuY2hlY2tlZCwgc2VlIFJlYWN0IFtcImNvbnRyb2xsZWQgaW5wdXRzXCJdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvZm9ybXMuaHRtbCNjb250cm9sbGVkLWNvbXBvbmVudHMpKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjaGVja2VkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAgICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHByZXZlbnRzIHRoZSBgb257Q2hlY2tlZCxVbmNoZWNrZWR9YCBldmVudHMgZnJvbSBmaXJpbmcgd2hlbiBgdHJ1ZWBcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICAgICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogZW5hYmxlcyBvciBkaXNhYmxlcyBcIm1peGVkXCIgY2hlY2tib3ggc3RhdGUsIHJlYWQgdGhpcyBbQ1NTLVRyaWNrcyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2luZGV0ZXJtaW5hdGUtY2hlY2tib3hlcy8pICBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhbmQgZXhhbXBsZXNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaW5kZXRlcm1pbmF0ZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHJlbmRlcmVkIGFzIHRoZSBpbnB1dCBjb250cm9sJ3MgZm9ybSBuYW1lXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogIHBhc3NlZC10aHJvdWdoIHRvIHRoZSBpbnB1dCBub2RlLCBsaWtlIGBuYW1lYFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgfSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBSZWFjdC1yZW5kZXJhYmxlIGNvbnRlbnQsIG1vc3QgY29tbW9ubHkgYSBzaW1wbGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLWNoZWNrYm94LWxhYmVsYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBiZWNvbWVzIGNoZWNrZWQ7IGJhY2tpbmcgZGF0YSBtdXN0IGJlIHVwZGF0ZWQgdG8gcGVyc2lzdCB0aGUgc3RhdGUgY2hhbmdlXG4gICAgICAgICAqL1xuICAgICAgICBvbkNoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBiZWNvbWVzIHVuY2hlY2tlZDsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uVW5jaGVja2VkOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgICAgICBjaGVja2VkOiBmYWxzZSxcbiAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBsYWJlbDogbnVsbCxcbiAgICAgICAgbGFiZWxQcm9wczoge30sXG4gICAgICAgIG9uQ2hlY2tlZDogbm9vcCxcbiAgICAgICAgb25VbmNoZWNrZWQ6IG5vb3AsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKENoZWNrYm94LmRlZmF1bHRQcm9wcylcblxuICAgIGlkID0gdXVpZCgpXG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5pbmRldGVybWluYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEluZGV0ZXJtaW5hdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICAgICAgaWYgKHByZXZQcm9wcy5pbnB1dFByb3BzLmluZGV0ZXJtaW5hdGUgIT09IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5pbmRldGVybWluYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEluZGV0ZXJtaW5hdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEluZGV0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMucmVmcy5pbnB1dC5pbmRldGVybWluYXRlID0gISF0aGlzLnByb3BzLmlucHV0UHJvcHMuaW5kZXRlcm1pbmF0ZTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2UgPSAoZXZlbnQpID0+IHsgLy8gU2VuZCB0aGUgb3Bwb3NpdGUgc2lnbmFsIGZyb20gd2hhdCB3YXMgcGFzc2VkIHRvIHRvZ2dsZSB0aGUgZGF0YVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pbnB1dFByb3BzLmRpc2FibGVkKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHRoaXMucHJvcHNbIXRoaXMucHJvcHMuaW5wdXRQcm9wcy5jaGVja2VkID8gJ29uQ2hlY2tlZCcgOiAnb25VbmNoZWNrZWQnXSh0aGlzLnByb3BzLmlucHV0UHJvcHMubmFtZSk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2hhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2hhbmdlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlucHV0UHJvcHMuZGlzYWJsZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdGhpcy5yZWZzLmlucHV0LmZvY3VzKCk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2xpY2spKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRBcmlhU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmlucHV0UHJvcHMuaW5kZXRlcm1pbmF0ZSA/ICdtaXhlZCcgOiBTdHJpbmcodGhpcy5wcm9wcy5pbnB1dFByb3BzLmNoZWNrZWQpO1xuICAgIH1cblxuICAgIHJlbmRlcklucHV0KCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcy5pbnB1dFByb3BzLCAnaW5kZXRlcm1pbmF0ZScpfVxuICAgICAgICAgICAgICAgIHJlZj0naW5wdXQnXG4gICAgICAgICAgICAgICAgdHlwZT0nY2hlY2tib3gnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1jaGVja2JveCcsIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2ItY2hlY2tib3gtbWl4ZWQnOiB0aGlzLnByb3BzLmlucHV0UHJvcHMuaW5kZXRlcm1pbmF0ZSxcbiAgICAgICAgICAgICAgICAgICAgJ2ItY2hlY2tib3gtY2hlY2tlZCc6IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICAnYi1jaGVja2JveC11bmNoZWNrZWQnOiAhdGhpcy5wcm9wcy5pbnB1dFByb3BzLmluZGV0ZXJtaW5hdGUgJiYgIXRoaXMucHJvcHMuaW5wdXRQcm9wcy5jaGVja2VkLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlucHV0UHJvcHMuaWQgfHwgdGhpcy5pZH1cbiAgICAgICAgICAgICAgICBhcmlhLWNoZWNrZWQ9e3RoaXMuZ2V0QXJpYVN0YXRlKCl9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhYmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5sYWJlbFByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2xhYmVsJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWNoZWNrYm94LWxhYmVsJywgdGhpcy5wcm9wcy5sYWJlbFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIGh0bWxGb3I9e3RoaXMucHJvcHMuaW5wdXRQcm9wcy5pZCB8fCB0aGlzLmlkfT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMubGFiZWx9XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgQ2hlY2tib3guaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1jaGVja2JveC13cmFwcGVyJywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJJbnB1dCgpfVxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckxhYmVsKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgQ2hlY2tib3ggZnJvbSAnLi4vYm91bmRsZXNzLWNoZWNrYm94L2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG4vKipcbiMgQ2hlY2tib3hHcm91cFxuX19BIGNvbnRyb2xsZXIgdmlldyBmb3IgbWFuYWdpbmcgdGhlIGFnZ3JlZ2F0ZSBzdGF0ZSBvZiBtdWx0aXBsZSwgcmVsYXRlZCBjaGVja2JveGVzLl9fXG5cblRoZSBtb3N0IGNvbW1vbiB1c2UgY2FzZSBmb3IgYENoZWNrYm94R3JvdXBgIGlzIGEgXCJzZWxlY3QgYWxsXCIgLyBjaGlsZHJlbiBzY2VuYXJpby4gVGhpcyBwYXJ0aWN1bGFyXG5jb25maWd1cmF0aW9uIGlzIGJ1aWx0LWluIGFuZCBpcyBhY3RpdmF0ZWQgYnkgcGFzc2luZyB0aGUgYHNlbGVjdEFsbGAgcHJvcC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hlY2tib3hHcm91cCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBzZWxlY3RBbGxQb3NpdGlvbiA9IHtcbiAgICAgICAgQkVGT1JFOiB1dWlkKCksXG4gICAgICAgIEFGVEVSOiB1dWlkKCksXG4gICAgfVxuXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBkYXRhIHdpc2hlZCB0byBiZSByZW5kZXJlZCwgZWFjaCBpdGVtIG11c3QgY29uZm9ybSB0byB0aGUgW0NoZWNrYm94IHByb3Agc3BlY10oLi9DaGVja2JveCNwcm9wcylcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiBQcm9wVHlwZXMuYXJyYXlPZihDaGVja2JveC5wcm9wVHlwZXMuaW5wdXRQcm9wcykuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdoZW4gYWxsIGNoaWxkcmVuIGJlY29tZSBjaGVja2VkIChub3QgZmlyZWQgb24gZmlyc3QgcmVuZGVyKSwgbm8gcmV0dXJuXG4gICAgICAgICAqL1xuICAgICAgICBvbkFsbENoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhbGwgY2hpbGRyZW4gYmVjb21lIHVuY2hlY2tlZCAobm90IGZpcmVkIG9uIGZpcnN0IHJlbmRlciksIG5vIHJldHVyblxuICAgICAgICAgKi9cbiAgICAgICAgb25BbGxVbmNoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIHNwZWNpZmljIGNoaWxkIGhhcyBiZWNvbWUgY2hlY2tlZCwgcmV0dXJucyB0aGUgY2hpbGQgZGVmaW5pdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb25DaGlsZENoZWNrZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIHNwZWNpZmljIGNoaWxkIGhhcyBiZWNvbWUgY2hlY2tlZCwgcmV0dXJucyB0aGUgY2hpbGQgZGVmaW5pdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb25DaGlsZFVuY2hlY2tlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlbmRlcnMgYSBtYXN0ZXIgY2hlY2tib3ggdGhhdCBjYW4gbWFuaXB1bGF0ZSB0aGUgdmFsdWVzIG9mIGFsbCBjaGlsZHJlbiBzaW11bHRhbmVvdXNseVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0QWxsOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogbXVzdCBjb25mb3JtIHRvIHRoZSBbQ2hlY2tib3ggcHJvcCBzcGVjXSguL0NoZWNrYm94I3Byb3BzKVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0QWxsUHJvcHM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHRoZSB0ZXh0IG9yIHJlbmRlcmFibGUgbm9kZSB0byBkaXNwbGF5IG5leHQgdG8gdGhlIGNoZWNrYm94XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgaW5wdXRQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgICAgfSksXG5cbiAgICAgICAgc2VsZWN0QWxsUG9zaXRpb246IFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICBDaGVja2JveEdyb3VwLnNlbGVjdEFsbFBvc2l0aW9uLkJFRk9SRSxcbiAgICAgICAgICAgIENoZWNrYm94R3JvdXAuc2VsZWN0QWxsUG9zaXRpb24uQUZURVIsXG4gICAgICAgIF0pLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgb25BbGxDaGVja2VkOiBub29wLFxuICAgICAgICBvbkFsbFVuY2hlY2tlZDogbm9vcCxcbiAgICAgICAgb25DaGlsZENoZWNrZWQ6IG5vb3AsXG4gICAgICAgIG9uQ2hpbGRVbmNoZWNrZWQ6IG5vb3AsXG4gICAgICAgIHNlbGVjdEFsbDogZmFsc2UsXG4gICAgICAgIHNlbGVjdEFsbFByb3BzOiB7fSxcbiAgICAgICAgc2VsZWN0QWxsUG9zaXRpb246IENoZWNrYm94R3JvdXAuc2VsZWN0QWxsUG9zaXRpb24uQkVGT1JFLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhDaGVja2JveEdyb3VwLmRlZmF1bHRQcm9wcylcblxuICAgIGFsbEl0ZW1zQ2hlY2tlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbXMuZXZlcnkoKGl0ZW0pID0+IGl0ZW0uaW5wdXRQcm9wcy5jaGVja2VkID09PSB0cnVlKTtcbiAgICB9XG5cbiAgICBhbnlJdGVtc0NoZWNrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW1zLnNvbWUoKGl0ZW0pID0+IGl0ZW0uaW5wdXRQcm9wcy5jaGVja2VkID09PSB0cnVlKTtcbiAgICB9XG5cbiAgICByZW5kZXJTZWxlY3RBbGwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdEFsbCkge1xuICAgICAgICAgICAgY29uc3QgYWxsQ2hlY2tlZCA9IHRoaXMuYWxsSXRlbXNDaGVja2VkKCk7XG4gICAgICAgICAgICBjb25zdCB7aW5wdXRQcm9wc30gPSB0aGlzLnByb3BzLnNlbGVjdEFsbFByb3BzO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdzZWxlY3RfYWxsJ1xuICAgICAgICAgICAgICAgICAgICBrZXk9J2NiX3NlbGVjdF9hbGwnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItY2hlY2tib3gtZ3JvdXAtc2VsZWN0YWxsJywgdGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5pbnB1dFByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogYWxsQ2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU6ICFhbGxDaGVja2VkICYmIHRoaXMuYW55SXRlbXNDaGVja2VkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBpbnB1dFByb3BzICYmIGlucHV0UHJvcHMubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBpbnB1dFByb3BzLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2NiX3NlbGVjdF9hbGwnLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17dGhpcy5wcm9wcy5zZWxlY3RBbGxQcm9wcy5sYWJlbCB8fCAnU2VsZWN0IEFsbCd9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tlZD17dGhpcy5wcm9wcy5vbkFsbENoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uVW5jaGVja2VkPXt0aGlzLnByb3BzLm9uQWxsVW5jaGVja2VkfSAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckNoZWNrYm94ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgey4uLml0ZW19XG4gICAgICAgICAgICAgICAgICAgIGtleT17aXRlbS5pbnB1dFByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tlZD17dGhpcy5wcm9wcy5vbkNoaWxkQ2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgb25VbmNoZWNrZWQ9e3RoaXMucHJvcHMub25DaGlsZFVuY2hlY2tlZH0gLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckNoaWxkcmVuKCkge1xuICAgICAgICBjb25zdCB0b0JlUmVuZGVyZWQgPSBbdGhpcy5yZW5kZXJDaGVja2JveGVzKCldO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdEFsbCAmJiB0aGlzLnByb3BzLnNlbGVjdEFsbFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMucHJvcHMuc2VsZWN0QWxsUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgQ2hlY2tib3hHcm91cC5zZWxlY3RBbGxQb3NpdGlvbi5CRUZPUkU6XG4gICAgICAgICAgICAgICAgdG9CZVJlbmRlcmVkLnVuc2hpZnQodGhpcy5yZW5kZXJTZWxlY3RBbGwoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQ2hlY2tib3hHcm91cC5zZWxlY3RBbGxQb3NpdGlvbi5BRlRFUjpcbiAgICAgICAgICAgICAgICB0b0JlUmVuZGVyZWQucHVzaCh0aGlzLnJlbmRlclNlbGVjdEFsbCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0b0JlUmVuZGVyZWQ7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIENoZWNrYm94R3JvdXAuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J2dyb3VwJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItY2hlY2tib3gtZ3JvdXAnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckNoaWxkcmVuKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG4vKipcbiMgUG9ydGFsXG5fX0EgaGlnaGVyLW9yZGVyIGNvbXBvbmVudCBmb3IgdGhlIHJlbmRlcmluZyBvZiBjb21wb25lbnRzIG91dHNpZGUgdGhlIG5vcm1hbCBSZWFjdCB0cmVlLl9fXG5cbmBQb3J0YWxgIGlzIHVzZWQgaW4gb3RoZXIgY29tcG9uZW50cyBzdWNoIGFzIGBQb3BvdmVyYCB0byByZW5kZXIgY29udGVudCB0byBwbGFjZXMgbGlrZSB0aGUgSFRNTCBgPGJvZHk+YCB0YWcsIGF2b2lkaW5nIHN0eWxlIGxlYWthZ2UgYW5kIHBhcmVudCBsYXlvdXQgY29udGV4dHMuIE9ubHkgYWNjZXB0cyBhIHNpbmdsZSB0b3AtbGV2ZWwgY2hpbGQ7IG5ha2VkIHRleHQsIGV0YyB3aWxsIGJlIHdyYXBwZWQgaW4gYSBgPGRpdj5gLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3J0YWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8vIHNpbmdsZSBjaGlsZCBvbmx5IC0gYXJyYXlzIG5vdCBhbGxvd2VkXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBub3JtYWwgUmVhY3QgY2hpbGQsIGJ1dCBtdXN0IGJlIHNpbmd1bGFyOyBtdWx0aXBsZSBzaWJsaW5nIGNoaWxkcmVuIG11c3QgaGF2ZSBhIGNvbW1vbiB3cmFwcGVyLCBzdWNoIGFzIGEgXCJsYXlvdXRcIiBgPGRpdj5gXG5cbiAgICAgICAgICog4pyFIE9LOlxuXG4gICAgICAgICAqIGBgYGpzeFxuICAgICAgICAgKiA8UG9ydGFsPlxuICAgICAgICAgKiAgIGZvb1xuICAgICAgICAgKiA8L1BvcnRhbD5cblxuICAgICAgICAgKiA8UG9ydGFsPlxuICAgICAgICAgKiAgIDxkaXY+Zm9vPC9kaXY+XG4gICAgICAgICAqIDwvUG9ydGFsPlxuXG4gICAgICAgICAqIDxQb3J0YWw+XG4gICAgICAgICAqICAgPGRpdj5cbiAgICAgICAgICogICAgICAgPGRpdj5mb288L2Rpdj5cbiAgICAgICAgICogICAgICAgPGRpdj5iYXI8L2Rpdj5cbiAgICAgICAgICogICA8L2Rpdj5cbiAgICAgICAgICogPC9Qb3J0YWw+XG4gICAgICAgICAqIGBgYFxuXG4gICAgICAgICAqIOKblO+4jyBOb3QgT0s6XG5cbiAgICAgICAgICogYGBganN4XG4gICAgICAgICAqIDxQb3J0YWw+XG4gICAgICAgICAqICAgPGRpdj5mb288L2Rpdj5cbiAgICAgICAgICogICA8ZGl2PmJhcjwvZGl2PlxuICAgICAgICAgKiA8L1BvcnRhbD5cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICBjaGlsZHJlbjogUmVhY3QuUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBsb2NhdGlvbiB0byBhcHBlbmQgdGhlIGdlbmVyYXRlZCBwb3J0YWwgYW5kIGNoaWxkIGVsZW1lbnRzXG4gICAgICAgICAqL1xuICAgICAgICBkZXN0aW5hdGlvbjogUHJvcFR5cGVzLmluc3RhbmNlT2YoSFRNTEVsZW1lbnQpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgSUQgdXNlZCB0byBsaW5rIHRoZSBwb3J0YWwgb3JpZ2luIHRvIHRoZSBkZXN0aW5hdGlvbjsgYWRkZWQgdG8gZ2VuZXJhdGVkIGA8ZGl2PmAgYXBwZW5kZWQgdG8gdGhlIGRlc3RpbmF0aW9uIEhUTUwgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgcG9ydGFsSWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGRlc3RpbmF0aW9uOiBkb2N1bWVudC5ib2R5LFxuICAgICAgICBwb3J0YWxJZDogbnVsbCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoUG9ydGFsLmRlZmF1bHRQcm9wcylcblxuICAgIHN0YXRpYyBQT1JUQUxfREFUQV9BVFRSSUJVVEUgPSAnZGF0YS1wb3J0YWwtaWQnXG5cbiAgICBpZCA9IHV1aWQoKVxuXG4gICAgLy8gdGhlIDxkaXY+IHRoYXQgdGhlIGNoaWxkcmVuIGFyZSByZW5kZXJlZCBpbnRvXG4gICAgJHBvcnRhbCA9IG51bGxcblxuICAgIC8vIHRoZSB0b3AtbGV2ZWwgY2hpbGQgcmVuZGVyZWQgaW50byB0aGUgJHBvcnRhbFxuICAgICRwYXNzZW5nZXIgPSBudWxsO1xuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICB0aGlzLiRwb3J0YWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5wcm9wcy5kZXN0aW5hdGlvbi5hcHBlbmRDaGlsZCh0aGlzLiRwb3J0YWwpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyUG9ydGFsbGVkQ29udGVudCgpO1xuICAgIH1cblxuICAgIHJlbmRlclBvcnRhbGxlZENvbnRlbnQoKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gUmVhY3QuaXNWYWxpZEVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbikgPyB0aGlzLnByb3BzLmNoaWxkcmVuIDogKDxkaXY+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9kaXY+KTtcblxuICAgICAgICAvLyB1cGRhdGUgdGhlIHBvcnRhbCBJRCBsaW5rIGlmIG5lZWRlZFxuICAgICAgICB0aGlzLiRwb3J0YWwuaWQgPSB0aGlzLnByb3BzLnBvcnRhbElkIHx8IHRoaXMuaWQ7XG5cbiAgICAgICAgUmVhY3RET00udW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIodGhpcywgY2hpbGQsIHRoaXMuJHBvcnRhbCk7XG4gICAgICAgIHRoaXMuJHBhc3NlbmdlciA9IHRoaXMuJHBvcnRhbC5jaGlsZHJlblswXTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7IHRoaXMucmVuZGVyUG9ydGFsbGVkQ29udGVudCgpOyB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZSh0aGlzLiRwb3J0YWwpO1xuICAgICAgICB0aGlzLnByb3BzLmRlc3RpbmF0aW9uLnJlbW92ZUNoaWxkKHRoaXMuJHBvcnRhbCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBQb3J0YWwuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICB7Li4ue1tQb3J0YWwuUE9SVEFMX0RBVEFfQVRUUklCVVRFXTogdGhpcy5wcm9wcy5wb3J0YWxJZCB8fCB0aGlzLmlkfX0gLz5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IFBvcnRhbCBmcm9tICcuLi9ib3VuZGxlc3MtcG9ydGFsL2luZGV4JztcbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB1dWlkIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy11dWlkL2luZGV4JztcblxuY29uc3QgdG9BcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuLyoqXG4jIERpYWxvZ1xuX19BIG5vbi1ibG9ja2luZywgZm9jdXMtc3RlYWxpbmcgY29udGFpbmVyLl9fXG5cbkEgZGlhbG9nIGRpZmZlcnMgZnJvbSBhIG1vZGFsIGluIHRoYXQgaXQgZG9lcyBub3QgY29tZSB3aXRoIGEgbWFza2luZyBsYXllciAodG8gb2JzY3VyZSB0aGUgcmVzdCBvZiB0aGUgcGFnZSlcbmFuZCB0aGUgdXNlciBjYW4gY2hvb3NlIHRvIHNoaWZ0IGZvY3VzIGF3YXkgZnJvbSB0aGUgZGlhbG9nIGNvbnRlbnRzIHZpYSBtb3VzZSBjbGljayBvciBhIGtleWJvYXJkIHNob3J0Y3V0LlxuXG5TcGVjaWZpYyBhcmVhcyAoaGVhZGVyLCBib2R5LCBmb290ZXIpIGFyZSBkZWZpbmVkIHRvIHByb3ZpZGUgZWFzeSBjb25mb3JtYW5jZSB0byB0aGVcbltXQUktQVJJQSBzcGVjXShodHRwOi8vd3d3LnczLm9yZyAqIC9UUi93YWktYXJpYS9zdGF0ZXNfYW5kX3Byb3BlcnRpZXMjYXJpYS1sYWJlbGxlZGJ5KSBmb3IgYGFyaWEtbGFiZWxsZWRieWBcbmFuZCBgYXJpYS1kZXNjcmliZWRieWAgKHNjcmVlbiByZWFkZXIgICogYWNjZXNzaWJpbGl0eSkuIFRoZWlyIHVzZSBpcyBvcHRpb25hbCwgYnV0IGVuY291cmFnZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpYWxvZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhcmJpdHJhcnkgY29udGVudCB0byBiZSByZW5kZXJlZCBhZnRlciB0aGUgZGlhbG9nIGluIHRoZSBET01cbiAgICAgICAgICovXG4gICAgICAgIGFmdGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYXJiaXRyYXJ5IGNvbnRlbnQgdG8gYmUgcmVuZGVyZWQgYmVmb3JlIHRoZSBkaWFsb2cgaW4gdGhlIERPTVxuICAgICAgICAgKi9cbiAgICAgICAgYmVmb3JlOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItZGlhbG9nLWJvZHlgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGJvZHlQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyBpZiBmb2N1cyBpcyBhbGxvd2VkIHRvIG1vdmUgYXdheSBmcm9tIHRoZSBkaWFsb2dcbiAgICAgICAgICovXG4gICAgICAgIGNhcHR1cmVGb2N1czogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBlbmFibGUgZGV0ZWN0aW9uIG9mIFwiRXNjYXBlXCIga2V5cHJlc3NlcyB0byB0cmlnZ2VyIGBwcm9wcy5vbkNsb3NlYDsgaWYgYSBmdW5jdGlvbiBpcyBwcm92aWRlZCwgdGhlIHJldHVyblxuICAgICAgICAgKiB2YWx1ZSBkZXRlcm1pbmVzIGlmIHRoZSBkaWFsb2cgd2lsbCBiZSBjbG9zZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlT25Fc2NLZXk6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZSBkZXRlY3Rpb24gb2YgY2xpY2tzIGluc2lkZSB0aGUgZGlhbG9nIGFyZWEgdG8gdHJpZ2dlciBgcHJvcHMub25DbG9zZWA7IGlmIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIHRoZSByZXR1cm5cbiAgICAgICAgICogdmFsdWUgZGV0ZXJtaW5lcyBpZiB0aGUgZGlhbG9nIHdpbGwgYmUgY2xvc2VkXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZU9uSW5zaWRlQ2xpY2s6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZSBkZXRlY3Rpb24gb2YgY2xpY2tzIG91dHNpZGUgdGhlIGRpYWxvZyBhcmVhIHRvIHRyaWdnZXIgYHByb3BzLm9uQ2xvc2VgOyBpZiBhIGZ1bmN0aW9uIGlzIHByb3ZpZGVkLCB0aGUgcmV0dXJuXG4gICAgICAgICAqIHZhbHVlIGRldGVybWluZXMgaWYgdGhlIGRpYWxvZyB3aWxsIGJlIGNsb3NlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xvc2VPbk91dHNpZGVDbGljazogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgICAgIFByb3BUeXBlcy5mdW5jLFxuICAgICAgICBdKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZW5hYmxlIGRldGVjdGlvbiBvZiBmb2N1cyBvdXRzaWRlIHRoZSBkaWFsb2cgYXJlYSB0byB0cmlnZ2VyIGBwcm9wcy5vbkNsb3NlYDsgaWYgYSBmdW5jdGlvbiBpcyBwcm92aWRlZCwgdGhlIHJldHVyblxuICAgICAgICAgKiB2YWx1ZSBkZXRlcm1pbmVzIGlmIHRoZSBkaWFsb2cgd2lsbCBiZSBjbG9zZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlT25PdXRzaWRlRm9jdXM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZSBkZXRlY3Rpb24gb2Ygc2Nyb2xsIGFuZCBtb3VzZXdoZWVsIGV2ZW50cyBvdXRzaWRlIHRoZSBkaWFsb2cgYXJlYSB0byB0cmlnZ2VyIGBwcm9wcy5vbkNsb3NlYDsgaWYgYSBmdW5jdGlvXG4gICAgICAgICAqIGlzIHByb3ZpZGVkLCB0aGUgcmV0dXJuIHZhbHVlIGRldGVybWluZXMgaWYgdGhlIGRpYWxvZyB3aWxsIGJlIGNsb3NlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xvc2VPbk91dHNpZGVTY3JvbGw6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRleHQsIFJlYWN0RWxlbWVudHMsIGV0Yy4gY29tcHJpc2luZyB0aGUgXCJmb290ZXJcIiBhcmVhIG9mIHRoZSBkaWFsb2csIGUuZy4gY29uZmlybS9jYW5jZWwgYnV0dG9uc1xuICAgICAgICAgKi9cbiAgICAgICAgZm9vdGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItZGlhbG9nLWZvb3RlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgZm9vdGVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRleHQsIFJlYWN0RWxlbWVudHMsIGV0Yy4gdG8gcmVwcmVzZW50IHRoZSBcInRpdGxlIGJhclwiIGFyZWEgb2YgdGhlIGRpYWxvZ1xuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItZGlhbG9nLWhlYWRlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgY3VzdG9tIGV2ZW50IGhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZGlhbG9nIHNob3VsZCBiZSB1bnJlbmRlcmVkIGJ5IGl0cyBwYXJlbnQ7IHRoZSBldmVudCBvY2N1cnMgaWYgb25lIG9yIG1vcmUgb2YgdGhlIGBjbG9zZU9uYCBwcm9wcyAoYGNsb3NlT25Fc2NLZXlgLCBgY2xvc2VPbk91dHNpZGVDbGlja2AsIGV0Yy4pIGFyZSBwYXNzZWQgYXMgYHRydWVgIGFuZCB0aGUgZGlzbWlzc2FsIGNyaXRlcmlhIGFyZSBzYXRpc2ZpZWRcbiAgICAgICAgICovXG4gICAgICAgIG9uQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1kaWFsb2ctd3JhcHBlcmAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgd3JhcHBlclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGFmdGVyOiBudWxsLFxuICAgICAgICBiZWZvcmU6IG51bGwsXG4gICAgICAgIGJvZHlQcm9wczoge30sXG4gICAgICAgIGNhcHR1cmVGb2N1czogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGNsb3NlT25Fc2NLZXk6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uSW5zaWRlQ2xpY2s6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uT3V0c2lkZUNsaWNrOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbk91dHNpZGVGb2N1czogZmFsc2UsXG4gICAgICAgIGNsb3NlT25PdXRzaWRlU2Nyb2xsOiBmYWxzZSxcbiAgICAgICAgZm9vdGVyOiBudWxsLFxuICAgICAgICBmb290ZXJQcm9wczoge30sXG4gICAgICAgIGhlYWRlcjogbnVsbCxcbiAgICAgICAgaGVhZGVyUHJvcHM6IHt9LFxuICAgICAgICBvbkNsb3NlOiBub29wLFxuICAgICAgICB3cmFwcGVyUHJvcHM6IHt9LFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhEaWFsb2cuZGVmYXVsdFByb3BzKVxuXG4gICAgbW91bnRlZCA9IGZhbHNlXG5cbiAgICAvLyBmYWxsYmFja3MgaWYgb25lIGlzbid0IHBhc3NlZFxuICAgIHV1aWRIZWFkZXIgPSB1dWlkKClcbiAgICB1dWlkQm9keSA9IHV1aWQoKVxuXG4gICAgaXNQYXJ0T2ZEaWFsb2cobm9kZSkge1xuICAgICAgICBpZiAoIW5vZGUgfHwgbm9kZSA9PT0gd2luZG93KSB7IHJldHVybiBmYWxzZTsgfVxuXG4gICAgICAgIGNvbnN0IHJvb3RzID0gW3RoaXMuJHdyYXBwZXJdLmNvbmNhdChcbiAgICAgICAgICAgIHRvQXJyYXkuY2FsbChcbiAgICAgICAgICAgICAgICB0aGlzLiR3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoYFske1BvcnRhbC5QT1JUQUxfREFUQV9BVFRSSUJVVEV9XWApXG4gICAgICAgICAgICApLm1hcCgoZG9tKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkb20uZ2V0QXR0cmlidXRlKFBvcnRhbC5QT1JUQUxfREFUQV9BVFRSSUJVVEUpKSlcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBlbGVtZW50ID0gbm9kZS5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUgPyBub2RlLnBhcmVudE5vZGUgOiBub2RlO1xuXG4gICAgICAgIHJldHVybiByb290cy5zb21lKChkb20pID0+IGRvbS5jb250YWlucyhlbGVtZW50KSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlT3V0c2lkZUNsaWNrLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2ssIHRydWUpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlT3V0c2lkZVNjcm9sbFdoZWVsLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5oYW5kbGVPdXRzaWRlU2Nyb2xsV2hlZWwsIHRydWUpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNhcHR1cmVGb2N1cyAmJiAhdGhpcy5pc1BhcnRPZkRpYWxvZyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2ssIHRydWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCB0aGlzLmhhbmRsZU91dHNpZGVDbGljaywgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuaGFuZGxlRm9jdXMsIHRydWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5oYW5kbGVPdXRzaWRlU2Nyb2xsV2hlZWwsIHRydWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLmhhbmRsZU91dHNpZGVTY3JvbGxXaGVlbCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgc2hvdWxkRGlhbG9nQ2xvc2VPbkV2ZW50KHByb3AsIGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKHRoaXMucHJvcHNbcHJvcF0pID8gdGhpcy5wcm9wc1twcm9wXShldmVudCkgOiB0aGlzLnByb3BzW3Byb3BdO1xuICAgIH1cblxuICAgIGhhbmRsZUZvY3VzID0gKG5hdGl2ZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5jYXB0dXJlRm9jdXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbk91dHNpZGVGb2N1cycsIG5hdGl2ZUV2ZW50KSAmJiAhdGhpcy5pc1BhcnRPZkRpYWxvZyhuYXRpdmVFdmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMucHJvcHMub25DbG9zZSwgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGV4cGxpY2l0T3JpZ2luYWxUYXJnZXQgaXMgZm9yIEZpcmVmb3gsIGFzIGl0IGRvZXNuJ3Qgc3VwcG9ydCByZWxhdGVkVGFyZ2V0XG4gICAgICAgIGxldCBwcmV2aW91cyA9IG5hdGl2ZUV2ZW50LmV4cGxpY2l0T3JpZ2luYWxUYXJnZXQgfHwgbmF0aXZlRXZlbnQucmVsYXRlZFRhcmdldDtcblxuICAgICAgICBpZiAodGhpcy5pc1BhcnRPZkRpYWxvZyhwcmV2aW91cykgJiYgIXRoaXMuaXNQYXJ0T2ZEaWFsb2cobmF0aXZlRXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgbmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHByZXZpb3VzLmZvY3VzKCk7IC8vIHJlc3RvcmUgZm9jdXNcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbkVzY0tleScsIGV2ZW50KSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMucHJvcHMub25DbG9zZSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUluc2lkZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbkluc2lkZUNsaWNrJywgZXZlbnQpKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnByb3BzLm9uQ2xvc2UsIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlT3V0c2lkZUNsaWNrID0gKG5hdGl2ZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbk91dHNpZGVDbGljaycsIG5hdGl2ZUV2ZW50KSAmJiAhdGhpcy5pc1BhcnRPZkRpYWxvZyhuYXRpdmVFdmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnByb3BzLm9uQ2xvc2UsIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlT3V0c2lkZVNjcm9sbFdoZWVsID0gKG5hdGl2ZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZERpYWxvZ0Nsb3NlT25FdmVudCgnY2xvc2VPbk91dHNpZGVTY3JvbGwnLCBuYXRpdmVFdmVudCkgJiYgIXRoaXMuaXNQYXJ0T2ZEaWFsb2cobmF0aXZlRXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhpcy5wcm9wcy5vbkNsb3NlLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckJvZHkoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuYm9keVByb3BzfVxuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmJvZHlQcm9wcy5pZCB8fCB0aGlzLnV1aWRCb2R5fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItZGlhbG9nLWJvZHknLCB0aGlzLnByb3BzLmJvZHlQcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlckZvb3RlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZm9vdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxmb290ZXJcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuZm9vdGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItZGlhbG9nLWZvb3RlcicsIHRoaXMucHJvcHMuZm9vdGVyUHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmZvb3Rlcn1cbiAgICAgICAgICAgICAgICA8L2Zvb3Rlcj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJIZWFkZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8aGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmhlYWRlclByb3BzfVxuICAgICAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5oZWFkZXJQcm9wcy5pZCB8fCB0aGlzLnV1aWRIZWFkZXJ9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItZGlhbG9nLWhlYWRlcicsIHRoaXMucHJvcHMuaGVhZGVyUHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmhlYWRlcn1cbiAgICAgICAgICAgICAgICA8L2hlYWRlcj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJGb2N1c0JvdW5kYXJ5KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYXB0dXJlRm9jdXMpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Itb2Zmc2NyZWVuJyB0YWJJbmRleD0nMCcgYXJpYS1oaWRkZW49J3RydWUnPiZuYnNwOzwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gLy8gdXNlZCB0byBsb2NrIGZvY3VzIGludG8gYSBwYXJ0aWN1bGFyIHN1YnNldCBvZiBET01cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy53cmFwcGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgcmVmPXsobm9kZSkgPT4gKHRoaXMuJHdyYXBwZXIgPSBub2RlKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWRpYWxvZy13cmFwcGVyJywgdGhpcy5wcm9wcy53cmFwcGVyUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICB0YWJJbmRleD0nMCc+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRm9jdXNCb3VuZGFyeSgpfVxuXG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuYmVmb3JlfVxuXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBEaWFsb2cuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXsobm9kZSkgPT4gKHRoaXMuJGRpYWxvZyA9IG5vZGUpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWRpYWxvZycsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVJbnNpZGVDbGlja31cbiAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9J2RpYWxvZydcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbGxlZGJ5PXt0aGlzLnV1aWRIZWFkZXJ9XG4gICAgICAgICAgICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9e3RoaXMudXVpZEJvZHl9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PScwJz5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVySGVhZGVyKCl9XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckJvZHkoKX1cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRm9vdGVyKCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5hZnRlcn1cblxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckZvY3VzQm91bmRhcnkoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge2ZpbmRET01Ob2RlfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xuXG5mdW5jdGlvbiB0b0koc3RyaW5nTnVtYmVyKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHN0cmluZ051bWJlciwgMTApO1xufVxuXG5mdW5jdGlvbiByZXNjYWxlKGluc3RhbmNlKSB7XG4gICAgY29uc3Qgbm9kZSA9IGZpbmRET01Ob2RlKGluc3RhbmNlKTtcbiAgICBjb25zdCBjb250YWluZXJCb3ggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLnBhcmVudE5vZGUpO1xuICAgIGNvbnN0IGZvbnRTaXplID0gdG9JKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLmZvbnRTaXplKTtcblxuICAgIGxldCBjb250YWluZXJIZWlnaHQgPSB0b0koY29udGFpbmVyQm94LmhlaWdodCk7XG4gICAgbGV0IGNvbnRhaW5lcldpZHRoID0gdG9JKGNvbnRhaW5lckJveC53aWR0aCk7XG5cbiAgICAvLyBuZWVkIHRvIGFjY291bnQgZm9yIHBhZGRpbmdcbiAgICBpZiAoY29udGFpbmVyQm94LmJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnIHx8IGNvbnRhaW5lckJveC5ib3hTaXppbmcgPT09ICdwYWRkaW5nLWJveCcpIHtcbiAgICAgICAgY29udGFpbmVySGVpZ2h0IC09IHRvSShjb250YWluZXJCb3gucGFkZGluZ1RvcCkgKyB0b0koY29udGFpbmVyQm94LnBhZGRpbmdCb3R0b20pO1xuICAgICAgICBjb250YWluZXJXaWR0aCAtPSB0b0koY29udGFpbmVyQm94LnBhZGRpbmdMZWZ0KSArIHRvSShjb250YWluZXJCb3gucGFkZGluZ1JpZ2h0KTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpbWl6ZUZvckhlaWdodCA9IE1hdGguZmxvb3IoKGZvbnRTaXplIC8gbm9kZS5vZmZzZXRIZWlnaHQpICogY29udGFpbmVySGVpZ2h0KTtcbiAgICBjb25zdCBvcHRpbWl6ZUZvcldpZHRoID0gTWF0aC5mbG9vcigoZm9udFNpemUgLyBub2RlLm9mZnNldFdpZHRoKSAqIGNvbnRhaW5lcldpZHRoKTtcblxuICAgIC8vIHRoZSB8fCAxIGlzIGEgZmFsbGJhY2sgdG8gcHJldmVudCBmb250U2l6ZSBmcm9tIGJlaW5nIHNldCB0byB6ZXJvLCB3aGljaCBmdWJhcnMgdGhpbmdzXG4gICAgbm9kZS5zdHlsZS5mb250U2l6ZSA9IChNYXRoLm1pbihpbnN0YW5jZS5wcm9wcy5tYXhGb250U2l6ZSwgb3B0aW1pemVGb3JIZWlnaHQsIG9wdGltaXplRm9yV2lkdGgpIHx8IDEpICsgJ3B4Jztcbn1cblxuZnVuY3Rpb24gaGFuZGxlV2luZG93UmVzaXplKCkge1xuICAgIGluc3RhbmNlcy5mb3JFYWNoKChpbnN0YW5jZSkgPT4gcmVzY2FsZShpbnN0YW5jZSkpO1xufVxuXG5mdW5jdGlvbiByZWdpc3Rlckluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgaWYgKGluc3RhbmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVdpbmRvd1Jlc2l6ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaW5zdGFuY2VzLnB1c2goaW5zdGFuY2UpO1xufVxuXG5mdW5jdGlvbiB1bnJlZ2lzdGVySW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICBpbnN0YW5jZXMuc3BsaWNlKGluc3RhbmNlcy5pbmRleE9mKGluc3RhbmNlKSwgMSk7XG5cbiAgICBpZiAoaW5zdGFuY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlV2luZG93UmVzaXplLCB0cnVlKTtcbiAgICB9XG59XG5cbi8qKlxuIyBGaXR0ZWRUZXh0XG5fX0ZpdCBnaXZlbiB0ZXh0IGluc2lkZSBhIHBhcmVudCBjb250YWluZXIsIG9iZXlpbmcgaW1wbGljdCBhbmQgZXhwbGljaXQgY29uc3RyYWludHMuX19cblxuVGhlIG1vc3QgY29tbW9uIHVzZSBjYXNlIGZvciB0aGlzIGNsYXNzIGlzIGZpdHRpbmcgc2luZ2xlLWxpbmUgdGV4dCBvZiB1bmtub3duL3ZhcmlhYmxlIGxlbmd0aCBpbnRvIGEgYnV0dG9uIG9yIGhlYWRpbmcgd2l0aCBmaW5pdGUgYm91bmRhcmllcy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml0dGVkVGV4dCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgdmFsaWQgSFRNTCB0YWcgbmFtZSBvciBhIFJlYWN0IGNvbXBvbmVudCBmYWN0b3J5LCBhbnl0aGluZyB0aGF0IGNhbiBiZSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBSZWFjdC5jcmVhdGVFbGVtZW50YFxuICAgICAgICAgKi9cbiAgICAgICAgY29tcG9uZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFuIHVwcGVyIGJvdW5kIChpbiBwaXhlbHMpIGZvciBob3cgbGFyZ2UgdGhlIHRleHQgaXMgYWxsb3dlZCB0byBncm93XG4gICAgICAgICAqL1xuICAgICAgICBtYXhGb250U2l6ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBjb21wb25lbnQ6ICdzcGFuJyxcbiAgICAgICAgbWF4Rm9udFNpemU6IE51bWJlci5NQVhfVkFMVUUsXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEZpdHRlZFRleHQuZGVmYXVsdFByb3BzKVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHJlc2NhbGUodGhpcyk7XG5cbiAgICAgICAgLy8gdGhlcmUgYXJlIGxpa2VseSB0byBiZSBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgdGhpcyBjb21wb25lbnQgb24gYSBwYWdlLCBzbyBpdCBtYWtlcyBzZW5zZSB0byBqdXN0IHVzZVxuICAgICAgICAvLyBhIHNoYXJlZCBnbG9iYWwgcmVzaXplIGxpc3RlbmVyIGluc3RlYWQgb2YgZWFjaCBjb21wb25lbnQgaGF2aW5nIGl0cyBvd25cbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIHJlc2NhbGUodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHVucmVnaXN0ZXJJbnN0YW5jZSh0aGlzKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBGaXR0ZWRUZXh0LmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi10ZXh0JywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgIDwvdGhpcy5wcm9wcy5jb21wb25lbnQ+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbi8qKlxuIyBJbWFnZVxuX19BbiBpbWFnZSBibG9jayB3aXRoIHBsYWNlaG9sZGVyIHN1cHBvcnQgZm9yIGxvYWRpbmcgYW5kIGZhbGxiYWNrIHNjZW5hcmlvcy5fX1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBzdGF0dXMgPSB7XG4gICAgICAgIExPQURJTkc6ICdMT0FESU5HJyxcbiAgICAgICAgTE9BREVEOiAnTE9BREVEJyxcbiAgICAgICAgRVJST1I6ICdFUlJPUicsXG4gICAgfVxuXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgd3JpdHRlbiBkZXNjcmlwdGlvbiBvZiB0aGUgaW1hZ2UgZm9yIHNlYXJjaCBlbmdpbmVzLCBob3ZlcnRleHQgYW5kIHRob3NlIHVzaW5nIGFjY2Vzc2liaWxpdHkgdGVjaG5vbG9naWVzOyBhcHBsaWVkIHRvIHRoZSBgLmItaW1hZ2VgIGFzIHRoZSBIVE1MIGF0dHJpYnV0ZXMgYGFsdGAgb3IgYHRpdGxlYCwgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIHJlbmRlcmVkIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGFsdDogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZW1pdHMgdGhlIGltYWdlIGFzIGEgYDxkaXY+YCB3aXRoIGBiYWNrZ3JvdW5kLWltYWdlYCBjc3MgcHJvcGVydHkgc2V0IGluc3RlYWQgb2YgYDxpbWc+YFxuICAgICAgICAgKi9cbiAgICAgICAgZGlzcGxheUFzQmFja2dyb3VuZEltYWdlOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItaW1hZ2VgIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGltYWdlUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgdmFsaWQgcGF0aCB0byB0aGUgZGVzaXJlZCBpbWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgc3JjOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLWltYWdlLXN0YXR1c2Agbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdHVzUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgYWx0OiBudWxsLFxuICAgICAgICBkaXNwbGF5QXNCYWNrZ3JvdW5kSW1hZ2U6IGZhbHNlLFxuICAgICAgICBpbWFnZVByb3BzOiB7fSxcbiAgICAgICAgc3JjOiAnYWJvdXQ6YmxhbmsnLFxuICAgICAgICBzdGF0dXNQcm9wczoge30sXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKEltYWdlLmRlZmF1bHRQcm9wcylcblxuICAgIHN0YXRlID0ge1xuICAgICAgICBzdGF0dXM6IEltYWdlLnN0YXR1cy5MT0FESU5HLFxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcHMuc3JjICE9PSB0aGlzLnByb3BzLnNyYykge1xuICAgICAgICAgICAgdGhpcy5yZXNldFByZWxvYWRlcigpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RhdHVzOiBJbWFnZS5zdGF0dXMuTE9BRElOR30pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMucHJlbG9hZCgpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5wcmVsb2FkKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMucmVzZXRQcmVsb2FkZXIoKTtcbiAgICB9XG5cbiAgICByZXNldFByZWxvYWRlcigpIHtcbiAgICAgICAgdGhpcy5sb2FkZXIub25sb2FkID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2FkZXIub25lcnJvciA9IG51bGw7XG4gICAgICAgIHRoaXMubG9hZGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBwcmVsb2FkKCkge1xuICAgICAgICBpZiAodGhpcy5sb2FkZXIpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdGhpcy5sb2FkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgICAgICB0aGlzLmxvYWRlci5vbmxvYWQgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHtzdGF0dXM6IEltYWdlLnN0YXR1cy5MT0FERUR9KTtcbiAgICAgICAgdGhpcy5sb2FkZXIub25lcnJvciA9ICgpID0+IHRoaXMuc2V0U3RhdGUoe3N0YXR1czogSW1hZ2Uuc3RhdHVzLkVSUk9SfSk7XG5cbiAgICAgICAgdGhpcy5sb2FkZXIuc3JjID0gdGhpcy5wcm9wcy5zcmM7XG4gICAgfVxuXG4gICAgcmVuZGVySW1hZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRpc3BsYXlBc0JhY2tncm91bmRJbWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmltYWdlUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0naW1hZ2UnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItaW1hZ2UnLCB0aGlzLnByb3BzLmltYWdlUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuYWx0fVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5wcm9wcy5pbWFnZVByb3BzLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7dGhpcy5wcm9wcy5zcmN9KWAsXG4gICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5pbWFnZVByb3BzfVxuICAgICAgICAgICAgICAgIHJlZj0naW1hZ2UnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1pbWFnZScsIHRoaXMucHJvcHMuaW1hZ2VQcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIHNyYz17dGhpcy5wcm9wcy5zcmN9XG4gICAgICAgICAgICAgICAgYWx0PXt0aGlzLnByb3BzLmFsdH1cbiAgICAgICAgICAgICAgICBvbkxvYWQ9e25vb3B9XG4gICAgICAgICAgICAgICAgb25FcnJvcj17bm9vcH0gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJTdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IHsuLi50aGlzLnByb3BzLnN0YXR1c1Byb3BzfVxuICAgICAgICAgICAgICAgICByZWY9J3N0YXR1cydcbiAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1pbWFnZS1zdGF0dXMnLCB0aGlzLnByb3BzLnN0YXR1c1Byb3BzLmNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAnYi1pbWFnZS1sb2FkaW5nJzogdGhpcy5zdGF0ZS5zdGF0dXMgPT09IEltYWdlLnN0YXR1cy5MT0FESU5HLFxuICAgICAgICAgICAgICAgICAgICAnYi1pbWFnZS1sb2FkZWQnOiB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gSW1hZ2Uuc3RhdHVzLkxPQURFRCxcbiAgICAgICAgICAgICAgICAgICAgJ2ItaW1hZ2UtZXJyb3InOiB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gSW1hZ2Uuc3RhdHVzLkVSUk9SLFxuICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgcm9sZT0ncHJlc2VudGF0aW9uJyAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBJbWFnZS5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLWltYWdlLXdyYXBwZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckltYWdlKCl9XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyU3RhdHVzKCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImV4cG9ydCBkZWZhdWx0ICh0ZXN0KSA9PiB0eXBlb2YgdGVzdCA9PT0gJ3N0cmluZyc7XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBpc1N0cmluZyBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtc3RyaW5nL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuXG4vKipcbiMgSW5wdXRcbl9fQW4gaW5wdXQgY29udHJvbCB3aXRoIHBsYWNlaG9sZGVyIGVtdWxhdGlvbiBmb3Igbm9uLXN1cHBvcnRpbmcgcGxhdGZvcm1zLl9fXG5cbklucHV0IGFic3RyYWN0cyBhd2F5IHRoZSBjcm9zcy1wbGF0Zm9ybSBkaWZmZXJlbmNlcyBvZiBwbGFjZWhvbGRlciBzdHlsaW5nIGFuZCBiZWhhdmlvcnMsIGZvciBleGFtcGxlOiBJbnRlcm5ldCBFeHBsb3JlciBkaXNtaXNzZXMgbmF0aXZlIHBsYWNlaG9sZGVycyBvbiBpbnB1dCBmb2N1cyBhbmQgb3RoZXIgcGxhdGZvcm1zIGRvIG5vdC4gVGhpcyBjb21wb25lbnQgZW5zdXJlcyB0aGF0IHRleHQgaW5wdXQgY29udHJvbHMgd2lsbCBmZWVsIGFuZCBiZWhhdmUgc2ltaWxhcmx5IG9uIG1vcmUgZGV2aWNlcy5cblxuIyMgQ29tcG9uZW50IEluc3RhbmNlIE1ldGhvZHNcblxuV2hlbiB1c2luZyBgSW5wdXRgIGluIHlvdXIgcHJvamVjdCwgeW91IG1heSBjYWxsIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyBvbiBhIHJlbmRlcmVkIGluc3RhbmNlIG9mIHRoZSBjb21wb25lbnQuIFVzZSBbYHJlZnNgXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3JlZnMtYW5kLXRoZS1kb20uaHRtbCkgdG8gZ2V0IHRoZSBpbnN0YW5jZS5cblxuLSBfX2dldFZhbHVlKClfX1xuICByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBpbnB1dCBmaWVsZFxuXG4tIF9fc2V0VmFsdWUoc3RyaW5nKV9fXG4gIHByb2dyYW1tYXRpY2FsbHkgc2V0IHRoZSBpbnB1dCB2YWx1ZTsgdXNlZnVsIGZvciBjbGVhcmluZyBvdXQgdGhlIGlucHV0IGluIFwidW5jb250cm9sbGVkXCIgbW9kZSAtLSBub3RlIHRoYXQgZGlnZ2luZyBpbnRvIHRoZSBpbnRlcm5hbHMgYW5kIHNldHRpbmcgdGhlIGByZWZzLmZpZWxkLnZhbHVlID0gJydgIGRpcmVjdGx5IHdpbGwgbm90IHRyaWdnZXIgZXZlbnRzIGFuZCBtZXNzZXMgdXAgdGhlIGludGVybmFsIHN0YXRlIG9mIHRoZSBjb21wb25lbnRcblxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnB1dCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0cmlnZ2VycyB0aGUgcGxhY2Vob2xkZXIgdG8gZGlzYXBwZWFyIHdoZW4gdGhlIGlucHV0IGZpZWxkIGlzIGZvY3VzZWQsIHJlYXBwZWFycyB3aGVuIHRoZSB1c2VyIGhhcyB0YWJiZWQgYXdheSBvciBmb2N1cyBpcyBtb3ZlZFxuICAgICAgICAgKi9cbiAgICAgICAgaGlkZVBsYWNlaG9sZGVyT25Gb2N1czogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHByb3BzIHRvIGJlIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBpbnB1dCBub2RlLCBgLmItdGV4dHVhbC1pbnB1dGA7IHRoaXMgaW5jbHVkZXMgdGhlIHN0YW5kYXJkIHNldCBvZiBSZWFjdCBpbnB1dCBwcm9wcyBsaWtlIGBkZWZhdWx0VmFsdWVgLCBgdmFsdWVgLCBgbmFtZWAsIGBwbGFjZWhvbGRlcmAsIGBhdXRvRm9jdXNgLCBldGMuXG4gICAgICAgICAqL1xuICAgICAgICBpbnB1dFByb3BzOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgb25CbHVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgICAgIG9uRm9jdXM6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICAgICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgICAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIH0pLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGhpZGVQbGFjZWhvbGRlck9uRm9jdXM6IHRydWUsXG4gICAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgfSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoSW5wdXQuZGVmYXVsdFByb3BzKVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGlucHV0OiAnJyxcbiAgICAgICAgaXNDb250cm9sbGVkOiBpc1N0cmluZyh0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWUpLFxuICAgICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb250cm9sbGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldElucHV0VmFsdWUodGhpcy5wcm9wcy5pbnB1dFByb3BzLmRlZmF1bHRWYWx1ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wcy5pbnB1dFByb3BzLnZhbHVlICE9PSB0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShuZXh0UHJvcHMuaW5wdXRQcm9wcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRJbnB1dFZhbHVlID0gKHZhbHVlID0gJycpID0+IHRoaXMuc2V0U3RhdGUoe2lucHV0OiB2YWx1ZX0pXG5cbiAgICBnZXRWYWx1ZSA9ICgpID0+IHRoaXMucmVmcy5maWVsZC52YWx1ZVxuXG4gICAgc2V0VmFsdWUobmV4dFZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShuZXh0VmFsdWUpO1xuICAgICAgICB0aGlzLnJlZnMuZmllbGQudmFsdWUgPSBuZXh0VmFsdWU7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb250cm9sbGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAvLyBzaW11bGF0ZSBpbnB1dCBjaGFuZ2UgZXZlbnQgZmxvd1xuICAgICAgICAgICAgdGhpcy5yZWZzLmZpZWxkLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcsIHtidWJibGVzOiB0cnVlfSkpO1xuICAgICAgICAgICAgdGhpcy5yZWZzLmZpZWxkLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnLCB7YnViYmxlczogdHJ1ZX0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUJsdXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNGb2N1c2VkOiBmYWxzZX0pO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkJsdXIpID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25CbHVyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUZvY3VzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzRm9jdXNlZDogdHJ1ZX0pO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkZvY3VzKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uRm9jdXMoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlQ2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vIGZvciBcImNvbnRyb2xsZWRcIiBzY2VuYXJpb3MsIHVwZGF0ZXMgdG8gdGhlIGNhY2hlZCBpbnB1dCB0ZXh0IHNob3VsZCBjb21lXG4gICAgICAgIC8vIGV4Y2x1c2l2ZWx5IHZpYSBwcm9wcyAoY1dSUCkgc28gaXQgZXhhY3RseSBtaXJyb3JzIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uXG4gICAgICAgIC8vIHN0YXRlLCBvdGhlcndpc2UgYSByZS1yZW5kZXIgd2lsbCBvY2N1ciBiZWZvcmUgdGhlIG5ldyB0ZXh0IGhhcyBjb21wbGV0ZWQgaXRzXG4gICAgICAgIC8vIGZlZWRiYWNrIGxvb3AgYW5kIHRoZSBjdXJzb3IgcG9zaXRpb24gaXMgbG9zdFxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0NvbnRyb2xsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRQbGFjZWhvbGRlclRleHQoKSB7XG4gICAgICAgIGNvbnN0IGlzTm9uRW1wdHkgPSB0aGlzLnN0YXRlLmlucHV0ICE9PSAnJztcbiAgICAgICAgY29uc3Qgc2hvdWxkU2hvd1BsYWNlaG9sZGVyID0gICB0aGlzLnByb3BzLmhpZGVQbGFjZWhvbGRlck9uRm9jdXMgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUuaXNGb2N1c2VkID09PSBmYWxzZSAmJiBpc05vbkVtcHR5ID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaXNOb25FbXB0eSA9PT0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIHNob3VsZFNob3dQbGFjZWhvbGRlciA/IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5wbGFjZWhvbGRlciA6ICcnO1xuICAgIH1cblxuICAgIHJlbmRlclBsYWNlaG9sZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiByZWY9J3BsYWNlaG9sZGVyJyBjbGFzc05hbWU9J2ItaW5wdXQtcGxhY2Vob2xkZXIgYi1pbnB1dCc+XG4gICAgICAgICAgICAgICAge3RoaXMuZ2V0UGxhY2Vob2xkZXJUZXh0KCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHtwcm9wc30gPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQocHJvcHMsIElucHV0LmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItaW5wdXQtd3JhcHBlcicsIHByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMuZ2V0UGxhY2Vob2xkZXJUZXh0KCl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclBsYWNlaG9sZGVyKCl9XG5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzLmlucHV0UHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0nZmllbGQnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItaW5wdXQnLCBwcm9wcy5pbnB1dFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtudWxsfVxuICAgICAgICAgICAgICAgICAgICBvbkJsdXI9e3RoaXMuaGFuZGxlQmx1cn1cbiAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5oYW5kbGVGb2N1c31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCIvKipcbiAqIFJldHVybnMgYW4gaW50ZXJzZWN0aW9uIG9mIHRoZSBmaXJzdCBhcmd1bWVudCBhZ2FpbnN0IHRoZSBzZWNvbmQgYXJndW1lbnQncyBrZXlzLlxuICogZS5nLiB1c2VkIGluIFR5cGVhaGVhZCB0byBpZGVudGlmeSB3aGljaCBwcm9wcyBhcmUgbWVhbnQgZm9yIElucHV0XG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBvYmoxXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iajJcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IGtleTogdmFsdWVzIGluIG9iajEgbWF0Y2hpbmcgdGhlIGtleXMgc3VwcGxpZWQgaW4gb2JqMlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbihvYmoxLCBvYmoyKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iajIpLnJlZHVjZSgoY2hpbGRQcm9wcywga2V5KSA9PiB7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqMSkge1xuICAgICAgICAgICAgY2hpbGRQcm9wc1trZXldID0gb2JqMVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNoaWxkUHJvcHM7XG5cbiAgICB9LCB7fSk7XG59XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IERpYWxvZyBmcm9tICcuLi9ib3VuZGxlc3MtZGlhbG9nL2luZGV4JztcbmltcG9ydCBQb3J0YWwgZnJvbSAnLi4vYm91bmRsZXNzLXBvcnRhbC9pbmRleCc7XG5pbXBvcnQgZXh0cmFjdENoaWxkUHJvcHMgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbi8qKlxuIyBNb2RhbFxuX19BIGJsb2NraW5nLCBmb2N1cy1zdGVhbGluZyBjb250YWluZXIuX19cblxuTW9kYWwgaXMgYW4gZW5oYW5jZW1lbnQgdXBvbiBbRGlhbG9nXShodHRwczovL2dpdGh1Yi5jb20vZW5pZ21hLWlvL2JvdW5kbGVzcy9ibG9iL21hc3Rlci9wYWNrYWdlcy9ib3VuZGxlc3MtZGlhbG9nL1JFQURNRS5tZCkuIFR5cGljYWxseSwgYSBtYXNraW5nIGxheWVyIGlzIHByb3ZpZGVkIHRvIG9ic2N1cmUgdGhlIHJlc3Qgb2YgdGhlIHBhZ2UgaW4gc29tZSBmYXNoaW9uLCB3aGlsZSBhbHNvIGJsb2NraW5nIG91dHNpZGUgY2xpY2sgYW5kIGtleXN0cm9rZSBhY2Nlc3MgdW50aWwgdGhlIG1vZGFsIGlzIGRpc21pc3NlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKiogTW9kYWwgc3VwcG9ydHMgYWxsIFtEaWFsb2cgcHJvcHNdKGh0dHBzOi8vZ2l0aHViLmNvbS9lbmlnbWEtaW8vYm91bmRsZXNzL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2JvdW5kbGVzcy1kaWFsb2cvUkVBRE1FLm1kI3Byb3BzKSAqL1xuICAgICAgICAuLi5EaWFsb2cucHJvcFR5cGVzLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1tb2RhbC1tYXNrYCBIVE1MIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIG1hc2tQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItbW9kYWxgIEhUTUwgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgbW9kYWxQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55L2FsbCBzdXBwb3J0ZWQgW1BvcnRhbCBwcm9wc10oaHR0cHM6Ly9naXRodWIuY29tL2VuaWdtYS1pby9ib3VuZGxlc3MvYmxvYi9tYXN0ZXIvcGFja2FnZXMvYm91bmRsZXNzLXBvcnRhbC9SRUFETUUubWQjcHJvcHMpXG4gICAgICAgICAqL1xuICAgICAgICBwb3J0YWxQcm9wczogUHJvcFR5cGVzLnNoYXBlKFBvcnRhbC5wcm9wVHlwZXMpLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIC4uLkRpYWxvZy5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGNhcHR1cmVGb2N1czogdHJ1ZSxcbiAgICAgICAgbWFza1Byb3BzOiB7fSxcbiAgICAgICAgbW9kYWxQcm9wczoge30sXG4gICAgICAgIHBvcnRhbFByb3BzOiB7fSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoTW9kYWwuZGVmYXVsdFByb3BzKVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFBvcnRhbCB7Li4ucHJvcHMucG9ydGFsUHJvcHN9PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgey4uLm9taXQocHJvcHMsIE1vZGFsLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgICAgIHJlZj17KG5vZGUpID0+ICh0aGlzLiRtb2RhbCA9IG5vZGUpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLW1vZGFsLXdyYXBwZXInLCBwcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzLm1hc2tQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItbW9kYWwtbWFzaycsIHByb3BzLm1hc2tQcm9wcy5jbGFzc05hbWUpfSAvPlxuXG4gICAgICAgICAgICAgICAgICAgIDxEaWFsb2dcbiAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5leHRyYWN0Q2hpbGRQcm9wcyhwcm9wcywgRGlhbG9nLmRlZmF1bHRQcm9wcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4ucHJvcHMubW9kYWxQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItbW9kYWwnLCBwcm9wcy5tb2RhbFByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvUG9ydGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIElORklOSVRZID0gMSAvIDAsXG4gICAgTUFYX0lOVEVHRVIgPSAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOCxcbiAgICBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGludGVnZXIuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uXG4gKiBbYE51bWJlci5pc0ludGVnZXJgXShodHRwczovL21kbi5pby9OdW1iZXIvaXNJbnRlZ2VyKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBpbnRlZ2VyLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNJbnRlZ2VyKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNJbnRlZ2VyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzSW50ZWdlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNJbnRlZ2VyKCczJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0ludGVnZXIodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA9PSB0b0ludGVnZXIodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIGZpbml0ZSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEyLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0Zpbml0ZSgzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9GaW5pdGUoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvRmluaXRlKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b0Zpbml0ZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiAwO1xuICB9XG4gIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICBpZiAodmFsdWUgPT09IElORklOSVRZIHx8IHZhbHVlID09PSAtSU5GSU5JVFkpIHtcbiAgICB2YXIgc2lnbiA9ICh2YWx1ZSA8IDAgPyAtMSA6IDEpO1xuICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGludGVnZXIuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9JbnRlZ2VyYF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvaW50ZWdlcikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0ludGVnZXIoMy4yKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDBcbiAqXG4gKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9JbnRlZ2VyKCczLjInKTtcbiAqIC8vID0+IDNcbiAqL1xuZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSB0b0Zpbml0ZSh2YWx1ZSksXG4gICAgICByZW1haW5kZXIgPSByZXN1bHQgJSAxO1xuXG4gIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSW50ZWdlcjtcbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge2ZpbmRET01Ob2RlfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uL2JvdW5kbGVzcy1idXR0b24vaW5kZXgnO1xuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuXG4vKipcbiMgU2VnbWVudGVkQ29udHJvbFxuX19BIGNvbnRyb2wgY29udGFpbmluZyBtdWx0aXBsZSBidXR0b25zLCBvbmx5IG9uZSBvZiB3aGljaCBjYW4gYmUgYWN0aXZlIGF0IGEgdGltZS5fX1xuXG5TZWdtZW50ZWRDb250cm9sIGlzIGltcGxlbWVudGVkIGFzIGEgXCJjb250cm9sbGVkIGNvbXBvbmVudFwiLCBtZWFuaW5nIGl0IGlzIGEgZGlyZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtb2RlbCBkYXRhIHBhc3NlZCBpbnNpZGUuIFVzZXIgaW50ZXJhY3Rpb24gd2lsbCBidWJibGUgY2hhbmdlcyBpbiB0aGUgZm9ybSBvZiBgb25PcHRpb25TZWxlY3RlZGAgdGhhdCBhIGNvbnRyb2xsZXIgdmlldyBtdXN0IGludGVyY2VwdCBhbmQgYXBwbHkgYWdhaW5zdCB0aGUgZGF0YSBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VnbWVudGVkQ29udHJvbCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIGNoaWxkIGVsZW1lbnQgYmVjb21lcyBzZWxlY3RlZDsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uT3B0aW9uU2VsZWN0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgYmFja2luZyBkYXRhIGZvciB0aGUgc2VnbWVudHMgb2YgdGhlIHJlbmRlcmVkIGNvbnRyb2xcblxuICAgICAgICAgKiA+IF9fVmFsaWRhdGlvbiBDcml0ZXJpYTpfX1xuICAgICAgICAgKiA+XG4gICAgICAgICAqID4gMS4gVGhlcmUgbXVzdCBiZSBhdCBsZWFzdCB0d28gYG9wdGlvbnNgIChhIHNlZ21lbnRlZCBjb250cm9sIHdpdGggb25lIGJ1dHRvbiBpcyBub3QgYWxsb3dlZClcbiAgICAgICAgICogPiAxLiBUaGVyZSBtdXN0IG9ubHkgYmUgb25lIGBvcHRpb25gIHdob3NlIGBzZWxlY3RlZGAgYXR0cmlidXRlIGlzIGB0cnVlYCAobXVsdGlwbGUgc2VsZWN0aW9ucyBhcmUgbm90IGFsbG93ZWQpXG4gICAgICAgICAqID4gMS4gRWFjaCBgdmFsdWVgIGF0dHJpYnV0ZSBtdXN0IGJlIHVuaXF1ZSBhY3Jvc3MgdGhlIHNldCBvZiBgb3B0aW9uc2BcblxuICAgICAgICAgKiAtIF9fb3B0aW9uc1tdLnNlbGVjdGVkX18gYEJvb2xlYW5gXG4gICAgICAgICAqIC0gX19vcHRpb25zW10udmFsdWVfXyBgU3RyaW5nYFxuICAgICAgICAgKiAtIF9fb3B0aW9uc1tdLmNvbnRlbnRfXyBgKmBcbiAgICAgICAgICAgKiB0aGUgY29udGVudCB0byBnbyBpbnNpZGUgdGhlIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9uczogZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25zKHByb3BzKSB7XG4gICAgICAgICAgICBpZiAocHJvcHMub3B0aW9ucy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYXQgbGVhc3QgdHdvIG9wdGlvbnMuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1pc3NpbmdTZWxlY3RlZCA9IHByb3BzLm9wdGlvbnMuc29tZSgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoJ3NlbGVjdGVkJyBpbiBvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAobWlzc2luZ1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYSBgc2VsZWN0ZWRgIHByb3AgZm9yIGVhY2ggb3B0aW9uLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc2VlblNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZVNlbGVjdGVkID0gcHJvcHMub3B0aW9ucy5zb21lKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWVuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VlblNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG11bHRpcGxlU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VuY291bnRlcmVkIG11bHRpcGxlIG9wdGlvbnMgd2l0aCBgc2VsZWN0ZWQ6IHRydWVgLiBUaGVyZSBjYW4gYmUgb25seSBvbmUuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9wcy5vcHRpb25zLnNvbWUoKG9wdGlvbikgPT4gdHlwZW9mIG9wdGlvbi52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYSBgdmFsdWVgIHByb3AgZm9yIGVhY2ggb3B0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIG9uT3B0aW9uU2VsZWN0ZWQ6IG5vb3AsXG4gICAgICAgIG9wdGlvbnM6IFtdLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhTZWdtZW50ZWRDb250cm9sLmRlZmF1bHRQcm9wcylcbiAgICBzdGF0aWMgaW50ZXJuYWxDaGlsZEtleXMgPSBbXG4gICAgICAgICdjb250ZW50JyxcbiAgICAgICAgJ3ZhbHVlJyxcbiAgICAgICAgJ3NlbGVjdGVkJyxcbiAgICBdXG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgaW5kZXhPZk9wdGlvbkluRm9jdXM6IG51bGwsXG4gICAgfVxuXG4gICAgY3VycmVudFZhbHVlKCkge1xuICAgICAgICBsZXQgdmFsdWU7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLnNvbWUoKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gb3B0aW9uLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRGb2N1cyhpbmRleCkge1xuICAgICAgICBmaW5kRE9NTm9kZSh0aGlzLnJlZnNbJ29wdGlvbl8kJyArIGluZGV4XSkuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBnZXROZXh0T3B0aW9uSW5kZXgoY3VycmVudE9wdGlvbkluZGV4KSB7XG4gICAgICAgIGxldCBuZXh0ID0gY3VycmVudE9wdGlvbkluZGV4ICsgMTtcblxuICAgICAgICByZXR1cm4gbmV4dCA8IHRoaXMucHJvcHMub3B0aW9ucy5sZW5ndGggPyBuZXh0IDogMDtcbiAgICB9XG5cbiAgICBnZXRQcmV2aW91c09wdGlvbkluZGV4KGN1cnJlbnRPcHRpb25JbmRleCkge1xuICAgICAgICBsZXQgcHJldmlvdXMgPSBjdXJyZW50T3B0aW9uSW5kZXggLSAxO1xuXG4gICAgICAgIHJldHVybiBwcmV2aW91cyA8IDAgPyB0aGlzLnByb3BzLm9wdGlvbnMubGVuZ3RoIC0gMSA6IHByZXZpb3VzO1xuICAgIH1cblxuICAgIGhhbmRsZU9wdGlvbkJsdXIob3B0aW9uLCBldmVudCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pbmRleE9mT3B0aW9uSW5Gb2N1cyA9PT0gdGhpcy5wcm9wcy5vcHRpb25zLmluZGV4T2Yob3B0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aW5kZXhPZk9wdGlvbkluRm9jdXM6IG51bGx9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9wdGlvbi5vbkJsdXIpKSB7XG4gICAgICAgICAgICBvcHRpb24ub25CbHVyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU9wdGlvbkNsaWNrKG9wdGlvbiwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbk9wdGlvblNlbGVjdGVkKG9wdGlvbi52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9uLm9uQ2xpY2spKSB7XG4gICAgICAgICAgICBvcHRpb24ub25DbGljayhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVPcHRpb25Gb2N1cyhvcHRpb24sIGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2luZGV4T2ZPcHRpb25JbkZvY3VzOiB0aGlzLnByb3BzLm9wdGlvbnMuaW5kZXhPZihvcHRpb24pfSk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9uLm9uRm9jdXMpKSB7XG4gICAgICAgICAgICBvcHRpb24ub25Gb2N1cyhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleTtcbiAgICAgICAgY29uc3QgYWN0aXZlSXRlbUluZGV4ID0gdGhpcy5zdGF0ZS5pbmRleE9mT3B0aW9uSW5Gb2N1cztcblxuICAgICAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1cyh0aGlzLmdldFByZXZpb3VzT3B0aW9uSW5kZXgoYWN0aXZlSXRlbUluZGV4KSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzKHRoaXMuZ2V0TmV4dE9wdGlvbkluZGV4KGFjdGl2ZUl0ZW1JbmRleCkpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlT3B0aW9uQ2xpY2sodGhpcy5wcm9wcy5vcHRpb25zW2FjdGl2ZUl0ZW1JbmRleF0pO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMub25LZXlEb3duKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbktleURvd24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyT3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMub3B0aW9ucy5tYXAoKGRlZmluaXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgey4uLm9taXQoZGVmaW5pdGlvbiwgU2VnbWVudGVkQ29udHJvbC5pbnRlcm5hbENoaWxkS2V5cyl9XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWNoZWNrZWQ9e1N0cmluZyhkZWZpbml0aW9uLnNlbGVjdGVkKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXsnb3B0aW9uXyQnICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIGtleT17ZGVmaW5pdGlvbi52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1zZWdtZW50ZWQtY29udHJvbC1vcHRpb24nLCBkZWZpbml0aW9uLmNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2Itc2VnbWVudGVkLWNvbnRyb2wtb3B0aW9uLXNlbGVjdGVkJzogZGVmaW5pdGlvbi5zZWxlY3RlZCxcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXtkZWZpbml0aW9uLnNlbGVjdGVkID8gJzAnIDogJy0xJ31cbiAgICAgICAgICAgICAgICAgICAgb25CbHVyPXt0aGlzLmhhbmRsZU9wdGlvbkJsdXIuYmluZCh0aGlzLCBkZWZpbml0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgb25QcmVzc2VkPXt0aGlzLmhhbmRsZU9wdGlvbkNsaWNrLmJpbmQodGhpcywgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuaGFuZGxlT3B0aW9uRm9jdXMuYmluZCh0aGlzLCBkZWZpbml0aW9uKX0+XG4gICAgICAgICAgICAgICAgICAgIHtkZWZpbml0aW9uLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgU2VnbWVudGVkQ29udHJvbC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICByb2xlPSdyYWRpb2dyb3VwJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2Itc2VnbWVudGVkLWNvbnRyb2wnLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck9wdGlvbnMoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtmaW5kRE9NTm9kZX0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBpc0ludGVnZXIgZnJvbSAnbG9kYXNoLmlzaW50ZWdlcic7XG5cbmltcG9ydCBBc3luYyBmcm9tICcuLi9ib3VuZGxlc3MtYXN5bmMvaW5kZXgnO1xuaW1wb3J0IFNlZ21lbnRlZENvbnRyb2wgZnJvbSAnLi4vYm91bmRsZXNzLXNlZ21lbnRlZC1jb250cm9sL2luZGV4JztcbmltcG9ydCBBcnJvd0tleU5hdmlnYXRpb24gZnJvbSAnLi4vYm91bmRsZXNzLWFycm93LWtleS1uYXZpZ2F0aW9uL2luZGV4JztcbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB1dWlkIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy11dWlkL2luZGV4JztcblxuY29uc3QgaWRlbnRpdHkgPSAoeCkgPT4geDtcblxuLyoqXG4jIFBhZ2luYXRpb25cbl9fVmlldyBhbmQgbmF2aWdhdGUgaGV0ZXJvZ2VuaW91cyBjb250ZW50IG9uZSBwYWdlIGF0IGEgdGltZS5fX1xuXG5QYWdpbmF0aW9uIGlzIGltcGxlbWVudGVkIGFzIGFuIGVuY2Fwc3VsYXRlZCB2aWV3IHN5c3RlbSwgYWNjZXB0aW5nIGFuIGFycmF5IG9mIGl0ZW1zIGFzIGlucHV0LlxuXG4jIyBDb21wb25lbnQgSW5zdGFuY2UgTWV0aG9kc1xuXG5XaGVuIHVzaW5nIGBQYWdpbmF0aW9uYCBpbiB5b3VyIHByb2plY3QsIHlvdSBtYXkgY2FsbCB0aGUgZm9sbG93aW5nIG1ldGhvZHMgb24gYSByZW5kZXJlZCBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50LiBVc2UgW2ByZWZzYF0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9yZWZzLWFuZC10aGUtZG9tLmh0bWwpIHRvIGdldCB0aGUgaW5zdGFuY2UuXG5cbi0gX19gY3VycmVudFBhZ2UoKWBfX1xuICByZXR1cm5zIHRoZSBfX19vbmVfX18taW5kZXhlZCBwYWdlIG51bWJlciBjdXJyZW50bHkgaW4gdmlld1xuXG4tIF9fYHBhZ2VUb0luZGV4KGluZGV4OiBudW1iZXIpYF9fXG4gIHJlbmRlcnMgdGhlIHBhZ2UgdGhhdCBjb250YWlucyB0aGUgX19femVyb19fXy1pbmRleGVkIGl0ZW1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnaW5hdGlvbiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBjb250cm9scyA9IHtcbiAgICAgICAgRklSU1Q6ICdGSVJTVCcsXG4gICAgICAgIFBSRVZJT1VTOiAnUFJFVklPVVMnLFxuICAgICAgICBORVhUOiAnTkVYVCcsXG4gICAgICAgIExBU1Q6ICdMQVNUJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcG9zaXRpb25zID0ge1xuICAgICAgICBBQk9WRTogJ0FCT1ZFJyxcbiAgICAgICAgQkVMT1c6ICdCRUxPVycsXG4gICAgICAgIEJPVEg6ICdCT1RIJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogYXJiaXRyYXJ5IGNvbnRlbnQgdG8gYmUgcmVuZGVyZWQgYWZ0ZXIgdGhlIGl0ZW1zIGluIHRoZSBET01cbiAgICAgICAgICovXG4gICAgICAgIGFmdGVyOiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYXJiaXRyYXJ5IGNvbnRlbnQgdG8gYmUgcmVuZGVyZWQgYmVmb3JlIHRoZSBpdGVtcyBpbiB0aGUgRE9NXG4gICAgICAgICAqL1xuICAgICAgICBiZWZvcmU6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbGxvd3MgZm9yIGFyYml0cmFyeSBjb250ZW50IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIGNvbnRyb2wgYXJlYVxuICAgICAgICAgKi9cbiAgICAgICAgY3VzdG9tQ29udHJvbENvbnRlbnQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2l0aCBhIGRlc2lyZWQgaXRlbSBpbmRleCB3aGVuIHRoYXQgaXRlbSBjb21lcyBpbnRvIHZpZXc7IGFjY2VwdHMgYSBgUHJvbWlzZWAgaWYgeW91IG5lZWQgdG8gZmV0Y2ggdGhlIHJvdyBhc3luY2hyb25vdXNseVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0SXRlbTogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRvZXMgbm90IHJlbmRlciB0aGUgcGFnaW5nIGNvbnRyb2xzIGlmIHRoZSBudW1iZXIgb2YgaXRlbXMgc3VwcGxpZWQgdG8gdGhlIHZpZXcgaXMgbGVzcy10aGFuLW9yLWVxdWFsLXRvIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gc2hvdyBwZXIgcGFnZSB2aWEgYHByb3BzLm51bUl0ZW1zUGVyUGFnZWBcbiAgICAgICAgICovXG4gICAgICAgIGhpZGVQYWdlcklmTm90TmVlZGVkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYSB1bmlxdWUgbmFtZSBmb3IgdGhlIGRhdGFzZXQgYmVpbmcgY29uc3VtZWQ7IHBhc3MgYSBkaWZmZXJlbnQgbmFtZSB0byBjYXVzZSB0aGUgdmlldyB0byBmdWxseSByZXNldCBhbmQgcHVsbCBicmFuZCBuZXcgZGF0YVxuICAgICAgICAgKi9cbiAgICAgICAgaWRlbnRpZmllcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgKF9vbmUtaW5kZXhlZF8pIG51bWJlciBvZiB0aGUgcGFnZSB0aGF0IHNob3VsZCBiZSBpbml0aWFsbHkgZGlzcGxheWVkOyBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHRvdGFsIG51bWJlciBvZiBwYWdlc1xuICAgICAgICAgKi9cbiAgICAgICAgaW5pdGlhbFBhZ2U6IGZ1bmN0aW9uIHZhbGlkYXRlSW5pdGlhbFBhZ2UocHJvcHMpIHtcbiAgICAgICAgICAgIGlmIChpc0ludGVnZXIocHJvcHMuaW5pdGlhbFBhZ2UpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ2Bpbml0aWFsUGFnZWAgbXVzdCBiZSBhbiBpbnRlZ2VyLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBudW1iZXJPZlBhZ2VzID0gTWF0aC5jZWlsKHByb3BzLnRvdGFsSXRlbXMgLyBwcm9wcy5udW1JdGVtc1BlclBhZ2UpO1xuXG4gICAgICAgICAgICBpZiAocHJvcHMuaW5pdGlhbFBhZ2UgPCAxIHx8IHByb3BzLmluaXRpYWxQYWdlID4gbnVtYmVyT2ZQYWdlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ2Bpbml0aWFsUGFnZWAgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kICcgKyBudW1iZXJPZlBhZ2VzICsgJy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYWxsb3dzIGZvciBhcmJpdHJhcnkgY29udGVudCB0byBiZSByZW5kZXJlZCBpbnRvIHBhZ2luYXRpb24gaXRlbXMgYXMgdGhleSdyZSBsb2FkaW5nIGlmIHRoZSBiYWNraW5nIGRhdGEgaXMgYSBgUHJvbWlzZWBcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1Mb2FkaW5nQ29udGVudDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIHNwZWNpZnkgaG93IGFuIGl0ZW0gc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBKU1gsIGlmIGl0IGlzIG5vdCBhbHJlYWR5IHJlbmRlcmFibGUgYnkgUmVhY3RcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1Ub0pTWENvbnZlcnRlckZ1bmM6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb250ZW50IHRvIGJlIGRpc3BsYXllZCBpbnNpZGUgb2YgdGhlIFwiRmlyc3QgcGFnZVwiIGNvbnRyb2wgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBqdW1wVG9GaXJzdENvbnRyb2xDb250ZW50OiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBkaXNwbGF5ZWQgaW5zaWRlIG9mIHRoZSBcIkxhc3QgcGFnZVwiIGNvbnRyb2wgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBqdW1wVG9MYXN0Q29udHJvbENvbnRlbnQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1wYWdpbmF0aW9uLWl0ZW0tbGlzdGAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdFdyYXBwZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBkaXNwbGF5ZWQgaW5zaWRlIG9mIHRoZSBcIk5leHQgcGFnZVwiIGNvbnRyb2wgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBuZXh0UGFnZUNvbnRyb2xDb250ZW50OiBQcm9wVHlwZXMubm9kZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIGJlIGRpc3BsYXllZCBvbiBlYWNoIHBhZ2U7IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm9cbiAgICAgICAgICovXG4gICAgICAgIG51bUl0ZW1zUGVyUGFnZTogZnVuY3Rpb24gdmFsaWRhdGVOdW1JdGVtc1BlclBhZ2UocHJvcHMpIHtcbiAgICAgICAgICAgIGlmIChpc0ludGVnZXIocHJvcHMubnVtSXRlbXNQZXJQYWdlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdgbnVtSXRlbXNQZXJQYWdlYCBtdXN0IGJlIGFuIGludGVnZXIuJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BzLm51bUl0ZW1zUGVyUGFnZSA8IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdgbnVtSXRlbXNQZXJQYWdlYCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGFnZXMgdG8gYmUgZGlzcGxheWVkIGluIHRoZSBjb250cm9sIGJhciBhdCBvbmUgdGltZVxuICAgICAgICAgKi9cbiAgICAgICAgbnVtUGFnZVRvZ2dsZXM6IFByb3BUeXBlcy5udW1iZXIsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRldGVybWluZXMgd2hldGhlciB0aGUgcGFnaW5hdGlvbiBjb250cm9scyBhcmUgZGlzcGxheWVkIGFib3ZlLCBiZWxvdywgb3IgYm90aCBhYm92ZSBhbmQgYmVsb3cgdGhlIGNvbnRlbnRcbiAgICAgICAgICovXG4gICAgICAgIHBvc2l0aW9uOiBQcm9wVHlwZXMub25lT2YoT2JqZWN0LmtleXMoUGFnaW5hdGlvbi5wb3NpdGlvbnMpKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBkaXNwbGF5ZWQgaW5zaWRlIG9mIHRoZSBcIlByZXZpb3VzIHBhZ2VcIiBjb250cm9sIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgcHJldmlvdXNQYWdlQ29udHJvbENvbnRlbnQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3aGV0aGVyIHRoZSBcIkZpcnN0IHBhZ2VcIiBjb250cm9sIGJ1dHRvbiBzaG91bGQgYmUgZGlzcGxheWVkXG4gICAgICAgICAqL1xuICAgICAgICBzaG93SnVtcFRvRmlyc3Q6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3aGV0aGVyIHRoZSBcIkxhc3QgcGFnZVwiIGNvbnRyb2wgYnV0dG9uIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICAgICAgICovXG4gICAgICAgIHNob3dKdW1wVG9MYXN0OiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVuZGVycyBhbiBlbGVtZW50IGNhbGxlZCBgLmItcGFnaW5hdGlvbi1jb250cm9sLXN0YXRlYCB0aGF0IGNvbnRhaW5zIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBwYWdpbmF0aW9uIGxpa2UgXCIxIG9mIDEwXCI7IGFsdGVybmF0aXZlbHksIHRoaXMgcHJvcCBhbHNvIGFjY2VwdHMgYSBmdW5jdGlvbiB0aGF0IGl0IHdpbGwgY2FsbCB3aXRoIHRoZSBjdXJyZW50UGFnZSBhbmQgdG90YWxQYWdlcyBmb3IgeW91IHRvIGZvcm1hdDpcblxuICAgICAgICAgKiBgYGBqc3hcbiAgICAgICAgICogc2hvd1BhZ2luYXRlZFN0YXRlPXtcbiAgICAgICAgICogICAgIChjdXJyZW50UGFnZSwgdG90YWxQYWdlcykgPT4gKFxuICAgICAgICAgKiAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb28nPlxuICAgICAgICAgKiAgICAgICAgICAgICBZb3UncmUgb24gcGFnZSB7Y3VycmVudFBhZ2V9IG9mIHt0b3RhbFBhZ2VzfSBwYWdlcyFcbiAgICAgICAgICogICAgICAgICA8L2Rpdj5cbiAgICAgICAgICogICAgIClcbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHNob3dQYWdpbmF0aW9uU3RhdGU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgU2VnbWVudGVkQ29udHJvbCBub2RlKHMpLCBgLmItcGFnaW5hdGlvbi1jb250cm9sc2BcbiAgICAgICAgICovXG4gICAgICAgIHRvZ2dsZVdyYXBwZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIHRvdGFsIG51bWJlciBvZiBpdGVtcyB0byBiZSBkaXNwbGF5ZWQgaW4gdGhlIHZpZXdcbiAgICAgICAgICovXG4gICAgICAgIHRvdGFsSXRlbXM6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBhZnRlcjogbnVsbCxcbiAgICAgICAgYmVmb3JlOiBudWxsLFxuICAgICAgICBjdXN0b21Db250cm9sQ29udGVudDogbnVsbCxcbiAgICAgICAgZ2V0SXRlbTogbm9vcCxcbiAgICAgICAgaGlkZVBhZ2VySWZOb3ROZWVkZWQ6IGZhbHNlLFxuICAgICAgICBpZGVudGlmaWVyOiB1dWlkKCksXG4gICAgICAgIGluaXRpYWxQYWdlOiAxLFxuICAgICAgICBpdGVtTG9hZGluZ0NvbnRlbnQ6IG51bGwsXG4gICAgICAgIGl0ZW1Ub0pTWENvbnZlcnRlckZ1bmM6IGlkZW50aXR5LFxuICAgICAgICBqdW1wVG9GaXJzdENvbnRyb2xDb250ZW50OiAnwqsgRmlyc3QnLFxuICAgICAgICBqdW1wVG9MYXN0Q29udHJvbENvbnRlbnQ6ICdMYXN0IMK7JyxcbiAgICAgICAgbGlzdFdyYXBwZXJQcm9wczoge30sXG4gICAgICAgIG5leHRQYWdlQ29udHJvbENvbnRlbnQ6ICdOZXh0IOKAuicsXG4gICAgICAgIG51bUl0ZW1zUGVyUGFnZTogMTAsXG4gICAgICAgIG51bVBhZ2VUb2dnbGVzOiA1LFxuICAgICAgICBwb3NpdGlvbjogUGFnaW5hdGlvbi5wb3NpdGlvbnMuQUJPVkUsXG4gICAgICAgIHByZXZpb3VzUGFnZUNvbnRyb2xDb250ZW50OiAn4oC5IFByZXZpb3VzJyxcbiAgICAgICAgc2hvd0p1bXBUb0ZpcnN0OiB0cnVlLFxuICAgICAgICBzaG93SnVtcFRvTGFzdDogdHJ1ZSxcbiAgICAgICAgc2hvd1BhZ2luYXRpb25TdGF0ZTogdHJ1ZSxcbiAgICAgICAgdG9nZ2xlV3JhcHBlclByb3BzOiB7fSxcbiAgICAgICAgdG90YWxJdGVtczogbnVsbCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoUGFnaW5hdGlvbi5kZWZhdWx0UHJvcHMpXG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucHJvcHMuaW5pdGlhbFBhZ2UsXG4gICAgICAgIHRhcmdldEluZGV4OiAodGhpcy5wcm9wcy5pbml0aWFsUGFnZSAtIDEpICogdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2UsXG4gICAgfVxuXG4gICAgY3VycmVudFBhZ2UgPSAoKSA9PiB0aGlzLnN0YXRlLmN1cnJlbnRQYWdlXG4gICAgZ2V0UGFnZUZvckluZGV4ID0gKGluZGV4LCBpdGVtc1BlclBhZ2UgPSB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZSkgPT4gTWF0aC5jZWlsKChpbmRleCArIDEpIC8gaXRlbXNQZXJQYWdlKVxuICAgIHRvdGFsUGFnZXMgPSAoKSA9PiBNYXRoLmNlaWwodGhpcy5wcm9wcy50b3RhbEl0ZW1zIC8gdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2UpXG5cbiAgICBmaXJzdFZpc2libGVJdGVtSW5kZXggPSAoKSA9PiAodGhpcy5jdXJyZW50UGFnZSgpIC0gMSkgKiB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIGlmIChwcmV2U3RhdGUuY3VycmVudFBhZ2UgIT09IHRoaXMuY3VycmVudFBhZ2UoKSkge1xuICAgICAgICAgICAgZmluZERPTU5vZGUodGhpcy5yZWZzLml0ZW1fMCkuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKSB7XG4gICAgICAgIGNvbnN0IG9sZFByb3BzID0gdGhpcy5wcm9wcztcblxuICAgICAgICAvLyB1c2UgdHJhbnNhY3Rpb25hbCBgc2V0U3RhdGUoKWAgc3ludGF4IHRvIGVuc3VyZSB0aGF0IHBlbmRpbmcgc3RhdGUgdXBkYXRlcyBhcmUgaG9ub3JlZCxcbiAgICAgICAgLy8gbGlrZSB0aG9zZSBmcm9tIGBwYWdlVG9JbmRleCgpYFxuICAgICAgICB0aGlzLnNldFN0YXRlKChzdGF0ZSwgcHJvcHMpID0+IHtcbiAgICAgICAgICAgIC8vIE5PVEU6IGBwcm9wc2AgaGVyZSBpcyB0ZWNobmljYWxseSB0aGUgYG5leHRQcm9wc2AgeW91J2QgcmVjZWl2ZSBmcm9tIHRoZSBmaXJzdCBjV1JQIGFyZ3VtZW50XG4gICAgICAgICAgICAvLyBzbyB0aGF0J3Mgd2h5IHdlJ3JlIGNhY2hpbmcgYG9sZFByb3BzYCBvdXRzaWRlIHRoZSBgc2V0U3RhdGVgXG4gICAgICAgICAgICBpZiAocHJvcHMuaWRlbnRpZmllciAhPT0gb2xkUHJvcHMuaWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleDogMCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLmdldFBhZ2VGb3JJbmRleChzdGF0ZS50YXJnZXRJbmRleCwgcHJvcHMubnVtSXRlbXNQZXJQYWdlKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRJbmRleDogc3RhdGUudGFyZ2V0SW5kZXgsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwYWdlVG9JbmRleCA9IChpKSA9PiB7XG4gICAgICAgIGlmIChpIDwgMCB8fCBpID49IHRoaXMucHJvcHMudG90YWxJdGVtcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihgQ2Fubm90IHBhZ2UgdG8gaW52YWxpZCBpbmRleCAke2l9LmApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5nZXRQYWdlRm9ySW5kZXgoaSksXG4gICAgICAgICAgICB0YXJnZXRJbmRleDogaSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlUGFnZUJ1dHRvbk9wdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXTtcbiAgICAgICAgY29uc3QgY3VycmVudFBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlKCk7XG4gICAgICAgIGNvbnN0IG51bVBhZ2VUb2dnbGVzID0gdGhpcy5wcm9wcy5udW1QYWdlVG9nZ2xlcztcbiAgICAgICAgY29uc3QgdG90YWxQYWdlcyA9IHRoaXMudG90YWxQYWdlcygpO1xuICAgICAgICBjb25zdCBzdGFydFBhZ2UgPSBjdXJyZW50UGFnZSAtICgoY3VycmVudFBhZ2UgLSAxKSAlIG51bVBhZ2VUb2dnbGVzKTtcbiAgICAgICAgY29uc3QgZW5kUGFnZSA9IE1hdGgubWluKHN0YXJ0UGFnZSArIG51bVBhZ2VUb2dnbGVzIC0gMSwgdG90YWxQYWdlcyk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2hvd1BhZ2luYXRpb25TdGF0ZSkge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29udGVudDogaXNGdW5jdGlvbih0aGlzLnByb3BzLnNob3dQYWdpbmF0aW9uU3RhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLnNob3dQYWdpbmF0aW9uU3RhdGUoY3VycmVudFBhZ2UsIHRvdGFsUGFnZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHtjdXJyZW50UGFnZX0gb2YgJHt0b3RhbFBhZ2VzfWAsXG4gICAgICAgICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2ItcGFnaW5hdGlvbi1jb250cm9sIGItcGFnaW5hdGlvbi1jb250cm9sLXN0YXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2hvd0p1bXBUb0ZpcnN0KSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnByb3BzLmp1bXBUb0ZpcnN0Q29udHJvbENvbnRlbnQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFBhZ2luYXRpb24uY29udHJvbHMuRklSU1QsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuY3VycmVudFBhZ2UoKSA9PT0gMSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiLXBhZ2luYXRpb24tY29udHJvbCBiLXBhZ2luYXRpb24tY29udHJvbC1maXJzdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnByb3BzLnByZXZpb3VzUGFnZUNvbnRyb2xDb250ZW50LFxuICAgICAgICAgICAgdmFsdWU6IFBhZ2luYXRpb24uY29udHJvbHMuUFJFVklPVVMsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5jdXJyZW50UGFnZSgpID09PSAxLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtcHJldmlvdXMnLFxuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRQYWdlOyBpIDw9IGVuZFBhZ2U7IGkrKykge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiLXBhZ2luYXRpb24tY29udHJvbCcsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFnZS1udW1iZXInOiBpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBpID09PSB0aGlzLmN1cnJlbnRQYWdlKCksXG4gICAgICAgICAgICAgICAgY29udGVudDogaSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucHJvcHMubmV4dFBhZ2VDb250cm9sQ29udGVudCxcbiAgICAgICAgICAgIHZhbHVlOiBQYWdpbmF0aW9uLmNvbnRyb2xzLk5FWFQsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5jdXJyZW50UGFnZSgpID09PSB0b3RhbFBhZ2VzLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtbmV4dCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNob3dKdW1wVG9MYXN0KSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnByb3BzLmp1bXBUb0xhc3RDb250cm9sQ29udGVudCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogUGFnaW5hdGlvbi5jb250cm9scy5MQVNULFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmN1cnJlbnRQYWdlKCkgPT09IHRvdGFsUGFnZXMsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtbGFzdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmN1c3RvbUNvbnRyb2xDb250ZW50KSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnByb3BzLmN1c3RvbUNvbnRyb2xDb250ZW50LFxuICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkKCksXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYi1wYWdpbmF0aW9uLWNvbnRyb2wgYi1wYWdpbmF0aW9uLWNvbnRyb2wtY3VzdG9tJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVJdGVtcygpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgY29uc3QgZmlyc3RJdGVtSW5kZXggPSB0aGlzLmZpcnN0VmlzaWJsZUl0ZW1JbmRleCgpO1xuICAgICAgICBjb25zdCBsYXN0SXRlbUluZGV4ID0gTWF0aC5taW4odGhpcy5wcm9wcy50b3RhbEl0ZW1zLCBmaXJzdEl0ZW1JbmRleCArIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlKSAtIDE7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IGZpcnN0SXRlbUluZGV4OyBpIDw9IGxhc3RJdGVtSW5kZXg7IGkgKz0gMSkge1xuICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXMucHVzaCh7ZGF0YTogdGhpcy5wcm9wcy5nZXRJdGVtKGkpfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2VuZXJhdGVkSXRlbXM7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2sgPSAodmFsdWUpID0+IHtcbiAgICAgICAgbGV0IG5leHRUYXJnZXRJbmRleDtcblxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgIGNhc2UgUGFnaW5hdGlvbi5jb250cm9scy5GSVJTVDpcbiAgICAgICAgICAgIG5leHRUYXJnZXRJbmRleCA9IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYWdpbmF0aW9uLmNvbnRyb2xzLlBSRVZJT1VTOlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gdGhpcy5maXJzdFZpc2libGVJdGVtSW5kZXgoKSAtIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFnaW5hdGlvbi5jb250cm9scy5ORVhUOlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gdGhpcy5maXJzdFZpc2libGVJdGVtSW5kZXgoKSArIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFnaW5hdGlvbi5jb250cm9scy5MQVNUOlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gdGhpcy5wcm9wcy50b3RhbEl0ZW1zIC0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbmV4dFRhcmdldEluZGV4ID0gcGFyc2VJbnQodmFsdWUsIDEwKSAqIHRoaXMucHJvcHMubnVtSXRlbXNQZXJQYWdlIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuZ2V0UGFnZUZvckluZGV4KG5leHRUYXJnZXRJbmRleCksXG4gICAgICAgICAgICB0YXJnZXRJbmRleDogbmV4dFRhcmdldEluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzLmxpc3RXcmFwcGVyUHJvcHM7XG4gICAgICAgIGNvbnN0IGluZGV4T2Zmc2V0ID0gdGhpcy5wcm9wcy5udW1JdGVtc1BlclBhZ2UgKiAodGhpcy5jdXJyZW50UGFnZSgpIC0gMSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxBcnJvd0tleU5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICAgICAgcmVmPSdpdGVtTGlzdCdcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXBhZ2luYXRpb24taXRlbXMnLCBwcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5nZW5lcmF0ZUl0ZW1zKCkubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEFzeW5jXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtgaXRlbV8ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXBhZ2luYXRpb24taXRlbScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ItcGFnaW5hdGlvbi1pdGVtLWV2ZW4nOiBpbmRleCAlIDIgPT09IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiLXBhZ2luYXRpb24taXRlbS1vZGQnOiBpbmRleCAlIDIgIT09IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydFRvSlNYRnVuYz17dGhpcy5wcm9wcy5pdGVtVG9KU1hDb252ZXJ0ZXJGdW5jfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9e2l0ZW0uZGF0YX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXBhZ2luYXRpb24taW5kZXg9e2luZGV4T2Zmc2V0ICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0NvbnRlbnQ9e3RoaXMucHJvcHMuaXRlbUxvYWRpbmdDb250ZW50fSAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9BcnJvd0tleU5hdmlnYXRpb24+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyQ29udHJvbHMocG9zaXRpb24pIHtcbiAgICAgICAgaWYgKCAgIHRoaXMucHJvcHMuaGlkZVBhZ2VySWZOb3ROZWVkZWRcbiAgICAgICAgICAgICYmIHRoaXMucHJvcHMudG90YWxJdGVtcyA8PSB0aGlzLnByb3BzLm51bUl0ZW1zUGVyUGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzLnRvZ2dsZVdyYXBwZXJQcm9wcztcbiAgICAgICAgY29uc3QgcG9zaXRpb25Mb3dlciA9IHBvc2l0aW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uQ2FwaXRhbGl6ZWQgPSBwb3NpdGlvbkxvd2VyWzBdLnRvVXBwZXJDYXNlKCkgKyBwb3NpdGlvbkxvd2VyLnNsaWNlKDEpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2VnbWVudGVkQ29udHJvbFxuICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICByZWY9e2BzZWdtZW50ZWRDb250cm9sJHtwb3NpdGlvbkNhcGl0YWxpemVkfWB9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wYWdpbmF0aW9uLWNvbnRyb2xzJywgcHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgIFtgYi1wYWdpbmF0aW9uLWNvbnRyb2xzLSR7cG9zaXRpb25Mb3dlcn1gXTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICBvcHRpb25zPXt0aGlzLmNyZWF0ZVBhZ2VCdXR0b25PcHRpb25zKCl9XG4gICAgICAgICAgICAgICAgb25PcHRpb25TZWxlY3RlZD17dGhpcy5oYW5kbGVDbGlja30gLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJWaWV3KCkge1xuICAgICAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBQYWdpbmF0aW9uLnBvc2l0aW9ucztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHJlZj0ncGFnaW5hdGVkVmlldydcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ItcGFnaW5hdGlvbic+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIChwcm9wcy5wb3NpdGlvbiA9PT0gcG9zaXRpb24uQUJPVkUgfHwgcHJvcHMucG9zaXRpb24gPT09IHBvc2l0aW9uLkJPVEgpXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5yZW5kZXJDb250cm9scyhwb3NpdGlvbi5BQk9WRSlcbiAgICAgICAgICAgICAgICAgICAgOiBub29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtwcm9wcy5iZWZvcmV9XG5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJJdGVtcygpfVxuXG4gICAgICAgICAgICAgICAge3Byb3BzLmFmdGVyfVxuXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIChwcm9wcy5wb3NpdGlvbiA9PT0gcG9zaXRpb24uQkVMT1cgfHwgcHJvcHMucG9zaXRpb24gPT09IHBvc2l0aW9uLkJPVEgpXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5yZW5kZXJDb250cm9scyhwb3NpdGlvbi5CRUxPVylcbiAgICAgICAgICAgICAgICAgICAgOiBub29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFBhZ2luYXRpb24uaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wYWdpbmF0aW9uLXdyYXBwZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclZpZXcoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBSZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSB2ZW5kb3ItcHJlZml4ZWQgcHJvcGVydHkgZm9yIHVzZSBpbiBwcm9ncmFtbWF0aWMgdHJhbnNmb3JtIHN0eWxlIG1hbmlwdWxhdGlvbi5cbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHByb3BlcnR5IGtleSAoZS5nLiBgV2Via2l0VHJhbnNmb3JtYCwgYG1zVHJhbnNmb3JtYClcbiAqL1xuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIGRldGVjdFRyYW5zZm9ybVByb3BlcnR5KCkge1xuICAgIGNvbnN0IHByb3BzID0gW1xuICAgICAgICAndHJhbnNmb3JtJyxcbiAgICAgICAgJ1dlYmtpdFRyYW5zZm9ybScsXG4gICAgICAgICdNb3pUcmFuc2Zvcm0nLFxuICAgICAgICAnT1RyYW5zZm9ybScsXG4gICAgICAgICdtc1RyYW5zZm9ybScsXG4gICAgICAgICd3ZWJraXQtdHJhbnNmb3JtJywgLy8gdXNlZCBpbiBKU0RPTVxuICAgIF07XG5cbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gcHJvcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKHByb3BzW2ldIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzW2ldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufSkoKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtmaW5kRE9NTm9kZX0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcblxuaW1wb3J0IERpYWxvZyBmcm9tICcuLi9ib3VuZGxlc3MtZGlhbG9nL2luZGV4JztcbmltcG9ydCBQb3J0YWwgZnJvbSAnLi4vYm91bmRsZXNzLXBvcnRhbC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcbmltcG9ydCB0cmFuc2Zvcm1Qcm9wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy10cmFuc2Zvcm0tcHJvcGVydHkvaW5kZXgnO1xuXG5mdW5jdGlvbiBnZXRPcHBvc2l0ZUNhcmRpbmFsKGRpcmVjdGlvbikge1xuICAgIHN3aXRjaCAoZGlyZWN0aW9uWzBdKSB7XG4gICAgY2FzZSAnTic6XG4gICAgICAgIHJldHVybiAnUyc7XG4gICAgY2FzZSAnUyc6XG4gICAgICAgIHJldHVybiAnTic7XG4gICAgY2FzZSAnRSc6XG4gICAgICAgIHJldHVybiAnVyc7XG4gICAgfVxuXG4gICAgcmV0dXJuICdFJztcbn1cblxuZnVuY3Rpb24gd2l0aG91dChhcnIxLCBhcnIyKSB7IHJldHVybiBhcnIxLmZpbHRlcigoaXRlbSkgPT4gYXJyMi5pbmRleE9mKGl0ZW0pID09PSAtMSk7IH1cblxuY29uc3QgQ0xBU1NfUkVNT1ZBTF9SRUdFWCA9IC9cXHM/Yi1wb3BvdmVyLShhbmNob3J8c2VsZiktKHN0YXJ0fG1pZGRsZXxlbmQpL2c7XG5cbmNvbnN0IERFRkFVTFRfQ0FSRVRfQ09NUE9ORU5UID0gKFxuICAgIDxzdmcgdmlld0JveD0nMCAwIDE0IDkuNScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz5cbiAgICAgICAgPGc+XG4gICAgICAgICAgICA8cG9seWdvbiBjbGFzc05hbWU9J2ItcG9wb3Zlci1jYXJldC1ib3JkZXInIGZpbGw9JyMwMDAnIHBvaW50cz0nNyAwIDE0IDEwIDAgMTAnIC8+XG4gICAgICAgICAgICA8cG9seWdvbiBjbGFzc05hbWU9J2ItcG9wb3Zlci1jYXJldC1maWxsJyBmaWxsPScjRkZGJyBwb2ludHM9JzYuOTgyMzA0NDQgMS43NSAxMi43NSAxMCAxLjI1IDEwJyAvPlxuICAgICAgICA8L2c+XG4gICAgPC9zdmc+XG4pO1xuXG5jb25zdCBTVEFSVCA9IDA7XG5jb25zdCBNSURETEUgPSAxO1xuY29uc3QgRU5EID0gMjtcblxuY29uc3QgY29tYmluYXRpb25zID0gW1xuICAgIHtuYW1lOiAnTk5XJywgICBheDogU1RBUlQsICAgICBheTogU1RBUlQsICAgICAgZHg6IFNUQVJULCAgIGR5OiBFTkR9LFxuICAgIHtuYW1lOiAnTicsICAgICBheDogTUlERExFLCAgICBheTogU1RBUlQsICAgICAgZHg6IE1JRERMRSwgIGR5OiBFTkR9LFxuICAgIHtuYW1lOiAnTk5FJywgICBheDogRU5ELCAgICAgICBheTogU1RBUlQsICAgICAgZHg6IEVORCwgICAgIGR5OiBFTkR9LFxuICAgIHtuYW1lOiAnRU5FJywgICBheDogRU5ELCAgICAgICBheTogU1RBUlQsICAgICAgZHg6IFNUQVJULCAgIGR5OiBTVEFSVH0sXG4gICAge25hbWU6ICdFJywgICAgIGF4OiBFTkQsICAgICAgIGF5OiBNSURETEUsICAgICBkeDogU1RBUlQsICAgZHk6IE1JRERMRX0sXG4gICAge25hbWU6ICdFU0UnLCAgIGF4OiBFTkQsICAgICAgIGF5OiBFTkQsICAgICAgICBkeDogU1RBUlQsICAgZHk6IEVORH0sXG4gICAge25hbWU6ICdTU0UnLCAgIGF4OiBFTkQsICAgICAgIGF5OiBFTkQsICAgICAgICBkeDogRU5ELCAgICAgZHk6IFNUQVJUfSxcbiAgICB7bmFtZTogJ1MnLCAgICAgYXg6IE1JRERMRSwgICAgYXk6IEVORCwgICAgICAgIGR4OiBNSURETEUsICBkeTogU1RBUlR9LFxuICAgIHtuYW1lOiAnU1NXJywgICBheDogU1RBUlQsICAgICBheTogRU5ELCAgICAgICAgZHg6IFNUQVJULCAgIGR5OiBTVEFSVH0sXG4gICAge25hbWU6ICdXU1cnLCAgIGF4OiBTVEFSVCwgICAgIGF5OiBFTkQsICAgICAgICBkeDogRU5ELCAgICAgZHk6IEVORH0sXG4gICAge25hbWU6ICdXJywgICAgIGF4OiBTVEFSVCwgICAgIGF5OiBNSURETEUsICAgICBkeDogRU5ELCAgICAgZHk6IE1JRERMRX0sXG4gICAge25hbWU6ICdXTlcnLCAgIGF4OiBTVEFSVCwgICAgIGF5OiBTVEFSVCwgICAgICBkeDogRU5ELCAgICAgZHk6IFNUQVJUfSxcbl07XG5cbi8qKlxuIyBQb3BvdmVyXG5fX0Egbm9uLWJsb2NraW5nIGNvbnRhaW5lciBwb3NpdGlvbmVkIHRvIGEgc3BlY2lmaWMgYW5jaG9yIGVsZW1lbnQuX19cblxuQSBwb3BvdmVyIGlzIGEgdHlwZSBvZiBbRGlhbG9nXSguL0RpYWxvZykgdGhhdCBpcyBtZWFudCB0byBwcm92aWRlIGFkZGl0aW9uYWwgY29udGV4dCB0byBjb250ZW50IChhbiBcImFuY2hvclwiKSBjdXJyZW50bHkgb24tc2NyZWVuLiBUeXBpY2FsbHksIGEgcG9wb3ZlciBpcyBzcGF3bmVkIGJ5IGludGVyYWN0aW5nIHdpdGggdGhlIGNvbnRlbnQgaXQgZW5yaWNoZXMgYW5kIGlzIGRpc21pc3NlZCBieSBjbGlja2luZyBvciBzaGlmdGluZyBmb2N1cyB0byBhbiBhbHRlcm5hdGUgbG9jYXRpb24uXG5cbkFsaWdubWVudCBvcHRpb25zIGZvciB0aGUgcG9wb3ZlciBhcmUgZGVzaWduZWQgdG8gbWlycm9yIGNvbXBhc3MgZGlyZWN0aW9uczpcblxuYGBgXG4gICAgICAg4oaSICAgICAgIOKGkFxuICAgICAgTk5XICBOICBOTkVcbuKGkyBXTlcgICAgICAgICAgICAgRU5FIOKGk1xuICAgIFcgICBBTkNIT1IgICAgRVxu4oaRIFdTVyAgICAgICAgICAgICBFU0Ug4oaRXG4gICAgICBTU1cgIFMgIFNTRVxuICAgICAgIOKGkiAgICAgICDihpBcbmBgYFxuXG5UaGUgYXJyb3dzIGluZGljYXRlIHdoaWNoIHdheSB0aGUgcG9wb3ZlciB3aWxsIGV4dGVuZCwgZS5nLiDihpIgbWVhbnMgdGhlIHBvcG92ZXIgaXMgYWxpZ25lZCB0byB0aGUgbGVmdCBlZGdlIGFuZCBleHRlbmRzIGluIHRoYXQgZGlyZWN0aW9uLiBEaWFnb25hbCBjb3JuZXJzIChOVywgTkUsIFNFLCBTVykgYXJlIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLlxuXG5gYGBqc3hcbjxQb3BvdmVyXG4gICAgYW5jaG9yPXtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc29tZS1hbmNob3ItZWxlbWVudCcpfVxuICAgIHByZXNldD17UG9wb3Zlci5wcmVzZXQuTn0+XG4gICAgTXkgcG9wb3ZlciBjb250ZW50IVxuPC9Qb3BvdmVyPlxuYGBgXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcG92ZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VxdWVuY2VzXG4gICAgc3RhdGljIHByZXNldCA9IGNvbWJpbmF0aW9ucy5yZWR1Y2UoKG1hcCwgZGVmKSA9PiAoKG1hcFtkZWYubmFtZV0gPSBkZWYpLCBtYXApLCB7fSlcblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC4uLkRpYWxvZy5wcm9wVHlwZXMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgRE9NIGVsZW1lbnQgb3IgUmVhY3QgcmVmZXJlbmNlIChyZWYpIHRvIG9uZSBmb3IgcG9zaXRpb25pbmcgcHVycG9zZXNcbiAgICAgICAgICovXG4gICAgICAgIGFuY2hvcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuaW5zdGFuY2VPZihIVE1MRWxlbWVudCksXG4gICAgICAgICAgICBQcm9wVHlwZXMuZWxlbWVudCxcbiAgICAgICAgXSkuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogaWYgdGhlIGdpdmVuIGFsaWdubWVudCBzZXR0aW5ncyB3b3VsZCB0YWtlIHRoZSBwb3BvdmVyIG91dCBvZiBib3VuZHMsIGNoYW5nZSB0aGUgYWxpZ25tZW50IGFzIG5lY2Vzc2FyeSB0byByZW1haW4gaW4gdGhlIHZpZXdwb3J0XG4gICAgICAgICAqL1xuICAgICAgICBhdXRvUmVwb3NpdGlvbjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGEgRE9NIGVsZW1lbnQgb3IgUmVhY3QgcmVmZXJlbmNlIChyZWYpIHRvIG9uZSBmb3IgcG9zaXRpb25pbmcgcHVycG9zZXMsIHRoZSBjYXJldCBjb21wb25lbnQgd2lsbFxuICAgICAgICAgKiBiZSBhdXRvbWF0aWNhbGx5IHBvc2l0aW9uZWQgdG8gY2VudGVyIG9uIHRoaXMgcHJvdmlkZWQgYW5jaG9yOyBieSBkZWZhdWx0IGl0IHdpbGwgY2VudGVyXG4gICAgICAgICAqIG9uIGBwcm9wcy5hbmNob3JgXG4gICAgICAgICAqL1xuICAgICAgICBjYXJldEFuY2hvcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMuaW5zdGFuY2VPZihIVE1MRWxlbWVudCksXG4gICAgICAgICAgICBQcm9wVHlwZXMuZWxlbWVudCxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBKU1ggdGhhdCBpcyByZW5kZXJlZCBhbmQgdXNlZCB0byBwb2ludCBhdCB0aGUgbWlkZGxlIG9mIHRoZSBhbmNob3IgZWxlbWVudCBhbmQgaW5kaWNhdGUgdGhlIGNvbnRleHQgb2YgdGhlIHBvcG92ZXJcbiAgICAgICAgICovXG4gICAgICAgIGNhcmV0Q29tcG9uZW50OiBQcm9wVHlwZXMuZWxlbWVudCxcblxuICAgICAgICBwb3J0YWxQcm9wczogUHJvcFR5cGVzLnNoYXBlKFBvcnRhbC5Qcm9wVHlwZXMpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgYGBqc3hcbiAgICAgICAgICogPFBvcG92ZXJcbiAgICAgICAgICogICAgIGFuY2hvcj17ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvbWUtYW5jaG9yLWVsZW1lbnQnKX1cbiAgICAgICAgICogICAgIHByZXNldD17UG9wb3Zlci5wcmVzZXQuTk5FfT5cbiAgICAgICAgICogICAgIE15IHBvcG92ZXIgY29udGVudCFcbiAgICAgICAgICogPC9Qb3BvdmVyPlxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHByZXNldDogUHJvcFR5cGVzLm9uZU9mKFtcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0Lk5OVyxcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0Lk4sXG4gICAgICAgICAgICBQb3BvdmVyLnByZXNldC5OTkUsXG4gICAgICAgICAgICBQb3BvdmVyLnByZXNldC5FTkUsXG4gICAgICAgICAgICBQb3BvdmVyLnByZXNldC5FLFxuICAgICAgICAgICAgUG9wb3Zlci5wcmVzZXQuRVNFLFxuICAgICAgICAgICAgUG9wb3Zlci5wcmVzZXQuU1NFLFxuICAgICAgICAgICAgUG9wb3Zlci5wcmVzZXQuUyxcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0LlNTVyxcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0LldTVyxcbiAgICAgICAgICAgIFBvcG92ZXIucHJlc2V0LlcsXG4gICAgICAgICAgICBQb3BvdmVyLnByZXNldC5XTlcsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1wb3BvdmVyYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICB3cmFwcGVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgLi4uRGlhbG9nLmRlZmF1bHRQcm9wcyxcbiAgICAgICAgYW5jaG9yOiB1bmRlZmluZWQsXG4gICAgICAgIGF1dG9SZXBvc2l0aW9uOiB0cnVlLFxuICAgICAgICBjYXB0dXJlRm9jdXM6IGZhbHNlLFxuICAgICAgICBjYXJldEFuY2hvcjogdW5kZWZpbmVkLFxuICAgICAgICBjYXJldENvbXBvbmVudDogREVGQVVMVF9DQVJFVF9DT01QT05FTlQsXG4gICAgICAgIGNsb3NlT25Fc2NLZXk6IHRydWUsXG4gICAgICAgIGNsb3NlT25PdXRzaWRlQ2xpY2s6IHRydWUsXG4gICAgICAgIGNsb3NlT25PdXRzaWRlU2Nyb2xsOiB0cnVlLFxuICAgICAgICBwb3J0YWxQcm9wczoge30sXG4gICAgICAgIHByZXNldDogUG9wb3Zlci5wcmVzZXQuUyxcbiAgICAgICAgd3JhcHBlclByb3BzOiB7fSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gd2l0aG91dChPYmplY3Qua2V5cyhQb3BvdmVyLmRlZmF1bHRQcm9wcyksIERpYWxvZy5pbnRlcm5hbEtleXMpXG5cbiAgICBzdGF0aWMgZ2V0QWxpZ25tZW50Q2xhc3NGcmFnbWVudChjb25zdGFudCkge1xuICAgICAgICBzd2l0Y2ggKGNvbnN0YW50KSB7XG4gICAgICAgIGNhc2UgU1RBUlQ6XG4gICAgICAgICAgICByZXR1cm4gJ3N0YXJ0JztcblxuICAgICAgICBjYXNlIE1JRERMRTpcbiAgICAgICAgICAgIHJldHVybiAnbWlkZGxlJztcblxuICAgICAgICBjYXNlIEVORDpcbiAgICAgICAgICAgIHJldHVybiAnZW5kJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNhY2hlVmlld3BvcnRDYXJ0b2dyYXBoeShhbmNob3IsIGNhcmV0QW5jaG9yKSB7XG4gICAgICAgIGNvbnN0IGJvZHlSZWN0ID0gZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICB0aGlzLmFuY2hvclJlY3QgPSBhbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMuY2FyZXRBbmNob3JSZWN0ID0gY2FyZXRBbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgLy8gbm9ybWFsbHkgd2UnZCB1c2Ugc2Nyb2xsVG9wL3Njcm9sbExlZnQsIGJ1dCBzY3JvbGwgYmVoYXZpb3IgY2hhbmdlcyB3aGVuIHBvc2l0aW9uOiBzdGlja3lcbiAgICAgICAgLy8gaXMgZW5hYmxlZCBpbiBDaHJvbWUgYW5kIGludmVydGluZyB0aGUgbmVnYXRpdmUgdmlld3BvcnQgcmVjdCB2YWx1ZSBzZWVtcyB0byB3b3JrIG1vcmVcbiAgICAgICAgLy8gY29uc2lzdGVudGx5XG4gICAgICAgIHRoaXMuYm9keUxlZnQgPSBib2R5UmVjdC5sZWZ0ICogLTE7XG4gICAgICAgIHRoaXMuYm9keVRvcCA9IGJvZHlSZWN0LnRvcCAqIC0xO1xuICAgIH1cblxuICAgIGdldE5leHRDYXJldFhQb3NpdGlvbih7bmFtZSwgYXgsIGR4LCBheSwgZHl9LCBjYXJldCA9IHRoaXMuJGNhcmV0KSB7XG4gICAgICAgIGxldCBuZXh0WCA9IDA7XG5cbiAgICAgICAgaWYgKG5hbWVbMF0gPT09ICdOJyB8fCBuYW1lWzBdID09PSAnUycpIHtcbiAgICAgICAgICAgIC8vIHBvcG92ZXIgaXMgYWJvdmUvYmVsb3csIHNvIHdlIG5lZWQgdG8gZGV0ZWN0IHRoZSBYIHBvc2l0aW9uIG9mIHRoZSBjYXJldCBhbmNob3JcbiAgICAgICAgICAgIG5leHRYID0gdGhpcy5jYXJldEFuY2hvclJlY3QubGVmdCAtIHRoaXMuYW5jaG9yUmVjdC5sZWZ0ICsgdGhpcy5jYXJldEFuY2hvclJlY3Qud2lkdGggLyAyO1xuXG4gICAgICAgICAgICBpZiAoZHggPT09IE1JRERMRSkge1xuICAgICAgICAgICAgICAgIG5leHRYICs9ICh0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGllbnRXaWR0aCAtIHRoaXMuYW5jaG9yUmVjdC53aWR0aCkgLyAyO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkeCA9PT0gRU5EKSB7XG4gICAgICAgICAgICAgICAgbmV4dFggKz0gdGhpcy5kaWFsb2cuJHdyYXBwZXIuY2xpZW50V2lkdGggLSB0aGlzLmFuY2hvclJlY3Qud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBwb3BvdmVyIGlzIGxlZnQvcmlnaHQsIHNvIHdlIG5lZWQgdG8gZGV0ZWN0IHRoZSBZIHBvc2l0aW9uIG9mIHRoZSBjYXJldCBhbmNob3IgKGNhcmV0IGlzIHJvdGF0ZWQgdmlhIENTUylcbiAgICAgICAgICAgIG5leHRYID0gdGhpcy5jYXJldEFuY2hvclJlY3QudG9wIC0gdGhpcy5hbmNob3JSZWN0LnRvcCArIHRoaXMuY2FyZXRBbmNob3JSZWN0LmhlaWdodCAvIDI7XG5cbiAgICAgICAgICAgIGlmIChkeSA9PT0gTUlERExFKSB7XG4gICAgICAgICAgICAgICAgbmV4dFggKz0gKHRoaXMuZGlhbG9nLiR3cmFwcGVyLmNsaWVudEhlaWdodCAtIHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQpIC8gMjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZHkgPT09IEVORCkge1xuICAgICAgICAgICAgICAgIG5leHRYICs9IHRoaXMuZGlhbG9nLiR3cmFwcGVyLmNsaWVudEhlaWdodCAtIHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBuZXh0WCAtPSBjYXJldC5jbGllbnRXaWR0aCAvIDI7XG5cbiAgICAgICAgcmV0dXJuIG5leHRYO1xuICAgIH1cblxuICAgIGdldE5leHREaWFsb2dYUG9zaXRpb24oe2F4LCBkeH0sIGRpYWxvZyA9IHRoaXMuZGlhbG9nLiR3cmFwcGVyKSB7XG4gICAgICAgIGxldCBuZXh0WCA9IHRoaXMuYW5jaG9yUmVjdC5sZWZ0ICsgdGhpcy5ib2R5TGVmdDtcblxuICAgICAgICBzd2l0Y2ggKGF4KSB7XG4gICAgICAgIGNhc2UgTUlERExFOlxuICAgICAgICAgICAgbmV4dFggKz0gdGhpcy5hbmNob3JSZWN0LndpZHRoIC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRU5EOlxuICAgICAgICAgICAgbmV4dFggKz0gdGhpcy5hbmNob3JSZWN0LndpZHRoO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGR4KSB7XG4gICAgICAgIGNhc2UgTUlERExFOlxuICAgICAgICAgICAgbmV4dFggLT0gZGlhbG9nLmNsaWVudFdpZHRoIC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRU5EOlxuICAgICAgICAgICAgbmV4dFggLT0gZGlhbG9nLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dFg7XG4gICAgfVxuXG4gICAgZ2V0TmV4dERpYWxvZ1lQb3NpdGlvbih7YXksIGR5fSwgZGlhbG9nID0gdGhpcy5kaWFsb2cuJHdyYXBwZXIpIHtcbiAgICAgICAgbGV0IG5leHRZID0gdGhpcy5hbmNob3JSZWN0LnRvcCArIHRoaXMuYm9keVRvcDtcblxuICAgICAgICBzd2l0Y2ggKGF5KSB7XG4gICAgICAgIGNhc2UgTUlERExFOlxuICAgICAgICAgICAgbmV4dFkgKz0gdGhpcy5hbmNob3JSZWN0LmhlaWdodCAvIDI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEVORDpcbiAgICAgICAgICAgIG5leHRZICs9IHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoZHkpIHtcbiAgICAgICAgY2FzZSBNSURETEU6XG4gICAgICAgICAgICBuZXh0WSAtPSBkaWFsb2cuY2xpZW50SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRU5EOlxuICAgICAgICAgICAgbmV4dFkgLT0gZGlhbG9nLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5leHRZO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgcG9zaXRpb24gY29tYmluYXRpb24sIHdpbGwgdGhlIHBvcG92ZXIgZml0IGludG8gdGhlIHNwYWNlIHdpdGhvdXQgb2NjbHVzaW9uP1xuICAgICAqXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAgY29uZmlnXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgY29uZmlnLmF4XG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgY29uZmlnLmF5XG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgY29uZmlnLmR4XG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgY29uZmlnLmR5XG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgcEhlaWdodFxuICAgICAqIEBwYXJhbSAge051bWJlcn0gIHBXaWR0aFxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBpc1Bvc2l0aW9uVmFsaWQoe25hbWUsIGF4LCBheSwgZHgsIGR5fSwgcEhlaWdodCwgcFdpZHRoKSB7XG4gICAgICAgIGNvbnN0IGNhcmRpbmFsID0gbmFtZVswXTtcblxuICAgICAgICBpZiAoY2FyZGluYWwgPT09ICdOJyB8fCBjYXJkaW5hbCA9PT0gJ1MnKSB7XG4gICAgICAgICAgICBpZiAoY2FyZGluYWwgPT09ICdOJyAmJiB0aGlzLmFuY2hvclJlY3QudG9wIC0gcEhlaWdodCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgLyogd291bGQgb2NjbHVkZSBhYm92ZSAqL1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjYXJkaW5hbCA9PT0gJ1MnICYmIHRoaXMuYW5jaG9yUmVjdC5ib3R0b20gKyBwSGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAgIC8qIHdvdWxkIG9jY2x1ZGUgYmVsb3cgKi9cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGF4ID09PSBTVEFSVCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LmxlZnQgKyBwV2lkdGggPiB3aW5kb3cuaW5uZXJXaWR0aCkgICAgICAvKiB3b3VsZCBvY2NsdWRlIHJpZ2h0ICovXG4gICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLmFuY2hvclJlY3QubGVmdCA8IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGFuY2hvciBpcyBwYXJ0aWFsbHkgb2Zmc2NyZWVuIHRvIHRoZSBsZWZ0ICovXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXggPT09IE1JRERMRSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LmxlZnQgLSBwV2lkdGggLyAyIDwgMCkgICAgICAgICAgICAgICAgICAvKiB3b3VsZCBvY2NsdWRlIGxlZnQgKi9cbiAgICAgICAgICAgICAgICAgICAgfHwgKHRoaXMuYW5jaG9yUmVjdC5sZWZ0ICsgcFdpZHRoIC8gMiA+IHdpbmRvdy5pbm5lcldpZHRoKSAgLyogd291bGQgb2NjbHVkZSByaWdodCAqL1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgICAgICAgICh0aGlzLmFuY2hvclJlY3QubGVmdCAtIHBXaWR0aCA8IDApICAgICAgICAgICAgICAgICAgLyogd291bGQgb2NjbHVkZSBsZWZ0ICovXG4gICAgICAgICAgICAgICAgfHwgKHRoaXMuYW5jaG9yUmVjdC5yaWdodCA+IHdpbmRvdy5pbm5lcldpZHRoKSAgICAgICAgICAvKiBhbmNob3IgaXMgcGFydGlhbGx5IG9mZnNjcmVlbiB0byB0aGUgcmlnaHQgKi9cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjYXJkaW5hbCA9PT0gJ1cnIHx8IGNhcmRpbmFsID09PSAnRScpIHtcbiAgICAgICAgICAgIGlmIChjYXJkaW5hbCA9PT0gJ1cnICYmIHRoaXMuYW5jaG9yUmVjdC5sZWZ0IC0gcFdpZHRoIDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICAvKiB3b3VsZCBvY2NsdWRlIGxlZnQgKi9cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FyZGluYWwgPT09ICdFJyAmJiB0aGlzLmFuY2hvclJlY3QucmlnaHQgKyBwV2lkdGggPiB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICAvKiB3b3VsZCBvY2NsdWRlIHJpZ2h0ICovXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChheSA9PT0gU1RBUlQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYW5jaG9yUmVjdC50b3AgKyBwSGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0KSAgICAvKiB3b3VsZCBvY2NsdWRlIGJlbG93ICovXG4gICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLmFuY2hvclJlY3QudG9wIDwgMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogYW5jaG9yIGlzIHBhcnRpYWxseSBvZmZzY3JlZW4gYWJvdmUgKi9cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChheSA9PT0gTUlERExFKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEoXG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFuY2hvclJlY3QudG9wICsgdGhpcy5hbmNob3JSZWN0LmhlaWdodCAvIDIgLSBwSGVpZ2h0IC8gMiA8IDApICAgICAgICAgICAgICAgICAgICAgLyogd291bGQgb2NjbHVkZSBhYm92ZSAqL1xuICAgICAgICAgICAgICAgICAgICB8fCAodGhpcy5hbmNob3JSZWN0LnRvcCArIHRoaXMuYW5jaG9yUmVjdC5oZWlnaHQgLyAyICsgcEhlaWdodCAvIDIgPiB3aW5kb3cuaW5uZXJIZWlnaHQpICAgIC8qIHdvdWxkIG9jY2x1ZGUgYmVsb3cgKi9cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICAgICAgICAgICAodGhpcy5hbmNob3JSZWN0LnRvcCAtIHBIZWlnaHQgPCAwKSAgICAgICAgICAgICAgLyogd291bGQgb2NjbHVkZSBhYm92ZSAqL1xuICAgICAgICAgICAgICAgIHx8ICh0aGlzLmFuY2hvclJlY3QuYm90dG9tID4gd2luZG93LmlubmVySGVpZ2h0KSAgICAvKiBhbmNob3IgaXMgcGFydGlhbGx5IG9mZnNjcmVlbiBiZWxvdyAqL1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldFZhbGlkQWxpZ25tZW50UHJlc2V0KCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZGlhbG9nLiR3cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgLy8gZ2l2ZW4gdGhlIGN1cnJlbnQgdmlld3BvcnQgY2FydG9ncmFwaHksIHdoZXJlIGNhbiB3ZSBzdGljayB0aGUgcG9wb3ZlclxuICAgICAgICAvLyBzbyBpdCB3b24ndCBiZSBwYXJ0aWFsbHkgb2NjbHVkZWQ/XG4gICAgICAgIGNvbnN0IHZhbGlkQ29tYm9zID0gY29tYmluYXRpb25zLmZpbHRlcigoY29uZmlnKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1Bvc2l0aW9uVmFsaWQoY29uZmlnLCBoZWlnaHQsIHdpZHRoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMS4gaXMgdGhlIHJlcXVlc3RlZCBwcmVzZXQgaW4gdGhlIGxpc3Q/XG4gICAgICAgIC8vIDIuIGRvZXMgdGhlIGNvbnN1bWVyIG5vdCB3YW50IHVzIGF1dG8tcmVwb3NpdGlvbmluZz9cbiAgICAgICAgLy8gMy4gYXJlIG5vIGNvbWJvcyB2YWxpZD9cbiAgICAgICAgaWYgKHZhbGlkQ29tYm9zLmluZGV4T2YodGhpcy5wcm9wcy5wcmVzZXQpICE9PSAtMSB8fCAhdGhpcy5wcm9wcy5hdXRvUmVwb3NpdGlvbiB8fCAhdmFsaWRDb21ib3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5wcmVzZXQ7IC8vIGp1c3QgZ28gd2l0aCB0aGUgcmVxdWVzdGVkIHByZXNldFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gb3RoZXJ3aXNlLi4uIHdlIHRyeSB0byBmaW5kIHRoZSBiZXN0IHBvc3NpYmxlIGZhbGxiYWNrIG9wdGlvblxuXG4gICAgICAgIC8vIG9wdGltaXplIGZvciB0aGUgcmVxdWVzdGVkIHByZXNldCBoZW1pc3BoZXJlXG4gICAgICAgIGNvbnN0IGJlc3RDb21ib3MgPSB2YWxpZENvbWJvcy5maWx0ZXIoKHtuYW1lfSkgPT4gbmFtZVswXSA9PT0gdGhpcy5wcm9wcy5wcmVzZXQubmFtZVswXSk7XG5cbiAgICAgICAgaWYgKGJlc3RDb21ib3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gYmVzdENvbWJvc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoZW4gdGhlIG9wcG9zaXRlIChlLmcuIHRoZSBlbGVtZW50IGlzIHRvbyBsb3cgaW4gdGhlIHZpZXdwb3J0IHNvIGZsaXAgdXAgaW5zdGVhZCBvZiBkb3duKVxuICAgICAgICBjb25zdCBvcHBvc2l0ZUNhcmRpbmFsID0gZ2V0T3Bwb3NpdGVDYXJkaW5hbCh0aGlzLnByb3BzLnByZXNldC5uYW1lKTtcbiAgICAgICAgY29uc3Qgb2theUNvbWJvcyA9IHZhbGlkQ29tYm9zLmZpbHRlcigoe25hbWV9KSA9PiBuYW1lWzBdID09PSBvcHBvc2l0ZUNhcmRpbmFsKTtcblxuICAgICAgICBpZiAob2theUNvbWJvcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBva2F5Q29tYm9zWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2hhdGV2ZXIncyBsZWZ0IHdpbGwgaGF2ZSB0byBkb1xuICAgICAgICByZXR1cm4gdmFsaWRDb21ib3NbMF07XG4gICAgfVxuXG4gICAgYWxpZ24gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IHRoaXMucHJvcHMuYW5jaG9yIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLmFuY2hvclxuICAgICAgICAgICAgICAgICAgICAgICA6IGZpbmRET01Ob2RlKHRoaXMucHJvcHMuYW5jaG9yKTtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbiAgICAgICAgY29uc3QgY2FyZXRBbmNob3IgPSB0aGlzLnByb3BzLmNhcmV0QW5jaG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByb3BzLmNhcmV0QW5jaG9yIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5jYXJldEFuY2hvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmaW5kRE9NTm9kZSh0aGlzLnByb3BzLmNhcmV0QW5jaG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYW5jaG9yO1xuXG4gICAgICAgIHRoaXMuY2FjaGVWaWV3cG9ydENhcnRvZ3JhcGh5KGFuY2hvciwgY2FyZXRBbmNob3IpO1xuXG4gICAgICAgIGNvbnN0IHByZXNldCA9IHRoaXMuZ2V0VmFsaWRBbGlnbm1lbnRQcmVzZXQoKTtcbiAgICAgICAgY29uc3QgZnJhZyA9IFBvcG92ZXIuZ2V0QWxpZ25tZW50Q2xhc3NGcmFnbWVudDtcblxuICAgICAgICB0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGFzc05hbWUgPSB0aGlzLmRpYWxvZy4kd3JhcHBlci5jbGFzc05hbWUucmVwbGFjZShDTEFTU19SRU1PVkFMX1JFR0VYLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBgIGItcG9wb3Zlci1hbmNob3IteC0ke2ZyYWcocHJlc2V0LmF4KX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYCBiLXBvcG92ZXItYW5jaG9yLXktJHtmcmFnKHByZXNldC5heSl9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGAgYi1wb3BvdmVyLXNlbGYteC0ke2ZyYWcocHJlc2V0LmR4KX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYCBiLXBvcG92ZXItc2VsZi15LSR7ZnJhZyhwcmVzZXQuZHkpfWA7XG5cbiAgICAgICAgY29uc3QgZHggPSBNYXRoLnJvdW5kKHRoaXMuZ2V0TmV4dERpYWxvZ1hQb3NpdGlvbihwcmVzZXQpKTtcbiAgICAgICAgY29uc3QgZHkgPSBNYXRoLnJvdW5kKHRoaXMuZ2V0TmV4dERpYWxvZ1lQb3NpdGlvbihwcmVzZXQpKTtcblxuICAgICAgICB0aGlzLmRpYWxvZy4kd3JhcHBlci5zdHlsZVt0cmFuc2Zvcm1Qcm9wXSA9IGB0cmFuc2xhdGUoJHtkeH1weCwgJHtkeX1weClgO1xuXG4gICAgICAgIGNvbnN0IGNhcmRpbmFsID0gcHJlc2V0Lm5hbWVbMF07XG4gICAgICAgIGNvbnN0IGxvbmdpdHVkaW5hbCA9IGNhcmRpbmFsID09PSAnTicgfHwgY2FyZGluYWwgPT09ICdTJztcblxuICAgICAgICAvLyB0aGUgY2FyZXQgaXMgaW5pdGlhbGx5IHBvc2l0aW9uZWQgYXQgMCwwIGluc2lkZSB0aGUgZGlhbG9nXG4gICAgICAgIC8vIHdoaWNoIGlzIGFscmVhZHkgcG9zaXRpb25lZCBhdCB0aGUgYW5jaG9yLCBzbyB3ZSBqdXN0IG5lZWQgdG9cbiAgICAgICAgLy8gbWFrZSBzbWFsbCBhZGp1c3RtZW50cyBhcyBuZWNlc3NhcnkgdG8gbGluZSB1cCB0aGUgY2FyZXRcbiAgICAgICAgLy8gd2l0aCB0aGUgdmlzdWFsIGNlbnRlciBvZiB0aGUgYW5jaG9yXG4gICAgICAgIHRoaXMuJGNhcmV0LnN0eWxlW2xvbmdpdHVkaW5hbCA/ICdsZWZ0JyA6ICd0b3AnXSA9IE1hdGgucm91bmQodGhpcy5nZXROZXh0Q2FyZXRYUG9zaXRpb24ocHJlc2V0KSkgKyAncHgnO1xuICAgICAgICB0aGlzLiRjYXJldC5zdHlsZVtsb25naXR1ZGluYWwgPyAndG9wJyA6ICdsZWZ0J10gPSAnMHB4JztcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5hbGlnbigpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5hbGlnbiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB0aGlzLmFsaWduKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmFsaWduLCB0cnVlKTsgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFBvcnRhbCB7Li4ucHJvcHMucG9ydGFsUHJvcHN9PlxuICAgICAgICAgICAgICAgIDxEaWFsb2dcbiAgICAgICAgICAgICAgICAgICAgey4uLm9taXQocHJvcHMsIFBvcG92ZXIuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXsoaW5zdGFuY2UpID0+ICh0aGlzLmRpYWxvZyA9IGluc3RhbmNlKX1cbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNsb25lRWxlbWVudChwcm9wcy5jYXJldENvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogKG5vZGUpID0+ICh0aGlzLiRjYXJldCA9IG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3goJ2ItcG9wb3Zlci1jYXJldCcsIHByb3BzLmNhcmV0Q29tcG9uZW50LnByb3BzLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXJQcm9wcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMud3JhcHBlclByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjeCgnYi1wb3BvdmVyJywgcHJvcHMud3JhcHBlclByb3BzLmNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIH19IC8+XG4gICAgICAgICAgICA8L1BvcnRhbD5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5cbi8qKlxuIyBQcm9ncmVzc2l2ZURpc2Nsb3N1cmVcbl9fSGlkZSBjb250ZW50IHVudGlsIGl0J3MgbmVlZGVkLCB3aXRoIGNvbmZpZ3VyYWJsZSB0ZWFzZXJzLl9fXG5cbk1lY2hhbmljYWxseSwgaGlkZGVuIGRpc2Nsb3N1cmUgY29udGVudCBpcyBub3QgcmVuZGVyZWQgdG8gdGhlIERPTSB1bnRpbCBpdCBpcyBuZWVkZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2dyZXNzaXZlRGlzY2xvc3VyZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKiBpZiBhIGZ1bmN0aW9uIGlzIHBhc3NlZCwgaXQgd2lsbCBub3QgYmUgY2FsbGVkIHVudGlsIHRoZSBkaXNjbG9zdXJlIGNvbnRlbnQgaXMgZHVlIHRvIGJlIHJlbmRlcmVkICovXG4gICAgICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMuYW55LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgdmFsaWQgSFRNTCB0YWcgbmFtZSBvciBhIFJlYWN0IGNvbXBvbmVudCBmYWN0b3J5LCBhbnl0aGluZyB0aGF0IGNhbiBiZSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBSZWFjdC5jcmVhdGVFbGVtZW50YFxuICAgICAgICAgKi9cbiAgICAgICAgY29tcG9uZW50OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFsbG93cyB0aGUgZGlzY2xvc3VyZSB0byBiZSByZW5kZXJlZCBleHBhbmRlZCBieSBkZWZhdWx0XG4gICAgICAgICAqL1xuICAgICAgICBleHBhbmRlZDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBjb250ZW50IGlzIHNob3duOyBub3QgY2FsbGVkIG9uIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAqL1xuICAgICAgICBvbkV4cGFuZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSBjb250ZW50IGlzIGhpZGRlbjsgbm90IGNhbGxlZCBvbiBpbml0aWFsIHJlbmRlclxuICAgICAgICAgKi9cbiAgICAgICAgb25IaWRlOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29udGVudCB0byBiZSBzaG93biBuZXh0IHRvIHRoZSBleHBhbnNpb24gdG9nZ2xlLCBlLmcuIFwiQWR2YW5jZWQgT3B0aW9uc1wiXG4gICAgICAgICAqL1xuICAgICAgICB0ZWFzZXI6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb250ZW50IHRvIGJlIHNob3duIG5leHQgdG8gdGhlIGV4cGFuc2lvbiB0b2dnbGUgd2hlbiB0aGUgZGlzY2xvc3VyZSBpcyBpbiBcImV4cGFuZGVkXCIgc3RhdGUsIGUuZy4gXCJIaWRlIEFkdmFuY2VkIE9wdGlvbnNcIlxuICAgICAgICAgKi9cbiAgICAgICAgdGVhc2VyRXhwYW5kZWQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi1kaXNjbG9zdXJlLXRvZ2dsZWAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgdG9nZ2xlUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGNvbXBvbmVudDogJ2RpdicsXG4gICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcbiAgICAgICAgb25FeHBhbmQ6IG5vb3AsXG4gICAgICAgIG9uSGlkZTogbm9vcCxcbiAgICAgICAgdGVhc2VyOiBudWxsLFxuICAgICAgICB0ZWFzZXJFeHBhbmRlZDogbnVsbCxcbiAgICAgICAgdG9nZ2xlUHJvcHM6IHt9LFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhQcm9ncmVzc2l2ZURpc2Nsb3N1cmUuZGVmYXVsdFByb3BzKVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGV4cGFuZGVkOiB0aGlzLnByb3BzLmV4cGFuZGVkLFxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHMpIHtcbiAgICAgICAgaWYgKG5ld1Byb3BzLmV4cGFuZGVkICE9PSB0aGlzLnByb3BzLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogbmV3UHJvcHMuZXhwYW5kZWR9LCB0aGlzLmRpc3BhdGNoQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGF0Y2hDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wc1t0aGlzLnN0YXRlLmV4cGFuZGVkID8gJ29uRXhwYW5kJyA6ICdvbkhpZGUnXSgpO1xuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZH0sIHRoaXMuZGlzcGF0Y2hDYWxsYmFjayk7XG5cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy50b2dnbGVQcm9wcy5vbkNsaWNrKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy50b2dnbGVQcm9wcy5vbkNsaWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5leHBhbmRlZH0sIHRoaXMuZGlzcGF0Y2hDYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLnRvZ2dsZVByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMudG9nZ2xlUHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckNvbnRlbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSdjb250ZW50J1xuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdiLWRpc2Nsb3N1cmUtY29udGVudCc+XG4gICAgICAgICAgICAgICAgICAgIHtpc0Z1bmN0aW9uKHRoaXMucHJvcHMuY2hpbGRyZW4pID8gdGhpcy5wcm9wcy5jaGlsZHJlbigpIDogdGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGhpcy5wcm9wcy5jb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBQcm9ncmVzc2l2ZURpc2Nsb3N1cmUuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1kaXNjbG9zdXJlJywgdGhpcy5wcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAnYi1kaXNjbG9zdXJlLWV4cGFuZGVkJzogdGhpcy5zdGF0ZS5leHBhbmRlZCxcbiAgICAgICAgICAgICAgICB9KX0+XG5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLnRvZ2dsZVByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J3RvZ2dsZSdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1kaXNjbG9zdXJlLXRvZ2dsZScsIHRoaXMucHJvcHMudG9nZ2xlUHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGlja31cbiAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PScwJz5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXhwYW5kZWQgPyB0aGlzLnByb3BzLnRlYXNlckV4cGFuZGVkIHx8IHRoaXMucHJvcHMudGVhc2VyIDogdGhpcy5wcm9wcy50ZWFzZXJ9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJDb250ZW50KCl9XG4gICAgICAgICAgICA8L3RoaXMucHJvcHMuY29tcG9uZW50PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTYgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vYm91bmRsZXNzLWJ1dHRvbi9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuLyoqXG4jIFByb2dyZXNzXG5fX0FuIHVub3BpbmlvbmF0ZWQgcHJvZ3Jlc3MgaW1wbGVtZW50YXRpb24sIGFsbG93aW5nIGZvciBhIHZhcmlldHkgb2Ygc2hhcGVzIGFuZCBlZmZlY3RzLl9fXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2dyZXNzIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXByb2dyZXNzLWNhbmNlbGAgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgY2FuY2VsUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSB2YWxpZCBIVE1MIHRhZyBuYW1lIG9yIGEgUmVhY3QgY29tcG9uZW50IGZhY3RvcnksIGFueXRoaW5nIHRoYXQgY2FuIGJlIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gYFJlYWN0LmNyZWF0ZUVsZW1lbnRgXG4gICAgICAgICAqL1xuICAgICAgICBjb21wb25lbnQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgdmFsdWUgdG8gc2hvdyBhcyBhIGxhYmVsIG9mIHRoZSBwcm9ncmVzcywgZS5nLiBcIjUwJVwiXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXByb2dyZXNzLWxhYmVsYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpZiBzdXBwbGllZCwgYWRkcyBhIGNhbmNlbCBlbGVtZW50IGFuZCBjYWxscyB0aGlzIGZ1bmN0aW9uIHdoZW4gdGhhdCBlbGVtZW50IGlzIGNsaWNrZWRcbiAgICAgICAgICovXG4gICAgICAgIG9uQ2FuY2VsOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIGludGVnZXIgKGFuZCB1bml0LCBpZiBhcHBsaWNhYmxlKSBvZiB0aGUgY3VycmVudCBwcm9ncmVzcyBzdGF0ZSwgZS5nLiAwLjAxIChvcGFjaXR5KVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvZ3Jlc3M6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgUHJvcFR5cGVzLm51bWJlcixcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXByb2dyZXNzYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBwcm9ncmVzc1Byb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgQ1NTIHByb3BlcnR5IHRvIHR3ZWVuIChtdXN0IGFjY2VwdCBwZXJjZW50YWdlcykgLSBkZWZhdWx0cyB0byBcIndpZHRoXCJcbiAgICAgICAgICovXG4gICAgICAgIHR3ZWVuUHJvcGVydHk6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2FuY2VsUHJvcHM6IHt9LFxuICAgICAgICBjb21wb25lbnQ6ICdkaXYnLFxuICAgICAgICBsYWJlbDogbnVsbCxcbiAgICAgICAgbGFiZWxQcm9wczoge30sXG4gICAgICAgIG9uQ2FuY2VsOiBudWxsLFxuICAgICAgICBwcm9ncmVzczogdW5kZWZpbmVkLFxuICAgICAgICBwcm9ncmVzc1Byb3BzOiB7fSxcbiAgICAgICAgdHdlZW5Qcm9wZXJ0eTogJ3dpZHRoJyxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoUHJvZ3Jlc3MuZGVmYXVsdFByb3BzKVxuXG4gICAgcmVuZGVyTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhYmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMubGFiZWxQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdsYWJlbCdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wcm9ncmVzcy1sYWJlbCcsIHRoaXMucHJvcHMubGFiZWxQcm9wcy5jbGFzc05hbWUpfT5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMubGFiZWx9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyQ2FuY2VsKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNhbmNlbCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmNhbmNlbFByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2NhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wcm9ncmVzcy1jYW5jZWwnLCB0aGlzLnByb3BzLmNhbmNlbFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIG9uUHJlc3NlZD17dGhpcy5wcm9wcy5vbkNhbmNlbH0gLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJQcm9ncmVzcygpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5wcm9ncmVzc1Byb3BzfVxuICAgICAgICAgICAgICAgIHJlZj0ncHJvZ3Jlc3MnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi1wcm9ncmVzcycsIHRoaXMucHJvcHMucHJvZ3Jlc3NQcm9wcy5jbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2ItcHJvZ3Jlc3MtaW5kZXRlcm1pbmF0ZSc6IHR5cGVvZiB0aGlzLnByb3BzLnByb2dyZXNzID09PSAndW5kZWZpbmVkJyxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICByb2xlPSdwcmVzZW50YXRpb24nXG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5wcm9wcy5wcm9ncmVzc1Byb3BzLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBbdGhpcy5wcm9wcy50d2VlblByb3BlcnR5XTogdGhpcy5wcm9wcy5wcm9ncmVzcyxcbiAgICAgICAgICAgICAgICB9fSAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0aGlzLnByb3BzLmNvbXBvbmVudFxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFByb2dyZXNzLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcHJvZ3Jlc3Mtd3JhcHBlcicsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyUHJvZ3Jlc3MoKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJMYWJlbCgpfVxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckNhbmNlbCgpfVxuICAgICAgICAgICAgPC90aGlzLnByb3BzLmNvbXBvbmVudD5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtZnVuY3Rpb24vaW5kZXgnO1xuaW1wb3J0IG5vb3AgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW5vb3AvaW5kZXgnO1xuaW1wb3J0IG9taXQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cy9pbmRleCc7XG5pbXBvcnQgdXVpZCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtdXVpZC9pbmRleCc7XG5cbi8qKlxuIyBSYWRpb1xuX19BbiBhY2Nlc3NpYmxlIHJhZGlvIGZvcm0gY29udHJvbC5fX1xuXG5SYWRpbyBpcyBpbXBsZW1lbnRlZCBhcyBhIFwiY29udHJvbGxlZCBpbnB1dFwiLCBtZWFuaW5nIGl0IGlzIGEgZGlyZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtb2RlbCBkYXRhIHBhc3NlZCBpbnNpZGUuIFVzZXIgaW50ZXJhY3Rpb24gd2lsbCBidWJibGUgY2hhbmdlcyBpbiB0aGUgZm9ybSBvZiBgb25TZWxlY3RlZGAgdGhhdCBhIGNvbnRyb2xsZXIgdmlldyBtdXN0IGludGVyY2VwdCBhbmQgYXBwbHkgYWdhaW5zdCB0aGUgZGF0YSBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFkaW8gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItcmFkaW9gIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIGlucHV0UHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBSZWFjdC1yZW5kZXJhYmxlIGNvbnRlbnQsIG1vc3QgY29tbW9ubHkgYSBzaW1wbGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKTsgYXBwbGllZCB0byB0aGUgYC5iLXJhZGlvLWxhYmVsYCBub2RlXG4gICAgICAgICAqL1xuICAgICAgICBsYWJlbFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBwYXNzdGhyb3VnaCB0byB0aGUgSFRNTCBgbmFtZWAgYXR0cmlidXRlIG9uIHRoZSBgLmItcmFkaW9gIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgYmVjb21lcyBzZWxlY3RlZDsgYmFja2luZyBkYXRhIG11c3QgYmUgdXBkYXRlZCB0byBwZXJzaXN0IHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIG9uU2VsZWN0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkZXRlcm1pbmVzIHRoZSBhY3RpdmF0aW9uIHN0YXRlIG9mIHRoZSByYWRpbyBjb250cm9sLCBzZWUgUmVhY3QgW1wiY29udHJvbGxlZCBpbnB1dHNcIl0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9mb3Jtcy5odG1sI2NvbnRyb2xsZWQtY29tcG9uZW50cykpXG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3RlZDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHBhc3N0aHJvdWdoIHRvIHRoZSBIVE1MIGB2YWx1ZWAgYXR0cmlidXRlIG9uIHRoZSBgLmItcmFkaW9gIG5vZGVcbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgaW5wdXRQcm9wczoge30sXG4gICAgICAgIGxhYmVsOiBudWxsLFxuICAgICAgICBsYWJlbFByb3BzOiB7fSxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIG9uU2VsZWN0ZWQ6IG5vb3AsXG4gICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6ICcnLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhSYWRpby5kZWZhdWx0UHJvcHMpXG5cbiAgICB1dWlkID0gdXVpZCgpXG5cbiAgICBoYW5kbGVDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uU2VsZWN0ZWQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZSkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmlucHV0UHJvcHN9XG4gICAgICAgICAgICAgICAgcmVmPSdpbnB1dCdcbiAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5pZCB8fCB0aGlzLnByb3BzLmlucHV0UHJvcHMuaWQgfHwgdGhpcy51dWlkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcmFkaW8nLCB0aGlzLnByb3BzLmlucHV0UHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICdiLXJhZGlvLXNlbGVjdGVkJzogdGhpcy5wcm9wcy5zZWxlY3RlZCxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5wcm9wcy5zZWxlY3RlZH1cbiAgICAgICAgICAgICAgICBhcmlhLWNoZWNrZWQ9e1N0cmluZyh0aGlzLnByb3BzLnNlbGVjdGVkKX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9IC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyTGFiZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhYmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wcy5sYWJlbFByb3BzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2xhYmVsJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXJhZGlvLWxhYmVsJywgdGhpcy5wcm9wcy5sYWJlbFByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIGh0bWxGb3I9e3RoaXMucHJvcHMuaWQgfHwgdGhpcy5wcm9wcy5pbnB1dFByb3BzLmlkIHx8IHRoaXMudXVpZH0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmxhYmVsfVxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFJhZGlvLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItcmFkaW8td3JhcHBlcicsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVySW5wdXQoKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJMYWJlbCgpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpKTtcblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZykpO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIG1hdGNoT3BlcmF0b3JzUmUgPSAvW3xcXFxce30oKVtcXF1eJCsqPy5dL2c7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHN0cikge1xuXHRpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIHN0cmluZycpO1xuXHR9XG5cblx0cmV0dXJuIHN0ci5yZXBsYWNlKG1hdGNoT3BlcmF0b3JzUmUsICdcXFxcJCYnKTtcbn07XG4iLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBlc2NhcGVyIGZyb20gJ2VzY2FwZS1zdHJpbmctcmVnZXhwJztcblxuaW1wb3J0IElucHV0IGZyb20gJy4uL2JvdW5kbGVzcy1pbnB1dC9pbmRleCc7XG5pbXBvcnQgZXh0cmFjdENoaWxkUHJvcHMgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb24vaW5kZXgnO1xuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLWlzLWZ1bmN0aW9uL2luZGV4JztcbmltcG9ydCBpc1N0cmluZyBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtaXMtc3RyaW5nL2luZGV4JztcbmltcG9ydCBub29wIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1ub29wL2luZGV4JztcbmltcG9ydCBvbWl0IGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vbWl0LWtleXMvaW5kZXgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vYm91bmRsZXNzLXV0aWxzLXV1aWQvaW5kZXgnO1xuXG4vKipcbiMgVHlwZWFoZWFkXG5fX0ludGVsbGlnZW50bHkgcmVjb21tZW5kIGVudGl0aWVzIHZpYSBjdXN0b21pemFibGUsIGZ1enp5IHJlY29nbml0aW9uLl9fXG5cblR5cGVhaGVhZCBpcyBhbiBlbmhhbmNlbWVudCB1cG9uIFtJbnB1dF0oaHR0cHM6Ly9naXRodWIuY29tL2VuaWdtYS1pby9ib3VuZGxlc3MvdHJlZS9tYXN0ZXIvcGFja2FnZXMvYm91bmRsZXNzLWlucHV0KSB3aGljaCBwcm92aWRlcyB0d28gYnVpbHQtaW4gbWF0Y2hpbmcgYWxnb3JpdGhtcyAoXCJmdXp6eVwiIFxcW2RlZmF1bHRcXF0gYW5kIFwic3RhcnRzLXdpdGhcIikgYW5kIHN1cHBvcnRzIHRoZSB1c2Ugb2YgY3VzdG9tIG1hdGNoaW5nIGFuZCBtYXJraW5nIGZ1bmN0aW9ucy5cblxuSW4gdGhlIGV4YW1wbGVzIGJlbG93LCBpbWFnaW5lIHRoZSBgPD5gIGluIHRoZSBcIm1hcmtzXCIgc2VjdGlvbiBpcyBhIHdyYXBwaW5nIGA8bWFyaz5gIGVsZW1lbnQ6XG5cbjEuIF9fXCJTdGFydHMtd2l0aFwiIG1hdGNoaW5nICYgbWFya2luZ19fXG4gICBgYGBqc3hcbiAgIDxUeXBlYWhlYWRcbiAgICAgICBhbGdvcml0aG09e1R5cGVhaGVhZC5tb2RlLlNUQVJUU19XSVRIfVxuICAgICAgIGVudGl0aWVzPXtbXG4gICAgICAgICAgIHt0ZXh0OiAnYXBwbGUnfSxcbiAgICAgICAgICAge3RleHQ6ICdhcHJpY290J30sXG4gICAgICAgICAgIHt0ZXh0OiAnZ3JhcGUnfSxcbiAgICAgICBdfVxuICAgICAgIGlucHV0UHJvcHM9e3t2YWx1ZTogJ2EnfX0gLz5cbiAgIGBgYFxuXG4gICArIG1hdGNoZXM6IGBcImFwcGxlXCIsIFwiYXByaWNvdFwiYFxuICAgKyBtYXJrczogYFwiPGE+cHBsZVwiLCBcIjxhPnByaWNvdFwiYFxuXG4xLiBfX1wiRnV6enlcIiBtYXRjaGluZyAmIG1hcmtpbmdfX1xuICAgYGBganN4XG4gICA8VHlwZWFoZWFkXG4gICAgICAgYWxnb3JpdGhtPXtUeXBlYWhlYWQubW9kZS5GVVpaWX1cbiAgICAgICBlbnRpdGllcz17W1xuICAgICAgICAgICB7dGV4dDogJ2FwcGxlJ30sXG4gICAgICAgICAgIHt0ZXh0OiAnYXByaWNvdCd9LFxuICAgICAgICAgICB7dGV4dDogJ2dyYXBlJ30sXG4gICAgICAgXX1cbiAgICAgICBpbnB1dFByb3BzPXt7dmFsdWU6ICdhJ319IC8+XG4gICBgYGBcblxuICAgKyBtYXRjaGVzOiBgXCJhcHBsZVwiLCBcImFwcmljb3RcIiwgXCJncmFwZVwiYFxuICAgKyBtYXJrczogYFwiPGE+cHBsZVwiLCBcIjxhPnByaWNvdFwiLCBcImdyPGE+cGVcImBcblxuMS4gX19DdXN0b20gbWF0Y2hpbmcgJiBtYXJraW5nX19cblxuICAgIE9wdGlvbmFsbHksIHlvdSBjYW4gcHJvdmlkZSB5b3VyIG93biBjb21iaW5hdGlvbiBvZiBtYXRjaGluZyBhbmQgbWFya2luZyBmdW5jdGlvbnMuIEZvciBleGFtcGxlLCBsb29zZW5pbmcgdGhlIG1hdGNoaW5nIHRvIGluY2x1ZGUgdW5pY29kZSB2YXJpYW50cyBvZiBjaGFyYWN0ZXJzIGNvdWxkIGJlIHVzZWZ1bCwgZS5nLiDDpyAmcmFycjsgY1xuXG4gICAgYGBganN4XG4gICAgPFR5cGVhaGVhZFxuICAgICAgICBhbGdvcml0aG09e3tcbiAgICAgICAgICAgIG1hdGNoZXI6IHlvdXJNYXRjaEZ1bmMsXG4gICAgICAgICAgICBtYXJrZXI6IHlvdXJNYXJrRnVuYyxcbiAgICAgICAgfX0gLz5cbiAgICBgYGBcblxuIyMgQ29tcG9uZW50IEluc3RhbmNlIE1ldGhvZHNcblxuV2hlbiB1c2luZyBgVHlwZWFoZWFkYCBpbiB5b3VyIHByb2plY3QsIHlvdSBtYXkgY2FsbCB0aGUgZm9sbG93aW5nIG1ldGhvZHMgb24gYSByZW5kZXJlZCBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50LiBVc2UgW2ByZWZzYF0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9yZWZzLWFuZC10aGUtZG9tLmh0bWwpIHRvIGdldCB0aGUgaW5zdGFuY2UuXG5cbi0gX19gZm9jdXMoKWBfX1xuICBmb2N1c2VzIHRoZSBicm93c2VyIG9vbiB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IGZvciBpbW1lZGlhdGUgdGV4dCBlbnRyeVxuXG4tIF9fYGdldElucHV0Tm9kZSgpYF9fXG4gIHJldHVybnMgdGhlIHJhdyB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgRE9NIG5vZGVcblxuLSBfX2BnZXRTZWxlY3RlZEVudGl0eVRleHQoKWBfX1xuICByZXR1cm5zIHRoZSBgdGV4dGAgcHJvcGVydHkgb2YgdGhlIGN1cnJlbnRseSBoaWdobGlnaHRlZCBlbnRpdHkgKGZyb20gYHByb3BzLmVudGl0aWVzYCksIG9yIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nXG5cbi0gX19gZ2V0VmFsdWUoKWBfX1xuICByZXRyaWV2ZXMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dFxuXG4tIF9fYHNlbGVjdCgpYF9fXG4gIHByb2dyYW1tYXRpY2FsbHkgY3JlYXRlcyBhIGZ1bGwgc2VsZWN0aW9uIG9uIHRoZSB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgc3VjaCB0aGF0IGEgcHJlc3Mgb2YgdGhlIEJhY2tzcGFjZSBrZXkgd291bGQgZnVsbHkgY2xlYXIgdGhlIGlucHV0XG5cbi0gX19gc2V0VmFsdWUodmFsdWU6IHN0cmluZylgX19cbiAgc2V0cyB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IHRvIHRoZSBzcGVjaWZpZWQgdGV4dCBhbmQgdXBkYXRlcyBpbnRlcm5hbCBzdGF0ZTsgZG8gbm90IHVzZSB0aGlzIG1ldGhvZCB3aGVuIHVzaW5nIGBUeXBlYWhlYWRgIGFzIGEgXCJjb250cm9sbGVkIGlucHV0XCJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHlwZWFoZWFkIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIG1vZGUgPSB7XG4gICAgICAgICdTVEFSVFNfV0lUSCc6IHV1aWQoKSxcbiAgICAgICAgJ0ZVWlpZJzogdXVpZCgpLFxuICAgIH1cblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIC8qKiBUeXBlYWhlYWQgYWNjZXB0cyBhbGwgc3VwcG9ydGVkIFtJbnB1dCBwcm9wc10oL0lucHV0I3Byb3BzKSAqL1xuICAgICAgICAuLi5JbnB1dC5wcm9wVHlwZXMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAgICB0aGUgbWVjaGFuaXNtIHVzZWQgdG8gaWRlbnRpZnkgYW5kIG1hcmsgbWF0Y2hpbmcgc3Vic3RyaW5nczsgYSBjdXN0b20gc2V0IGNhbiBiZSBwcm92aWRlZCBhcyBhbiBvYmplY3QgKHNlZSB0aGUgcHJvcGVydGllcyBiZWxvdylcbiAgICAgICAgICovXG4gICAgICAgIGFsZ29yaXRobTogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLlNUQVJUU19XSVRILFxuICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiBmb3JtYXQgd2lsbCBiZSB3aGF0IHNob3dzIHVwIGluIHRoZSB0eXBlYWhlYWQgZHJvcGRvd24gbGlzdCAoSlNYIGFycmF5cyBhcmUgYWNjZXB0ZWQsIHRoZSBjb21wb25lbnQgd2lsbCBwcm92aWRlIHRoZSB3cmFwcGVyKVxuXG4gICAgICAgICAgICAgICAgICAgIGFuIGV4YW1wbGUgbWFya2luZyBmdW5jdGlvbjpcblxuICAgICAgICAgICAgICAgICAgICBgYGBqc1xuICAgICAgICAgICAgICAgICAgICBzdGFydHNXaXRoTWFya2luZ0Z1bmMoaW5wdXRUZXh0LCBlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eUNvbnRlbnQgPSBlbnRpdHkudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZWtWYWx1ZSA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFN0YXJ0ID0gZW50aXR5Q29udGVudC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2Vla1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4RW5kID0gaW5kZXhTdGFydCArIHNlZWtWYWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4ga2V5PSdiZWZvcmUnPntlbnRpdHlDb250ZW50LnNsaWNlKDAsIGluZGV4U3RhcnQpfTwvc3Bhbj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hcmsga2V5PSdtYXJrJz57ZW50aXR5Q29udGVudC5zbGljZShpbmRleFN0YXJ0LCBpbmRleEVuZCl9PC9tYXJrPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9J2FmdGVyJz57ZW50aXR5Q29udGVudC5zbGljZShpbmRleEVuZCl9PC9zcGFuPixcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYGBgXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbWFya2VyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgICAgICAgICAgICAgIFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICAgICAgICAgICAgICBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdKSxcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiBmb3JtYXQgZGV0ZXJtaW5lcyB3aGljaCBlbnRpdGllcyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbWFya2luZyBmdW5jdGlvblxuXG4gICAgICAgICAgICAgICAgICAgIGFuIGV4YW1wbGUgbWF0Y2hpbmcgZnVuY3Rpb246XG5cbiAgICAgICAgICAgICAgICAgICAgYGBganNcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRzV2l0aE1hdGNoaW5nRnVuYyhpbnB1dFRleHQsIGVudGl0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWVrVmFsdWUgPSB1c2VyVGV4dC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXRpZXMucmVkdWNlKGZ1bmN0aW9uIHNlZWtNYXRjaChyZXN1bHRzLCBlbnRpdHksIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eS50ZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWVrVmFsdWUpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYGBgXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbWF0Y2hlcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgICAgICAgICAgICAgIFByb3BUeXBlcy5mdW5jLFxuICAgICAgICAgICAgICAgICAgICBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgICAgICAgICAgICAgICAgICAgVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgsXG4gICAgICAgICAgICAgICAgICAgICAgICBUeXBlYWhlYWQubW9kZS5GVVpaWSxcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGlmIGB0cnVlYCwgY2xlYXJzIHRoZSBpbnB1dCB0ZXh0IHdoZW4gYSAocGFydGlhbCkgbWF0Y2ggaXMgc2VsZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyT25TZWxlY3Rpb246IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbiBhcnJheSBvZiBvYmplY3RzIHRoYXQgdXNlciBpbnB1dCBpcyBmaWx0ZXJlZCBhZ2FpbnN0OyBhdCBhIG1pbmltdW0sIGVhY2ggb2JqZWN0IG11c3QgaGF2ZSBhIGB0ZXh0YCBwcm9wZXJ0eSBhbmQgYW55IG90aGVyIHN1cHBsaWVkIHByb3BlcnR5IGlzIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSByZXN1bHRpbmcgRE9NIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGVudGl0aWVzOiBQcm9wVHlwZXMuYXJyYXlPZihcbiAgICAgICAgICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogdGhlIHRleHQgdG8gYmUgdXNlZCB0byBkbyBzdHJpbmcgY29tcGFyaXNvbiBhbmQgbWF0Y2ggYWdhaW5zdFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRleHQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlbmRlcnMgYSBkaXNhYmxlZCB0ZXh0ZmllbGQgd2l0aCB0aGUgZnVsbCB0ZXh0IG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaW5wdXQgaGludDsgd2lsbCByZW1haW4gYmxhbmsgaWYgdGhlIG1hdGNoZWQgc3Vic3RyaW5nIGlzIG5vdCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSB1c2VyIGlucHV0XG4gICAgICAgICAqL1xuICAgICAgICBoaW50OiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpOyBhcHBsaWVkIHRvIHRoZSBgLmItdHlwZWFoZWFkLWhpbnRgIEhUTUwgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgaGludFByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbnkgW1JlYWN0LXN1cHBvcnRlZCBhdHRyaWJ1dGVdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvdGFncy1hbmQtYXR0cmlidXRlcy5odG1sI2h0bWwtYXR0cmlidXRlcyk7IGFwcGxpZWQgdG8gdGhlIGAuYi10eXBlYWhlYWQtbWF0Y2gtd3JhcHBlcmAgSFRNTCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBtYXRjaFdyYXBwZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIFwib2Zmc2NyZWVuXCIgY2xhc3MgdXNlZCBieSB5b3VyIGFwcGxpY2F0aW9uOyBzcGVjaWZpY2FsbHkgdG8gcmV0YWluIFtBUklBIG5hdmlnYWJpbGl0eV0oaHR0cDovL3Nub29rLmNhL2FyY2hpdmVzL2h0bWxfYW5kX2Nzcy9oaWRpbmctY29udGVudC1mb3ItYWNjZXNzaWJpbGl0eSkgYXMgYGRpc3BsYXk6IG5vbmVgIGV4Y2x1ZGVzIHRoZSBlbGVtZW50IGZyb20gY29uc2lkZXJhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb2Zmc2NyZWVuQ2xhc3M6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgYEVudGVyYCB3aXRoIG5vIGF1dG9zdWdnZXN0IGhpbnQgYXZhaWxhYmxlLCBpbmRpY2F0aW5nIHRoYXQgaW5wdXQgaXMgY29tcGxldGVcbiAgICAgICAgICovXG4gICAgICAgIG9uQ29tcGxldGU6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2l0aCB0aGUgaW5kZXggb2YgdGhlIGhpZ2hsaWdodGVkIGVudGl0eSBkdWUgdG8ga2V5Ym9hcmQgc2VsZWN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBvbkVudGl0eUhpZ2hsaWdodGVkOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdpdGggdGhlIGluZGV4IG9mIHRoZSBlbnRpdHkgc2VsZWN0ZWQgYnkgdGhlIHVzZXJcbiAgICAgICAgICovXG4gICAgICAgIG9uRW50aXR5U2VsZWN0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIC4uLklucHV0LmRlZmF1bHRQcm9wcyxcbiAgICAgICAgYWxnb3JpdGhtOiBUeXBlYWhlYWQubW9kZS5GVVpaWSxcbiAgICAgICAgY2xlYXJPblNlbGVjdGlvbjogZmFsc2UsXG4gICAgICAgIGVudGl0aWVzOiBbXSxcbiAgICAgICAgaGludDogbnVsbCxcbiAgICAgICAgaGludFByb3BzOiB7fSxcbiAgICAgICAgbWF0Y2hXcmFwcGVyUHJvcHM6IHt9LFxuICAgICAgICBvZmZzY3JlZW5DbGFzczogJ2Itb2Zmc2NyZWVuJyxcbiAgICAgICAgb25Db21wbGV0ZTogbm9vcCxcbiAgICAgICAgb25FbnRpdHlIaWdobGlnaHRlZDogbm9vcCxcbiAgICAgICAgb25FbnRpdHlTZWxlY3RlZDogbm9vcCxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoVHlwZWFoZWFkLmRlZmF1bHRQcm9wcylcblxuICAgIHN0YXRlID0ge1xuICAgICAgICBlbnRpdHlNYXRjaEluZGV4ZXM6IFtdLFxuICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICBpc0NvbnRyb2xsZWQ6IGlzU3RyaW5nKHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSksXG4gICAgICAgIGlucHV0OiB0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWVcbiAgICAgICAgICAgICAgIHx8IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5kZWZhdWx0VmFsdWVcbiAgICAgICAgICAgICAgIHx8ICcnLFxuICAgICAgICBzZWxlY3RlZEVudGl0eUluZGV4OiAtMSxcbiAgICB9XG5cbiAgICBtb3VudGVkID0gZmFsc2VcblxuICAgIHVwZGF0ZUlucHV0U3RhdGUgPSAodmFsdWUgPSAnJykgPT4gdGhpcy5zZXRTdGF0ZSh7aW5wdXQ6IHZhbHVlfSlcblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSB8fCB0aGlzLnByb3BzLmlucHV0UHJvcHMuZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25FbnRpdHlIaWdobGlnaHRlZCh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wcy5lbnRpdGllcyAhPT0gdGhpcy5wcm9wcy5lbnRpdGllcykge1xuICAgICAgICAgICAgdGhpcy5jb21wdXRlTWF0Y2hlcyhuZXh0UHJvcHMuZW50aXRpZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5leHRQcm9wcy5pbnB1dFByb3BzLnZhbHVlICE9PSB0aGlzLnByb3BzLmlucHV0UHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXRTdGF0ZShuZXh0UHJvcHMuaW5wdXRQcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZW50aXR5TWF0Y2hJbmRleGVzLmxlbmd0aCAmJiAhcHJldlN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcy5tYXRjaGVzLnNjcm9sbFRvcCA9IDA7XG4gICAgICAgIH0gLy8gZml4IGFuIG9kZCBidWcgaW4gRkYgd2hlcmUgaXQgaW5pdGlhbGl6ZXMgdGhlIGVsZW1lbnQgd2l0aCBhbiBpbmNvcnJlY3Qgc2Nyb2xsVG9wXG5cbiAgICAgICAgaWYgKCAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCA+PSAwXG4gICAgICAgICAgICAmJiB0aGlzLnByb3BzLmVudGl0aWVzW3RoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleF0gIT09IHByZXZQcm9wcy5lbnRpdGllc1twcmV2U3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleF0pIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25FbnRpdHlIaWdobGlnaHRlZCh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGdldFNlbGVjdGVkRW50aXR5VGV4dCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5wcm9wcy5lbnRpdGllc1t0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXhdO1xuXG4gICAgICAgIHJldHVybiBlbnRpdHkgPyBlbnRpdHkudGV4dCA6ICcnO1xuICAgIH1cblxuICAgIGhhbmRsZU1hdGNoQ2xpY2soaW5kZXgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRFbnRpdHlJbmRleDogaW5kZXh9LCB0aGlzLnNldFZhbHVlV2l0aFNlbGVjdGVkRW50aXR5KTtcbiAgICB9XG5cbiAgICBzZWxlY3RNYXRjaChkZWx0YSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5zdGF0ZS5lbnRpdHlNYXRjaEluZGV4ZXM7XG4gICAgICAgIGNvbnN0IHRvdGFsTWF0Y2hlcyA9IG1hdGNoZXMubGVuZ3RoO1xuICAgICAgICBsZXQgbmV4dEluZGV4ID0gbWF0Y2hlcy5pbmRleE9mKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCkgKyBkZWx0YTtcblxuICAgICAgICBpZiAodG90YWxNYXRjaGVzKSB7XG4gICAgICAgICAgICBpZiAobmV4dEluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIG5leHRJbmRleCA9IHRvdGFsTWF0Y2hlcyAtIDE7IC8vIHJldmVyc2UgbG9vcFxuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXh0SW5kZXggPj0gdG90YWxNYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgbmV4dEluZGV4ID0gMDsgLy8gbG9vcFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBtYXRjaEluZGV4ID0gbWF0Y2hlc1tuZXh0SW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlc05vZGUgPSB0aGlzLnJlZnMubWF0Y2hlcztcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXNOb2RlWUVuZCA9IG1hdGNoZXNOb2RlLnNjcm9sbFRvcCArIG1hdGNoZXNOb2RlLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoTm9kZSA9IHRoaXMucmVmc1tgbWF0Y2hfJCR7bWF0Y2hJbmRleH1gXTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoTm9kZVlTdGFydCA9IG1hdGNoTm9kZS5vZmZzZXRUb3A7XG4gICAgICAgICAgICBjb25zdCBtYXRjaE5vZGVZRW5kID0gbWF0Y2hOb2RlWVN0YXJ0ICsgbWF0Y2hOb2RlLmNsaWVudEhlaWdodDtcblxuICAgICAgICAgICAgLy8gYnJpbmcgaW50byB2aWV3IGlmIG5lY2Vzc2FyeVxuICAgICAgICAgICAgaWYgKG1hdGNoTm9kZVlFbmQgPj0gbWF0Y2hlc05vZGVZRW5kKSB7IC8vIGJlbG93XG4gICAgICAgICAgICAgICAgbWF0Y2hlc05vZGUuc2Nyb2xsVG9wICs9IG1hdGNoTm9kZVlFbmQgLSBtYXRjaGVzTm9kZVlFbmQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoTm9kZVlTdGFydCA8PSBtYXRjaGVzTm9kZS5zY3JvbGxUb3ApIHsgLy8gYWJvdmVcbiAgICAgICAgICAgICAgICBtYXRjaGVzTm9kZS5zY3JvbGxUb3AgPSBtYXRjaE5vZGVZU3RhcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkRW50aXR5SW5kZXg6IG1hdGNoSW5kZXh9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc2V0TWF0Y2hlcyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRFbnRpdHlJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgZW50aXR5TWF0Y2hJbmRleGVzOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0SW5wdXROb2RlID0gKCkgPT4gdGhpcy5yZWZzLmlucHV0LnJlZnMuZmllbGRcblxuICAgIHNlbGVjdCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLmdldElucHV0Tm9kZSgpO1xuXG4gICAgICAgIGlucHV0LnNlbGVjdGlvblN0YXJ0ID0gMDtcbiAgICAgICAgaW5wdXQuc2VsZWN0aW9uRW5kID0gdGhpcy5nZXRWYWx1ZSgpLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb2N1cyA9ICgpID0+IHRoaXMuZ2V0SW5wdXROb2RlKCkuZm9jdXMoKVxuICAgIGdldFZhbHVlID0gKCkgPT4gdGhpcy5yZWZzLmlucHV0LmdldFZhbHVlKClcblxuICAgIHNldFZhbHVlID0gKHZhbHVlID0gJycpID0+IHtcbiAgICAgICAgdGhpcy5yZWZzLmlucHV0LnNldFZhbHVlKHZhbHVlKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0U3RhdGUodmFsdWUpO1xuICAgICAgICB0aGlzLnJlc2V0TWF0Y2hlcygpO1xuICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgY3Vyc29yQXRFbmRPZklucHV0KCkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5nZXRJbnB1dE5vZGUoKTtcblxuICAgICAgICByZXR1cm4gICAgbm9kZS5zZWxlY3Rpb25TdGFydCA9PT0gbm9kZS5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICYmIG5vZGUuc2VsZWN0aW9uRW5kID09PSB0aGlzLmdldFZhbHVlKCkubGVuZ3RoO1xuICAgIH1cblxuICAgIHNldFZhbHVlV2l0aFNlbGVjdGVkRW50aXR5ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLm9uRW50aXR5U2VsZWN0ZWQodGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4KTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jbGVhck9uU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKCcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRTZWxlY3RlZEVudGl0eVRleHQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBuZWVkcyB0byBoYXBwZW4gYWZ0ZXIgdGhlIHVwY29taW5nIHJlbmRlciB0aGF0IHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IGBzZXRWYWx1ZWBcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhpcy5yZXNldE1hdGNoZXMsIDApO1xuICAgIH1cblxuICAgIG1hcmtGdXp6eU1hdGNoU3Vic3RyaW5nKGlucHV0LCBlbnRpdHkpIHtcbiAgICAgICAgY29uc3QgZW50aXR5Q29udGVudCA9IGVudGl0eS50ZXh0O1xuICAgICAgICBjb25zdCBmcmFncyA9IGVudGl0eUNvbnRlbnQuc3BsaXQobmV3IFJlZ0V4cCgnKCcgKyBlc2NhcGVyKGlucHV0KSArICcpJywgJ2lnJykpO1xuICAgICAgICBjb25zdCBub3JtYWxpemVkVXNlclRleHQgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCB0aHJlc2hvbGQgPSBmcmFncy5sZW5ndGg7XG4gICAgICAgIGxldCBpID0gLTE7XG5cbiAgICAgICAgd2hpbGUgKCsraSA8IHRocmVzaG9sZCkge1xuICAgICAgICAgICAgaWYgKGZyYWdzW2ldLnRvTG93ZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWRVc2VyVGV4dCkge1xuICAgICAgICAgICAgICAgIGZyYWdzW2ldID0gPG1hcmsga2V5PXtpfSBjbGFzc05hbWU9J2ItdHlwZWFoZWFkLW1hdGNoLWhpZ2hsaWdodCc+e2ZyYWdzW2ldfTwvbWFyaz47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnJhZ3M7XG4gICAgfVxuXG4gICAgbWFya1N0YXJ0c1dpdGhNYXRjaFN1YnN0cmluZyhpbnB1dCwgZW50aXR5KSB7XG4gICAgICAgIGNvbnN0IGVudGl0eUNvbnRlbnQgPSBlbnRpdHkudGV4dDtcbiAgICAgICAgY29uc3Qgc2Vla1ZhbHVlID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgaW5kZXhTdGFydCA9IGVudGl0eUNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlZWtWYWx1ZSk7XG4gICAgICAgIGNvbnN0IGluZGV4RW5kID0gaW5kZXhTdGFydCArIHNlZWtWYWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIDxzcGFuIGtleT0nMCc+e2VudGl0eUNvbnRlbnQuc2xpY2UoMCwgaW5kZXhTdGFydCl9PC9zcGFuPixcbiAgICAgICAgICAgIDxtYXJrIGtleT0nMScgY2xhc3NOYW1lPSdiLXR5cGVhaGVhZC1tYXRjaC1oaWdobGlnaHQnPntlbnRpdHlDb250ZW50LnNsaWNlKGluZGV4U3RhcnQsIGluZGV4RW5kKX08L21hcms+LFxuICAgICAgICAgICAgPHNwYW4ga2V5PScyJz57ZW50aXR5Q29udGVudC5zbGljZShpbmRleEVuZCl9PC9zcGFuPixcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBnZXRNYXJraW5nRnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyh0aGlzLnByb3BzLmFsZ29yaXRobSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmFsZ29yaXRobSA9PT0gVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXJrU3RhcnRzV2l0aE1hdGNoU3Vic3RyaW5nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXJrRnV6enlNYXRjaFN1YnN0cmluZztcblxuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5hbGdvcml0aG0ubWFya2VyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuYWxnb3JpdGhtLm1hcmtlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLndhcm5lZE1hcmtlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLndhcm5lZE1hcmtlciA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1R5cGVhaGVhZDogbm8gYHByb3BzLmFsZ29yaXRobS5tYXJrZXJgIHdhcyBwcm92aWRlZDsgZmFsbGluZyBiYWNrIHRvIHRoZSBkZWZhdWx0IG1hcmtpbmcgYWxnb3JpdGhtIChGVVpaWSkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5tYXJrRnV6enlNYXRjaFN1YnN0cmluZztcbiAgICB9XG5cbiAgICBtYXJrTWF0Y2hTdWJzdHJpbmcgPSAoLi4uYXJncykgPT4gdGhpcy5nZXRNYXJraW5nRnVuY3Rpb24oKSguLi5hcmdzKVxuXG4gICAgZ2V0RnV6enlNYXRjaEluZGV4ZXModXNlclRleHQsIGVudGl0aWVzKSB7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB1c2VyVGV4dC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHJldHVybiBlbnRpdGllcy5yZWR1Y2UoZnVuY3Rpb24gZmluZEluZGV4ZXMocmVzdWx0LCBlbnRpdHksIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gICBlbnRpdHkudGV4dC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yobm9ybWFsaXplZCkgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgPyAocmVzdWx0LnB1c2goaW5kZXgpICYmIHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICA6IHJlc3VsdDtcbiAgICAgICAgfSwgW10pO1xuICAgIH1cblxuICAgIGdldFN0YXJ0c1dpdGhNYXRjaEluZGV4ZXModXNlclRleHQsIGVudGl0aWVzKSB7XG4gICAgICAgIGNvbnN0IHNlZWtWYWx1ZSA9IHVzZXJUZXh0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIGVudGl0aWVzLnJlZHVjZShmdW5jdGlvbiBzZWVrTWF0Y2gocmVzdWx0cywgZW50aXR5LCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGVudGl0eS50ZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWVrVmFsdWUpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cbiAgICAgICAgfSwgW10pO1xuICAgIH1cblxuICAgIGdldE1hdGNoaW5nRnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyh0aGlzLnByb3BzLmFsZ29yaXRobSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmFsZ29yaXRobSA9PT0gVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGFydHNXaXRoTWF0Y2hJbmRleGVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGdXp6eU1hdGNoSW5kZXhlcztcblxuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5hbGdvcml0aG0ubWF0Y2hlcikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmFsZ29yaXRobS5tYXRjaGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMud2FybmVkTWF0Y2hlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLndhcm5lZE1hdGNoZXIgPSB0cnVlO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUeXBlYWhlYWQ6IG5vIGBwcm9wcy5hbGdvcml0aG0ubWF0Y2hlcmAgd2FzIHByb3ZpZGVkOyBmYWxsaW5nIGJhY2sgdG8gdGhlIGRlZmF1bHQgbWF0Y2hpbmcgYWxnb3JpdGhtIChGVVpaWSkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5nZXRGdXp6eU1hdGNoSW5kZXhlcztcbiAgICB9XG5cbiAgICBnZXRNYXRjaEluZGV4ZXMgPSAoLi4uYXJncykgPT4gdGhpcy5nZXRNYXRjaGluZ0Z1bmN0aW9uKCkoLi4uYXJncylcblxuICAgIGNvbXB1dGVNYXRjaGVzKHByb3ZpZGVkRW50aXRpZXMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUsIHByb3BzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRpdGllcyA9IHByb3ZpZGVkRW50aXRpZXMgfHwgcHJvcHMuZW50aXRpZXM7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBzdGF0ZS5pbnB1dDtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBjdXJyZW50VmFsdWUgPT09ICcnID8gW10gOiB0aGlzLmdldE1hdGNoSW5kZXhlcyhjdXJyZW50VmFsdWUsIGVudGl0aWVzKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVudGl0eUluZGV4OiBtYXRjaGVzLmxlbmd0aCA/IG1hdGNoZXNbMF0gOiAtMSxcbiAgICAgICAgICAgICAgICBlbnRpdHlNYXRjaEluZGV4ZXM6IG1hdGNoZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb250cm9sbGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dFN0YXRlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25DaGFuZ2UoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5zZWxlY3Rpb25TdGFydCA+IDEpIHtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnVGFiJzpcbiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICBpZiAoICAgdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4ICE9PSAtMVxuICAgICAgICAgICAgICAgICYmIHRoaXMuY3Vyc29yQXRFbmRPZklucHV0KClcbiAgICAgICAgICAgICAgICAmJiB0aGlzLmdldElucHV0Tm9kZSgpID09PSBldmVudC50YXJnZXRcbiAgICAgICAgICAgICAgICAmJiAhZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICBldmVudC5uYXRpdmVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgICBldmVudC5uYXRpdmVFdmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBibG9jayBjdXJzb3IgbW92ZW1lbnRcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TWF0Y2goLTEpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgIGV2ZW50Lm5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIGJsb2NrIGN1cnNvciBtb3ZlbWVudFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNYXRjaCgxKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0VzY2FwZSc6XG4gICAgICAgICAgICBpZiAoICAgdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4ICE9PSAtMVxuICAgICAgICAgICAgICAgICYmIHRoaXMuZ2V0SW5wdXROb2RlKCkgPT09IGV2ZW50LnRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRNYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICAgIGlmICggICB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggIT09IC0xXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5nZXRJbnB1dE5vZGUoKSA9PT0gZXZlbnQudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhbHVlV2l0aFNlbGVjdGVkRW50aXR5KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Db21wbGV0ZSh0aGlzLnN0YXRlLmlucHV0LCBldmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5vbktleURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uS2V5RG93bihldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJOb3RpZmljYXRpb24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgcmVmPSdhcmlhJ1xuICAgICAgICAgICAgICAgIGlkPXt0aGlzLnN0YXRlLmlkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5wcm9wcy5vZmZzY3JlZW5DbGFzc31cbiAgICAgICAgICAgICAgICBhcmlhLWxpdmU9J3BvbGl0ZSc+XG4gICAgICAgICAgICAgICAge3RoaXMuZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0KCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJIaW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5oaW50KSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyVGV4dCA9IHRoaXMuc3RhdGUuaW5wdXQ7XG4gICAgICAgICAgICBjb25zdCByYXcgPSB0aGlzLmdldFNlbGVjdGVkRW50aXR5VGV4dCgpO1xuICAgICAgICAgICAgbGV0IHByb2Nlc3NlZCA9ICcnO1xuXG4gICAgICAgICAgICBpZiAoICAgcmF3XG4gICAgICAgICAgICAgICAgJiYgcmF3LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih1c2VyVGV4dC50b0xvd2VyQ2FzZSgpKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHJhdy5yZXBsYWNlKG5ldyBSZWdFeHAodXNlclRleHQsICdpJyksIHVzZXJUZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmhpbnRQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdoaW50J1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItaW5wdXQtcGxhY2Vob2xkZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItdHlwZWFoZWFkLWhpbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaW50UHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD0nLTEnPlxuICAgICAgICAgICAgICAgICAgICB7cHJvY2Vzc2VkfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlck1hdGNoZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcy5tYXRjaFdyYXBwZXJQcm9wcztcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdtYXRjaGVzJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXR5cGVhaGVhZC1tYXRjaC13cmFwcGVyJywgcHJvcHMuY2xhc3NOYW1lKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5tYXAoKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnByb3BzLmVudGl0aWVzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHtjbGFzc05hbWUsIHRleHQsIC4uLnJlc3R9ID0gZW50aXR5O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17YG1hdGNoXyQke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdHlwZWFoZWFkLW1hdGNoJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYi10eXBlYWhlYWQtbWF0Y2gtc2VsZWN0ZWQnOiB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggPT09IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt0ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZU1hdGNoQ2xpY2suYmluZCh0aGlzLCBpbmRleCl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5tYXJrTWF0Y2hTdWJzdHJpbmcodGhpcy5zdGF0ZS5pbnB1dCwgZW50aXR5KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge3Byb3BzLCBzdGF0ZX0gPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQocHJvcHMsIFR5cGVhaGVhZC5pbnRlcm5hbEtleXMpfVxuICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXR5cGVhaGVhZC13cmFwcGVyJywgcHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn0+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTm90aWZpY2F0aW9uKCl9XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVySGludCgpfVxuXG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgIHsuLi5leHRyYWN0Q2hpbGRQcm9wcyhwcm9wcywgSW5wdXQuZGVmYXVsdFByb3BzKX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdpbnB1dCdcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1jb250cm9scz17c3RhdGUuaWR9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLmlucHV0UHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN4KCdiLXR5cGVhaGVhZCcsIHByb3BzLmlucHV0UHJvcHMuY2xhc3NOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgfX0gLz5cblxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck1hdGNoZXMoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCwge1Byb3BUeXBlc30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgVHlwZWFoZWFkIGZyb20gJy4uL2JvdW5kbGVzcy10eXBlYWhlYWQvaW5kZXgnO1xuaW1wb3J0IGV4dHJhY3RDaGlsZFByb3BzIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1vYmplY3QtaW50ZXJzZWN0aW9uL2luZGV4JztcbmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4uL2JvdW5kbGVzcy11dGlscy1pcy1mdW5jdGlvbi9pbmRleCc7XG5pbXBvcnQgbm9vcCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtbm9vcC9pbmRleCc7XG5pbXBvcnQgb21pdCBmcm9tICcuLi9ib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzL2luZGV4JztcblxuY29uc3QgZmlyc3QgPSAoYXJyYXkpID0+IGFycmF5WzBdO1xuY29uc3QgbGFzdCA9IChhcnJheSkgPT4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG5cbi8qKlxuIyBUb2tlbml6ZWRJbnB1dFxuX19EaXN0aWxsIHJpY2ggZW50aXR5IGRhdGEgbWF0Y2hlZCB2aWEgdHlwZWFoZWFkIGlucHV0IGludG8gc2ltcGxlIHZpc3VhbCBhYnN0cmFjdGlvbnMuX19cblxuQmFzaWMgdXNhZ2Ugb2YgdGhpcyBjb21wb25lbnQgaXMgaWRlbnRpY2FsIHRvIHRoYXQgb2YgW1R5cGVhaGVhZF0oaHR0cHM6Ly9naXRodWIuY29tL2VuaWdtYS1pby9ib3VuZGxlc3MvbWFzdGVyL3BhY2thZ2VzL2JvdW5kbGVzcy10eXBlYWhlYWQpLiBBZGRpdGlvbmFsIHByb3BzIGFyZSBhdmFpbGFibGUgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgdGhlIHRva2VuaXphdGlvbiBmdW5jdGlvbmFsaXR5LlxuXG4jIyBDb21wb25lbnQgSW5zdGFuY2UgTWV0aG9kc1xuXG5XaGVuIHVzaW5nIGBUb2tlbml6ZWRJbnB1dGAgaW4geW91ciBwcm9qZWN0LCB5b3UgbWF5IGNhbGwgdGhlIGZvbGxvd2luZyBtZXRob2RzIG9uIGEgcmVuZGVyZWQgaW5zdGFuY2Ugb2YgdGhlIGNvbXBvbmVudC4gVXNlIFtgcmVmc2BdKGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvcmVmcy1hbmQtdGhlLWRvbS5odG1sKSB0byBnZXQgdGhlIGluc3RhbmNlLlxuXG4tIF9fYGFkZChpbmRleDogbnVtYmVyKWBfX1xuICBwcm9ncmFtbWF0aWNhbGx5IGNyZWF0ZXMgYSB0b2tlbiBmb3IgYHByb3BzLmVudGl0aWVzW2luZGV4XWA7IGBwcm9wcy5oYW5kbGVBZGRUb2tlbmAgd2lsbCBiZSBjYWxsZWQgYXMgYSBoaW50IHRvIHBlcnNpc3QgdGhlIGNoYW5nZSBpbiB5b3VyIGNvbnRyb2xsZXIgdmlldyBvciBvdGhlciBhcHBsaWNhdGlvbiBzdGF0ZVxuXG4tIF9fYGZvY3VzKClgX19cbiAgZm9jdXNlcyB0aGUgYnJvd3NlciBvb24gdGhlIHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dCBmb3IgaW1tZWRpYXRlIHRleHQgZW50cnlcblxuLSBfX2BnZXRJbnB1dE5vZGUoKWBfX1xuICByZXR1cm5zIHRoZSByYXcgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IERPTSBub2RlXG5cbi0gX19gZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0KClgX19cbiAgcmV0dXJucyB0aGUgYHRleHRgIHByb3BlcnR5IG9mIHRoZSBjdXJyZW50bHkgaGlnaGxpZ2h0ZWQgZW50aXR5IChmcm9tIGBwcm9wcy5lbnRpdGllc2ApLCBvciByZXR1cm5zIGFuIGVtcHR5IHN0cmluZ1xuXG4tIF9fYGdldFZhbHVlKClgX19cbiAgcmV0cmlldmVzIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXRcblxuLSBfX2ByZW1vdmUoaW5kZXg6IG51bWJlcilgX19cbiAgcHJvZ3JhbW1hdGljYWxseSByZW1vdmVzIHRoZSB0b2tlbiBmb3IgYHByb3BzLmVudGl0aWVzW2luZGV4XWA7IGBwcm9wcy5oYW5kbGVSZW1vdmVUb2tlbnNgIHdpbGwgYmUgY2FsbGVkIGFzIGEgaGludCB0byBwZXJzaXN0IHRoZSBjaGFuZ2UgaW4geW91ciBjb250cm9sbGVyIHZpZXcgb3Igb3RoZXIgYXBwbGljYXRpb24gc3RhdGVcblxuLSBfX2BzZWxlY3QoKWBfX1xuICBwcm9ncmFtbWF0aWNhbGx5IGNyZWF0ZXMgYSBmdWxsIHNlbGVjdGlvbiBvbiB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IHN1Y2ggdGhhdCBhIHByZXNzIG9mIHRoZSBCYWNrc3BhY2Uga2V5IHdvdWxkIGZ1bGx5IGNsZWFyIHRoZSBpbnB1dFxuXG4tIF9fYHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpYF9fXG4gIHNldHMgdGhlIHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dCB0byB0aGUgc3BlY2lmaWVkIHRleHQgYW5kIHVwZGF0ZXMgaW50ZXJuYWwgc3RhdGU7IGRvIG5vdCB1c2UgdGhpcyBtZXRob2Qgd2hlbiB1c2luZyBgVHlwZWFoZWFkYCBhcyBhIFwiY29udHJvbGxlZCBpbnB1dFwiXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRva2VuaXplZElucHV0IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqIFRva2VuaXplZElucHV0IGFjY2VwdHMgYWxsIFtgVHlwZWFoZWFkYF0oL1R5cGVhaGVhZCNwcm9wcykgYW5kIFtgSW5wdXRgXSgvSW5wdXQjcHJvcHMpIHByb3BzICovXG4gICAgICAgIC4uLlR5cGVhaGVhZC5wcm9wVHlwZXMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZ1bmN0aW9uIGhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgd2hlbiBhbiBlbnRpdHkgaXMgc2VsZWN0ZWQgYnkgdGhlIHVzZXIgYW5kIGEgdG9rZW4gc2hvdWxkIGJlIGNyZWF0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGhhbmRsZUFkZFRva2VuOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZnVuY3Rpb24gaGFuZGxlciB0aGF0IGlzIGNhbGxlZCB3aGVuIG9uZSBvciBtb3JlIHRva2VucyBhcmUgcmVtb3ZlZCBieSB0aGUgdXNlciB2aWEgY2xpY2tpbmcgdGhlIFwiY2xvc2VcIiBidXR0b24gb3IgcHJlc3NpbmcgdGhlIGBCYWNrc3BhY2VgIGtleSB3aGlsZSB0b2tlbnMgYXJlIHNlbGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBoYW5kbGVSZW1vdmVUb2tlbnM6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBmdW5jdGlvbiBoYW5kbGVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gb25lIG9yIG1vcmUgdG9rZW5zIGFyZSBzZWxlY3RlZCBieSB0aGUgdXNlciB2aWEgY2xpY2sgb3Iga2V5Ym9hcmQgYWN0aW9uczsgY2FsbGVkIHdpdGggd2hhdCB0aGUgbmV3IHNlbGVjdGlvbiBzaG91bGQgYmVcbiAgICAgICAgICovXG4gICAgICAgIGhhbmRsZU5ld1NlbGVjdGlvbjogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBKU1ggdXNlZCBmb3IgdGhlIGNsb3NlIGJ1dHRvbiBpdHNlbGZcbiAgICAgICAgICovXG4gICAgICAgIHRva2VuQ2xvc2VDb21wb25lbnQ6IFByb3BUeXBlcy5lbGVtZW50LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkZXRlcm1pbmVzIGlmIHRoZSBgLmItdG9rZW5maWVsZC10b2tlbi1jbG9zZWAgZWxlbWVudCBzaG91bGQgYmUgcmVuZGVyZWQgZm9yIGVhY2ggdG9rZW5cbiAgICAgICAgICovXG4gICAgICAgIHRva2VuQ2xvc2VWaXNpYmxlOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIGluZGV4ZXMgb2YgZW50aXRpZXMgdGhhdCBzaG91bGQgYmUgcmVuZGVyZWQgYXMgXCJ0b2tlbnNcIiBpbiB0aGUgY29tcG9uZW50IFVJXG4gICAgICAgICAqL1xuICAgICAgICB0b2tlbnM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5udW1iZXIpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgaW5kZXhlcyBvZiB0b2tlbml6ZWQgZW50aXRpZXMgdGhhdCBhcmUgcGFydCBvZiBhbiBhY3RpdmUgc2VsZWN0aW9uOyB0aGUgdXNlciBjYW4gcHJlc3MgYEJhY2tzcGFjZWAgdG8gdHJpZ2dlciBgaGFuZGxlUmVtb3ZlVG9rZW5zYFxuICAgICAgICAgKi9cbiAgICAgICAgdG9rZW5zU2VsZWN0ZWQ6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5udW1iZXIpLFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIC4uLlR5cGVhaGVhZC5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGhhbmRsZUFkZFRva2VuOiBub29wLFxuICAgICAgICBoYW5kbGVSZW1vdmVUb2tlbnM6IG5vb3AsXG4gICAgICAgIGhhbmRsZU5ld1NlbGVjdGlvbjogbm9vcCxcbiAgICAgICAgdG9rZW5DbG9zZUNvbXBvbmVudDogKDxkaXY+WDwvZGl2PiksXG4gICAgICAgIHRva2VuQ2xvc2VWaXNpYmxlOiB0cnVlLFxuICAgICAgICB0b2tlbnM6IFtdLFxuICAgICAgICB0b2tlbnNTZWxlY3RlZDogW10sXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVybmFsS2V5cyA9IE9iamVjdC5rZXlzKFRva2VuaXplZElucHV0LmRlZmF1bHRQcm9wcylcblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNTZWxlY3RlZEluZGV4ZXMgPSBwcmV2UHJvcHMudG9rZW5zU2VsZWN0ZWQ7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEluZGV4ZXMgPSB0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnRva2Vucy5sZW5ndGggPiBwcmV2UHJvcHMudG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSgnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fc3VwcHJlc3NOZXh0VG9rZW5TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzTmV4dFRva2VuU2VsZWN0aW9uID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggICBwcmV2aW91c1NlbGVjdGVkSW5kZXhlcyAhPT0gY3VycmVudFNlbGVjdGVkSW5kZXhlc1xuICAgICAgICAgICAgJiYgY3VycmVudFNlbGVjdGVkSW5kZXhlcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGlmICggICBjdXJyZW50U2VsZWN0ZWRJbmRleGVzLmxlbmd0aCA9PT0gMVxuICAgICAgICAgICAgICAgICAgICAgICB8fCBjdXJyZW50U2VsZWN0ZWRJbmRleGVzWzBdICE9PSBwcmV2aW91c1NlbGVjdGVkSW5kZXhlc1swXSAvKiBtdWx0aSBzZWxlY3Rpb24sIGxlZnR3YXJkICovKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmc1tgdG9rZW5fJHtjdXJyZW50U2VsZWN0ZWRJbmRleGVzWzBdfWBdLmZvY3VzKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3QoY3VycmVudFNlbGVjdGVkSW5kZXhlcykgIT09IGxhc3QocHJldmlvdXNTZWxlY3RlZEluZGV4ZXMpIC8qIG11bHRpIHNlbGVjdGlvbiwgcmlnaHR3YXJkICovKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmc1tgdG9rZW5fJHtsYXN0KGN1cnJlbnRTZWxlY3RlZEluZGV4ZXMpfWBdLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmVmc1tgdG9rZW5fJHtjdXJyZW50U2VsZWN0ZWRJbmRleGVzWzBdfWBdLmZvY3VzKCk7XG4gICAgICAgIH0gLy8gbW92ZSBmb2N1c1xuICAgIH1cblxuICAgIC8vIHBhc3N0aHJvdWdocyB0byBUeXBlYWhlYWQgaW5zdGFuY2UgbWV0aG9kc1xuICAgIGZvY3VzID0gKCkgPT4gdGhpcy5yZWZzLnR5cGVhaGVhZC5mb2N1cygpXG4gICAgZ2V0SW5wdXROb2RlID0gKCkgPT4gdGhpcy5yZWZzLnR5cGVhaGVhZC5nZXRJbnB1dE5vZGUoKVxuICAgIGdldFNlbGVjdGVkRW50aXR5VGV4dCA9ICgpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0KClcbiAgICBnZXRWYWx1ZSA9ICgpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuZ2V0VmFsdWUoKVxuICAgIHNlbGVjdCA9ICgpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuc2VsZWN0KClcbiAgICBzZXRWYWx1ZSA9ICh2YWx1ZSkgPT4gdGhpcy5yZWZzLnR5cGVhaGVhZC5zZXRWYWx1ZSh2YWx1ZSlcblxuICAgIGFkZCA9IChpbmRleCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy50b2tlbnMuaW5kZXhPZihpbmRleCkgPT09IC0xKSB7IHRoaXMucHJvcHMuaGFuZGxlQWRkVG9rZW4oaW5kZXgpOyB9XG4gICAgfVxuXG4gICAgcmVtb3ZlKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ZXMgPSAoQXJyYXkuaXNBcnJheShpbmRleCkgPyBpbmRleCA6IFtpbmRleF0pLmZpbHRlcigoaWR4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy50b2tlbnMuaW5kZXhPZihpZHgpICE9PSAtMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGluZGV4ZXMubGVuZ3RoKSB7IHRoaXMucHJvcHMuaGFuZGxlUmVtb3ZlVG9rZW5zKGluZGV4ZXMpOyB9XG4gICAgfVxuXG4gICAgc2VsZWN0VG9rZW4oaW5kZXgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVOZXdTZWxlY3Rpb24oW2luZGV4XSk7XG4gICAgfVxuXG4gICAgc2VsZWN0VG9rZW5zKGluZGV4ZXMpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVOZXdTZWxlY3Rpb24oaW5kZXhlcyk7XG4gICAgfVxuXG4gICAgc2VsZWN0UHJldmlvdXNUb2tlbihhcHBlbmQpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkO1xuICAgICAgICBjb25zdCBpbmRleGVzID0gdGhpcy5wcm9wcy50b2tlbnM7XG5cbiAgICAgICAgaWYgKCAgIHNlbGVjdGVkLmxlbmd0aCA9PT0gMVxuICAgICAgICAgICAgJiYgZmlyc3Qoc2VsZWN0ZWQpID09PSBmaXJzdChpbmRleGVzKSkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBhbHJlYWR5IGF0IGxlZnRtb3N0IGJvdW5kXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID09PSAwKSB7IC8vIHBpY2sgdGhlIHJpZ2h0bW9zdFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUb2tlbihsYXN0KGluZGV4ZXMpKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gYWRkIHRoZSBuZXh0IGxlZnRtb3N0IHRvIGEgcmVjb25zdHJ1Y3RlZCBcInNlbGVjdGVkXCIgYXJyYXlcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVG9rZW4gPSBpbmRleGVzW2luZGV4ZXMuaW5kZXhPZihmaXJzdChzZWxlY3RlZCkpIC0gMV07XG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9rZW5zKGFwcGVuZCA/IFtwcmV2aW91c1Rva2VuXS5jb25jYXQoc2VsZWN0ZWQpIDogW3ByZXZpb3VzVG9rZW5dKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdE5leHRUb2tlbihhcHBlbmQpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkO1xuICAgICAgICBjb25zdCBpbmRleGVzID0gdGhpcy5wcm9wcy50b2tlbnM7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxhc3Qoc2VsZWN0ZWQpID09PSBsYXN0KGluZGV4ZXMpKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0VG9rZW4gPSBpbmRleGVzW2luZGV4ZXMuaW5kZXhPZihsYXN0KHNlbGVjdGVkKSkgKyAxXTtcblxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUb2tlbnMoYXBwZW5kID8gc2VsZWN0ZWQuY29uY2F0KG5leHRUb2tlbikgOiBbbmV4dFRva2VuXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhclNlbGVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVOZXdTZWxlY3Rpb24oW10pO1xuICAgIH1cblxuICAgIGhhbmRsZUlucHV0Q2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNsaWNrKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2xpY2soZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlSW5wdXRGb2N1cyA9IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uRm9jdXMpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25Gb2N1cyhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQud2hpY2gpIHtcbiAgICAgICAgY2FzZSAzNzogICAgLy8gbGVmdCBhcnJvd1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RQcmV2aW91c1Rva2VuKGV2ZW50LnNoaWZ0S2V5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMzk6ICAgIC8vIHJpZ2h0IGFycm93XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE5leHRUb2tlbihldmVudC5zaGlmdEtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDg6ICAgICAvLyBiYWNrc3BhY2VcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA2NTogICAgLy8gbGV0dGVyIFwiYVwiXG4gICAgICAgICAgICBpZiAoZXZlbnQubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoKTtcblxuICAgICAgICAgICAgICAgIC8vIGhhY2t5LCBidXQgdGhlIG9ubHkgd2F5IHVubGVzcyB3ZSBtb3ZlIHNlbGVjdGlvbiBtYW5hZ2VtZW50IGludGVybmFsIGFnYWluXG4gICAgICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NOZXh0VG9rZW5TZWxlY3Rpb24gPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVOZXdTZWxlY3Rpb24odGhpcy5wcm9wcy50b2tlbnMpO1xuICAgICAgICAgICAgfSAvLyBcImNtZFwiXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVRva2VuQ2xvc2VDbGljayhpbmRleCwgZXZlbnQpIHtcbiAgICAgICAgLy8gaWYgd2UgZG9uJ3Qgc3RvcCBwcm9wYWdhdGlvbiwgdGhlIGV2ZW50IGJ1YmJsZXMgYW5kIHJlc3VsdHMgaW4gYSBmYWlsZWQgdG9rZW4gc2VsZWN0aW9uXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlKGluZGV4KTtcbiAgICAgICAgdGhpcy5mb2N1cygpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQucHJvcHMub25DbGljaykge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy50b2tlbkNsb3NlQ29tcG9uZW50LnByb3BzLm9uQ2xpY2soZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyVG9rZW5DbG9zZShpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy50b2tlbkNsb3NlVmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudCh0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN4KCdiLXRva2VuZmllbGQtdG9rZW4tY2xvc2UnLCB0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQucHJvcHMuY2xhc3NOYW1lKSxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVRva2VuQ2xvc2VDbGljay5iaW5kKHRoaXMsIGluZGV4KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlVG9rZW5LZXlEb3duKGluZGV4LCBldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG4gICAgICAgIGNhc2UgMTM6IC8vIGVudGVyXG4gICAgICAgIGNhc2UgMzI6IC8vIHNwYWNlXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRva2VuKGluZGV4KTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDg6IC8vIGJhY2tzcGFjZVxuICAgICAgICAgICAgdGhpcy5yZW1vdmUoaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyVG9rZW5zKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ItdG9rZW5maWVsZC10b2tlbnMnPlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnRva2Vucy5tYXAoKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtgdG9rZW5fJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi10b2tlbmZpZWxkLXRva2VuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiLXRva2VuZmllbGQtdG9rZW4tc2VsZWN0ZWQnOiB0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkLmluZGV4T2YoaW5kZXgpICE9PSAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNlbGVjdFRva2VuLmJpbmQodGhpcywgaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVUb2tlbktleURvd24uYmluZCh0aGlzLCBpbmRleCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9JzAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmVudGl0aWVzW2luZGV4XS50ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclRva2VuQ2xvc2UoaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgVG9rZW5pemVkSW5wdXQuaW50ZXJuYWxLZXlzKX1cbiAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi10b2tlbmZpZWxkLXdyYXBwZXInLCB0aGlzLnByb3BzLmNsYXNzTmFtZSl9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259PlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclRva2VucygpfVxuXG4gICAgICAgICAgICAgICAgPFR5cGVhaGVhZFxuICAgICAgICAgICAgICAgICAgICB7Li4uZXh0cmFjdENoaWxkUHJvcHModGhpcy5wcm9wcywgVHlwZWFoZWFkLmRlZmF1bHRQcm9wcyl9XG4gICAgICAgICAgICAgICAgICAgIHJlZj0ndHlwZWFoZWFkJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ItdG9rZW5maWVsZCdcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJPblNlbGVjdGlvbj17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5wcm9wcy5pbnB1dFByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVJbnB1dENsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb2N1czogdGhpcy5oYW5kbGVJbnB1dEZvY3VzLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBvbkVudGl0eVNlbGVjdGVkPXt0aGlzLmFkZH0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJ0ZXN0Iiwic291cmNlIiwia2V5cyIsInJlZHVjZSIsImhhc2giLCJrZXkiLCJvbWl0dGVkS2V5cyIsImluZGV4T2YiLCJzdGF0ZSIsImFjdGl2ZUNoaWxkSW5kZXgiLCJfdGhpcyIsInByb3BzIiwiZGVmYXVsdEFjdGl2ZUNoaWxkSW5kZXgiLCJoYW5kbGVLZXlEb3duIiwiZXZlbnQiLCJtb2RlIiwiQXJyb3dLZXlOYXZpZ2F0aW9uIiwiVkVSVElDQUwiLCJCT1RIIiwicHJldmVudERlZmF1bHQiLCJtb3ZlRm9jdXMiLCJIT1JJWk9OVEFMIiwiaXNGdW5jdGlvbiIsIm9uS2V5RG93biIsImhhbmRsZUZvY3VzIiwidGFyZ2V0IiwiaGFzQXR0cmlidXRlIiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJSZWFjdCIsIkNoaWxkcmVuIiwidG9BcnJheSIsImNoaWxkcmVuIiwiaW5kZXgiLCJzZXRTdGF0ZSIsImNoaWxkIiwib25Gb2N1cyIsInByZXZQcm9wcyIsInByZXZTdGF0ZSIsInRoaXMiLCJzZXRGb2N1cyIsIm5leHRQcm9wcyIsImNvdW50IiwibnVtQ2hpbGRyZW4iLCJyZWZzIiwid3JhcHBlciIsImZpbmRET01Ob2RlIiwiY2hpbGROb2RlIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJOb2RlIiwiRE9DVU1FTlRfUE9TSVRJT05fRk9MTE9XSU5HIiwiZm9jdXMiLCJkZWx0YSIsIm5leHRJbmRleCIsIm1hcCIsImNsb25lRWxlbWVudCIsImRhdGEtZm9jdXMtaW5kZXgiLCJkYXRhLXNraXAiLCJ0YWJJbmRleCIsInVuZGVmaW5lZCIsIl90aGlzMiIsImNvbXBvbmVudCIsIm9taXQiLCJpbnRlcm5hbEtleXMiLCJyZWYiLCJQdXJlQ29tcG9uZW50IiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwib25lT2ZUeXBlIiwic3RyaW5nIiwiZnVuYyIsIm51bWJlciIsIm9uZU9mIiwiZGVmYXVsdFByb3BzIiwiT2JqZWN0IiwiaGFzT3duUHJvcGVydHkiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJnIiwiYXJnVHlwZSIsImNsYXNzZXMiLCJwdXNoIiwiQXJyYXkiLCJpc0FycmF5IiwiY2xhc3NOYW1lcyIsImFwcGx5IiwiaGFzT3duIiwiY2FsbCIsImpvaW4iLCJtb2R1bGUiLCJleHBvcnRzIiwiYmFiZWxIZWxwZXJzLnR5cGVvZiIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsIm1vdW50ZWQiLCJkYXRhIiwidGhlbiIsInBheWxvYWQiLCJjdXJyZW50UHJvcHMiLCJjb252ZXJ0VG9KU1hGdW5jIiwiY29udGVudFJlbmRlcmVkRnVuYyIsImNvbnZlcnREYXRhVG9KU1hPcldhaXQiLCJmaXJlQ2FsbGJhY2tJZkRhdGFSZW5kZXJlZCIsImV4dHJhQ2xhc3NlcyIsImNsYXNzTmFtZSIsImItYXN5bmMtZXJyb3IiLCJiLWFzeW5jLWxvYWRpbmciLCJBc3luYyIsImdldENsYXNzZXMiLCJsb2FkaW5nQ29udGVudCIsImVycm9yQ29udGVudCIsImFueSIsIm5vZGUiLCJ4IiwiaGFuZGxlQ2xpY2siLCJkaXNhYmxlZCIsInRvZ2dsZVN0YXRlIiwib25DbGljayIsInByZXNzZWQiLCJCdXR0b24iLCJjeCIsImItYnV0dG9uLXByZXNzYWJsZSIsImItYnV0dG9uLXByZXNzZWQiLCJhcmlhLXByZXNzZWQiLCJvblByZXNzZWQiLCJvblVucHJlc3NlZCIsImJvb2wiLCJub29wIiwicmVwbGFjZSIsImEiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJpZCIsInV1aWQiLCJoYW5kbGVDaGFuZ2UiLCJpbnB1dFByb3BzIiwiY2hlY2tlZCIsIm5hbWUiLCJvbkNoYW5nZSIsImlucHV0IiwiaW5kZXRlcm1pbmF0ZSIsInNldEluZGV0ZXJtaW5hdGUiLCJTdHJpbmciLCJ0eXBlIiwiYi1jaGVja2JveC1taXhlZCIsImItY2hlY2tib3gtY2hlY2tlZCIsImItY2hlY2tib3gtdW5jaGVja2VkIiwiYXJpYS1jaGVja2VkIiwiZ2V0QXJpYVN0YXRlIiwibGFiZWwiLCJsYWJlbFByb3BzIiwiaHRtbEZvciIsIkNoZWNrYm94IiwicmVuZGVySW5wdXQiLCJyZW5kZXJMYWJlbCIsInNoYXBlIiwidmFsdWUiLCJvYmplY3QiLCJvbkNoZWNrZWQiLCJvblVuY2hlY2tlZCIsIml0ZW1zIiwiZXZlcnkiLCJpdGVtIiwic29tZSIsInNlbGVjdEFsbCIsImFsbEl0ZW1zQ2hlY2tlZCIsInNlbGVjdEFsbFByb3BzIiwiYWxsQ2hlY2tlZCIsImFueUl0ZW1zQ2hlY2tlZCIsIm9uQWxsQ2hlY2tlZCIsIm9uQWxsVW5jaGVja2VkIiwib25DaGlsZENoZWNrZWQiLCJvbkNoaWxkVW5jaGVja2VkIiwicmVuZGVyQ2hlY2tib3hlcyIsInNlbGVjdEFsbFBvc2l0aW9uIiwiQkVGT1JFIiwidG9CZVJlbmRlcmVkIiwidW5zaGlmdCIsInJlbmRlclNlbGVjdEFsbCIsIkFGVEVSIiwiQ2hlY2tib3hHcm91cCIsInJlbmRlckNoaWxkcmVuIiwiYXJyYXlPZiIsImlzUmVxdWlyZWQiLCIkcG9ydGFsIiwiJHBhc3NlbmdlciIsImNyZWF0ZUVsZW1lbnQiLCJkZXN0aW5hdGlvbiIsImFwcGVuZENoaWxkIiwicmVuZGVyUG9ydGFsbGVkQ29udGVudCIsImlzVmFsaWRFbGVtZW50IiwicG9ydGFsSWQiLCJSZWFjdERPTSIsInVuc3RhYmxlX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyIiwidW5tb3VudENvbXBvbmVudEF0Tm9kZSIsInJlbW92ZUNoaWxkIiwiUG9ydGFsIiwiUE9SVEFMX0RBVEFfQVRUUklCVVRFIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VPZiIsIkhUTUxFbGVtZW50IiwiYm9keSIsInByb3RvdHlwZSIsInNsaWNlIiwidXVpZEhlYWRlciIsInV1aWRCb2R5IiwibmF0aXZlRXZlbnQiLCJjYXB0dXJlRm9jdXMiLCJzaG91bGREaWFsb2dDbG9zZU9uRXZlbnQiLCJpc1BhcnRPZkRpYWxvZyIsInNldFRpbWVvdXQiLCJvbkNsb3NlIiwiZXhwbGljaXRPcmlnaW5hbFRhcmdldCIsInJlbGF0ZWRUYXJnZXQiLCJwcmV2aW91cyIsImhhbmRsZUluc2lkZUNsaWNrIiwiaGFuZGxlT3V0c2lkZUNsaWNrIiwiaGFuZGxlT3V0c2lkZVNjcm9sbFdoZWVsIiwiJHdyYXBwZXIiLCJjb25jYXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZG9tIiwiZ2V0RWxlbWVudEJ5SWQiLCJub2RlVHlwZSIsIkVMRU1FTlRfTk9ERSIsInBhcmVudE5vZGUiLCJjb250YWlucyIsImVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiJGRpYWxvZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwcm9wIiwiYm9keVByb3BzIiwiZm9vdGVyIiwiZm9vdGVyUHJvcHMiLCJoZWFkZXIiLCJoZWFkZXJQcm9wcyIsImFyaWEtaGlkZGVuIiwid3JhcHBlclByb3BzIiwicmVuZGVyRm9jdXNCb3VuZGFyeSIsImJlZm9yZSIsIkRpYWxvZyIsInJvbGUiLCJhcmlhLWxhYmVsbGVkYnkiLCJhcmlhLWRlc2NyaWJlZGJ5IiwicmVuZGVySGVhZGVyIiwicmVuZGVyQm9keSIsInJlbmRlckZvb3RlciIsImFmdGVyIiwiY2xvc2VPbkVzY0tleSIsImNsb3NlT25JbnNpZGVDbGljayIsImNsb3NlT25PdXRzaWRlQ2xpY2siLCJjbG9zZU9uT3V0c2lkZUZvY3VzIiwiY2xvc2VPbk91dHNpZGVTY3JvbGwiLCJzdHJpbmdOdW1iZXIiLCJpbnN0YW5jZSIsImdldENvbXB1dGVkU3R5bGUiLCJ0b0kiLCJmb250U2l6ZSIsImNvbnRhaW5lckJveCIsImhlaWdodCIsIndpZHRoIiwiYm94U2l6aW5nIiwiY29udGFpbmVySGVpZ2h0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJjb250YWluZXJXaWR0aCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwiZmxvb3IiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsInN0eWxlIiwibWluIiwibWF4Rm9udFNpemUiLCJvcHRpbWl6ZUZvckhlaWdodCIsIm9wdGltaXplRm9yV2lkdGgiLCJpbnN0YW5jZXMiLCJmb3JFYWNoIiwiaGFuZGxlV2luZG93UmVzaXplIiwic3BsaWNlIiwicmVzY2FsZSIsInJlZ2lzdGVySW5zdGFuY2UiLCJ1bnJlZ2lzdGVySW5zdGFuY2UiLCJGaXR0ZWRUZXh0IiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwic3RhdHVzIiwiSW1hZ2UiLCJMT0FESU5HIiwic3JjIiwicmVzZXRQcmVsb2FkZXIiLCJwcmVsb2FkIiwibG9hZGVyIiwib25sb2FkIiwib25lcnJvciIsIkxPQURFRCIsIkVSUk9SIiwiZGlzcGxheUFzQmFja2dyb3VuZEltYWdlIiwiaW1hZ2VQcm9wcyIsInRpdGxlIiwiYWx0IiwiYmFja2dyb3VuZEltYWdlIiwib25Mb2FkIiwib25FcnJvciIsInN0YXR1c1Byb3BzIiwiYi1pbWFnZS1sb2FkaW5nIiwiYi1pbWFnZS1sb2FkZWQiLCJiLWltYWdlLWVycm9yIiwicmVuZGVySW1hZ2UiLCJyZW5kZXJTdGF0dXMiLCJpc0NvbnRyb2xsZWQiLCJpc1N0cmluZyIsImlzRm9jdXNlZCIsInNldElucHV0VmFsdWUiLCJnZXRWYWx1ZSIsImZpZWxkIiwiaGFuZGxlQmx1ciIsIm9uQmx1ciIsImRlZmF1bHRWYWx1ZSIsIm5leHRWYWx1ZSIsImRpc3BhdGNoRXZlbnQiLCJidWJibGVzIiwiaGlkZVBsYWNlaG9sZGVyT25Gb2N1cyIsImlzTm9uRW1wdHkiLCJwbGFjZWhvbGRlciIsImdldFBsYWNlaG9sZGVyVGV4dCIsIklucHV0IiwicmVuZGVyUGxhY2Vob2xkZXIiLCJvYmoxIiwib2JqMiIsImNoaWxkUHJvcHMiLCJwb3J0YWxQcm9wcyIsIk1vZGFsIiwiJG1vZGFsIiwibWFza1Byb3BzIiwiZXh0cmFjdENoaWxkUHJvcHMiLCJtb2RhbFByb3BzIiwiTUFYX0lOVEVHRVIiLCJOQU4iLCJvYmplY3RQcm90byIsInRvSW50ZWdlciIsImlzT2JqZWN0TGlrZSIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwidG9OdW1iZXIiLCJJTkZJTklUWSIsInRvRmluaXRlIiwicmVtYWluZGVyIiwicmVzdWx0IiwiaXNTeW1ib2wiLCJpc09iamVjdCIsInZhbHVlT2YiLCJvdGhlciIsInJlVHJpbSIsInJlSXNCaW5hcnkiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJpc0JpbmFyeSIsInJlSXNCYWRIZXgiLCJpc0ludGVnZXIiLCJpbmRleE9mT3B0aW9uSW5Gb2N1cyIsImdldFByZXZpb3VzT3B0aW9uSW5kZXgiLCJhY3RpdmVJdGVtSW5kZXgiLCJnZXROZXh0T3B0aW9uSW5kZXgiLCJoYW5kbGVPcHRpb25DbGljayIsIm9wdGlvbnMiLCJvcHRpb24iLCJzZWxlY3RlZCIsImN1cnJlbnRPcHRpb25JbmRleCIsIm5leHQiLCJvbk9wdGlvblNlbGVjdGVkIiwiZGVmaW5pdGlvbiIsIlNlZ21lbnRlZENvbnRyb2wiLCJpbnRlcm5hbENoaWxkS2V5cyIsImItc2VnbWVudGVkLWNvbnRyb2wtb3B0aW9uLXNlbGVjdGVkIiwiaGFuZGxlT3B0aW9uQmx1ciIsImJpbmQiLCJoYW5kbGVPcHRpb25Gb2N1cyIsImNvbnRlbnQiLCJyZW5kZXJPcHRpb25zIiwibWlzc2luZ1NlbGVjdGVkIiwic2VlblNlbGVjdGVkIiwibXVsdGlwbGVTZWxlY3RlZCIsImN1cnJlbnRQYWdlIiwiaW5pdGlhbFBhZ2UiLCJ0YXJnZXRJbmRleCIsIm51bUl0ZW1zUGVyUGFnZSIsImdldFBhZ2VGb3JJbmRleCIsImNlaWwiLCJpdGVtc1BlclBhZ2UiLCJ0b3RhbFBhZ2VzIiwidG90YWxJdGVtcyIsImZpcnN0VmlzaWJsZUl0ZW1JbmRleCIsInBhZ2VUb0luZGV4IiwiY29udHJvbHMiLCJGSVJTVCIsIm5leHRUYXJnZXRJbmRleCIsIlBSRVZJT1VTIiwiTkVYVCIsIkxBU1QiLCJpdGVtXzAiLCJpZGVudGlmaWVyIiwib2xkUHJvcHMiLCJudW1QYWdlVG9nZ2xlcyIsInN0YXJ0UGFnZSIsInNob3dQYWdpbmF0aW9uU3RhdGUiLCJzaG93SnVtcFRvRmlyc3QiLCJqdW1wVG9GaXJzdENvbnRyb2xDb250ZW50IiwiUGFnaW5hdGlvbiIsInByZXZpb3VzUGFnZUNvbnRyb2xDb250ZW50IiwiZW5kUGFnZSIsImRhdGEtcGFnZS1udW1iZXIiLCJuZXh0UGFnZUNvbnRyb2xDb250ZW50Iiwic2hvd0p1bXBUb0xhc3QiLCJqdW1wVG9MYXN0Q29udHJvbENvbnRlbnQiLCJjdXN0b21Db250cm9sQ29udGVudCIsImZpcnN0SXRlbUluZGV4IiwibGFzdEl0ZW1JbmRleCIsImdlbmVyYXRlZEl0ZW1zIiwiZ2V0SXRlbSIsImxpc3RXcmFwcGVyUHJvcHMiLCJnZW5lcmF0ZUl0ZW1zIiwiYi1wYWdpbmF0aW9uLWl0ZW0tZXZlbiIsImItcGFnaW5hdGlvbi1pdGVtLW9kZCIsIl90aGlzMyIsIml0ZW1Ub0pTWENvbnZlcnRlckZ1bmMiLCJkYXRhLXBhZ2luYXRpb24taW5kZXgiLCJpbmRleE9mZnNldCIsIml0ZW1Mb2FkaW5nQ29udGVudCIsInBvc2l0aW9uIiwiaGlkZVBhZ2VySWZOb3ROZWVkZWQiLCJ0b2dnbGVXcmFwcGVyUHJvcHMiLCJ0b0xvd2VyQ2FzZSIsInBvc2l0aW9uTG93ZXIiLCJ0b1VwcGVyQ2FzZSIsInBvc2l0aW9uQ2FwaXRhbGl6ZWQiLCJjcmVhdGVQYWdlQnV0dG9uT3B0aW9ucyIsInBvc2l0aW9ucyIsIkFCT1ZFIiwicmVuZGVyQ29udHJvbHMiLCJyZW5kZXJJdGVtcyIsIkJFTE9XIiwicmVuZGVyVmlldyIsIm51bWJlck9mUGFnZXMiLCJpZGVudGl0eSIsImxlbiIsImRvY3VtZW50RWxlbWVudCIsImRpcmVjdGlvbiIsImFycjEiLCJhcnIyIiwiZmlsdGVyIiwidmlld0JveCIsInhtbG5zIiwiZmlsbCIsInBvaW50cyIsImF4IiwiU1RBUlQiLCJheSIsImR4IiwiZHkiLCJFTkQiLCJNSURETEUiLCJhbGlnbiIsImFuY2hvciIsImNhcmV0QW5jaG9yIiwiY2FjaGVWaWV3cG9ydENhcnRvZ3JhcGh5IiwiZ2V0VmFsaWRBbGlnbm1lbnRQcmVzZXQiLCJQb3BvdmVyIiwiZ2V0QWxpZ25tZW50Q2xhc3NGcmFnbWVudCIsImRpYWxvZyIsIkNMQVNTX1JFTU9WQUxfUkVHRVgiLCJmcmFnIiwicHJlc2V0Iiwicm91bmQiLCJnZXROZXh0RGlhbG9nWFBvc2l0aW9uIiwiZ2V0TmV4dERpYWxvZ1lQb3NpdGlvbiIsInRyYW5zZm9ybVByb3AiLCJjYXJkaW5hbCIsIiRjYXJldCIsImxvbmdpdHVkaW5hbCIsImdldE5leHRDYXJldFhQb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImFuY2hvclJlY3QiLCJjYXJldEFuY2hvclJlY3QiLCJib2R5TGVmdCIsImJvZHlSZWN0IiwibGVmdCIsImJvZHlUb3AiLCJ0b3AiLCJuZXh0WCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiY2FyZXQiLCJuZXh0WSIsInBIZWlnaHQiLCJwV2lkdGgiLCJib3R0b20iLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJyaWdodCIsImNvbWJpbmF0aW9ucyIsImNvbmZpZyIsImlzUG9zaXRpb25WYWxpZCIsInZhbGlkQ29tYm9zIiwiYXV0b1JlcG9zaXRpb24iLCJiZXN0Q29tYm9zIiwiZ2V0T3Bwb3NpdGVDYXJkaW5hbCIsIm9wcG9zaXRlQ2FyZGluYWwiLCJva2F5Q29tYm9zIiwiY2FyZXRDb21wb25lbnQiLCJjb25zdGFudCIsImRlZiIsIk5OVyIsIk4iLCJOTkUiLCJFTkUiLCJFIiwiRVNFIiwiU1NFIiwiUyIsIlNTVyIsIldTVyIsIlciLCJXTlciLCJERUZBVUxUX0NBUkVUX0NPTVBPTkVOVCIsIndpdGhvdXQiLCJleHBhbmRlZCIsImRpc3BhdGNoQ2FsbGJhY2siLCJ0b2dnbGVQcm9wcyIsIm5ld1Byb3BzIiwiUHJvZ3Jlc3NpdmVEaXNjbG9zdXJlIiwiYi1kaXNjbG9zdXJlLWV4cGFuZGVkIiwidGVhc2VyRXhwYW5kZWQiLCJ0ZWFzZXIiLCJyZW5kZXJDb250ZW50Iiwib25FeHBhbmQiLCJvbkhpZGUiLCJvbkNhbmNlbCIsImNhbmNlbFByb3BzIiwicHJvZ3Jlc3NQcm9wcyIsImItcHJvZ3Jlc3MtaW5kZXRlcm1pbmF0ZSIsInByb2dyZXNzIiwidHdlZW5Qcm9wZXJ0eSIsIlByb2dyZXNzIiwicmVuZGVyUHJvZ3Jlc3MiLCJyZW5kZXJDYW5jZWwiLCJvblNlbGVjdGVkIiwiYi1yYWRpby1zZWxlY3RlZCIsIlJhZGlvIiwic3RyIiwibWF0Y2hPcGVyYXRvcnNSZSIsImNvbXB1dGVNYXRjaGVzIiwic2VsZWN0ZWRFbnRpdHlJbmRleCIsIm9uRW50aXR5SGlnaGxpZ2h0ZWQiLCJlbnRpdGllcyIsInVwZGF0ZUlucHV0U3RhdGUiLCJlbnRpdHlNYXRjaEluZGV4ZXMiLCJtYXRjaGVzIiwic2Nyb2xsVG9wIiwic2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkiLCJ0b3RhbE1hdGNoZXMiLCJtYXRjaGVzTm9kZSIsIm1hdGNoSW5kZXgiLCJtYXRjaE5vZGUiLCJvZmZzZXRUb3AiLCJtYXRjaE5vZGVZU3RhcnQiLCJtYXRjaE5vZGVZRW5kIiwibWF0Y2hlc05vZGVZRW5kIiwiZ2V0SW5wdXROb2RlIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJlbnRpdHkiLCJ0ZXh0IiwiZW50aXR5Q29udGVudCIsInNwbGl0IiwiZXNjYXBlciIsImZyYWdzIiwidGhyZXNob2xkIiwibm9ybWFsaXplZFVzZXJUZXh0Iiwic2Vla1ZhbHVlIiwiaW5kZXhTdGFydCIsImluZGV4RW5kIiwiYWxnb3JpdGhtIiwiVHlwZWFoZWFkIiwiU1RBUlRTX1dJVEgiLCJtYXJrU3RhcnRzV2l0aE1hdGNoU3Vic3RyaW5nIiwibWFya0Z1enp5TWF0Y2hTdWJzdHJpbmciLCJtYXJrZXIiLCJ3YXJuZWRNYXJrZXIiLCJjb25zb2xlIiwid2FybiIsInVzZXJUZXh0Iiwibm9ybWFsaXplZCIsInJlc3VsdHMiLCJnZXRTdGFydHNXaXRoTWF0Y2hJbmRleGVzIiwiZ2V0RnV6enlNYXRjaEluZGV4ZXMiLCJtYXRjaGVyIiwid2FybmVkTWF0Y2hlciIsInByb3ZpZGVkRW50aXRpZXMiLCJjdXJyZW50VmFsdWUiLCJnZXRNYXRjaEluZGV4ZXMiLCJvZmZzY3JlZW5DbGFzcyIsImFyaWEtbGl2ZSIsImdldFNlbGVjdGVkRW50aXR5VGV4dCIsImhpbnQiLCJyYXciLCJwcm9jZXNzZWQiLCJoaW50UHJvcHMiLCJtYXRjaFdyYXBwZXJQcm9wcyIsInJlc3QiLCJiLXR5cGVhaGVhZC1tYXRjaC1zZWxlY3RlZCIsImhhbmRsZU1hdGNoQ2xpY2siLCJtYXJrTWF0Y2hTdWJzdHJpbmciLCJyZW5kZXJOb3RpZmljYXRpb24iLCJyZW5kZXJIaW50IiwiYXJpYS1jb250cm9scyIsInJlbmRlck1hdGNoZXMiLCJGVVpaWSIsImNsZWFyT25TZWxlY3Rpb24iLCJvbkNvbXBsZXRlIiwib25FbnRpdHlTZWxlY3RlZCIsIl90aGlzNCIsInJlc2V0TWF0Y2hlcyIsInNlbGVjdCIsInNldFZhbHVlIiwiZ2V0TWFya2luZ0Z1bmN0aW9uIiwiZ2V0TWF0Y2hpbmdGdW5jdGlvbiIsInN0b3BQcm9wYWdhdGlvbiIsImN1cnNvckF0RW5kT2ZJbnB1dCIsInNoaWZ0S2V5Iiwic2VsZWN0TWF0Y2giLCJhcnJheSIsInR5cGVhaGVhZCIsImFkZCIsInRva2VucyIsImhhbmRsZUFkZFRva2VuIiwiaGFuZGxlSW5wdXRDbGljayIsImNsZWFyU2VsZWN0aW9uIiwiaGFuZGxlSW5wdXRGb2N1cyIsIndoaWNoIiwic2VsZWN0UHJldmlvdXNUb2tlbiIsInNlbGVjdE5leHRUb2tlbiIsInRva2Vuc1NlbGVjdGVkIiwicmVtb3ZlIiwibWV0YUtleSIsIl9zdXBwcmVzc05leHRUb2tlblNlbGVjdGlvbiIsImhhbmRsZU5ld1NlbGVjdGlvbiIsInByZXZpb3VzU2VsZWN0ZWRJbmRleGVzIiwiY3VycmVudFNlbGVjdGVkSW5kZXhlcyIsImxhc3QiLCJpZHgiLCJpbmRleGVzIiwiaGFuZGxlUmVtb3ZlVG9rZW5zIiwiYXBwZW5kIiwiZmlyc3QiLCJzZWxlY3RUb2tlbiIsInNlbGVjdFRva2VucyIsInByZXZpb3VzVG9rZW4iLCJuZXh0VG9rZW4iLCJ0b2tlbkNsb3NlQ29tcG9uZW50IiwidG9rZW5DbG9zZVZpc2libGUiLCJoYW5kbGVUb2tlbkNsb3NlQ2xpY2siLCJiLXRva2VuZmllbGQtdG9rZW4tc2VsZWN0ZWQiLCJoYW5kbGVUb2tlbktleURvd24iLCJyZW5kZXJUb2tlbkNsb3NlIiwiVG9rZW5pemVkSW5wdXQiLCJyZW5kZXJUb2tlbnMiXSwibWFwcGluZ3MiOiJvVEFBQSx5QkFBZ0JBLHFCQUF5Qiw4Q0NHUUMscUVBQzdDLGVBQWNDLEtBQUtELEdBQVFFLE9BQU8sV0FBOEJDLEVBQU1DLEdBQ2xFLEdBQUlDLEVBQVlDLFFBQVFGLE1BQVUsRUFBRyxDQUNqQ0QsRUFBS0MsR0FBT0osRUFBT0ksR0FHdkIseTVEQ3NESkcsT0FDSUMsaUJBQWtCQyxFQUFLQyxNQUFNQywyQkF1RGpDQyxjQUFnQixTQUFDQyxHQUNiLE9BQVFBLEVBQU1ULEtBQ2QsSUFBSyxVQUNELEdBQUlLLEVBQUtDLE1BQU1JLE9BQVNDLEVBQW1CRCxLQUFLRSxVQUN6Q1AsRUFBS0MsTUFBTUksT0FBU0MsRUFBbUJELEtBQUtHLEtBQU0sQ0FDckRKLEVBQU1LLGdCQUNOVCxHQUFLVSxXQUFXLEdBR3BCLEtBRUosS0FBSyxZQUNELEdBQUlWLEVBQUtDLE1BQU1JLE9BQVNDLEVBQW1CRCxLQUFLTSxZQUN6Q1gsRUFBS0MsTUFBTUksT0FBU0MsRUFBbUJELEtBQUtHLEtBQU0sQ0FDckRKLEVBQU1LLGdCQUNOVCxHQUFLVSxXQUFXLEdBR3BCLEtBRUosS0FBSyxZQUNELEdBQUlWLEVBQUtDLE1BQU1JLE9BQVNDLEVBQW1CRCxLQUFLRSxVQUN6Q1AsRUFBS0MsTUFBTUksT0FBU0MsRUFBbUJELEtBQUtHLEtBQU0sQ0FDckRKLEVBQU1LLGdCQUNOVCxH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

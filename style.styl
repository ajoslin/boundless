/*
    UIKit theming variables are defined with the following schema:
    {property}-{component}-{state}

    Every variable in this file should roughly correspond to the above schema, with a few exceptions of
    meta properties that don't exist in CSS (like paddingX as shorthand for paddingLeft & paddingRight)
*/

// Default styles
background-body ?= #FFF
borderRadius ?= 2px
color-body ?= #111
fontSize-input ?= 0.75rem

// Default colors (attribute-independent)
color-accent ?= #333
color-focus-ring ?= color-accent
color-neutral-light ?= #CCC
color-neutral-dark ?= #444

// Button
background-Button ?= background-body
background-Button-active ?= color-accent
background-Button-disabled ?= background-body
background-Button-focus ?= background-body
background-Button-hover ?= color-accent
background-Button-pressed ?= color-accent
borderColor-Button ?= color-accent
borderColor-Button-active ?= color-accent
borderColor-Button-disabled ?= color-accent
borderColor-Button-focus ?= color-accent
borderColor-Button-hover ?= color-accent
borderColor-Button-pressed ?= color-accent
color-Button ?= color-body
color-Button-active ?= get_contrasting_color(background-Button-active)
color-Button-disabled ?= get_contrasting_color(background-Button-disabled)
color-Button-focus ?= get_contrasting_color(background-Button-focus)
color-Button-hover ?= get_contrasting_color(background-Button-hover)
color-Button-pressed ?= get_contrasting_color(background-Button-pressed)

// Checkbox
background-Checkbox ?= color-accent
background-Checkbox-checked ?= color-accent
background-Checkbox-indeterminate ?= linear-gradient(135deg, background-Checkbox 50%, rgba(#fff, 0) 50%, rgba(#fff, 0) 100%)
borderColor-Checkbox ?= color-neutral-light
borderColor-Checkbox-focus ?= color-accent
borderColor-Checkbox-hover ?= color-accent
borderColor-Checkbox-checked ?= color-neutral-light
boxShadowColor-Checkbox ?= background-body

// Dialog
background-Dialog ?= background-body
borderColor-Dialog ?= color-accent
borderWidth-Dialog ?= 1px
boxShadowColor-Dialog ?= color-neutral-light

// Image
background-Image ?= color-neutral-light
background-Image-error ?= color-neutral-light
background-Image-loading ?= color-neutral-light
background-Image_error_icon ?= color-neutral-dark

// Modal
backgroundColor-Modal_mask ?= background-body
background-Modal_mask ?= rgba(backgroundColor-Modal_mask, 0.9)

// Pagination
background-Pagination_control ?= background-body
background-Pagination_control-focus ?= halve_alpha(color-accent)
background-Pagination_control-selected ?= color-accent
background-Pagination_item-loading ?= color-accent
borderColor-Pagination_control ?= color-accent
color-Pagination_control ?= get_contrasting_color(background-Pagination_control)
color-Pagination_control-focus ?= get_contrasting_color(background-Pagination_control-focus)
color-Pagination_control-selected ?= get_contrasting_color(background-Pagination_control-selected)

// Popover
borderColor-Popover ?= #FFF
borderColor-Popover_outline ?= color-accent

// Progress
background-Progress ?= color-accent
borderColor-Progress ?= color-accent
color-Progress ?= get_contrasting_color(background-Progress)

// ProgressiveDisclosure
borderColor-ProgressiveDisclosure_arrow ?= color-neutral-dark
color-ProgressiveDisclosure ?= color-neutral-dark

// Radio
background-Radio ?= background-body
background-Radio-focus ?= background-Radio
background-Radio-hover ?= background-Radio
background-Radio-selected ?= color-accent
borderColor-Radio ?= color-neutral-light
borderColor-Radio-focus ?= color-accent
borderColor-Radio-hover ?= color-accent
borderColor-Radio-selected ?= color-accent
boxShadowColor-Radio-selected ?= background-body // separation region between the outer border and inner background

// SegmentedControl
background-SegmentedControl_option ?= background-body
background-SegmentedControl_option-active ?= color-accent
background-SegmentedControl_option-focus ?= halve_alpha(color-accent)
background-SegmentedControl_option-selected ?= color-accent
borderColor-SegmentedControl_option ?= color-accent
color-SegmentedControl_option ?= get_contrasting_color(background-SegmentedControl_option)
color-SegmentedControl_option-active ?= get_contrasting_color(background-SegmentedControl_option-active)
color-SegmentedControl_option-focus ?= get_contrasting_color(background-SegmentedControl_option-focus)
color-SegmentedControl_option-selected ?= get_contrasting_color(background-SegmentedControl_option-selected)

// UITable
background-UITable_column_resize_handle ?= get_contrasting_color(background-UITable_header)
background-UITable_header ?= color-accent
background-UITable_row-even ?= background-body
background-UITable_row-loading ?= halve_alpha(color-accent)
background-UITable_row-odd ?= rgba(color-accent, 0.075)
background-UITable_row-active ?= rgba(color-accent, 0.25)
background-UITable_scroll_handle ?= color-neutral-dark
background-UITable_scroll_track ?= color-neutral-light
color-UITable_header ?= get_contrasting_color(background-UITable_header)
color-UITable_row-even ?= color-body
color-UITable_row-active ?= color-body
color-UITable_row-odd ?= color-body
height-UITable_cell ?= 40px
paddingX-UITable_cell ?= 0.75em
size-UITable_scroll_track ?= 8px
size-UITable_scroll_track-expanded ?= 12px

// Input
background-Input ?= background-body
borderColor-Input ?= color-accent
borderColor-Input-focus ?= color-accent
borderColor-Input-hover ?= color-accent
color-Input ?= get_contrasting_color(background-Input)
color-Input_placeholder ?= halve_alpha(get_contrasting_color(background-Input))

// TokenizedInput
background-TokenizedInput ?= background-body
background-TokenizedInput_highlight ?= rgba(color-accent, 0.25)
background-TokenizedInput_token ?= background-body
background-TokenizedInput_token-active ?= halve_alpha(color-accent)
background-TokenizedInput_token-focus ?= background-body
background-TokenizedInput_token-hover ?= background-body
background-TokenizedInput_token-selected ?= halve_alpha(color-accent)
borderColor-TokenizedInput ?= color-accent
borderColor-TokenizedInput_token ?= color-neutral-light
borderColor-TokenizedInput_token-active ?= color-body
borderColor-TokenizedInput_token-focus ?= color-neutral-dark
borderColor-TokenizedInput_token-hover ?= color-neutral-dark
borderColor-TokenizedInput_token-selected ?= color-neutral-dark
color-TokenizedInput_token ?= get_contrasting_color(background-TokenizedInput_token)
color-TokenizedInput_token-active ?= get_contrasting_color(background-TokenizedInput_token-active)
color-TokenizedInput_token-focus ?= get_contrasting_color(background-TokenizedInput_token-focus)
color-TokenizedInput_token-hover ?= get_contrasting_color(background-TokenizedInput_token-hover)
color-TokenizedInput_token-selected ?= get_contrasting_color(background-TokenizedInput_token-selected)
color-TokenizedInput_token_close ?= halve_alpha(get_contrasting_color(background-TokenizedInput_token))
color-TokenizedInput_token_close-focus ?= get_contrasting_color(background-TokenizedInput_token-focus)
color-TokenizedInput_token_close-hover ?= get_contrasting_color(background-TokenizedInput_token-hover)
color-TokenizedInput_token_close-selected ?= halve_alpha(get_contrasting_color(background-TokenizedInput_token-selected))
color-TokenizedInput_token_close-selected-focus ?= halve_alpha(get_contrasting_color(background-TokenizedInput_token-selected))
color-TokenizedInput_token_close-selected-hover ?= get_contrasting_color(background-TokenizedInput_token-selected)
size-TokenizedInput_token_spacer = 0.25rem

// Tooltip
background-Tooltip ?= color-accent
background-Tooltip_arrow ?= color-accent
color-Tooltip ?= get_contrasting_color(color-accent)

// Typeahead
background-Typeahead_match-hover ?= rgba(color-accent, 0.2)
background-Typeahead_match-selected ?= color-accent
background-Typeahead_match_highlight ?= background-Input
background-Typeahead_match_highlight-hover ?= transparent
background-Typeahead_match_highlight-selected ?= background-Typeahead_match-selected
background-Typeahead_match_highlight-selected-hover ?= background-Typeahead_match-selected
background-Typeahead_match_wrapper ?= background-Input
boxShadowColor-Typeahead_match_wrapper ?= color-neutral-light
boxShadow-Typeahead_match_wrapper ?= 0 0 0 1px boxShadowColor-Typeahead_match_wrapper inset
color-Typeahead_match ?= get_contrasting_color(background-Typeahead_match_wrapper)
color-Typeahead_match-highlight ?= get_contrasting_color(background-Typeahead_match_highlight)
color-Typeahead_match-hover ?= get_contrasting_color(background-Typeahead_match_wrapper)
color-Typeahead_match-hover-highlight ?= get_contrasting_color(background-Typeahead_match_wrapper)
color-Typeahead_match-selected ?= get_contrasting_color(background-Typeahead_match-selected)
color-Typeahead_match_highlight-selected ?= get_contrasting_color(background-Typeahead_match-selected)
color-Typeahead_match_highlight-selected-hover ?= get_contrasting_color(background-Typeahead_match_highlight-selected)

halve_alpha(color) {
    return rgba(color, 0.5)
}

get_contrasting_color(color) {
    luminance = 1 - ( 0.299 * red(color) + 0.587 * green(color) + 0.114 * blue(color) ) / 255

    if (luminance < 0.5) {
        return #000
    } else {
        return #FFF
    }
}

*,
*::before,
*::after {
    box-sizing: border-box;
    outline-color: color-focus-ring;
}

.b-offscreen {
    position: absolute !important;
    height: 1px; width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
}


// Children receive the variables, etc from above.
@import "packages/*/*.styl"
